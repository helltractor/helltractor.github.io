import"./chunks/nprogress.Do6qArWV.js";import{b,c as x}from"./app.BTXeQvet.js";import"./chunks/dayjs.BeL6d4wv.js";import{r as h}from"./content.BO4OOSBM.js";import{O as w,v,x as g,a4 as l,a3 as c,a7 as r,ad as k,a5 as C,ae as _,af as A,a6 as T,aa as D,U as K,W as B,P as V}from"./framework.BKlXavfA.js";function E(o){const n=new TextEncoder;return window.crypto.subtle.importKey("raw",n.encode(o),"PBKDF2",!1,["deriveBits","deriveKey"])}function P(o,n){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function S(){const o=b(),{encrypt:n}=o.value,a=Uint8Array.from(Object.values(n.iv)),s=Uint8Array.from(Object.values(n.salt));return{decrypt:async(i,u)=>{if(!i)return;const d=await E(i),p=await P(d,s),y=Uint8Array.from(u,t=>t.charCodeAt(0)),m=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:a},p,y);return new TextDecoder().decode(m)}}}const U={key:0,"w-full":"","pt-14":"","pb-10":""},M={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},W={key:0,class:"-top-6",absolute:"","text-xs":"",op:"50"},H=["innerHTML"],I={key:1,class:"-bottom-6",absolute:"","text-xs":"",op:"50"},N={key:1},$=w({__name:"ValaxyDecrypt",props:{encryptedContent:{},hint:{}},setup(o){const n=o,a=v(""),s=v(""),i=v(!1),{decrypt:u}=S();async function d(){const t=n.encryptedContent;if(t)try{const e=await u(a.value,t);s.value=e||"",setTimeout(()=>{h()},16)}catch(e){i.value=!0,console.error(e)}}function p(){s.value="",a.value="",setTimeout(()=>{h()},16)}const y=w({name:"ValaxyDeprecatedContent",props:{html:String},render(){const t=`<div>${this.html}</div>`;return V({setup:()=>({frontmatter:x()}),template:t})}}),m=g(()=>location.protocol!=="https:");return(t,e)=>(c(),l("div",null,[s.value?(c(),l("div",N,[K(B(y),{html:s.value},null,8,["html"]),r("div",{"w-full":"","text-center":"","mt-8":""},[r("button",{"m-auto":"",class:"btn","font-bold":"",onClick:p}," Encrypt Again ")])])):(c(),l("div",U,[r("div",M,[k(r("input",{"onUpdate:modelValue":e[0]||(e[0]=f=>a.value=f),"w-full":"",border:"~ solid dark:dark-100","pl-5":"","pr-11":"","py-3":"","rounded-full":"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:T(i.value&&"border-red"),onInput:e[1]||(e[1]=f=>i.value=!1),onKeyup:A(d,["enter"])},null,34),[[_,a.value]]),r("div",{class:"text-gray/70 hover:text-gray transition","cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"",onClick:d}),t.hint?(c(),l("div",W,[r("div",{innerHTML:t.hint},null,8,H)])):C("v-if",!0),m.value?(c(),l("div",I,e[2]||(e[2]=[r("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API",target:"_blank"},[r("span",null,"Web Crypto API")],-1),D(" Only works in HTTPS ")]))):C("v-if",!0)])]))]))}});export{$ as _};
