import{a as W,_ as G}from"./SakuraPage.vue_vue_type_style_index_0_lang.C4dFA5Dk.js";import"./chunks/nprogress.Do6qArWV.js";import{M as Z,x as y,v as V,S as J,ar as K,T as ee,a0 as w,a4 as f,a3 as u,a5 as _,a7 as c,a8 as C,Q as O,O as b,a1 as I,a6 as P,aj as z,W as l,U as k,a2 as $,a9 as h,aa as H,ah as v,ad as te,ap as ne,ab as E,al as oe,as as se,ag as ae}from"./framework.BKlXavfA.js";import{u as B}from"./chunks/vue-i18n.DVmFIX_F.js";import{c as N,U as re,h as le,V as ie,W as M,m as j,n as ce,b as U,X as ue,Y as de,f as F,j as pe,Z as fe}from"./app.DIwye_FL.js";import"./chunks/dayjs.BeL6d4wv.js";import{o as _e}from"./content.BO4OOSBM.js";import{u as me}from"./chunks/vue-router.CJ7yOhWy.js";import{_ as ve}from"./SakuraPostDate.BXRtI1HQ.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.CAFXosqg.js";import"./chunks/pinia.DlD3bL4k.js";var D=[];function he(a,t,e){D.length=0;let n=[],o=[];return a.forEach(s=>{let r={...s,children:[]},i=o[o.length-1];for(;i&&i.level>=r.level;)o.pop(),i=o[o.length-1];if(r.element.classList.contains("ignore-header")||i&&"shouldIgnore"in i){o.push({level:r.level,shouldIgnore:!0});return}r.level>e||r.level<t||(D.push({element:r.element,link:r.link}),i?i.children.push(r):n.push(r),o.push(r))}),n}function ge(a,t=[2,4]){let e=(typeof t=="object"&&!Array.isArray(t)?t.level:t)||2,[n,o]=typeof e=="number"?[e,e]:e==="deep"?[2,6]:e;return he(a,n,o)}function ke(a){let t="";for(let e of Array.from(a.childNodes))if(e.nodeType===1){if(e.classList.contains("VABadge")||e.classList.contains("header-anchor"))continue;t+=e.textContent}else e.nodeType===3&&(t+=e.textContent);return t.trim()}function ye(a={range:[2,4],selector:".markdown-body"}){let t=a.selector||".markdown-body",e=document.querySelectorAll(t),n=e[e.length-1],o=Array.from((n==null?void 0:n.querySelectorAll(`${t} :where(h1,h2,h3,h4,h5,h6)`))||[]).filter(s=>a.filter?a.filter(s):!0).map(s=>{let r=Number(s.tagName[1]);return{element:s,title:ke(s),link:`#${s.id}`,level:r,lang:s.lang}});return ge(o,a.range)}function $e(a,t){let e,n=!1;return()=>{e&&clearTimeout(e),n?e=setTimeout(a,t):(a(),n=!0,setTimeout(()=>{n=!1},t))}}function be(){const a=N(),t=re(),e=Z([]),n=y(()=>a.value.outline??t.value.outline);return _e(()=>{n.value!==!1&&(e.value=ye({range:n.value,selector:".markdown-body",filter:s=>!!s.id&&s.hasChildNodes()}))}),{headers:e,handleClick:({target:s})=>{const r=s.href.split("#")[1],i=document.getElementById(decodeURIComponent(r));i==null||i.focus({preventScroll:!0})}}}function Se(a){const t=me(),e=y(()=>t.path),n=le(),o=y(()=>{let i=-1;return n.postList.find((d,p)=>d.path===e.value?(i=p,!0):!1),i}),s=y(()=>o.value-1>=0?n.postList[o.value-1]:null),r=y(()=>o.value+1<n.postList.length?n.postList[o.value+1]:null);return[s,r]}function we(){const a=V(!1),t=N(),e=ie(),n=y(()=>t.value.sidebar!==!1&&e.value!=="home");function o(){a.value=!0}function s(){a.value=!1}function r(){a.value?s():o()}return{isOpen:a,hasSidebar:n,open:o,close:s,toggle:r}}function Ce(){const{hasSidebar:a}=we(),t=M("(min-width: 960px)"),e=M("(min-width: 1280px)");return{isAsideEnabled:y(()=>!e.value&&!t.value?!1:a.value?e.value:t.value)}}const Le=56,R=33;function xe(a,t,e=!1){const{isAsideEnabled:n}=Ce(),o=$e(r,100);let s=null;J(()=>{requestAnimationFrame(r),window.addEventListener("scroll",o)}),K(()=>{d(location.hash)}),ee(()=>{window.removeEventListener("scroll",o)});function r(){if(!n.value)return;const p=[].slice.call(a.value.querySelectorAll(".outline-link")),m=[].slice.call(document.querySelectorAll(".content .header-anchor")).filter(g=>p.some(T=>T.hash===g.hash&&g.offsetParent!==null)),S=window.scrollY,L=window.innerHeight,x=a.value.offsetHeight,A=Math.abs(S+L-x)<1;if(m.length&&A){d(m[m.length-1].hash);return}for(let g=0;g<m.length;g++){const T=m[g],Y=m[g+1],[Q,X]=Ae(g,T,Y);if(Q){d(X);return}}}const i=()=>{const p=s;if(!p||e)return;const m=p.getBoundingClientRect().top,S=p.getBoundingClientRect().bottom;(m<R||S>window.innerHeight-R)&&p.scrollIntoView()};function d(p){s&&s.classList.remove("active"),p==null?s=null:s=a.value.querySelector(`a[href="${decodeURIComponent(p)}"]`);const m=s;i(),m?(m.classList.add("active"),t.value.style.top=`${m.offsetTop+R}px`,t.value.style.opacity="1"):(t.value.style.top=`${R}px`,t.value.style.opacity="0")}}function q(a){return a.parentElement.offsetTop-Le-15}function Ae(a,t,e){const n=window.scrollY;return a===0&&n===0?[!0,null]:n<q(t)?[!1,null]:!e||n<q(e)?[!0,t.hash]:[!1,null]}const Te={},Ie={class:"sakura-aside <md:hidden"};function Pe(a,t){return u(),f(O,null,[_(' <div class="sakura-aside sakura-card <md:hidden" p="x-2"> '),c("div",Ie,[C(a.$slots,"default",{},void 0,!0)])],2112)}const Oe=w(Te,[["render",Pe],["__scopeId","data-v-35120845"]]),Be=["lang"],Re=b({__name:"SakuraOutlineItem",props:{headers:{},onClick:{type:Function},root:{type:Boolean}},setup(a){const{locale:t}=B();return(e,n)=>{const o=I("RouterLink"),s=I("SakuraOutlineItem",!0);return u(),f("ul",{class:P([e.root?"root":"nested","va-toc css-i18n-toc"])},[(u(!0),f(O,null,z(e.headers,({children:r,link:i,title:d,lang:p})=>(u(),f("li",{key:i,class:"va-toc-item",lang:p||l(t)},[k(o,{to:i,class:"outline-link",href:i,onClick:e.onClick},{default:h(()=>[H(v(d),1)]),_:2},1032,["to","href","onClick"]),r!=null&&r.length?(u(),$(s,{key:0,headers:r,"on-click":e.onClick},null,8,["headers","on-click"])):_("v-if",!0)],8,Be))),128))],2)}}}),Ve=w(Re,[["__scopeId","data-v-df81f5aa"]]),He={class:"content"},Ne={class:"outline-title"},Ue={"aria-labelledby":"doc-outline-aria-label"},Ee=b({__name:"SakuraOutline",props:{viewScroll:{type:Boolean}},setup(a){const t=j(),e=V(),n=V();xe(e,n,!a.viewScroll);const{headers:o,handleClick:s}=be();return(r,i)=>{const d=Ve;return te((u(),f("div",{ref_key:"container",ref:e},[c("div",He,[c("div",Ne,v(l(t).outlineTitle||"On this page"),1),c("div",{ref_key:"marker",ref:n,class:"outline-marker"},null,512),c("nav",Ue,[i[0]||(i[0]=c("span",{id:"doc-outline-aria-label",class:"visually-hidden"}," Table of Contents for current page ",-1)),k(d,{class:"va-toc css-i18n-toc relative z-1",headers:l(o),"on-click":l(s),root:""},null,8,["headers","on-click"])])])],512)),[[ne,l(o).length]])}}}),Me=w(Ee,[["__scopeId","data-v-793d8476"]]),Fe={key:0,font:"serif black"},De={class:"custom-container"},qe=b({__name:"SakuraToc",props:{viewScroll:{type:Boolean,default:!1}},setup(a){const t=N(),{t:e}=B();return(n,o)=>{const s=Me;return u(),f(O,null,[l(t).toc!==!1?(u(),f("h2",Fe,v(l(e)("sidebar.toc")),1)):_("v-if",!0),c("div",De,[C(n.$slots,"default",{},()=>[l(t).toc!==!1?(u(),$(s,{key:0,"view-scroll":n.viewScroll},null,8,["view-scroll"])):_("v-if",!0)],!0)])],64)}}}),ze=w(qe,[["__scopeId","data-v-135bae1b"]]),je={class:"sakura-post-nav-content"},Ye={class:"sakura-post-nav-content"},Qe=b({__name:"SakuraPostNav",props:{src:{},to:{},alt:{},errorImg:{},scale:{},rotate:{},skewX:{},skewY:{},opacity:{},translateX:{},translateY:{},transitionDuration:{},transitionTimingFunction:{},overlay:{type:Boolean,default:!0},overlayColor:{},overlayOpacity:{default:0},overlayOpacityInitial:{default:.5}},setup(a){const t=a,e=j(),[n,o]=Se(),s=y(()=>{var r;return((r=e.value.postFooter)==null?void 0:r.navigationMerge)||!1});return(r,i)=>{var m,S,L,x,A,g;const d=I("RouterLink"),p=ce;return u(),f("div",{class:P(["sakura-post-nav",s.value&&"flex"])},[(m=l(n))!=null&&m.path?(u(),$(p,E({key:0},{...t,src:l(n).cover,to:l(n).path},{class:["card-prev",{"mt-10":!s.value,"w-1/2 rounded-l-$sakura-radius":((S=l(o))==null?void 0:S.path)&&s.value,"rounded-$sakura-radius":s.value&&!((L=l(o))!=null&&L.path)||!s.value}]}),{default:h(()=>[c("div",je,[i[0]||(i[0]=c("span",{class:"sakura-post-nav-label"}," Previous Post ",-1)),k(d,{to:l(n).path,class:"sakura-post-nav-title"},{default:h(()=>[H(v(l(n).title),1)]),_:1},8,["to"])])]),_:1},16,["class"])):_("v-if",!0),(x=l(o))!=null&&x.path?(u(),$(p,E({key:1},{...t,src:l(o).cover,to:l(o).path},{class:["card-next",{"w-1/2 rounded-r-$sakura-radius":((A=l(n))==null?void 0:A.path)&&s.value,"rounded-$sakura-radius":s.value&&!((g=l(n))!=null&&g.path)||!s.value}]}),{default:h(()=>[c("div",Ye,[i[1]||(i[1]=c("span",{flex:"","justify-end":"",class:"sakura-post-nav-label"}," Next Post ",-1)),k(d,{to:l(o).path,class:"sakura-post-nav-title",flex:"","justify-end":""},{default:h(()=>[H(v(l(o).title),1)]),_:1},8,["to"])])]),_:1},16,["class"])):_("v-if",!0)],2)}}}),Xe=w(Qe,[["__scopeId","data-v-3d421237"]]),We={},Ge={class:"sakura-post-footer"},Ze={class:"py-8"};function Je(a,t){const e=Xe,n=I("RouterLink");return u(),f("footer",Ge,[C(a.$slots,"nav",{},()=>[k(e)],!0),C(a.$slots,"back",{},()=>[c("div",Ze,[k(n,{class:"link",to:"/"},{default:h(()=>t[0]||(t[0]=[H(" ← Back to the blog ")])),_:1})])],!0)])}const Ke=w(We,[["render",Je],["__scopeId","data-v-bf289d28"]]),et={class:"post-copyright"},tt={class:"post-copyright-author"},nt={key:0,class:"post-copyright-link"},ot=["href","title"],st={class:"post-copyright-license"},at=["innerHTML"],rt=b({__name:"ValaxyCopyright",props:{url:{default:""}},setup(a){const{t,locale:e}=B(),n=U(),o=n.value.license.type==="zero"?"1.0":"4.0",s=n.value.license.type==="zero"?"publicdomain":"licenses",r=y(()=>{const d=n.value.license.language?n.value.license.language:e.value==="zh-CN"?"zh":"en";return`https://creativecommons.org/${s}/${n.value.license.type}/${o}/deed.${d}`}),i=y(()=>t("post.copyright.license_content",[`<a href="${r.value}" target="_blank" rel="noopener" title="CC ${`${n.value.license.type.toUpperCase()} ${o}`} ">CC ${n.value.license.type.toUpperCase()}</a>`]));return(d,p)=>(u(),f("ul",et,[c("li",tt,[c("strong",null,v(l(t)("post.copyright.author")+l(t)("symbol.colon")),1),c("span",null,v(l(n).author.name),1)]),d.url?(u(),f("li",nt,[c("strong",null,v(l(t)("post.copyright.link")+l(t)("symbol.colon")),1),c("a",{href:d.url,target:"_blank",title:l(t)("post.copyright.link")},v(decodeURI(d.url)),9,ot)])):_("v-if",!0),c("li",st,[c("strong",null,v(l(t)("post.copyright.license_title")+l(t)("symbol.colon")),1),c("span",{innerHTML:i.value},null,8,at)])]))}}),lt={class:"flex-center flex-col"},it=["title"],ct={key:0,class:"sponsor-description",mb:"4",text:"sm"},ut={class:"flex justify-around"},dt=["href"],pt=["src","title"],ft=b({__name:"SakuraSponsor",setup(a){const{t}=B(),e=U(),n=V(!1),o=y(()=>{var s;return((s=e.value.sponsor)==null?void 0:s.title)??t("reward.donate")});return(s,r)=>(u(),f("div",lt,[c("button",{title:o.value,onClick:r[0]||(r[0]=i=>n.value=!n.value)},r[1]||(r[1]=[c("div",{"i-ri-heart-line":"",class:"animation-hvr-bounce-in color-red-400"},null,-1)]),8,it),c("div",{class:P(["flex-center qrcode-container qrcode flex-col",n.value&&"show"]),m:"y-4"},[l(e).sponsor.description?(u(),f("div",ct,v(l(e).sponsor.description),1)):_("v-if",!0),c("div",ut,[(u(!0),f(O,null,z(l(e).sponsor.methods,(i,d)=>(u(),f("a",{key:d,class:"flex-center flex-col animate-fade-in animate-iteration-1",href:i.url,target:"_blank",style:oe(`color:${i.color}`)},[c("img",{class:"sponsor-method-img",border:"~ rounded",p:"1",loading:"lazy",src:i.url,title:i.name},null,8,pt),c("div",{text:"xl",m:"2",class:P(i.icon)},null,2)],12,dt))),128))])],2)]))}}),_t=w(ft,[["__scopeId","data-v-e4d0129e"]]),mt=["title"],vt={m:"l-1"},ht=["title"],gt={m:"l-1"},kt={class:"inline-flex-center"},yt={m:"l-1"},$t=b({__name:"SakuraPostHeaderMeta",props:{fm:{}},setup(a){const{page:t}=ue(),{t:e}=B(),n=U();return(o,s)=>{const r=ve;return u(),f("div",{class:P(["sakura-post-header-meta",{"text-$sakura-color-text":!o.fm.cover}]),flex:"~ wrap gap-x-4",py:"1"},[_(" TODO: 支持多作者 "),_(` <span class="inline-flex-center">
        <SakuraImageCard to="/about" class="mr-3px h-30px w-30px rounded-full" :src="siteConfig.author.avatar" alt="author image" />
        <span m="l-1">
          {{ siteConfig.author.name }}
        </span>
      </span> `),_(" TODO: 分类,标签 "),_(` <div class="inline-block" i-ri-calendar-line />
      <div i-ri-calendar-2-line /> `),k(r,{date:o.fm.date,type:"posted",class:"post-time posted-time"},null,8,["date"]),o.fm.updated&&o.fm.updated!==o.fm.date?(u(),$(r,{key:0,date:o.fm.updated,type:"edited",class:"post-time edited-time"},null,8,["date"])):_("v-if",!0),l(n).statistics.enable?(u(),f(O,{key:1},[o.fm.wordCount?(u(),f("span",{key:0,class:"inline-flex-center word-count whitespace-nowrap",title:l(e)("statistics.word")},[s[0]||(s[0]=c("div",{class:"inline-block","i-ri-file-word-line":""},null,-1)),c("span",vt,v(l(e)("statistics.word"))+": "+v(o.fm.wordCount),1)],8,mt)):_("v-if",!0),o.fm.readingTime?(u(),f("span",{key:1,class:"inline-flex-center reading-time whitespace-nowrap",title:l(e)("statistics.time")},[s[1]||(s[1]=c("div",{"i-ri-timer-line":""},null,-1)),c("time",gt,v(l(e)("statistics.time"))+": "+v(o.fm.readingTime)+"m",1)],8,ht)):_("v-if",!0)],64)):_("v-if",!0),c("span",kt,[s[2]||(s[2]=c("div",{"i-ri-eye-line":""},null,-1)),c("span",yt,v(l(e)("statistics.pv"))+": "+v(l(t).pv),1)])],2)}}}),bt=b({__name:"SakuraPostHeader",props:{fm:{},imageCard:{}},setup(a){return(t,e)=>{const n=$t,o=W;return u(),$(o,{fm:t.fm,class:"sakura-post-header","image-card":t.imageCard},{default:h(()=>[k(n,{fm:t.fm},null,8,["fm"])]),_:1},8,["fm","image-card"])}}}),St=b({__name:"SakuraPost",setup(a){const t=U(),e=N(),n=de(),o=y(()=>typeof e.value.sponsor=="boolean"?e.value.sponsor:t.value.sponsor.enable),s={"@type":"BlogPosting",headline:e.value.title,description:e.value.description,author:[{name:t.value.author.name,url:t.value.author.link}],datePublished:F(e.value.date||0),dateModified:F(e.value.updated||0),image:e.value.image||e.value.cover};return pe(fe(s)),(r,i)=>{const d=bt,p=_t,m=rt,S=Ke,L=I("RouterView"),x=ze,A=Oe,g=G;return u(),$(g,{class:"sakura-post"},se({header:h(()=>[k(d,{fm:l(e)},null,8,["fm"])]),content:h(()=>[C(r.$slots,"content",{},()=>[k(L,null,{default:h(({Component:T})=>[(u(),$(ae(T),null,{"main-content-after":h(()=>[o.value?(u(),$(p,{key:0})):_("v-if",!0),l(e).copyright||l(t).license.enabled?(u(),$(m,{key:1,url:l(n)},null,8,["url"])):_("v-if",!0)]),footer:h(()=>[k(S)]),_:2},1024))]),_:1})])]),right:h(()=>[C(r.$slots,"right",{},()=>[k(A,null,{default:h(()=>[k(x)]),_:1})])]),_:2},[r.$slots.left?{name:"left",fn:h(()=>[C(r.$slots,"left")]),key:"0"}:void 0]),1024)}}}),wt={};function Ct(a,t){const e=St;return u(),$(e)}const Nt=w(wt,[["render",Ct]]);export{Nt as default};
