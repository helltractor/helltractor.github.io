import{_ as f}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CwGK2QKz.js";import"./chunks/@vueuse/motion.BsBBmBGk.js";import{d as p,a as b,u as g}from"./chunks/vue-router.DbYl_Vni.js";import{X as k,b_ as n,be as r,_ as a,a5 as e,bB as P,b3 as $,b5 as T}from"./framework.BXq2oTmp.js";import"./app.DaEmrGxP.js";import"./chunks/dayjs.C6BNYsUE.js";import"./chunks/vue-i18n.lfRrKsMF.js";import"./chunks/pinia.C_YCGfgp.js";import"./chunks/nprogress.DdFZ7jLs.js";import"./YunComment.vue_vue_type_style_index_0_lang.BQ4Fe32A.js";import"./index.dXt3ZyM3.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DDanGzXB.js";import"./post.BW-oy4du.js";const v=p("/posts/question/double-spending",async i=>JSON.parse('{"title":"双花问题及防范","description":"","frontmatter":{"title":"双花问题及防范","date":"2024-06-22","categories":"Question","tags":["Double-Spending"]},"headers":[],"relativePath":"pages/posts/question/double-spending.md","lastUpdated":null}'),{lazy:(i,s)=>i.name===s.name}),H={__name:"double-spending",setup(i,{expose:s}){var d;const{data:o}=v(),m=g(),c=b(),l=Object.assign(c.meta.frontmatter||{},((d=o.value)==null?void 0:d.frontmatter)||{});return m.currentRoute.value.data=o.value,T("valaxy:frontmatter",l),globalThis.$frontmatter=l,s({frontmatter:{title:"双花问题及防范",date:"2024-06-22",categories:"Question",tags:["Double-Spending"]}}),(t,h)=>{const u=f;return $(),k(u,{frontmatter:P(l)},{"main-content-md":n(()=>h[0]||(h[0]=[a("p",null,"在区块链和加密货币领域，“双花”（Double Spending）是指同一笔加密货币在多个交易中被多次使用的问题",-1),a("h2",{id:"单离线场景",tabindex:"-1"},[e("单离线场景 "),a("a",{class:"header-anchor",href:"#单离线场景","aria-label":'Permalink to "单离线场景"'},"​")],-1),a("p",null,"单离线场景是指在交易中，只有一个参与方（通常是付款方）离线，而另一个参与方在线。这种情况下的双花防范可以通过以下方法来解决：",-1),a("h3",{id:"时间锁定交易-timelock-transactions",tabindex:"-1"},[e("时间锁定交易（Timelock Transactions） "),a("a",{class:"header-anchor",href:"#时间锁定交易-timelock-transactions","aria-label":'Permalink to "时间锁定交易（Timelock Transactions）"'},"​")],-1),a("p",null,"付款方在离线前创建一笔交易，并设置一个时间锁（Timelock），只有在指定时间之后，这笔交易才能被矿工打包到区块链中。这可以确保在付款方重新上线之前，交易无法被确认，防止在此期间发生双花。",-1),a("h3",{id:"多重签名-multisignature",tabindex:"-1"},[e("多重签名（Multisignature） "),a("a",{class:"header-anchor",href:"#多重签名-multisignature","aria-label":'Permalink to "多重签名（Multisignature）"'},"​")],-1),a("p",null,"创建需要多方签名的交易，例如，付款方和一个第三方（如可信的中介机构）共同签名才能完成交易。这样，即使付款方离线，第三方也能协助确认交易的有效性，从而防止双花。",-1),a("h3",{id:"离线交易签名-offline-transaction-signing",tabindex:"-1"},[e("离线交易签名（Offline Transaction Signing） "),a("a",{class:"header-anchor",href:"#离线交易签名-offline-transaction-signing","aria-label":'Permalink to "离线交易签名（Offline Transaction Signing）"'},"​")],-1),a("p",null,"付款方可以预先生成交易并签名，然后将签名的交易发送给接收方。接收方在线确认交易，并将其广播到区块链网络。这种方式确保了即使付款方离线，交易仍然可以被广播和确认。",-1),a("h2",{id:"双离线场景",tabindex:"-1"},[e("双离线场景 "),a("a",{class:"header-anchor",href:"#双离线场景","aria-label":'Permalink to "双离线场景"'},"​")],-1),a("p",null,"双离线场景是指在交易中，所有参与方（付款方和接收方）在交易时都离线。这种场景下的双花防范较为复杂，需要更为严格的方案：",-1),a("h3",{id:"预先签名的交易-pre-signed-transactions",tabindex:"-1"},[e("预先签名的交易（Pre-signed Transactions） "),a("a",{class:"header-anchor",href:"#预先签名的交易-pre-signed-transactions","aria-label":'Permalink to "预先签名的交易（Pre-signed Transactions）"'},"​")],-1),a("p",null,"参与方在离线前预先签署交易，并将这些签署的交易保存起来。每当需要进行交易时，双方可以交换签署好的交易，并在重新上线后将这些交易广播到区块链网络。",-1),a("h3",{id:"第三方见证-third-party-witness",tabindex:"-1"},[e("第三方见证（Third-Party Witness） "),a("a",{class:"header-anchor",href:"#第三方见证-third-party-witness","aria-label":'Permalink to "第三方见证（Third-Party Witness）"'},"​")],-1),a("p",null,"依赖一个可信的第三方作为见证者，双方在离线前将交易信息提交给第三方。第三方在双方重新上线后，验证交易的唯一性和有效性，并广播到区块链网络。",-1),a("h3",{id:"使用硬件钱包或安全模块-hardware-wallets-or-secure-modules",tabindex:"-1"},[e("使用硬件钱包或安全模块（Hardware Wallets or Secure Modules） "),a("a",{class:"header-anchor",href:"#使用硬件钱包或安全模块-hardware-wallets-or-secure-modules","aria-label":'Permalink to "使用硬件钱包或安全模块（Hardware Wallets or Secure Modules）"'},"​")],-1),a("p",null,[e("双方使用"),a("strong",null,"硬件钱包"),e("或安全模块，确保每次交易签名都具有唯一性和不可篡改性。这些设备在生成交易签名时，可以确保相同的交易不会被重复使用，从而防止双花。")],-1),a("h3",{id:"链下解决方案-off-chain-solutions",tabindex:"-1"},[e("链下解决方案（Off-chain Solutions） "),a("a",{class:"header-anchor",href:"#链下解决方案-off-chain-solutions","aria-label":'Permalink to "链下解决方案（Off-chain Solutions）"'},"​")],-1),a("p",null,"使用链下解决方案，例如支付通道（Payment Channels）或状态通道（State Channels），允许双方在链下进行多次交易，并在交易结束后将最终状态提交到区块链。 这种方式能够大大提高交易速度和效率，同时有效防止双花。",-1),a("h2",{id:"示例-基于硬件钱包的离线支付流程",tabindex:"-1"},[e("示例：基于硬件钱包的离线支付流程 "),a("a",{class:"header-anchor",href:"#示例-基于硬件钱包的离线支付流程","aria-label":'Permalink to "示例：基于硬件钱包的离线支付流程"'},"​")],-1),a("h3",{id:"预先生成和存储交易",tabindex:"-1"},[e("预先生成和存储交易 "),a("a",{class:"header-anchor",href:"#预先生成和存储交易","aria-label":'Permalink to "预先生成和存储交易"'},"​")],-1),a("p",null,"付款方在离线前，使用硬件钱包生成多个预签名交易，并将这些交易存储在硬件钱包中。",-1),a("h3",{id:"离线交易",tabindex:"-1"},[e("离线交易 "),a("a",{class:"header-anchor",href:"#离线交易","aria-label":'Permalink to "离线交易"'},"​")],-1),a("p",null,"在离线交易时，付款方从硬件钱包中选择一个预签名交易，并将其传递给接收方。 硬件钱包会生成一个唯一的交易 ID，并附上签名，确保交易的唯一性和不可篡改性。",-1),a("h3",{id:"重新上线并广播交易",tabindex:"-1"},[e("重新上线并广播交易 "),a("a",{class:"header-anchor",href:"#重新上线并广播交易","aria-label":'Permalink to "重新上线并广播交易"'},"​")],-1),a("p",null,"交易完成后，双方在重新联网时，接收方将收到的预签名交易广播到区块链网络。 区块链网络验证交易 ID 的唯一性和签名的有效性，确认交易。",-1),a("h2",{id:"示例-基于支付通道的离线支付流程",tabindex:"-1"},[e("示例：基于支付通道的离线支付流程 "),a("a",{class:"header-anchor",href:"#示例-基于支付通道的离线支付流程","aria-label":'Permalink to "示例：基于支付通道的离线支付流程"'},"​")],-1),a("h3",{id:"初始化支付通道",tabindex:"-1"},[e("初始化支付通道 "),a("a",{class:"header-anchor",href:"#初始化支付通道","aria-label":'Permalink to "初始化支付通道"'},"​")],-1),a("p",null,"付款方和接收方在离线前，在区块链上创建一个支付通道，锁定一定数量的资金。",-1),a("h3",{id:"离线交易-1",tabindex:"-1"},[e("离线交易 "),a("a",{class:"header-anchor",href:"#离线交易-1","aria-label":'Permalink to "离线交易"'},"​")],-1),a("p",null,"在离线期间，双方在支付通道中进行多次交易，记录每次交易的状态变化。 每次交易后，双方都签署一个新的状态，更新通道内的余额分配。",-1),a("h3",{id:"关闭支付通道并提交状态",tabindex:"-1"},[e("关闭支付通道并提交状态 "),a("a",{class:"header-anchor",href:"#关闭支付通道并提交状态","aria-label":'Permalink to "关闭支付通道并提交状态"'},"​")],-1),a("p",null,"在重新联网后，双方提交支付通道的最终状态到区块链网络，更新链上余额。 区块链网络验证最终状态并确认交易。",-1)])),"main-header":n(()=>[r(t.$slots,"main-header")]),"main-header-after":n(()=>[r(t.$slots,"main-header-after")]),"main-nav":n(()=>[r(t.$slots,"main-nav")]),"main-content-before":n(()=>[r(t.$slots,"main-content-before")]),"main-content":n(()=>[r(t.$slots,"main-content")]),"main-content-after":n(()=>[r(t.$slots,"main-content-after")]),"main-nav-before":n(()=>[r(t.$slots,"main-nav-before")]),"main-nav-after":n(()=>[r(t.$slots,"main-nav-after")]),comment:n(()=>[r(t.$slots,"comment")]),footer:n(()=>[r(t.$slots,"footer")]),aside:n(()=>[r(t.$slots,"aside")]),"aside-custom":n(()=>[r(t.$slots,"aside-custom")]),default:n(()=>[r(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{H as default,v as usePageData};
