import{_ as j}from"./SakuraPage.vue_vue_type_style_index_0_lang.YkD8MrJk.js";import{_ as K}from"./SakuraPostList.B4800muX.js";import"./chunks/nprogress.Do6qArWV.js";import{q as N,t as U,v as D,h as O,w as T,j as W,k as F}from"./app.BTXeQvet.js";import{a as M,u as z}from"./chunks/vue-router.C_UGPTuO.js";import{v as B,O as $,x as S,S as Q,a1 as R,a4 as l,a3 as t,Q as k,a7 as _,a5 as b,ah as C,W as g,aj as x,a2 as d,a9 as f,U as h,a0 as G,ag as H,a8 as V}from"./framework.BKlXavfA.js";import"./chunks/dayjs.BeL6d4wv.js";import{u as q}from"./chunks/vue-i18n.DVmFIX_F.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.CAFXosqg.js";import"./SakuraPostDate.ClAo8QUp.js";import"./chunks/pinia.DlD3bL4k.js";function J(m){const i=B(!1),{top:u}=N(m);return U(m,([{isIntersecting:o}])=>{i.value=o}),{show:()=>{i.value||window.scrollTo(0,u.value)}}}const X={class:"category-list-item inline-flex cursor-pointer items-center"},Y={key:0,"i-ri-folder-add-line":""},Z={key:1,style:{color:"var(--sakura-c-primary)"},"i-ri-folder-reduce-line":""},I={key:0},ee={m:"l-1",font:"serif black"},te=$({__name:"SakuraCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(m){const i=m,u=M(),a=z(),o=S(()=>{const e=a.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),c=B(i.collapsable),{t:p}=q(),{locale:y}=q();function n(e){const s=y.value==="zh-CN"?"zh":y.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const v=B(),{show:w}=J(v);function L(e){u.push({query:{category:e}}),w()}return Q(()=>{const e=document.querySelector(".post-collapse-container");e&&(v.value=e)}),(e,s)=>{const A=R("SakuraCategory",!0),E=R("RouterLink");return t(),l(k,null,[_("li",X,[_("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=r=>c.value=!c.value)},[c.value?(t(),l("div",Y)):(t(),l("div",Z))]),_("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=r=>L(e.parentKey))},C(e.category.name==="Uncategorized"?g(p)("category.uncategorized"):e.category.name)+" ["+C(e.category.total)+"] ",1)]),c.value?b("v-if",!0):(t(),l("ul",I,[(t(!0),l(k,null,x(e.category.children.values(),(r,P)=>(t(),l("li",{key:P,class:"sakura-sidebar-item",m:"l-4 y-1"},[g(D)(r)?(t(),d(A,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${r.name}`:r.name,category:r,collapsable:!o.value.includes(r.name)},null,8,["parent-key","category","collapsable"])):(t(),l(k,{key:1},[r.title?(t(),d(E,{key:0,to:r.path||"",class:"inline-flex items-center"},{default:f(()=>[s[2]||(s[2]=_("div",{"i-ri-file-text-line":""},null,-1)),_("span",ee,C(n(r)),1)]),_:2},1032,["to"])):b("v-if",!0)],64))]))),128))]))],64)}}}),ae=$({__name:"SakuraCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(m){const i=z(),u=S(()=>{const a=i.query.category||"";return Array.isArray(a)?[a]:a.split("/")});return(a,o)=>{const c=te;return t(!0),l(k,null,x(a.categories.values(),p=>(t(),l("ul",{key:p.name,class:"category-list",m:"l-4"},[h(c,{"parent-key":p.name,category:p,level:a.level+1,collapsable:!u.value.includes(p.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe=G(ae,[["__scopeId","data-v-0638bc99"]]),se={text:"center",class:"yun-text-light",p:"2"},ne={key:0},re=$({__name:"SakuraCategoriesLayout",setup(m){const i=O(),{t:u}=q(),a=z(),o=S(()=>a.query.category||""),c=T(),p=S(()=>i.postList.filter(n=>n.categories&&o.value!=="Uncategorized"?typeof n.categories=="string"?n.categories===o.value:n.categories.join("/").startsWith(o.value)&&n.categories[0]===o.value.split("/")[0]:!n.categories&&o.value==="Uncategorized"?n.categories===void 0:!1));return(y,n)=>{const v=oe,w=K,L=R("RouterView"),e=j;return t(),d(e,{class:"sakura-categories-page"},{default:f(()=>[h(L,null,{default:f(({Component:s})=>[(t(),d(H(s),null,{"main-content":f(()=>[V(y.$slots,"content",{},()=>[_("div",null,[_("div",se,C(g(u)("counter.categories",Array.from(g(c).children).length)),1),h(v,{categories:g(c).children},null,8,["categories"])])])]),"main-nav-before":f(()=>[V(y.$slots,"posts",{},()=>[o.value?(t(),l("div",ne,[h(w,{w:"full",posts:p.value},null,8,["posts"])])):b("v-if",!0),b(` <SakuraCard v-if="curCategory" class="post-collapse-container" m="t-4" w="full">
            <SakuraPostCollapse w="full" m="b-4" p="x-20 lt-sm:x-5" :posts="posts" />
          </SakuraCard> `)])]),_:2},1024))]),_:3})]),_:3})}}}),ve=$({__name:"categories",setup(m){return W([F({"@type":"CollectionPage"})]),(i,u)=>{const a=re;return t(),d(a)}}});export{ve as default};
