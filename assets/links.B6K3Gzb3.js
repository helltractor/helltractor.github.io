import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.C4dFA5Dk.js";import{i as v,m as I,n as A,c as E}from"./app.DIwye_FL.js";import"./chunks/nprogress.Do6qArWV.js";import"./chunks/dayjs.BeL6d4wv.js";import{v as F,w as M,O as S,x as P,a4 as d,a3 as m,a7 as i,Q as V,aj as N,W as f,al as R,U as h,ab as j,ah as x,a0 as C,a1 as O,a2 as k,a9 as g,ag as T}from"./framework.BKlXavfA.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.CAFXosqg.js";import"./chunks/vue-router.CJ7yOhWy.js";import"./chunks/pinia.DlD3bL4k.js";import"./chunks/vue-i18n.DVmFIX_F.js";function U(a,r=!1){const s=F();return M(()=>a,async()=>{let o;if(typeof a=="string"){if(!v)return;o=await fetch(a).then(n=>n.json())||[]}else{if(!v){o=a;return}o=[];const n=async t=>{var _,c,e,p,y;try{const l=await fetch(t.rss);if(l.ok){const w=await l.text(),u=new DOMParser().parseFromString(w,"application/xml"),b=t.blog||((_=u.querySelector("title"))==null?void 0:_.textContent),L=t.name||((c=u.querySelector("author > name"))==null?void 0:c.textContent),$=(e=u.querySelector('link[rel="alternate"]'))==null?void 0:e.getAttribute("href"),q=t.desc||((p=u.querySelector("subtitle"))==null?void 0:p.textContent),B={avatar:t.avatar||((y=u.querySelector("logo"))==null?void 0:y.textContent),name:L,url:$,color:"#EE9CA7",blog:b,desc:q};o.push(B)}else console.error(`Failed to fetch XML from ${t.rss}:`,l.status,l.statusText)}catch(l){console.error(`Error fetching XML from ${t.rss}:`,l)}};await Promise.all(a.map(n))}s.value=r?Array.from(o).sort(()=>Math.random()-.5):o},{immediate:!0}),{data:s}}const X={class:"links"},z={class:"link-items"},Q=["href","title"],W={class:"link-left"},G={class:"link-info",m:"l-2"},H={class:"link-blog",font:"serif black"},J={class:"link-desc"},K=S({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(a){const r=a,s=I(),{data:o}=U(r.links,r.random),n=P(()=>{var t;return(t=s.value.ui.links)==null?void 0:t.image});return(t,_)=>{const c=A;return m(),d("div",X,[i("ul",z,[(m(!0),d(V,null,N(f(o),(e,p)=>(m(),d("li",{key:p,class:"link-item",style:R(`--primary-color: ${e.color}`)},[i("a",{class:"link-url",p:"x-4 y-2",href:e.url,title:e.name,alt:"portrait",rel:"friend",target:"_blank"},[i("div",W,[h(c,j({ref_for:!0},n.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:e.avatar,alt:e.name,"error-img":t.errorImg}),null,16,["src","alt","error-img"])]),i("div",G,[i("div",H,x(e.blog),1),i("div",J,x(e.desc),1)])],8,Q)],4))),128))])])}}}),Y=C(K,[["__scopeId","data-v-56b68ba9"]]),Z=S({__name:"SakuraLinksLayout",setup(a){const r=E();return(s,o)=>{const n=Y,t=O("RouterView"),_=D;return m(),k(_,null,{default:g(()=>[h(t,null,{default:g(({Component:c})=>[(m(),k(T(c),null,{"main-content":g(()=>[h(n,{links:f(r).links,random:f(r).random,"error-img":f(r).errorImg},null,8,["links","random","error-img"])]),_:2},1024))]),_:1})]),_:1})}}}),tt={};function et(a,r){const s=Z;return m(),k(s)}const pt=C(tt,[["render",et]]);export{pt as default};
