import{_ as b}from"./ValaxyMain.vue_vue_type_style_index_0_lang.Pg5Jz43U.js";import{_ as Z}from"./ValaxyMermaid.vue_vue_type_script_setup_true_lang.BGykLewB.js";import"./chunks/@vueuse/motion.BsBBmBGk.js";import{d as I,a as h,u as V}from"./chunks/vue-router.Dwv0D7Gx.js";import{X as C,b_ as e,bB as W,b3 as Y,be as i,_ as l,a6 as F,a5 as n,aM as N,b5 as f}from"./framework.BXq2oTmp.js";import"./app.BWzPgeMt.js";import"./chunks/dayjs.C6BNYsUE.js";import"./chunks/vue-i18n.lfRrKsMF.js";import"./chunks/pinia.C_YCGfgp.js";import"./chunks/nprogress.DdFZ7jLs.js";import"./YunComment.vue_vue_type_style_index_0_lang.C6SnuJMS.js";import"./index.dXt3ZyM3.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DDanGzXB.js";import"./post.CyDzanhc.js";const X=I("/jobs/project/trading-exchange-system/trading-sequence-module",async t=>JSON.parse('{"title":"Sequence Module","description":"","frontmatter":{"title":"Sequence Module","title_zh":"定序模块","date":"2025-02-24 11:21:19","categories":"Project","tags":["Java"]},"headers":[],"relativePath":"pages/jobs/project/trading-exchange-system/trading-sequence-module.md","lastUpdated":null}'),{lazy:(t,o)=>t.name===o.name}),J={__name:"trading-sequence-module",setup(t,{expose:o}){var d;const{data:u}=X(),m=V(),p=h(),r=Object.assign(p.meta.frontmatter||{},((d=u.value)==null?void 0:d.frontmatter)||{});return m.currentRoute.value.data=u.value,f("valaxy:frontmatter",r),globalThis.$frontmatter=r,o({frontmatter:{title:"Sequence Module",title_zh:"定序模块",date:"2025-02-24 11:21:19",categories:"Project",tags:["Java"]}}),(a,s)=>{const g=Z,c=b;return Y(),C(c,{frontmatter:W(r)},{"main-content-md":e(()=>[s[0]||(s[0]=l("h2",{id:"定序模块",tabindex:"-1"},[l("a",{href:"https://liaoxuefeng.com/books/java/springcloud/sequence/index.html",target:"_blank",rel:"noreferrer"},"定序模块"),n(),l("a",{class:"header-anchor",href:"#定序模块","aria-label":'Permalink to "[定序模块](https://liaoxuefeng.com/books/java/springcloud/sequence/index.html)"'},"​")],-1)),s[1]||(s[1]=l("h3",{id:"定序模块简易流程",tabindex:"-1"},[n("定序模块简易流程 "),l("a",{class:"header-anchor",href:"#定序模块简易流程","aria-label":'Permalink to "定序模块简易流程"'},"​")],-1)),F(g,N({code:"c2VxdWVuY2VEaWFncmFtCiAgICBwYXJ0aWNpcGFudCBLYWZrYSBhcyDwn6eR4oCN8J-SuyBLYWZrYSAoU0VRVUVOQ0UgVG9waWMpCiAgICBwYXJ0aWNpcGFudCBTZXF1ZW5jZVNlcnZpY2UgYXMg8J-TpiBTZXF1ZW5jZVNlcnZpY2UKICAgIHBhcnRpY2lwYW50IE1lc3NhZ2luZ0ZhY3RvcnkgYXMg8J-boCBNZXNzYWdpbmdGYWN0b3J5CiAgICBwYXJ0aWNpcGFudCBTZXF1ZW5jZUhhbmRsZXIgYXMg8J-nqSBTZXF1ZW5jZUhhbmRsZXIKICAgIHBhcnRpY2lwYW50IERhdGFiYXNlIGFzIPCfl4MgRGF0YWJhc2UKICAgIHBhcnRpY2lwYW50IEthZmthVHJhZGUgYXMg8J-nkeKAjfCfkrsgS2Fma2EgKFRSQURFIFRvcGljKQoKICAgIEthZmthIC0-PiBTZXF1ZW5jZVNlcnZpY2U6IOa2iOi0uea2iOaBryAoQmF0Y2gpCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IE1lc3NhZ2luZ0ZhY3Rvcnk6IOWIm-W7uua2iOi0ueiAhQogICAgTWVzc2FnaW5nRmFjdG9yeSAtPj4gU2VxdWVuY2VTZXJ2aWNlOiDov5Tlm57mtojotLnogIXlrp7kvosKCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFNlcXVlbmNlSGFuZGxlcjog6LCD55SoIHNlcXVlbmNlTWVzc2FnZXMoKSDov5vooYzmjpLluo8KICAgIFNlcXVlbmNlSGFuZGxlciAtPj4gRGF0YWJhc2U6IOafpeivouacgOWkpyBTZXF1ZW5jZUlkCiAgICBTZXF1ZW5jZUhhbmRsZXIgLT4-IFNlcXVlbmNlU2VydmljZTog6L-U5Zue5pyA5aSnIFNlcXVlbmNlSWQKCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFNlcXVlbmNlSGFuZGxlcjog5LqL5Lu25Y676YeN5LiO5YiG6YWNIFNlcXVlbmNlSWQKICAgIFNlcXVlbmNlSGFuZGxlciAtPj4gRGF0YWJhc2U6IOajgOafpSBVbmlxdWVFdmVudEVudGl0eQogICAgU2VxdWVuY2VIYW5kbGVyIC0-PiBEYXRhYmFzZTog5o-S5YWlIFVuaXF1ZUV2ZW50RW50aXR5IOWSjCBFdmVudEVudGl0eQogICAgU2VxdWVuY2VIYW5kbGVyIC0tPj4gU2VxdWVuY2VTZXJ2aWNlOiDov5Tlm57lt7LmjpLluo_nmoTmtojmga8KCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IEthZmthVHJhZGU6IOaOqOmAgeW3suaOkuW6j-a2iOaBrwogICAgU2VxdWVuY2VTZXJ2aWNlIC0-PiBEYXRhYmFzZTog5pu05pawIFNlcXVlbmNlSWQKICAgIFNlcXVlbmNlU2VydmljZSAtLT4-IEthZmthOiDnm5HlkKzkuIvkuIDkuKrmtojmga_mibnmrKEKCiAgICBhbHQg5Ye6546w5byC5bi4CiAgICAgICAgU2VxdWVuY2VTZXJ2aWNlIC0-PiBTZXF1ZW5jZVNlcnZpY2U6IOiwg-eUqCBoYW5kbGVCYXRjaCgpIOWkhOeQhuW8guW4uAogICAgICAgIFNlcXVlbmNlU2VydmljZSAtPj4gTG9nZ2VyOiDorrDlvZXlvILluLjml6Xlv5cKICAgICAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFN5c3RlbTog6Kem5Y-RIHBhbmljKCkg57uI5q2i56iL5bqPCiAgICBlbmQ"},{}),null,16),s[2]||(s[2]=l("h2",{id:"定序系统的去重与防丢机制解析",tabindex:"-1"},[l("strong",null,"定序系统的去重与防丢机制解析"),n(),l("a",{class:"header-anchor",href:"#定序系统的去重与防丢机制解析","aria-label":'Permalink to "**定序系统的去重与防丢机制解析**"'},"​")],-1)),s[3]||(s[3]=l("p",null,"每个事件消息包含：",-1)),s[4]||(s[4]=l("ul",null,[l("li",null,[l("strong",null,[n("Sequence ID ("),l("code",null,"sid"),n(")")]),n("：事件的唯一全局递增 ID。")]),l("li",null,[l("strong",null,[n("Previous ID ("),l("code",null,"pid"),n(")")]),n("：前一个事件的 "),l("code",null,"sid"),n("，形成 "),l("strong",null,"链式结构"),n("。")]),l("li",null,[l("strong",null,[n("消息内容 ("),l("code",null,"msg"),n(")")]),n("：实际业务数据。")])],-1)),s[5]||(s[5]=l("p",null,[l("strong",null,"示例")],-1)),s[6]||(s[6]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme line-numbers-mode"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1│   │sid=2│   │sid=3│   │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0│──▶│pid=1│──▶│pid=2│──▶│pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A│   │msg=B│   │msg=C│   │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘   └─────┘   └─────┘   └─────┘")])])]),l("button",{class:"collapse"}),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br"),l("span",{class:"line-number"},"2"),l("br"),l("span",{class:"line-number"},"3"),l("br"),l("span",{class:"line-number"},"4"),l("br"),l("span",{class:"line-number"},"5"),l("br")])],-1)),s[7]||(s[7]=l("h3",{id:"消息去重机制",tabindex:"-1"},[n("消息去重机制 "),l("a",{class:"header-anchor",href:"#消息去重机制","aria-label":'Permalink to "消息去重机制"'},"​")],-1)),s[8]||(s[8]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme line-numbers-mode"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐┌─────┐┌─────┐┌ ─ ─ ┐┌ ─ ─ ┐┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1││sid=2││sid=3│ sid=2  sid=3 │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0││pid=1││pid=2││pid=1││pid=2││pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A││msg=B││msg=C│ msg=B  msg=C │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘└─────┘└─────┘└ ─ ─ ┘└ ─ ─ ┘└─────┘")])])]),l("button",{class:"collapse"}),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br"),l("span",{class:"line-number"},"2"),l("br"),l("span",{class:"line-number"},"3"),l("br"),l("span",{class:"line-number"},"4"),l("br"),l("span",{class:"line-number"},"5"),l("br")])],-1)),s[9]||(s[9]=l("ul",null,[l("li",null,[l("code",null,"sid=2"),n(" 和 "),l("code",null,"sid=3"),n(" 发生重复，接收方会 "),l("strong",null,[n("检测 "),l("code",null,"sid"),n(" 是否已经处理过")]),n("，并 "),l("strong",null,"丢弃重复消息"),n("。")])],-1)),s[10]||(s[10]=l("h3",{id:"消息丢失检测",tabindex:"-1"},[n("消息丢失检测 "),l("a",{class:"header-anchor",href:"#消息丢失检测","aria-label":'Permalink to "消息丢失检测"'},"​")],-1)),s[11]||(s[11]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme line-numbers-mode"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐┌─────┐┌ ─ ─ ┐┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1││sid=2│       │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0││pid=1││     ││pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A││msg=B│       │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘└─────┘└ ─ ─ ┘└─────┘")])])]),l("button",{class:"collapse"}),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br"),l("span",{class:"line-number"},"2"),l("br"),l("span",{class:"line-number"},"3"),l("br"),l("span",{class:"line-number"},"4"),l("br"),l("span",{class:"line-number"},"5"),l("br")])],-1)),s[12]||(s[12]=l("ul",null,[l("li",null,[l("code",null,"sid=3"),n(" 丢失，接收方检测到 "),l("code",null,"sid=4"),n(" 的 "),l("code",null,"pid=3"),n("，但自己未收到 "),l("code",null,"sid=3"),n("，立即触发 "),l("strong",null,"补偿机制"),n("。")])],-1)),s[13]||(s[13]=l("h3",{id:"补偿机制",tabindex:"-1"},[n("补偿机制 "),l("a",{class:"header-anchor",href:"#补偿机制","aria-label":'Permalink to "补偿机制"'},"​")],-1)),s[14]||(s[14]=l("ul",null,[l("li",null,[l("strong",null,"查询数据库（或持久化存储）"),n(" 获取丢失的消息： "),l("ul",null,[l("li",null,[n("若 "),l("code",null,"sid=3"),n(" 早已落库，则读取并补发。")]),l("li",null,[n("若 "),l("code",null,"sid=3"),n(" 仍未落库，则等待后续补发。")])])]),l("li",null,[l("strong",null,"主动请求重发"),n("： "),l("ul",null,[l("li",null,[n("通过 API 通知定序系统，要求补发 "),l("code",null,"sid=3"),n(" 的数据。")])])])],-1)),s[15]||(s[15]=l("h3",{id:"总结",tabindex:"-1"},[n("总结 "),l("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1)),s[16]||(s[16]=l("p",null,[l("strong",null,"如何保证消息的顺序性、幂等性和完整性？")],-1)),s[17]||(s[17]=l("ol",null,[l("li",null,[l("strong",null,"去重"),n("：每个事件携带全局唯一 "),l("code",null,"sid"),n("，下游系统去重处理。")]),l("li",null,[l("strong",null,"检测丢失"),n("："),l("code",null,"pid"),n(" 记录前一事件的 ID，形成链式结构，能发现丢失事件。")]),l("li",null,[l("strong",null,"补偿机制"),n("：若 "),l("code",null,"sid"),n(" 断层，查询数据库或请求补发，确保数据完整性。")])],-1))]),"main-header":e(()=>[i(a.$slots,"main-header")]),"main-header-after":e(()=>[i(a.$slots,"main-header-after")]),"main-nav":e(()=>[i(a.$slots,"main-nav")]),"main-content-before":e(()=>[i(a.$slots,"main-content-before")]),"main-content":e(()=>[i(a.$slots,"main-content")]),"main-content-after":e(()=>[i(a.$slots,"main-content-after")]),"main-nav-before":e(()=>[i(a.$slots,"main-nav-before")]),"main-nav-after":e(()=>[i(a.$slots,"main-nav-after")]),comment:e(()=>[i(a.$slots,"comment")]),footer:e(()=>[i(a.$slots,"footer")]),aside:e(()=>[i(a.$slots,"aside")]),"aside-custom":e(()=>[i(a.$slots,"aside-custom")]),default:e(()=>[i(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{J as default,X as usePageData};
