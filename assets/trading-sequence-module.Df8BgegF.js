import{_ as Z}from"./ValaxyMain.vue_vue_type_script_setup_true_lang.l6zsjB7Y.js";import{_ as I}from"./ValaxyMermaid.vue_vue_type_script_setup_true_lang.BcRmKScO.js";import"./chunks/nprogress.Do6qArWV.js";import{d as h,u as V,a as C}from"./chunks/vue-router.B_O4jE6T.js";import{a2 as b,a9 as s,W,a3 as Y,a8 as t,a7 as l,U as F,aa as n,ab as N,_ as f}from"./framework.BKlXavfA.js";import"./app.DVswOAe8.js";import"./chunks/dayjs.BeL6d4wv.js";import"./chunks/pinia.DlD3bL4k.js";import"./chunks/vue-i18n.DVmFIX_F.js";import"./content.BO4OOSBM.js";import"./router.C1axOHAx.js";const X=h("/jobs/project/trading-exchange-system/trading-sequence-module",async i=>JSON.parse('{"title":"Sequence Module","description":"","frontmatter":{"title":"Sequence Module","title_zh":"定序模块","date":"2025-02-24 11:21:19","categories":"Project","tags":["Java"]},"headers":[],"relativePath":"pages/jobs/project/trading-exchange-system/trading-sequence-module.md","lastUpdated":null}'),{lazy:(i,o)=>i.name===o.name}),O={__name:"trading-sequence-module",setup(i,{expose:o}){var d;const{data:r}=X(),m=C(),g=V(),u=Object.assign(g.meta.frontmatter||{},((d=r.value)==null?void 0:d.frontmatter)||{});return m.currentRoute.value.data=r.value,f("valaxy:frontmatter",u),globalThis.$frontmatter=u,o({frontmatter:{title:"Sequence Module",title_zh:"定序模块",date:"2025-02-24 11:21:19",categories:"Project",tags:["Java"]}}),(e,a)=>{const p=I,c=Z;return Y(),b(c,{frontmatter:W(u)},{"main-content-md":s(()=>[a[0]||(a[0]=l("h2",{id:"定序模块",tabindex:"-1"},[l("a",{href:"https://liaoxuefeng.com/books/java/springcloud/sequence/index.html",target:"_blank",rel:"noreferrer"},"定序模块"),n(),l("a",{class:"header-anchor",href:"#定序模块","aria-label":'Permalink to "[定序模块](https://liaoxuefeng.com/books/java/springcloud/sequence/index.html)"'},"​")],-1)),a[1]||(a[1]=l("h3",{id:"定序模块简易流程",tabindex:"-1"},[n("定序模块简易流程 "),l("a",{class:"header-anchor",href:"#定序模块简易流程","aria-label":'Permalink to "定序模块简易流程"'},"​")],-1)),F(p,N({code:"c2VxdWVuY2VEaWFncmFtCiAgICBwYXJ0aWNpcGFudCBLYWZrYSBhcyDwn6eR4oCN8J-SuyBLYWZrYSAoU0VRVUVOQ0UgVG9waWMpCiAgICBwYXJ0aWNpcGFudCBTZXF1ZW5jZVNlcnZpY2UgYXMg8J-TpiBTZXF1ZW5jZVNlcnZpY2UKICAgIHBhcnRpY2lwYW50IE1lc3NhZ2luZ0ZhY3RvcnkgYXMg8J-boCBNZXNzYWdpbmdGYWN0b3J5CiAgICBwYXJ0aWNpcGFudCBTZXF1ZW5jZUhhbmRsZXIgYXMg8J-nqSBTZXF1ZW5jZUhhbmRsZXIKICAgIHBhcnRpY2lwYW50IERhdGFiYXNlIGFzIPCfl4MgRGF0YWJhc2UKICAgIHBhcnRpY2lwYW50IEthZmthVHJhZGUgYXMg8J-nkeKAjfCfkrsgS2Fma2EgKFRSQURFIFRvcGljKQoKICAgIEthZmthIC0-PiBTZXF1ZW5jZVNlcnZpY2U6IOa2iOi0uea2iOaBryAoQmF0Y2gpCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IE1lc3NhZ2luZ0ZhY3Rvcnk6IOWIm-W7uua2iOi0ueiAhQogICAgTWVzc2FnaW5nRmFjdG9yeSAtPj4gU2VxdWVuY2VTZXJ2aWNlOiDov5Tlm57mtojotLnogIXlrp7kvosKCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFNlcXVlbmNlSGFuZGxlcjog6LCD55SoIHNlcXVlbmNlTWVzc2FnZXMoKSDov5vooYzmjpLluo8KICAgIFNlcXVlbmNlSGFuZGxlciAtPj4gRGF0YWJhc2U6IOafpeivouacgOWkpyBTZXF1ZW5jZUlkCiAgICBTZXF1ZW5jZUhhbmRsZXIgLT4-IFNlcXVlbmNlU2VydmljZTog6L-U5Zue5pyA5aSnIFNlcXVlbmNlSWQKCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFNlcXVlbmNlSGFuZGxlcjog5LqL5Lu25Y676YeN5LiO5YiG6YWNIFNlcXVlbmNlSWQKICAgIFNlcXVlbmNlSGFuZGxlciAtPj4gRGF0YWJhc2U6IOajgOafpSBVbmlxdWVFdmVudEVudGl0eQogICAgU2VxdWVuY2VIYW5kbGVyIC0-PiBEYXRhYmFzZTog5o-S5YWlIFVuaXF1ZUV2ZW50RW50aXR5IOWSjCBFdmVudEVudGl0eQogICAgU2VxdWVuY2VIYW5kbGVyIC0tPj4gU2VxdWVuY2VTZXJ2aWNlOiDov5Tlm57lt7LmjpLluo_nmoTmtojmga8KCiAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IEthZmthVHJhZGU6IOaOqOmAgeW3suaOkuW6j-a2iOaBrwogICAgU2VxdWVuY2VTZXJ2aWNlIC0-PiBEYXRhYmFzZTog5pu05pawIFNlcXVlbmNlSWQKICAgIFNlcXVlbmNlU2VydmljZSAtLT4-IEthZmthOiDnm5HlkKzkuIvkuIDkuKrmtojmga_mibnmrKEKCiAgICBhbHQg5Ye6546w5byC5bi4CiAgICAgICAgU2VxdWVuY2VTZXJ2aWNlIC0-PiBTZXF1ZW5jZVNlcnZpY2U6IOiwg-eUqCBoYW5kbGVCYXRjaCgpIOWkhOeQhuW8guW4uAogICAgICAgIFNlcXVlbmNlU2VydmljZSAtPj4gTG9nZ2VyOiDorrDlvZXlvILluLjml6Xlv5cKICAgICAgICBTZXF1ZW5jZVNlcnZpY2UgLT4-IFN5c3RlbTog6Kem5Y-RIHBhbmljKCkg57uI5q2i56iL5bqPCiAgICBlbmQ"},{}),null,16),a[2]||(a[2]=l("h2",{id:"定序系统的去重与防丢机制解析",tabindex:"-1"},[l("strong",null,"定序系统的去重与防丢机制解析"),n(),l("a",{class:"header-anchor",href:"#定序系统的去重与防丢机制解析","aria-label":'Permalink to "**定序系统的去重与防丢机制解析**"'},"​")],-1)),a[3]||(a[3]=l("p",null,"每个事件消息包含：",-1)),a[4]||(a[4]=l("ul",null,[l("li",null,[l("strong",null,[n("Sequence ID ("),l("code",null,"sid"),n(")")]),n("：事件的唯一全局递增 ID。")]),l("li",null,[l("strong",null,[n("Previous ID ("),l("code",null,"pid"),n(")")]),n("：前一个事件的 "),l("code",null,"sid"),n("，形成 "),l("strong",null,"链式结构"),n("。")]),l("li",null,[l("strong",null,[n("消息内容 ("),l("code",null,"msg"),n(")")]),n("：实际业务数据。")])],-1)),a[5]||(a[5]=l("p",null,[l("strong",null,"示例")],-1)),a[6]||(a[6]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1│   │sid=2│   │sid=3│   │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0│──▶│pid=1│──▶│pid=2│──▶│pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A│   │msg=B│   │msg=C│   │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘   └─────┘   └─────┘   └─────┘")])])]),l("button",{class:"collapse"})],-1)),a[7]||(a[7]=l("h3",{id:"消息去重机制",tabindex:"-1"},[n("消息去重机制 "),l("a",{class:"header-anchor",href:"#消息去重机制","aria-label":'Permalink to "消息去重机制"'},"​")],-1)),a[8]||(a[8]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐┌─────┐┌─────┐┌ ─ ─ ┐┌ ─ ─ ┐┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1││sid=2││sid=3│ sid=2  sid=3 │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0││pid=1││pid=2││pid=1││pid=2││pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A││msg=B││msg=C│ msg=B  msg=C │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘└─────┘└─────┘└ ─ ─ ┘└ ─ ─ ┘└─────┘")])])]),l("button",{class:"collapse"})],-1)),a[9]||(a[9]=l("ul",null,[l("li",null,[l("code",null,"sid=2"),n(" 和 "),l("code",null,"sid=3"),n(" 发生重复，接收方会 "),l("strong",null,[n("检测 "),l("code",null,"sid"),n(" 是否已经处理过")]),n("，并 "),l("strong",null,"丢弃重复消息"),n("。")])],-1)),a[10]||(a[10]=l("h3",{id:"消息丢失检测",tabindex:"-1"},[n("消息丢失检测 "),l("a",{class:"header-anchor",href:"#消息丢失检测","aria-label":'Permalink to "消息丢失检测"'},"​")],-1)),a[11]||(a[11]=l("div",{style:{"max-height":"300px"},class:"language- vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"┌─────┐┌─────┐┌ ─ ─ ┐┌─────┐")]),n(`
`),l("span",{class:"line"},[l("span",null,"│sid=1││sid=2│       │sid=4│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│pid=0││pid=1││     ││pid=3│")]),n(`
`),l("span",{class:"line"},[l("span",null,"│msg=A││msg=B│       │msg=D│")]),n(`
`),l("span",{class:"line"},[l("span",null,"└─────┘└─────┘└ ─ ─ ┘└─────┘")])])]),l("button",{class:"collapse"})],-1)),a[12]||(a[12]=l("ul",null,[l("li",null,[l("code",null,"sid=3"),n(" 丢失，接收方检测到 "),l("code",null,"sid=4"),n(" 的 "),l("code",null,"pid=3"),n("，但自己未收到 "),l("code",null,"sid=3"),n("，立即触发 "),l("strong",null,"补偿机制"),n("。")])],-1)),a[13]||(a[13]=l("h3",{id:"补偿机制",tabindex:"-1"},[n("补偿机制 "),l("a",{class:"header-anchor",href:"#补偿机制","aria-label":'Permalink to "补偿机制"'},"​")],-1)),a[14]||(a[14]=l("ul",null,[l("li",null,[l("strong",null,"查询数据库（或持久化存储）"),n(" 获取丢失的消息： "),l("ul",null,[l("li",null,[n("若 "),l("code",null,"sid=3"),n(" 早已落库，则读取并补发。")]),l("li",null,[n("若 "),l("code",null,"sid=3"),n(" 仍未落库，则等待后续补发。")])])]),l("li",null,[l("strong",null,"主动请求重发"),n("： "),l("ul",null,[l("li",null,[n("通过 API 通知定序系统，要求补发 "),l("code",null,"sid=3"),n(" 的数据。")])])])],-1)),a[15]||(a[15]=l("h3",{id:"总结",tabindex:"-1"},[n("总结 "),l("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1)),a[16]||(a[16]=l("p",null,[l("strong",null,"如何保证消息的顺序性、幂等性和完整性？")],-1)),a[17]||(a[17]=l("ol",null,[l("li",null,[l("strong",null,"去重"),n("：每个事件携带全局唯一 "),l("code",null,"sid"),n("，下游系统去重处理。")]),l("li",null,[l("strong",null,"检测丢失"),n("："),l("code",null,"pid"),n(" 记录前一事件的 ID，形成链式结构，能发现丢失事件。")]),l("li",null,[l("strong",null,"补偿机制"),n("：若 "),l("code",null,"sid"),n(" 断层，查询数据库或请求补发，确保数据完整性。")])],-1))]),"main-header":s(()=>[t(e.$slots,"main-header")]),"main-header-after":s(()=>[t(e.$slots,"main-header-after")]),"main-nav":s(()=>[t(e.$slots,"main-nav")]),"main-content-before":s(()=>[t(e.$slots,"main-content-before")]),"main-content":s(()=>[t(e.$slots,"main-content")]),"main-content-after":s(()=>[t(e.$slots,"main-content-after")]),"main-nav-before":s(()=>[t(e.$slots,"main-nav-before")]),"main-nav-after":s(()=>[t(e.$slots,"main-nav-after")]),comment:s(()=>[t(e.$slots,"comment")]),footer:s(()=>[t(e.$slots,"footer")]),aside:s(()=>[t(e.$slots,"aside")]),"aside-custom":s(()=>[t(e.$slots,"aside-custom")]),default:s(()=>[t(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{O as default,X as usePageData};
