const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/view-transition.IkvUpX_n.css","assets/404.CUzunXdm.js","assets/chunks/nprogress.Do6qArWV.js","assets/framework.BKlXavfA.js","assets/chunks/dayjs.BeL6d4wv.js","assets/chunks/vue-router.B_O4jE6T.js","assets/chunks/vue-i18n.DVmFIX_F.js","assets/chunks/pinia.DlD3bL4k.js","assets/404.BVla_BTh.css","assets/empty.D7nZ5upe.js","assets/post.KfBjDM2d.js","assets/anime.BteE34Nm.js","assets/SakuraPage.vue_vue_type_style_index_0_lang.D-3qcqI0.js","assets/SakuraMultiColumns.vue_vue_type_script_setup_true_lang.CAFXosqg.js","assets/SakuraPage.C3SvkhTR.css","assets/ValaxyBangumi.vue_vue_type_style_index_0_lang.KiD9uGB-.js","assets/ValaxyBangumi.Cch_mg4D.css","assets/anime.pHsx6mGR.css","assets/archives.nWcGVzax.js","assets/archives.CmT25mZx.css","assets/categories.CYb1merD.js","assets/SakuraPostList.twjGRNwk.js","assets/SakuraPostDate.DUEeyYlW.js","assets/SakuraPostDate.DgRnwBRu.css","assets/SakuraPostList.CfrVq0Es.css","assets/categories.CBAUFGYm.css","assets/comment.Dkb_IpTW.js","assets/hitokoto.KWhxcv9V.js","assets/comment.Cna3Frh8.css","assets/home.CpUR7HCV.js","assets/home.Cxoa3ciR.css","assets/links.CVKdWIwj.js","assets/links.D6PAcFXo.css","assets/post.DKt0NvuP.js","assets/content.BO4OOSBM.js","assets/post.DSN6NDUv.css","assets/search.CiFXv6E0.js","assets/search.DUp8LscD.css","assets/tags.DTZZsvay.js","assets/tags.4NXiV0zY.css","assets/index.BM2biJQd.js","assets/Live2DApp.UlSVIU2Z.js","assets/_arrayReduce.CrxnWFSq.js","assets/toString.BS--fxLY.js","assets/isArray.CVnqMxe5.js","assets/animation-in.BI4ri2UH.css","assets/SakuraAlgoliaSearch.CKnXYfx6.js","assets/SakuraAlgoliaSearch.DqE7DeJr.css","assets/rolling.rnHUUvU3.js","assets/router.C1axOHAx.js"])))=>i.map(i=>d[i]);
var jb=Object.defineProperty;var lp=r=>{throw TypeError(r)};var Hb=(r,e,t)=>e in r?jb(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var fe=(r,e,t)=>Hb(r,typeof e!="symbol"?e+"":e,t),Kl=(r,e,t)=>e.has(r)||lp("Cannot "+t);var rt=(r,e,t)=>(Kl(r,e,"read from private field"),t?t.call(r):e.get(r)),sr=(r,e,t)=>e.has(r)?lp("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ki=(r,e,t,i)=>(Kl(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),Lt=(r,e,t)=>(Kl(r,e,"access private method"),t);import{y as lt,D as Hu,A as zu,z as Vu,v as ve,am as al,aq as zb,Y as Vb,Z as Wb,R as ps,ac as Xb,M as bt,x as ue,W as oe,S as rr,J as Zr,H as Dg,I as Og,w as dt,T as ll,aD as Yb,an as Wu,aE as qb,B as cp,$ as St,a0 as Et,a2 as at,a3 as ie,a1 as ur,O as Ve,aF as Lg,a4 as me,Q as jt,a7 as Ie,ah as it,a6 as vt,a5 as Ge,ad as io,ap as Da,ab as _i,aj as go,ag as Bg,a8 as Ze,aa as Vi,b as Kb,U as st,a9 as ot,al as Vr,af as Fg,ae as Jb,au as Ng,at as Qb,av as Xu,aC as $g,aG as Zb,aH as ex,aI as tx,P as rx}from"./framework.BKlXavfA.js";import{a as cl,u as Pn,c as ix,e as nx,r as Yu,D as sx}from"./chunks/vue-router.B_O4jE6T.js";import{i as ox}from"./chunks/nprogress.Do6qArWV.js";import{d as ei,r as ax,t as lx,u as cx,g as hl,e as Oa,f as hx}from"./chunks/dayjs.BeL6d4wv.js";import{c as ux,d as ul,i as dx}from"./chunks/pinia.DlD3bL4k.js";import{u as ni,c as px}from"./chunks/vue-i18n.DVmFIX_F.js";function fx(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in r)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const qu="virtual:valaxy-addons:empty",Ug=qu;function Gg(r){return r&&r.name===qu}const mx={name:Ug},jD=Object.freeze(Object.defineProperty({__proto__:null,default:mx,emptyAddonName:qu,isEmptyAddon:Gg,name:Ug},Symbol.toStringTag,{value:"Module"}));function Jl(r){if(r===null||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Ih(r,e,t=".",i){if(!Jl(e))return Ih(r,{},t,i);const n=Object.assign({},e);for(const s in r){if(s==="__proto__"||s==="constructor")continue;const o=r[s];o!=null&&(i&&i(n,s,o,t)||(Array.isArray(o)&&Array.isArray(n[s])?n[s]=[...o,...n[s]]:Jl(o)&&Jl(n[s])?n[s]=Ih(o,n[s],(t?`${t}.`:"")+s.toString(),i):n[s]=o))}return n}function Ku(r){return(...e)=>e.reduce((t,i)=>Ih(t,i,"",r),{})}const gx=Ku(),vx=new Set(["link","style","script","noscript"]),yx=new Set(["title","titleTemplate","script","style","noscript"]),hp=new Set(["base","meta","link","style","script","noscript"]),_x=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),bx=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),xx=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),wx=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Ju=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),no={META:new Set(["twitter"]),OG:new Set(["og","book","article","profile","fb"]),MEDIA:new Set(["ogImage","ogVideo","ogAudio","twitterImage"]),HTTP_EQUIV:new Set(["contentType","defaultStyle","xUaCompatible"])},Tx={articleExpirationTime:"article:expiration_time",articleModifiedTime:"article:modified_time",articlePublishedTime:"article:published_time",bookReleaseDate:"book:release_date",fbAppId:"fb:app_id",ogAudioSecureUrl:"og:audio:secure_url",ogAudioUrl:"og:audio",ogImageSecureUrl:"og:image:secure_url",ogImageUrl:"og:image",ogSiteName:"og:site_name",ogVideoSecureUrl:"og:video:secure_url",ogVideoUrl:"og:video",profileFirstName:"profile:first_name",profileLastName:"profile:last_name",profileUsername:"profile:username",msapplicationConfig:"msapplication-Config",msapplicationTileColor:"msapplication-TileColor",msapplicationTileImage:"msapplication-TileImage"},jg={appleItunesApp:{unpack:{entrySeparator:", ",resolve:({key:r,value:e})=>`${fi(r)}=${e}`}},refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve:({key:r,value:e})=>r==="seconds"?`${e}`:void 0}},robots:{unpack:{entrySeparator:", ",resolve:({key:r,value:e})=>typeof e=="boolean"?fi(r):`${fi(r)}:${e}`}},contentSecurityPolicy:{metaKey:"http-equiv",unpack:{entrySeparator:"; ",resolve:({key:r,value:e})=>`${fi(r)} ${e}`}},charset:{}};function fi(r){const e=r.replace(/([A-Z])/g,"-$1").toLowerCase(),t=e.indexOf("-");return t===-1?e:no.META.has(e.slice(0,t))||no.OG.has(e.slice(0,t))?r.replace(/([A-Z])/g,":$1").toLowerCase():e}function Hg(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>String(t)!=="false"&&e))}function kh(r){return Array.isArray(r)?r.map(kh):!r||typeof r!="object"?r:Object.fromEntries(Object.entries(r).map(([e,t])=>[fi(e),kh(t)]))}function zg(r,e={}){const{entrySeparator:t="",keyValueSeparator:i="",wrapValue:n,resolve:s}=e;return Object.entries(r).map(([o,a])=>{if(s){const c=s({key:o,value:a});if(c!==void 0)return c}const l=typeof a=="object"?zg(a,e):typeof a=="number"?a.toString():typeof a=="string"&&n?`${n}${a.replace(new RegExp(n,"g"),`\\${n}`)}${n}`:a;return`${o}${i}${l}`}).join(t)}function up(r,e){const t=Hg(e),i=fi(r),n=Vg(i);if(!Ju.has(i))return[{[n]:i,...t}];const s=Object.fromEntries(Object.entries(t).map(([o,a])=>[`${r}${o==="url"?"":`${o[0].toUpperCase()}${o.slice(1)}`}`,a]));return La(s||{}).sort((o,a)=>{var l,c;return(((l=o[n])==null?void 0:l.length)||0)-(((c=a[n])==null?void 0:c.length)||0)})}function Vg(r){var i;if(((i=jg[r])==null?void 0:i.metaKey)==="http-equiv"||no.HTTP_EQUIV.has(r))return"http-equiv";const e=fi(r),t=e.indexOf(":");return t===-1?"name":no.OG.has(e.slice(0,t))?"property":"name"}function Sx(r){return Tx[r]||fi(r)}function Ex(r,e){var t;return e==="refresh"?`${r.seconds};url=${r.url}`:zg(kh(r),{keyValueSeparator:"=",entrySeparator:", ",resolve:({value:i,key:n})=>i===null?"":typeof i=="boolean"?n:void 0,...(t=jg[e])==null?void 0:t.unpack})}function La(r){const e=[],t={};for(const[n,s]of Object.entries(r)){if(Array.isArray(s)){if(n==="themeColor"){s.forEach(o=>{typeof o=="object"&&o!==null&&e.push({name:"theme-color",...o})});continue}for(const o of s)if(typeof o=="object"&&o!==null){const a=[],l=[];for(const[c,d]of Object.entries(o)){const p=`${n}${c==="url"?"":`:${c}`}`,m=La({[p]:d});(c==="url"?a:l).push(...m)}e.push(...a,...l)}else e.push(...typeof o=="string"?La({[n]:o}):up(n,o));continue}if(typeof s=="object"&&s)if(no.MEDIA.has(n)){const o=n.startsWith("twitter")?"twitter":"og",a=n.replace(/^(og|twitter)/,"").toLowerCase(),l=o==="twitter"?"name":"property";s.url&&e.push({[l]:`${o}:${a}`,content:s.url}),s.secureUrl&&e.push({[l]:`${o}:${a}:secure_url`,content:s.secureUrl});for(const[c,d]of Object.entries(s))c!=="url"&&c!=="secureUrl"&&e.push({[l]:`${o}:${a}:${c}`,content:d})}else Ju.has(fi(n))?e.push(...up(n,s)):t[n]=Hg(s);else t[n]=s}const i=Object.entries(t).map(([n,s])=>{if(n==="charset")return{charset:s===null?"_null":s};const o=Vg(n),a=Sx(n),l=s===null?"_null":typeof s=="object"?Ex(s,n):typeof s=="number"?s.toString():s;return o==="http-equiv"?{"http-equiv":a,content:l}:{[o]:a,content:l}});return[...e,...i].map(n=>"content"in n&&n.content==="_null"?{...n,content:null}:n)}const Ax={key:"flatMeta",hooks:{"entries:normalize":r=>{const e=[];r.tags=r.tags.map(t=>t.tag!=="_flatMeta"?t:(e.push(La(t.props).map(i=>({...t,tag:"meta",props:i}))),!1)).filter(Boolean).concat(...e)}}},dp=(r,e)=>r._w===e._w?r._p-e._p:r._w-e._w,pp={base:-10,title:10},Cx={critical:-8,high:-1,low:2},fp={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},Px=/@import/,ks=r=>r===""||r===!0;function Rx(r,e){var s;if(typeof e.tagPriority=="number")return e.tagPriority;let t=100;const i=Cx[e.tagPriority]||0,n=r.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:fp;if(e.tag in pp)t=pp[e.tag];else if(e.tag==="meta"){const o=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;o&&(t=fp.meta[o])}else e.tag==="link"&&e.props.rel?t=n.link[e.props.rel]:e.tag==="script"?ks(e.props.async)?t=n.script.async:e.props.src&&!ks(e.props.defer)&&!ks(e.props.async)&&e.props.type!=="module"&&!((s=e.props.type)!=null&&s.endsWith("json"))?t=n.script.sync:ks(e.props.defer)&&e.props.src&&!ks(e.props.async)&&(t=n.script.defer):e.tag==="style"&&(t=e.innerHTML&&Px.test(e.innerHTML)?n.style.imported:n.style.sync);return(t||100)+i}const Ni="%separator",Ix=new RegExp(`${Ni}(?:\\s*${Ni})*`,"g");function kx(r,e,t=!1){var n;let i;if(e==="s"||e==="pageTitle")i=r.pageTitle;else if(e.includes(".")){const s=e.indexOf(".");i=(n=r[e.substring(0,s)])==null?void 0:n[e.substring(s+1)]}else i=r[e];if(i!==void 0)return t?(i||"").replace(/\\/g,"\\\\").replace(/</g,"\\u003C").replace(/"/g,'\\"'):i||""}function Fs(r,e,t,i=!1){if(typeof r!="string"||!r.includes("%"))return r;let n=r;try{n=decodeURI(r)}catch{}const s=n.match(/%\w+(?:\.\w+)?/g);if(!s)return r;const o=r.includes(Ni);return r=r.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===Ni||!s.includes(a))return a;const l=kx(e,a.slice(1),i);return l!==void 0?l:a}).trim(),o&&(r.endsWith(Ni)&&(r=r.slice(0,-Ni.length)),r.startsWith(Ni)&&(r=r.slice(Ni.length)),r=r.replace(Ix,t||"").trim()),r}const Mx={meta:"content",link:"href",htmlAttrs:"lang"},Dx=["innerHTML","textContent"],Ox=r=>({key:"template-params",hooks:{"entries:normalize":e=>{var i,n,s;const t=((n=(i=e.tags.filter(o=>o.tag==="templateParams"&&o.mode==="server"))==null?void 0:i[0])==null?void 0:n.props)||{};Object.keys(t).length&&(r._ssrPayload={templateParams:{...((s=r._ssrPayload)==null?void 0:s.templateParams)||{},...t}})},"tags:resolve":({tagMap:e,tags:t})=>{var s;const i=((s=e.get("templateParams"))==null?void 0:s.props)||{},n=i.separator||"|";delete i.separator,i.pageTitle=Fs(i.pageTitle||r._title||"",i,n);for(const o of t){if(o.processTemplateParams===!1)continue;const a=Mx[o.tag];if(a&&typeof o.props[a]=="string")o.props[a]=Fs(o.props[a],i,n);else if(o.processTemplateParams||o.tag==="titleTemplate"||o.tag==="title")for(const l of Dx)typeof o[l]=="string"&&(o[l]=Fs(o[l],i,n,o.tag==="script"&&o.props.type.endsWith("json")))}r._templateParams=i,r._separator=n},"tags:afterResolve":({tagMap:e})=>{const t=e.get("title");t!=null&&t.textContent&&t.processTemplateParams!==!1&&(t.textContent=Fs(t.textContent,r._templateParams,r._separator))}}});function Lx(r={}){return e=>(e.push({meta:[{name:"twitter:card",content:r.twitterCard||"summary_large_image",tagPriority:"low"},{property:"og:title",tagPriority:"low","data-infer":""},{property:"og:description",tagPriority:"low","data-infer":""}]}),{key:"infer-seo-meta",hooks:{"tags:beforeResolve":({tagMap:t})=>{var a,l;let i=e._titleTemplate||e._title;const n=t.get("meta:og:title");typeof(n==null?void 0:n.props["data-infer"])<"u"&&(typeof i=="function"&&(i=i(e._title)),n.props.content=r.ogTitle?r.ogTitle(i):i||"",n.processTemplateParams=!0);const s=(l=(a=t.get("meta:description"))==null?void 0:a.props)==null?void 0:l.content,o=t.get("meta:og:description");typeof(o==null?void 0:o.props["data-infer"])<"u"&&(o.props.content=r.ogDescription?r.ogDescription(s):s||"",o.processTemplateParams=!0)}}})}const Bx=["name","property","http-equiv"];function Wg(r){const e=r.split(":")[1];return Ju.has(e)}function Mh(r){const{props:e,tag:t}=r;if(bx.has(t))return t;if(t==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(r.tag==="meta"){for(const i of Bx)if(e[i]!==void 0)return`${t}:${e[i]}`}if(r.key)return`${t}:key:${r.key}`;if(e.id)return`${t}:id:${e.id}`;if(yx.has(t)){const i=r.textContent||r.innerHTML;if(i)return`${t}:content:${i}`}}function mp(r){const e=r._h||r._d;if(e)return e;const t=r.textContent||r.innerHTML;return t||`${r.tag}:${Object.entries(r.props).map(([i,n])=>`${i}:${String(n)}`).join(",")}`}function Ba(r,e,t){typeof r==="function"&&(!t||t!=="titleTemplate"&&!(t[0]==="o"&&t[1]==="n"))&&(r=r());let n;if(e&&(n=e(t,r)),Array.isArray(n))return n.map(s=>Ba(s,e));if((n==null?void 0:n.constructor)===Object){const s={};for(const o of Object.keys(n))s[o]=Ba(n[o],e,o);return s}return n}function Fx(r,e){const t=r==="style"?new Map:new Set;function i(n){const s=n.trim();if(s)if(r==="style"){const[o,...a]=s.split(":").map(l=>l.trim());o&&a.length&&t.set(o,a.join(":"))}else s.split(" ").filter(Boolean).forEach(o=>t.add(o))}return typeof e=="string"?r==="style"?e.split(";").forEach(i):i(e):Array.isArray(e)?e.forEach(n=>i(n)):e&&typeof e=="object"&&Object.entries(e).forEach(([n,s])=>{s&&s!=="false"&&(r==="style"?t.set(n.trim(),s):i(n))}),t}function Xg(r,e){return r.props=r.props||{},e&&Object.entries(e).forEach(([t,i])=>{if(i===null){r.props[t]=null;return}if(t==="class"||t==="style"){r.props[t]=Fx(t,i);return}if(xx.has(t)){if(["textContent","innerHTML"].includes(t)&&typeof i=="object"){let o=e.type;if(e.type||(o="application/json"),!(o!=null&&o.endsWith("json"))&&o!=="speculationrules")return;e.type=o,r.props.type=o,r[t]=JSON.stringify(i)}else r[t]=i;return}const n=String(i),s=t.startsWith("data-");n==="true"||n===""?r.props[t]=s?n:!0:!i&&s&&n==="false"?r.props[t]="false":i!==void 0&&(r.props[t]=i)}),r}function Nx(r,e){const t=typeof e=="object"&&typeof e!="function"?e:{[r==="script"||r==="noscript"||r==="style"?"innerHTML":"textContent"]:e},i=Xg({tag:r,props:{}},t);return i.key&&vx.has(i.tag)&&(i.props["data-hid"]=i._h=i.key),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(n=>({...i,props:{...i.props,content:n}})):i}function $x(r,e){if(!r)return[];typeof r=="function"&&(r=r());const t=(n,s)=>{for(let o=0;o<e.length;o++)s=e[o](n,s);return s};r=t(void 0,r);const i=[];return r=Ba(r,t),Object.entries(r||{}).forEach(([n,s])=>{if(s!==void 0)for(const o of Array.isArray(s)?s:[s])i.push(Nx(n,o))}),i.flat()}const Ux=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Gx=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,jx=/^([/\\]\s*){2,}[^/\\]/,Hx=/^\.?\//;function Qu(r,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Ux.test(r):Gx.test(r)||(e.acceptRelative?jx.test(r):!1)}function Dh(r="",e){return r.endsWith("/")}function Zu(r="",e){return(Dh(r)?r.slice(0,-1):r)||"/"}function Yg(r="",e){return r.endsWith("/")?r:r+"/"}function Wr(r,e){if(zx(e)||Qu(r))return r;const t=Zu(e);return r.startsWith(t)?r:qg(t,r)}function zx(r){return!r||r==="/"}function Vx(r){return r&&r!=="/"}function qg(r,...e){let t=r||"";for(const i of e.filter(n=>Vx(n)))if(t){const n=i.replace(Hx,"");t=Yg(t)+n}else t=i;return t}function Wx(r){return typeof r=="string"?`'${r}'`:new Xx().serialize(r)}const Xx=function(){var e;class r{constructor(){sr(this,e,new Map)}compare(i,n){const s=typeof i,o=typeof n;return s==="string"&&o==="string"?i.localeCompare(n):s==="number"&&o==="number"?i-n:String.prototype.localeCompare.call(this.serialize(i,!0),this.serialize(n,!0))}serialize(i,n){if(i===null)return"null";switch(typeof i){case"string":return n?i:`'${i}'`;case"bigint":return`${i}n`;case"object":return this.$object(i);case"function":return this.$function(i)}return String(i)}serializeObject(i){const n=Object.prototype.toString.call(i);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),i);const s=i.constructor,o=s===Object||s===void 0?"":s.name;if(o!==""&&globalThis[o]===s)return this.serializeBuiltInType(o,i);if(typeof i.toJSON=="function"){const a=i.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(i))}serializeBuiltInType(i,n){const s=this["$"+i];if(s)return s.call(this,n);if(typeof(n==null?void 0:n.entries)=="function")return this.serializeObjectEntries(i,n.entries());throw new Error(`Cannot serialize ${i}`)}serializeObjectEntries(i,n){const s=Array.from(n).sort((a,l)=>this.compare(a[0],l[0]));let o=`${i}{`;for(let a=0;a<s.length;a++){const[l,c]=s[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<s.length-1&&(o+=",")}return o+"}"}$object(i){let n=rt(this,e).get(i);return n===void 0&&(rt(this,e).set(i,`#${rt(this,e).size}`),n=this.serializeObject(i),rt(this,e).set(i,n)),n}$function(i){const n=Function.prototype.toString.call(i);return n.slice(-15)==="[native code] }"?`${i.name||""}()[native]`:`${i.name}(${i.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(i){let n="[";for(let s=0;s<i.length;s++)n+=this.serialize(i[s]),s<i.length-1&&(n+=",");return n+"]"}$Date(i){try{return`Date(${i.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(i){return`ArrayBuffer[${new Uint8Array(i).join(",")}]`}$Set(i){return`Set${this.$Array(Array.from(i).sort((n,s)=>this.compare(n,s)))}`}$Map(i){return this.serializeObjectEntries("Map",i.entries())}}e=new WeakMap;for(const t of["Error","RegExp","URL"])r.prototype["$"+t]=function(i){return`${t}(${i})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])r.prototype["$"+t]=function(i){return`${t}[${i.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])r.prototype["$"+t]=function(i){return`${t}[${i.join("n,")}${i.length>0?"n":""}]`};return r}(),Yx=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],qx=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Kx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",on=[];let Jx=class{constructor(){fe(this,"_data",new jo);fe(this,"_hash",new jo([...Yx]));fe(this,"_nDataBytes",0);fe(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const t=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(i+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,t){const i=this._hash.words;let n=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],d=i[6],p=i[7];for(let m=0;m<64;m++){if(m<16)on[m]=e[t+m]|0;else{const P=on[m-15],I=(P<<25|P>>>7)^(P<<14|P>>>18)^P>>>3,A=on[m-2],F=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;on[m]=I+on[m-7]+F+on[m-16]}const g=l&c^~l&d,y=n&s^n&o^s&o,x=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),T=p+w+g+qx[m]+on[m],E=x+y;p=d,d=c,c=l,l=a+T|0,a=o,o=s,s=n,n=T+E|0}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+c|0,i[6]=i[6]+d|0,i[7]=i[7]+p|0}_append(e){typeof e=="string"&&(e=jo.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let t,i=this._data.sigBytes/64;e?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const n=i*16,s=Math.min(n*4,this._data.sigBytes);if(n){for(let o=0;o<n;o+=16)this._doProcessBlock(this._data.words,o);t=this._data.words.splice(0,n),this._data.sigBytes-=s}return new jo(t,s)}},jo=class Kg{constructor(e,t){fe(this,"words");fe(this,"sigBytes");e=this.words=e||[],this.sigBytes=t===void 0?e.length*4:t}static fromUtf8(e){const t=unescape(encodeURIComponent(e)),i=t.length,n=[];for(let s=0;s<i;s++)n[s>>>2]|=(t.charCodeAt(s)&255)<<24-s%4*8;return new Kg(n,i)}toBase64(){const e=[];for(let t=0;t<this.sigBytes;t+=3){const i=this.words[t>>>2]>>>24-t%4*8&255,n=this.words[t+1>>>2]>>>24-(t+1)%4*8&255,s=this.words[t+2>>>2]>>>24-(t+2)%4*8&255,o=i<<16|n<<8|s;for(let a=0;a<4&&t*8+a*6<this.sigBytes*8;a++)e.push(Kx.charAt(o>>>6*(3-a)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const i=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=i<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];this.sigBytes+=e.sigBytes}};function Qx(r){return new Jx().finalize(r).toBase64()}function ed(r){return Qx(Wx(r))}function nt(r){return{"@id":typeof r!="string"?r["@id"]:r}}function td(r){try{const e=r instanceof Date?r:new Date(Date.parse(r));return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`}catch{}return typeof r=="string"?r:r.toString()}const Zx=[/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,/^\d{4}-[01]\d-[0-3]\d$/,/^\d{4}-[01]\d$/,/^\d{4}$/];function ew(r){return Zx.some(e=>e.test(r))}function bi(r){if(!r)return r;try{return r instanceof Date?r.toISOString():ew(r)?r:new Date(Date.parse(r)).toISOString()}catch{}return typeof r=="string"?r:r.toString()}const Ut="#identity";function Fe(r,e,t){!(r!=null&&r[e])&&t&&(r[e]=t)}function kr(r){return Array.isArray(r)?r:[r]}function tw(r,e,t){const i=new Set(kr(r[e]));i.add(t),r[e]=[...i].filter(Boolean)}function Ys(r,e){return Qu(e)?e:(e.includes("#")||(e=`#${e}`),`${r||""}${e}`)}function rw(r,e){if(!r)return r;if(r.length>e){const t=r.substring(0,e);return t.substring(0,Math.min(t.length,t.lastIndexOf(" ")))}return r}function fs(r,e){const t=r["@type"];if(t===e)return;const i=new Set([...kr(e),...kr(t)]);r["@type"]=i.size===1?t:[...i.values()]}function xi(r,e){return!e||Qu(e)||e[0]!=="/"&&e[0]!=="#"?e:Wr(e,r)}function ms(r){return r&&r.substring(r.lastIndexOf("#"))}function Jg(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){if(r[e]&&typeof r[e]=="object"){if(r[e].__v_isReadonly||r[e].__v_isRef)return;Jg(r[e]);return}(r[e]===""||r[e]===null||r[e]===void 0)&&delete r[e]}return r}function Qg(r){let e=9;for(let t=0;t<r.length;)e=Math.imul(e^r.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}const Oh={cast(r){return typeof r=="number"?{value:r}:r},defaults:{"@type":"QuantitativeValue"}},rd={defaults:{"@type":"MonetaryAmount"},resolve(r,e){return typeof r.value!="number"&&(r.value=Se(r.value,e,Oh)),r}},iw={defaults:{"@type":"MerchantReturnPolicy"},resolve(r,e){return r.returnPolicyCategory&&(r.returnPolicyCategory=Wr(r.returnPolicyCategory,"https://schema.org/")),r.returnFees&&(r.returnFees=Wr(r.returnFees,"https://schema.org/")),r.returnMethod&&(r.returnMethod=Wr(r.returnMethod,"https://schema.org/")),r.returnShippingFeesAmount=Se(r.returnShippingFeesAmount,e,rd),r}},nw={defaults:{"@type":"DefinedRegion"}},sw={defaults:{"@type":"ShippingDeliveryTime"},resolve(r,e){return r.handlingTime=Se(r.handlingTime,e,Oh),r.transitTime=Se(r.transitTime,e,Oh),r}},ow={defaults:{"@type":"OfferShippingDetails"},resolve(r,e){return r.deliveryTime=Se(r.deliveryTime,e,sw),r.shippingDestination=Se(r.shippingDestination,e,nw),r.shippingRate=Se(r.shippingRate,e,rd),r}},vo={cast(r){return typeof r=="number"||typeof r=="string"?{price:r}:r},defaults:{"@type":"Offer",availability:"InStock"},resolve(r,e){return Fe(r,"priceCurrency",e.meta.currency),Fe(r,"priceValidUntil",new Date(Date.UTC(new Date().getFullYear()+1,12,-1,0,0,0))),r.url&&xi(e.meta.host,r.url),r.availability&&(r.availability=Wr(r.availability,"https://schema.org/")),r.itemCondition&&(r.itemCondition=Wr(r.itemCondition,"https://schema.org/")),r.priceValidUntil&&(r.priceValidUntil=bi(r.priceValidUntil)),r.hasMerchantReturnPolicy=Se(r.hasMerchantReturnPolicy,e,iw),r.shippingDetails=Se(r.shippingDetails,e,ow),r}},Zg={defaults:{"@type":"AggregateOffer"},inheritMeta:[{meta:"currency",key:"priceCurrency"}],resolve(r,e){return r.offers=Se(r.offers,e,vo),r.offers&&Fe(r,"offerCount",kr(r.offers).length),r}},dl={defaults:{"@type":"AggregateRating"}},id={cast(r){return typeof r=="string"&&(r={name:r}),r},defaults:{"@type":"ListItem"},resolve(r,e){return typeof r.item=="string"?r.item=xi(e.meta.host,r.item):typeof r.item=="object"&&(r.item=Se(r.item,e)),r}},ev="#breadcrumb",tv={defaults:{"@type":"BreadcrumbList"},idPrefix:["url",ev],resolve(r,e){if(r.itemListElement){let t=1;r.itemListElement=Se(r.itemListElement,e,id,{array:!0,afterResolve(i){Fe(i,"position",t++)}})}return r},resolveRootNode(r,{find:e}){const t=e(Dr);t&&Fe(t,"breadcrumb",nt(r))}},Tn={alias:"image",cast(r){return typeof r=="string"&&(r={url:r}),r},defaults:{"@type":"ImageObject"},inheritMeta:["inLanguage"],idPrefix:"host",resolve(r,{meta:e}){return r.url=xi(e.host,r.url),Fe(r,"contentUrl",r.url),r.height&&!r.width&&delete r.height,r.width&&!r.height&&delete r.width,r}},pl={defaults:{"@type":"PostalAddress"}},rv={defaults:{"@type":"SearchAction",target:{"@type":"EntryPoint"},"query-input":{"@type":"PropertyValueSpecification",valueRequired:!0,valueName:"search_term_string"}},resolve(r,e){return typeof r.target=="string"&&(r.target={"@type":"EntryPoint",urlTemplate:xi(e.meta.host,r.target)}),r}},so="#website",aw={defaults:{"@type":"WebSite"},inheritMeta:["inLanguage",{meta:"host",key:"url"}],idPrefix:["host",so],resolve(r,e){return r.potentialAction=Se(r.potentialAction,e,rv,{array:!0}),r.publisher=Se(r.publisher,e),r},resolveRootNode(r,{find:e}){if(ms(r["@id"])===so){const t=e(Ut);t&&Fe(r,"publisher",nt(t));const i=e(Dr);i&&Fe(i,"isPartOf",nt(r))}return r}},Sn={defaults:{"@type":"Organization"},idPrefix:["host",Ut],inheritMeta:[{meta:"host",key:"url"}],resolve(r,e){return fs(r,"Organization"),r.address=Se(r.address,e,pl),r},resolveRootNode(r,e){const t=ms(r["@id"])===Ut,i=e.find(Dr);if(r.logo&&t){if(!e.find("#organization")){const s=Se(r.logo,e,Tn,{root:!0,afterResolve(o){o["@id"]=Ys(e.meta.host,"#logo"),Fe(o,"caption",r.name)}});i&&s&&Fe(i,"primaryImageOfPage",nt(s)),e.nodes.push({"@type":"Organization",name:r.name,url:r.url,sameAs:r.sameAs,address:r.address,logo:Se(r.logo,e,Tn,{root:!1}).url,_priority:-1,"@id":Ys(e.meta.host,"#organization")})}delete r.logo}t&&i&&Fe(i,"about",nt(r));const n=e.find(so);n&&Fe(n,"publisher",nt(r))}},iv={defaults:{"@type":"ReadAction"},resolve(r,e){return r.target.includes(e.meta.url)||r.target.unshift(e.meta.url),r}},Dr="#webpage",lw={defaults({meta:r}){const e=Zu(r.url.substring(r.url.lastIndexOf("/")+1));let t="WebPage";switch(e){case"about":case"about-us":t="AboutPage";break;case"search":t="SearchResultsPage";break;case"checkout":t="CheckoutPage";break;case"contact":case"get-in-touch":case"contact-us":t="ContactPage";break;case"faq":t="FAQPage";break}return{"@type":t}},idPrefix:["url",Dr],inheritMeta:[{meta:"title",key:"name"},"description","datePublished","dateModified","url"],resolve(r,e){return r.dateModified=bi(r.dateModified),r.datePublished=bi(r.datePublished),fs(r,"WebPage"),r.about=Se(r.about,e,Sn),r.breadcrumb=Se(r.breadcrumb,e,tv),r.author=Se(r.author,e,qi),r.primaryImageOfPage=Se(r.primaryImageOfPage,e,Tn),r.potentialAction=Se(r.potentialAction,e,iv),r["@type"]==="WebPage"&&e.meta.url&&Fe(r,"potentialAction",[{"@type":"ReadAction",target:[e.meta.url]}]),r},resolveRootNode(r,{find:e,meta:t}){const i=e(Ut),n=e(so),s=e("#logo");i&&t.url===t.host&&Fe(r,"about",nt(i)),s&&Fe(r,"primaryImageOfPage",nt(s)),n&&Fe(r,"isPartOf",nt(n));const o=e(ev);return o&&Fe(r,"breadcrumb",nt(o)),r}},qi={cast(r){return typeof r=="string"?{name:r}:r},defaults:{"@type":"Person"},idPrefix:["host",Ut],resolve(r,e){return r.url&&(r.url=xi(e.meta.host,r.url)),r},resolveRootNode(r,{find:e,meta:t}){if(ms(r["@id"])===Ut){Fe(r,"url",t.host);const n=e(Dr);n&&Fe(n,"about",nt(r));const s=e(so);s&&Fe(s,"publisher",nt(r))}const i=e(fl);i&&Fe(i,"author",nt(r))}},fl="#article",cw={defaults:{"@type":"Article"},inheritMeta:["inLanguage","description","image","dateModified","datePublished",{meta:"title",key:"headline"}],idPrefix:["url",fl],resolve(r,e){return r.author=Se(r.author,e,qi,{root:!0}),r.publisher=Se(r.publisher,e),r.dateModified=bi(r.dateModified),r.datePublished=bi(r.datePublished),fs(r,"Article"),r.headline=rw(r.headline,110),r},resolveRootNode(r,{find:e,meta:t}){var s;const i=e(Dr),n=e(Ut);if(r.image&&!r.thumbnailUrl){const o=kr(r.image)[0];typeof o=="string"?Fe(r,"thumbnailUrl",xi(t.host,o)):o!=null&&o["@id"]&&Fe(r,"thumbnailUrl",(s=e(o["@id"]))==null?void 0:s.url)}return n&&(Fe(r,"publisher",nt(n)),Fe(r,"author",nt(n))),i&&(Fe(r,"isPartOf",nt(i)),Fe(r,"mainEntityOfPage",nt(i)),Fe(i,"potentialAction",[{"@type":"ReadAction",target:[t.url]}]),Fe(i,"dateModified",r.dateModified),Fe(i,"datePublished",r.datePublished)),r}},nv={defaults:{"@type":"Book"},inheritMeta:["inLanguage"],resolve(r,e){return r.bookFormat&&(r.bookFormat=Wr(r.bookFormat,"https://schema.org/")),r.datePublished&&(r.datePublished=td(r.datePublished)),r.author=Se(r.author,e),r},resolveRootNode(r,{find:e}){const t=e(Ut);return t&&Fe(r,"provider",nt(t)),r}},hw="#book",uw={defaults:{"@type":"Book"},inheritMeta:["description","url",{meta:"title",key:"name"}],idPrefix:["url",hw],resolve(r,e){return r.workExample=Se(r.workExample,e,nv),r.author=Se(r.author,e),r.url&&Wr(r.url,e.meta.host),r},resolveRootNode(r,{find:e}){const t=e(Ut);return t&&Fe(r,"author",nt(t)),r}},dw={defaults:{"@type":"Comment"},idPrefix:"url",resolve(r,e){return r.author=Se(r.author,e,qi,{root:!0}),r},resolveRootNode(r,{find:e}){const t=e(fl);t&&Fe(r,"about",nt(t))}},pw={defaults:{"@type":"Course"},resolve(r,e){return r.provider=Se(r.provider,e,Sn,{root:!0}),r},resolveRootNode(r,{find:e}){const t=e(Ut);return t&&Fe(r,"provider",nt(t)),r}},nd={defaults:{"@type":"Place"},resolve(r,e){return typeof r.address!="string"&&(r.address=Se(r.address,e,pl)),r}},sv={cast(r){return typeof r=="string"?{url:r}:r},defaults:{"@type":"VirtualLocation"}},fw="#event",mw={defaults:{"@type":"Event"},inheritMeta:["inLanguage","description","image",{meta:"title",key:"name"}],idPrefix:["url",fw],resolve(r,e){var n;if(r.location){const s=r.location==="string"||((n=r.location)==null?void 0:n.url)!=="undefined";r.location=Se(r.location,e,s?sv:nd)}r.performer=Se(r.performer,e,qi,{root:!0}),r.organizer=Se(r.organizer,e,Sn,{root:!0}),r.offers=Se(r.offers,e,vo),r.eventAttendanceMode&&(r.eventAttendanceMode=Wr(r.eventAttendanceMode,"https://schema.org/")),r.eventStatus&&(r.eventStatus=Wr(r.eventStatus,"https://schema.org/"));const t=r.eventStatus==="https://schema.org/EventMovedOnline";return["startDate","previousStartDate","endDate"].forEach(s=>{t?r[s]=bi(r[s]):r[s]instanceof Date&&r[s].getHours()===0&&r[s].getMinutes()===0&&(r[s]=td(r[s]))}),Fe(r,"endDate",r.startDate),r},resolveRootNode(r,{find:e}){const t=e(Ut);t&&Fe(r,"organizer",nt(t))}},ov={defaults:{"@type":"OpeningHoursSpecification",opens:"00:00",closes:"23:59"}},Lh={defaults:{"@type":["Organization","LocalBusiness"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Ut],resolve(r,e){return fs(r,["Organization","LocalBusiness"]),r.address=Se(r.address,e,pl),r.openingHoursSpecification=Se(r.openingHoursSpecification,e,ov),r=gl({...r},e,Sn),r},resolveRootNode(r,e){return Sn.resolveRootNode(r,e),r}},av={cast(r){return r==="number"?{ratingValue:r}:r},defaults:{"@type":"Rating",bestRating:5,worstRating:1}},gw={defaults:{"@type":["Organization","LocalBusiness","FoodEstablishment"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Ut],resolve(r,e){return fs(r,["Organization","LocalBusiness","FoodEstablishment"]),r.starRating=Se(r.starRating,e,av),r=gl(r,e,Lh),r},resolveRootNode(r,e){return Lh.resolveRootNode(r,e),r}},vw={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToDirection"}},sd={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToStep"},resolve(r,e){return r.url&&(r.url=xi(e.meta.url,r.url)),r.image&&(r.image=Se(r.image,e,Tn,{root:!0})),r.itemListElement&&(r.itemListElement=Se(r.itemListElement,e,vw)),r}},yw="#howto",_w={defaults:{"@type":"HowTo"},inheritMeta:["description","image","inLanguage",{meta:"title",key:"name"}],idPrefix:["url",yw],resolve(r,e){return r.step=Se(r.step,e,sd),r},resolveRootNode(r,{find:e}){const t=e(Dr);t&&Fe(r,"mainEntityOfPage",nt(t))}},bw={defaults:{"@type":"ItemList"},resolve(r,e){if(r.itemListElement){let t=1;r.itemListElement=Se(r.itemListElement,e,id,{array:!0,afterResolve(i){Fe(i,"position",t++)}})}return r}},xw={defaults:{"@type":"JobPosting"},idPrefix:["url","#job-posting"],resolve(r,e){return r.datePosted=bi(r.datePosted),r.hiringOrganization=Se(r.hiringOrganization,e,Sn),r.jobLocation=Se(r.jobLocation,e,nd),r.baseSalary=Se(r.baseSalary,e,rd),r.validThrough=bi(r.validThrough),r},resolveRootNode(r,{find:e}){const t=e(Dr),i=e(Ut);return i&&Fe(r,"hiringOrganization",nt(i)),t&&Fe(r,"mainEntityOfPage",nt(t)),r}},ml={defaults:{"@type":"Review"},inheritMeta:["inLanguage"],resolve(r,e){return r.reviewRating=Se(r.reviewRating,e,av),r.author=Se(r.author,e,qi),r}},lv={cast(r){return typeof r=="string"&&(r={url:r}),r},alias:"video",defaults:{"@type":"VideoObject"},inheritMeta:[{meta:"title",key:"name"},"description","image","inLanguage",{meta:"datePublished",key:"uploadDate"}],idPrefix:"host",resolve(r,e){if(r.uploadDate&&(r.uploadDate=bi(r.uploadDate)),r.url=xi(e.meta.host,r.url),r.caption&&!r.description&&(r.description=r.caption),r.description||(r.description="No description"),r.thumbnailUrl&&(typeof r.thumbnailUrl=="string"||Array.isArray(r.thumbnailUrl))){const t=kr(r.thumbnailUrl).map(i=>xi(e.meta.host,i));r.thumbnailUrl=t.length>1?t:t[0]}return r.thumbnail&&(r.thumbnail=Se(r.thumbnailUrl,e,Tn)),r},resolveRootNode(r,{find:e}){var t;if(r.image&&!r.thumbnail){const i=kr(r.image)[0];Fe(r,"thumbnail",(t=e(i["@id"]))==null?void 0:t.url)}}},ww={defaults:{"@type":"Movie"},resolve(r,e){return r.aggregateRating=Se(r.aggregateRating,e,dl),r.review=Se(r.review,e,ml),r.director=Se(r.director,e,qi),r.actor=Se(r.actor,e,qi),r.trailer=Se(r.trailer,e,lv),r.dateCreated&&(r.dateCreated=td(r.dateCreated)),r}},Tw="#product",Sw={defaults:{"@type":"Product"},inheritMeta:["description","image",{meta:"title",key:"name"}],idPrefix:["url",Tw],resolve(r,e){return Fe(r,"sku",Qg(r.name)),r.aggregateOffer=Se(r.aggregateOffer,e,Zg),r.aggregateRating=Se(r.aggregateRating,e,dl),r.offers=Se(r.offers,e,vo),r.review=Se(r.review,e,ml),r},resolveRootNode(r,{find:e}){const t=e(Dr),i=e(Ut);return i&&Fe(r,"brand",nt(i)),t&&Fe(r,"mainEntityOfPage",nt(t)),r}},Ew={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"Answer"}},Aw={defaults:{"@type":"Question"},inheritMeta:["inLanguage"],idPrefix:"url",resolve(r,e){return r.question&&(r.name=r.question,delete r.question),r.answer&&(r.acceptedAnswer=r.answer,delete r.answer),r.acceptedAnswer=Se(r.acceptedAnswer,e,Ew),r},resolveRootNode(r,{find:e}){const t=e(Dr);t&&kr(t["@type"]).includes("FAQPage")&&tw(t,"mainEntity",nt(r))}},Cw="#recipe",Pw={defaults:{"@type":"Recipe"},inheritMeta:[{meta:"title",key:"name"},"description","image","datePublished"],idPrefix:["url",Cw],resolve(r,e){return r.recipeInstructions=Se(r.recipeInstructions,e,sd),r},resolveRootNode(r,{find:e}){const t=e(fl),i=e(Dr);return t?Fe(r,"mainEntityOfPage",nt(t)):i&&Fe(r,"mainEntityOfPage",nt(i)),t!=null&&t.author&&Fe(r,"author",t.author),r}},Rw={defaults:{"@type":"SoftwareApplication"},resolve(r,e){return fs(r,"SoftwareApplication"),r.offers=Se(r.offers,e,vo),r.aggregateRating=Se(r.aggregateRating,e,dl),r.review=Se(r.review,e,ml),r}};function cv(r){switch(r){case"address":return pl;case"aggregateOffer":return Zg;case"aggregateRating":return dl;case"article":return cw;case"breadcrumb":return tv;case"comment":return dw;case"event":return mw;case"foodEstablishment":return gw;case"virtualLocation":return sv;case"place":return nd;case"howTo":return _w;case"howToStep":return sd;case"image":return Tn;case"localBusiness":return Lh;case"offer":return vo;case"openingHours":return ov;case"organization":return Sn;case"person":return qi;case"product":return Sw;case"question":return Aw;case"recipe":return Pw;case"review":return ml;case"video":return lv;case"webPage":return lw;case"webSite":return aw;case"book":return uw;case"course":return pw;case"itemList":return bw;case"jobPosting":return xw;case"listItem":return id;case"movie":return ww;case"searchAction":return rv;case"readAction":return iv;case"softwareApp":return Rw;case"bookEdition":return nv}return null}function hv(r){return!r.host&&r.canonicalHost&&(r.host=r.canonicalHost),!r.tagPosition&&r.position&&(r.tagPosition=r.position),!r.currency&&r.defaultCurrency&&(r.currency=r.defaultCurrency),!r.inLanguage&&r.defaultLanguage&&(r.inLanguage=r.defaultLanguage),r.path||(r.path="/"),!r.host&&typeof document<"u"&&(r.host=document.location.host),!r.url&&r.canonicalUrl&&(r.url=r.canonicalUrl),r.path!=="/"&&(r.trailingSlash&&!Dh(r.path)?r.path=Yg(r.path):!r.trailingSlash&&Dh(r.path)&&(r.path=Zu(r.path))),r.url=qg(r.host||"",r.path),{...r,host:r.host,url:r.url,currency:r.currency,image:r.image,inLanguage:r.inLanguage,title:r.title,description:r.description,datePublished:r.datePublished,dateModified:r.dateModified}}function gl(r,e,t){var i;if(t!=null&&t.cast&&(r=t.cast(r,e)),t!=null&&t.defaults){let n=t.defaults||{};typeof n=="function"&&(n=n(e)),r={...n,...r}}(i=t==null?void 0:t.inheritMeta)==null||i.forEach(n=>{typeof n=="string"?Fe(r,n,e.meta[n]):Fe(r,n.key,e.meta[n.meta])}),t!=null&&t.resolve&&(r=t.resolve(r,e));for(const n in r){const s=r[n];Array.isArray(s)&&s.forEach((o,a)=>{typeof o=="object"&&(o!=null&&o._resolver)&&(r[n][a]=Se(o,e,o._resolver))}),typeof s=="object"&&(s!=null&&s._resolver)&&(r[n]=Se(s,e,s._resolver))}return Jg(r),r}function Bh(r,e,t,i=!1){var l,c,d,p;if(r["@id"]&&r["@id"].startsWith("http"))return r;const n=t&&(Array.isArray(t.idPrefix)?t.idPrefix[0]:t.idPrefix)||"url",s=r["@id"]||(t?Array.isArray(t.idPrefix)?(l=t.idPrefix)==null?void 0:l[1]:void 0:"");if(!r["@id"]&&i&&s)return r["@id"]=Ys(e.meta[n],s),r;if((c=r["@id"])!=null&&c.startsWith("#/schema/")||(d=r["@id"])!=null&&d.startsWith("/"))return r["@id"]=Ys(e.meta[n],r["@id"]),r;let o=t==null?void 0:t.alias;o||(o=(((p=kr(r["@type"]))==null?void 0:p[0])||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase());const a={};for(const m in r)m[0]!=="_"&&Object.prototype.hasOwnProperty.call(r,m)&&(a[m]=r[m]);return r["@id"]=Ys(e.meta[n],`#/schema/${o}/${r["@id"]||Qg(JSON.stringify(a))}`),r}function Se(r,e,t,i={}){if(!r)return r;const n=kr(r).map(s=>{var c;const o=Object.keys(s).length;if(o===1&&s["@id"]||o===2&&s["@id"]&&s["@type"])return Bh({"@id":((c=e.find(s["@id"]))==null?void 0:c["@id"])||s["@id"]},e);let a=t;if(s._resolver&&(a=s._resolver,typeof a=="string"&&(a=cv(a)),delete s._resolver),!a)return s;let l=gl(s,e,a);return i.afterResolve&&i.afterResolve(l),(i.generateId||i.root)&&(l=Bh(l,e,a,!1)),i.root?(a.resolveRootNode&&a.resolveRootNode(l,e),e.push(l),nt(l["@id"])):l});return!i.array&&n.length===1?n[0]:n}function uv(r,e){return r.reduce((t,i,n,s)=>{const o=e(i,n,s);return t[o]||(t[o]=[]),t[o].push(i),t},{})}function Iw(r,e){return Object.values(uv(r,e)).map(t=>t[t.length-1])}const od=Ku((r,e,t)=>{if(Array.isArray(r[e])){if(Array.isArray(t)){const i={};for(const n of[...r[e],...t])i[ed(n)]=n;return r[e]=Object.values(i),e==="itemListElement"&&(r[e]=[...Iw(r[e],n=>n.position)]),!0}return r[e]=od(r[e],Array.isArray(t)?t:[t]),!0}});function kw(r){const e={};for(const t of r.keys()){const i=r[t],n=ms(i["@id"]||ed(i));e[n]&&i._dedupeStrategy!=="replace"?e[n]=od(r[t],e[n]):e[n]=r[t]}return Object.values(e)}function Mw(r){const e=r.keys(),t={};for(const i of e){const n=r[i],s=ms(n["@id"]||ed(n)),o=uv(Object.keys(n),c=>{const d=n[c];return c[0]==="_"?"ignored":Array.isArray(d)||typeof d=="object"?"relations":"primitives"}),a=[...(o.primitives||[]).sort(),...(o.relations||[]).sort()];let l={};for(const c of a)l[c]=n[c];t[s]&&(l=od(l,t[s])),t[s]=l}return Object.values(t)}const Dw=["translationOfWork","workTranslation"];function Ow(){const r={find(e){let t=n=>n;e[0]==="#"?t=ms:e[0]==="/"&&(t=n=>n.replace(/(https?:)?\/\//,"").split("/")[0]);const i=t(e);return r.nodes.filter(n=>!!n["@id"]).find(n=>t(n["@id"])===i)},push(e){kr(e).forEach(t=>{const i=t;r.nodes.push(i)})},resolveGraph(e){return r.meta=hv({...e}),r.nodes.forEach((t,i)=>{const n=t._resolver;t=gl(t,r,n),t=Bh(t,r,n,!0),r.nodes[i]=t}),r.nodes=kw(r.nodes),r.nodes.forEach(t=>{var i;t.image&&typeof t.image=="string"&&(t.image=Se(t.image,r,Tn,{root:!0})),Dw.forEach(n=>{t[n]=Se(t[n],r)}),(i=t._resolver)!=null&&i.resolveRootNode&&t._resolver.resolveRootNode(t,r),delete t._resolver}),Mw(r.nodes)},nodes:[],meta:{}};return r}function Lw(r){return Bw({},()=>({}))}function Bw(r,e,t){r=hv({...r});let i,n={};return s=>(s.use(Ox),{key:"schema-org",hooks:{"entries:normalize":async({tags:o})=>{i=i||Ow();for(const a of o){if(a.tag==="script"&&a.props.type==="application/ld+json"&&a.props.nodes){const l=await a.props.nodes;for(const c of Array.isArray(l)?l:[l]){if(typeof c!="object"||Object.keys(c).length===0)continue;const d={...c,_dedupeStrategy:a.tagDuplicateStrategy,_resolver:cv(await c._resolver)};i.push(d)}a.tagPosition=a.tagPosition||r.tagPosition==="head"?"head":"bodyClose"}if(a.tag==="htmlAttrs"&&a.props.lang)n.inLanguage=a.props.lang;else if(a.tag==="title")n.title=a.textContent;else if(a.tag==="meta"&&a.props.name==="description")n.description=a.props.content;else if(a.tag==="link"&&a.props.rel==="canonical"){if(n.url=a.props.href,n.url&&!n.host)try{n.host=new URL(n.url).origin}catch{}}else a.tag==="meta"&&a.props.property==="og:image"?n.image=a.props.content:a.tag==="templateParams"&&a.props.schemaOrg&&(n={...n,...a.props.schemaOrg},delete a.props.schemaOrg)}},"tags:resolve":async o=>{for(const a in o.tags){const l=o.tags[a];if(l.tag==="script"&&l.props.type==="application/ld+json"&&l.props.nodes){delete l.props.nodes;const c=i.resolveGraph({...await(e==null?void 0:e())||{},...r,...n});if(!c.length){l.props={};return}l.innerHTML=JSON.stringify({"@context":"https://schema.org","@graph":c},(d,p)=>typeof p!="object"?Fs(p,s._templateParams,s._separator):p,0);return}}},"tags:afterResolve":o=>{let a;for(const l in o.tags){const c=o.tags[l];if(c.props.type==="application/ld+json"&&c.props.nodes||c.key==="schema-org-graph"){if(delete c.props.nodes,typeof a>"u"){a=l;continue}o.tags[a].props=gx(o.tags[a].props,c.props),delete o.tags[a].props.nodes,o.tags[l]=!1}}o.tags=o.tags.filter(Boolean)}}})}function gp(r){return r.script?r:{script:[{type:"application/ld+json",key:"schema-org-graph",nodes:r}]}}function vp(r,e){const t=typeof e=="function"?e(r):e,i=t.key||String(r.plugins.size+1);r.plugins.get(i)||(r.plugins.set(i,t),r.hooks.addHooks(t.hooks||{}))}function Fw(r={}){var a;const e=ux();e.addHooks(r.hooks||{});const t=!r.document,i=new Map,n=new Map,s=[],o={_entryCount:1,plugins:n,dirty:!1,resolvedOptions:r,hooks:e,ssr:t,entries:i,headEntries(){return[...i.values()]},use:l=>vp(o,l),push(l,c){const d={...c||{}};delete d.head;const p=d._index??o._entryCount++,m={_i:p,input:l,options:d},g={_poll(y=!1){o.dirty=!0,!y&&s.push(p),e.callHook("entries:updated",o)},dispose(){i.delete(p)&&g._poll(!0)},patch(y){(!d.mode||d.mode==="server"&&t||d.mode==="client"&&!t)&&(m.input=y,i.set(p,m),g._poll())}};return g.patch(l),g},async resolveTags(){var g;const l={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",l);s.length;){const y=s.shift(),x=i.get(y);if(x){const w={tags:$x(x.input,r.propResolvers||[]).map(T=>Object.assign(T,x.options)),entry:x};await e.callHook("entries:normalize",w),x._tags=w.tags.map((T,E)=>(T._w=Rx(o,T),T._p=(x._i<<10)+E,T._d=Mh(T),T))}}let c=!1;l.entries.flatMap(y=>(y._tags||[]).map(x=>({...x,props:{...x.props}}))).sort(dp).reduce((y,x)=>{const w=String(x._d||x._p);if(!y.has(w))return y.set(w,x);const T=y.get(w);if(((x==null?void 0:x.tagDuplicateStrategy)||(wx.has(x.tag)?"merge":null)||(x.key&&x.key===T.key?"merge":null))==="merge"){const P={...T.props};Object.entries(x.props).forEach(([I,A])=>P[I]=I==="style"?new Map([...T.props.style||new Map,...A]):I==="class"?new Set([...T.props.class||new Set,...A]):A),y.set(w,{...x,props:P})}else x._p>>10===T._p>>10&&Wg(x._d)?(y.set(w,Object.assign([...Array.isArray(T)?T:[T],x],x)),c=!0):(x._w===T._w?x._p>T._p:(x==null?void 0:x._w)<(T==null?void 0:T._w))&&y.set(w,x);return y},l.tagMap);const d=l.tagMap.get("title"),p=l.tagMap.get("titleTemplate");if(o._title=d==null?void 0:d.textContent,p){const y=p==null?void 0:p.textContent;if(o._titleTemplate=y,y){let x=typeof y=="function"?y(d==null?void 0:d.textContent):y;typeof x=="string"&&!o.plugins.has("template-params")&&(x=x.replace("%s",(d==null?void 0:d.textContent)||"")),d?x===null?l.tagMap.delete("title"):l.tagMap.set("title",{...d,textContent:x}):(p.tag="title",p.textContent=x)}}l.tags=Array.from(l.tagMap.values()),c&&(l.tags=l.tags.flat().sort(dp)),await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l);const m=[];for(const y of l.tags){const{innerHTML:x,tag:w,props:T}=y;if(_x.has(w)&&!(Object.keys(T).length===0&&!y.innerHTML&&!y.textContent)&&!(w==="meta"&&!T.content&&!T["http-equiv"]&&!T.charset)){if(w==="script"&&x){if((g=T.type)!=null&&g.endsWith("json")){const E=typeof x=="string"?x:JSON.stringify(x);y.innerHTML=E.replace(/</g,"\\u003C")}else typeof x=="string"&&(y.innerHTML=x.replace(new RegExp(`</${w}`,"g"),`<\\/${w}`));y._d=Mh(y)}m.push(y)}}return m}};return((r==null?void 0:r.plugins)||[]).forEach(l=>vp(o,l)),o.hooks.callHook("init",o),(a=r.init)==null||a.forEach(l=>l&&o.push(l)),o}const Nw=(r,e)=>Hu(e)?lt(e):e,dv="usehead";function $w(r){return{install(t){t.config.globalProperties.$unhead=r,t.config.globalProperties.$head=r,t.provide(dv,r)}}.install}function ad(){if(zu()){const r=Vu(dv);if(!r)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return r}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function yo(r,e={}){const t=e.head||ad();return t.ssr?t.push(r||{},e):Uw(t,r,e)}function Uw(r,e,t={}){const i=ve(!1);let n;return al(()=>{const o=i.value?{}:Ba(e,Nw);n?n.patch(o):n=r.push(o,t)}),ps()&&(zb(()=>{n.dispose()}),Vb(()=>{i.value=!0}),Wb(()=>{i.value=!1})),n}function Gw(r={},e={}){(e.head||ad()).use(Ax);const{title:i,titleTemplate:n,...s}=r;return yo({title:i,titleTemplate:n,_flatMeta:s},e)}function vl(r,e){return r||(r={}),r._resolver=e,r}function zD(r){return vl(r,"article")}function jw(r){return vl(r,"person")}function Hw(r){return vl(r,"webPage")}function zw(r){return vl(r,"webSite")}function Vw(r=[],e={}){(e.head||ad()).use(Lw());const i=yo(gp(r),e),n=i.patch;return i.patch=s=>n(gp(s)),i}ei.extend(ax);ei.extend(lx);ei.extend(cx);function VD(r,e={}){return typeof r=="string"&&(r=new Date(r)),ei.tz(ei.utc(r),e.timezone).format(e.template||"YYYY-MM-DD")}function yp(r,e=!0){return r.sort((t,i)=>{const n=+new Date(t.date||""),s=+new Date(i.date||"");return e?s-n:n-s})}function Ww(){const r=dr();Xb(()=>{r.value.timezone&&ei.tz.setDefault(r.value.timezone)})}const pv='{"siteConfig":{"mode":"auto","url":"https://io.helltractor.top/","lang":"zh-CN","languages":["en","zh-CN"],"timezone":"Asia/Shanghai","title":"helltractor blog","description":"","subtitle":"夏日可畏，冬日可爱","author":{"avatar":"/avatar.png","email":"mail@helltractor.top","link":"https://valaxy.site","name":"helltractor","status":{"emoji":"😅","message":"屮(゜Д゜)屮"}},"favicon":"https://io.helltractor.top/favicon.svg","feed":{"name":"","favicon":"/favicon.svg"},"social":[{"name":"GitHub","link":"https://github.com/helltractor","icon":"i-ri-github-line","color":"#6e5494"},{"name":"LeetCode","link":"https://leetcode-cn.com/u/helltractor/","icon":"i-simple-icons-leetcode","color":"#FFA116"},{"name":"Codeforces","link":"https://codeforces.com/profile/helltractor","icon":"i-simple-icons-codeforces","color":"#b73535"},{"name":"Steam","link":"https://steamcommunity.com/id/helltractor/","icon":"i-ri-steam-line","color":"#00A3EE"},{"name":"E-Mail","link":"mailto:mail@helltractor.top","icon":"i-ri-mail-line","color":"#8E71C1"},{"name":"Travelling","link":"https://www.travellings.cn/go.html","icon":"i-ri-train-line","color":"#00A4EE"}],"lastUpdated":true,"license":{"enabled":true,"language":"","type":"by-nc-sa"},"sponsor":{"enable":false,"description":"这是关于赞助的一些描述","methods":[{"name":"支付宝","url":"https://cdn.yunyoujun.cn/img/donate/alipay-qrcode.jpg","color":"#00A3EE","icon":"i-ri-alipay-line"},{"name":"QQ 支付","url":"https://cdn.yunyoujun.cn/img/donate/qqpay-qrcode.png","color":"#12B7F5","icon":"i-ri-qq-line"},{"name":"微信支付","url":"https://cdn.yunyoujun.cn/img/donate/wechatpay-qrcode.jpg","color":"#2DC100","icon":"i-ri-wechat-pay-line"}],"title":"我很可爱，请给我钱！"},"search":{"enable":true,"type":"algolia"},"fuse":{"dataPath":"valaxy-fuse-list.json","options":{"keys":[]}},"comment":{"enable":false},"frontmatter":{"time_warning":true},"cdn":{"prefix":"https://unpkg.com/"},"mediumZoom":{"enable":false,"selector":"","options":{}},"vanillaLazyload":{"enable":false,"options":{}},"floatingVue":{"disabled":false,"distance":5,"skidding":0,"container":"body","instantMove":false,"disposeTimeout":150,"popperTriggers":[],"strategy":"absolute","preventOverflow":true,"flip":true,"shift":true,"overflowPadding":0,"arrowPadding":0,"arrowOverflow":true,"autoHideOnMousedown":false,"themes":{"tooltip":{"placement":"top","triggers":["hover","focus","touch"],"delay":{"show":200,"hide":0},"handleResize":false,"html":false,"loadingContent":"..."},"dropdown":{"placement":"bottom","triggers":["click"],"delay":0,"handleResize":true,"autoHide":true},"menu":{"$extend":"dropdown","triggers":["hover","focus"],"popperTriggers":["hover"],"delay":{"show":0,"hide":400}}}},"statistics":{"enable":true,"readTime":{"speed":{"cn":300,"en":200}}},"pageSize":7,"encrypt":{"enable":true,"algorithm":"AES-CBC","salt":{"0":101,"1":112,"2":104,"3":145,"4":179,"5":112,"6":183,"7":14,"8":63,"9":214,"10":67,"11":93,"12":72,"13":32,"14":32,"15":67},"iv":{"0":222,"1":220,"2":136,"3":6,"4":238,"5":150,"6":133,"7":39,"8":39,"9":52,"10":22,"11":229,"12":43,"13":173,"14":95,"15":86}},"redirects":{"useVueRouter":true,"rules":[{"from":"/foo","to":"/about"}]},"codeHeightLimit":300},"theme":"sakura","themeConfig":{"pkg":{"name":"valaxy-theme-sakura","version":"0.9.4","author":{"email":"3322543587@qq.com","name":"WRXinYue","url":"https://wrxinyue.org"},"homepage":"https://github.com/WRXinYue/valaxy-theme-sakura","repository":{"type":"git","url":"https://github.com/WRXinYue/valaxy-theme-sakura.git"},"publishConfig":{"@wrxinyue:registry":"https://npm.pkg.github.com"},"keywords":["valaxy","theme","sakura","vue"],"main":"client/index.ts","types":"types/index.d.ts","peerDependencies":{"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},"dependencies":{"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3","interactjs":"^1.10.27","lenis":"^1.2.3","typeit":"^8.8.7"},"devDependencies":{"@interactjs/types":"^1.10.27","valaxy":"^0.23.3"},"scripts":{"release":"bumpp && npm publish"}},"valaxyDarkOptions":{"circleTransition":true},"ui":{"primary":"#fe9500","notice":{"icon":"i-fa6-solid:bullhorn"},"pageHeader":{"image":{"scale":1}},"postList":{"icon":"i-fa-envira","image":{"rotate":5,"scale":1.1,"transitionDuration":"0.45s"},"responsive":{}},"pinnedPost":{"icon":"i-fa-anchor","image":{"scale":1.1}},"links":{"image":{"scale":1,"rotate":360}},"scrollDown":{"icon":"i-fa-chevron-down"},"toggleLocaleButton":{"icon":"i-ri-translate"},"toggleDarkButton":{"darkIcon":"i-line-md-sunny-outline-to-moon-loop-transition","lightIcon":"i-line-md-moon-alt-to-sunny-outline-loop-transition"}},"navbarTitle":"","favicon":false,"hero":{"title":"HI, SAKURA!","motto":"You got to put the past behind you before you can move on.","urls":["https://valaxy-theme-sakura.s3.bitiful.net/wallpaper-2025%2Fwallhaven-858k3j.jpg","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper-2025%2Fwallhaven-3l2vm3.jpg","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper-2025%2Fwallhaven-3z9dz9.jpg","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper-2025%2Fwallhaven-rrdgp1.jpg","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper-2025%2Fwallhaven-zyxq6j.jpg","https://valaxy-theme-sakura.s3.bitiful.net/home-wallpaper.jpg","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper/yae-miko-sunset-sakura-genshin-impact-moewalls-com.mp4"],"randomUrls":true,"fixedImg":true,"style":"filter-grid","typewriter":true,"enableHitokoto":true,"disablePictureInPicture":false,"socialStyle":"merge","playerUrl":"https://valaxy-theme-sakura.s3.bitiful.net/PV/Original PV Little love song MONGOL 800 cover by Amatsuki.mp4","waveTheme":"horizontal"},"navbar":[{"icon":"i-fa-fort-awesome","locale":"menu.home","link":"/"},{"icon":"i-line-md-folder-twotone","locale":"menu.categories","link":"/categories"},{"icon":"i-fa-archive","locale":"menu.archives","link":"/archives"},{"icon":"i-ri-rss-line","text":"RSS","link":"/atom.xml","target":"_blank"}],"navbarOptions":{"title":["Helltractor","Blog"],"animIn":"sakura-fade-in-left","animOut":"sakura-fade-out-left","showMarker":false,"offset":0,"enableHover":true,"tools":["toggleDark","search","search"],"hamburgerStyle":"uneven","subTitle":"夏日可畏 冬日可爱","invert":["home"],"autoHide":["home"]},"sidebar":[{"text":"🌈","locale":"menu.home","link":"/"},{"text":"🗂️","locale":"menu.archives","link":"/archives/"},{"text":"📂","locale":"menu.categories","link":"/categories/"},{"text":"🏷️","locale":"menu.tags","link":"/tags/"},{"text":"📝 留言板"},{"text":"📌","locale":"menu.about"}],"sidebarOptions":{"position":"left","offset":true,"initialState":false,"persistence":"session","enableOnDesktop":false,"showCounts":false},"postList":{"text":"Discovery","isImageReversed":true,"defaultImage":["https://www.dmoe.cc/random.php?random","https://img.xjh.me/random_img.php?random?type=bg&return=302"]},"pinnedPost":{"text":"START:DASH!!"},"footer":{"since":2024,"icon":{"animated":true,"url":"https://github.com/helltractor","title":"GitHub","enable":true,"name":"i-ri-github-line"},"powered":true},"tags":{"rainbow":true},"pagination":{"type":"infinite-scroll","animation":true,"infiniteScrollOptions":{"preload":true}},"scrollDamping":false,"scrollAnimation":true,"scrollIndicator":true,"scrollLock":false,"scrollToTop":true,"scrollDown":{"enable":true},"notice":{"message":"注定敢爱的人一生伤 --《月光》胡彦斌"},"postFooter":{"navigationMerge":true}},"build":{"ssgForPagination":false},"deploy":{},"runtimeConfig":{"addons":{"valaxy-addon-algolia":{"name":"valaxy-addon-algolia","enable":true,"options":{"appId":"4ZOLUZA8YK","apiKey":"03d1d46b4781384fe121f684cda3c6fd","indexName":"helltractor"},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-algolia@0.1.0_@algolia+client-search@5.23.3_search-insights@2.17.3_valaxy@_7bd0ef397402a7744c5f763a53219a64/node_modules/valaxy-addon-algolia","props":{},"pkg":{"name":"valaxy-addon-algolia","version":"0.1.0","description":"Algolia Search Box for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-algolia"},"keywords":["valaxy","addon","algolia"],"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"@docsearch/css":"^3.6.1","@docsearch/js":"^3.6.1"}}},"valaxy-addon-bangumi":{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://helltractor-bangumi.web.val.run","bilibiliUid":"480575647","bgmUid":"890723"},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-bangumi@0.2.2_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit@3.16.2_@types+m_cce850ab9ece7c8a629812a387b1f53e/node_modules/valaxy-addon-bangumi","props":{},"pkg":{"name":"valaxy-addon-bangumi","type":"module","version":"0.2.2","description":"Bangumi addon for Valaxy","repository":{"type":"git","url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-bangumi"},"keywords":["valaxy","addon","bangumi"],"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"bilibili-bangumi-component":"^0.3.1"}},"configFile":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-bangumi@0.2.2_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit@3.16.2_@types+m_cce850ab9ece7c8a629812a387b1f53e/node_modules/valaxy-addon-bangumi/valaxy.config.ts"},"valaxy-addon-lightgallery":{"name":"valaxy-addon-lightgallery","enable":true,"options":{},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-lightgallery@0.0.4_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit@3.16.2_@ty_aed4b52732364c98ad2604e49a35d6a0/node_modules/valaxy-addon-lightgallery","props":{},"pkg":{"name":"valaxy-addon-lightgallery","type":"module","version":"0.0.4","description":"Light Gallery for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-lightgallery"},"keywords":["valaxy","addon","lightgallery","gallery"],"main":"index.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"lightgallery":"2.7.2"}},"configFile":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-lightgallery@0.0.4_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit@3.16.2_@ty_aed4b52732364c98ad2604e49a35d6a0/node_modules/valaxy-addon-lightgallery/valaxy.config.ts"},"valaxy-addon-live2d":{"name":"valaxy-addon-live2d","enable":true,"global":true,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}},"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-live2d@0.3.0/node_modules/valaxy-addon-live2d","props":{},"pkg":{"name":"valaxy-addon-live2d","global":true,"version":"0.3.0","packageManager":"pnpm@9.5.0","description":"","repository":{"url":"git+https://github.com/valaxyjs/valaxy-addon-live2d.git"},"keywords":["valaxy","addon","valaxy-addon","live2d"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"cd dist && npm publish --access public","build":"tsx scripts/build.ts"},"dependencies":{"pixi-live2d-display":"^0.5.0-beta","pixi.js":"^7.4.2","stats.js":"^1.0.0","url":"^0.11.4"},"devDependencies":{"@types/lodash-es":"^4.17.12","@types/stats.js":"^0.17.3","consola":"^3.2.3","tsx":"^4.16.2","vue-tsc":"^2.0.28"}},"configFile":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-live2d@0.3.0/node_modules/valaxy-addon-live2d/valaxy.config.ts"},"valaxy-addon-meting":{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"1477727243","server":"netease","type":"song"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true},"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-meting@0.1.4/node_modules/valaxy-addon-meting","pkg":{"name":"valaxy-addon-meting","global":true,"version":"0.1.4","license":"MIT","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-meting","type":"git"},"keywords":["valaxy","addon","meting"]},"configFile":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-meting@0.1.4/node_modules/valaxy-addon-meting/valaxy.config.ts"},"valaxy-addon-vercount":{"name":"valaxy-addon-vercount","enable":true,"options":{"api":"cn"},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-vercount@0.0.6/node_modules/valaxy-addon-vercount","props":{},"pkg":{"name":"valaxy-addon-vercount","version":"0.0.6","description":"A Vercount API based counting plugin for Valaxy, serving as an alternative to Busuanzi counting","repository":"https://github.com/valaxyjs/valaxy-addon-vercount","keywords":["valaxy","addon","valaxy-addon","vercount","busuanzi","valaxy","addon","valaxy-addon","vercount","busuanzi"],"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"npm publish --access public"},"dependencies":{"peerjs":"^1.5.4","uuid":"^10.0.0"},"devDependencies":{"@types/uuid":"^10.0.0"}}},"valaxy-addon-waline":{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline-server-five-swart.vercel.app/","pageview":true,"comment":true},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-waline@0.2.1_typescript@5.7.3_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit_0767e79c6cede5bc6661d8be3ffb2401/node_modules/valaxy-addon-waline","props":{},"pkg":{"name":"valaxy-addon-waline","version":"0.2.1","description":"Waline Composition API for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-waline"},"keywords":["valaxy","addon","waline"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":">=0.22"},"dependencies":{"@waline/client":"3.4.1"}},"configFile":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-waline@0.2.1_typescript@5.7.3_valaxy@0.23.3_@babel+parser@7.27.0_@nuxt+kit_0767e79c6cede5bc6661d8be3ffb2401/node_modules/valaxy-addon-waline/valaxy.config.ts"},"valaxy-addon-hitokoto":{"name":"valaxy-addon-hitokoto","enable":true,"options":{},"global":false,"root":"/home/runner/work/helltractor.github.io/helltractor.github.io/node_modules/.pnpm/valaxy-addon-hitokoto@0.0.1/node_modules/valaxy-addon-hitokoto","props":{},"pkg":{"name":"valaxy-addon-hitokoto","version":"0.0.1","description":"Hitokoto Composition API for Valaxy","repository":"https://github.com/valaxyjs/valaxy-addon-hitokoto","keywords":["valaxy","addon","valaxy-addon","hitokoto"],"main":"index.ts","types":"index.d.ts"}}},"redirects":{"useVueRouter":true,"redirectRoutes":[{"path":"/foo","redirect":"/about"}]}},"modules":{"rss":{"enable":true,"fullText":false}},"features":{"katex":true},"vite":{"build":{"emptyOutDir":true,"rollupOptions":{"external":[],"preserveEntrySignatures":"allow-extension","output":{"assetFileNames":"assets/[name].[hash].[ext]","entryFileNames":"assets/[name].[hash].js"}}},"optimizeDeps":{"include":["lightgallery/vue/LightGalleryVue.umd.min.js","@pixi/utils","@pixi/graphics","@pixi/settings","@pixi/app","@pixi/core","@pixi/extract","@pixi/ticker","@waline/client/component","interactjs","d3","lodash-es"]},"plugins":[{"name":"valaxy-theme-sakura","enforce":"pre"}]},"devtools":true,"vue":{"isCustomElement":[null,null]},"unocss":{"safelist":["i-fa-fort-awesome","i-line-md-folder-twotone","i-fa-archive","i-ri-rss-line","i-fa6-solid:bullhorn","i-fa-chevron-down","i-ri-translate","i-line-md-sunny-outline-to-moon-loop-transition","i-line-md-moon-alt-to-sunny-outline-loop-transition","i-fa-envira","i-fa-anchor"]},"addons":[{"name":"valaxy-addon-algolia","enable":true,"options":{"appId":"4ZOLUZA8YK","apiKey":"03d1d46b4781384fe121f684cda3c6fd","indexName":"helltractor"}},{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://helltractor-bangumi.web.val.run","bilibiliUid":"480575647","bgmUid":"890723"}},{"name":"valaxy-addon-lightgallery","enable":true},{"name":"valaxy-addon-live2d","enable":true,"global":false,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}}},{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"1477727243","server":"netease","type":"song"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true}},{"name":"valaxy-addon-vercount","enable":true,"options":{"api":"cn"}},{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline-server-five-swart.vercel.app/","pageview":true,"comment":true}},{"name":"valaxy-addon-vercount","enable":true},{"name":"valaxy-addon-hitokoto","enable":true}],"fuse":{"extendKeys":["cover","date"]}}',fv='{"userRoot":"/home/runner/work/helltractor.github.io/helltractor.github.io"}';function yl(r){return JSON.parse(r)}const mv=Symbol("valaxy:config"),gv=bt(yl(pv)),Xw=Symbol("ValaxyData"),Yw=bt(yl(fv));gv.value=yl(pv);Yw.value=yl(fv);function qw(){return ue(()=>gv.value)}function _o(){const r=Vu(mv);if(!r)throw new Error("[Valaxy] site config not properly injected in app");return r}function Kw(){return _o()}function dr(){const r=_o();return ue(()=>r.value.siteConfig)}function Jw(){const r=_o();return ue(()=>r.value.themeConfig)}function _l(){const r=_o();return ue(()=>r.value.runtimeConfig)}function Qw(){const r=dr(),e=wl(),{locale:t}=ni(),i=ue(()=>e.value[`title_${t.value}`]||e.value.title),n=ue(()=>e.value.url||r.value.url),s=ue(()=>e.value.excerpt||e.value.description||r.value.description);Gw({description:s,ogDescription:s,ogLocale:ue(()=>t.value||e.value.lang||r.value.lang||"en"),ogLocaleAlternate:ue(()=>r.value.languages.filter(o=>o!==t.value)),ogSiteName:ue(()=>r.value.title),ogTitle:ue(()=>e.value.title||r.value.title),ogImage:ue(()=>e.value.ogImage||e.value.cover||r.value.favicon),ogType:"website",ogUrl:n}),Vw([jw({name:r.value.author.name,url:n.value,image:r.value.author.avatar,sameAs:r.value.social.map(o=>o.link)}),zw({name:i.value,datePublished:ue(()=>e.value.date),dateModified:ue(()=>e.value.updated)}),Hw()]),Ww(),tT()}const Zw="0.23.3",eT={url:"https://github.com/YunYouJun/valaxy"},Fh={version:Zw,repository:eT};function tT(){var n;const{locale:r}=ni(),e=wl(),t=dr(),i=ue(()=>e.value[`title_${r.value}`]||e.value.title);yo({title:i,titleTemplate:s=>e.value.titleTemplate||(s?`${s} - ${t.value.title}`:t.value.title),link:[{rel:"icon",href:t.value.favicon,type:(n=t.value.favicon)!=null&&n.endsWith("svg")?"image/svg+xml":"image/png"}],meta:[ue(()=>({name:"description",content:e.value.description||t.value.description})),{name:"generator",content:`Valaxy ${Fh.version}`}],templateParams:{schemaOrg:{host:t.value.url}},script:[{id:"check-mac-os",innerHTML:"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))",async:!0}]})}const vv=ul("app",()=>{const r=dr(),e=Jw(),{isDark:t,toggleDark:i,toggleDarkWithTransition:n,themeColor:s}=MT(e.value.valaxyDarkOptions),o=OT(),a=ve(!0),l=ue(()=>r.value.languages.length>1);return{isMobile:o,isDark:t,showToggleLocale:l,themeColor:s,toggleDark:i,toggleDarkWithTransition:n,showLoading:a}}),yv=ul("routerStore",()=>({router:cl()})),ld=ul("site",()=>{const e=yv().router,t=ve(1),i=ue(()=>{const n=FT().value;return t.value&&n,n});return e&&e.isReady().then(()=>{}),{postList:i}});function WD(r){return r.children}function rT(r,e=[]){return ue(()=>{const t=oe(r);e.length||(e=ld().postList);const i={name:"All",total:e.length,children:new Map([["Uncategorized",{name:"Uncategorized",total:0,children:new Map}]])},n=i.children.get("Uncategorized");if(e.forEach(s=>{if(s.categories)if(Array.isArray(s.categories)){const o=s.categories.length;let a=i,l=a;s.categories.forEach((c,d)=>{a.total+=1,a=a.children.get(c),a||(a={name:c,total:0,children:new Map},l.children.set(c,a)),d===o-1&&(a.children.set(s.path,s),a.total+=1),l=a})}else{const o=s.categories,a=i.children.get(o);a?(a.total+=1,a.children.set(s.path,s)):i.children.set(o,{name:o,total:1,children:new Map([[s.path,s]])})}else n.total+=1,n.children.set(s.path,s)}),n.total===0&&i.children.delete("Uncategorized"),t){let s=i;const o=t.split("/");for(const a of o){const l=s.children.get(a);if(l&&l.children)s=l;else return console.warn(`Do not have category: ${r}`),i}return s}else return i})}function bl(r){return Dg()?(Og(r),!0):!1}const Ql=new WeakMap,iT=(...r)=>{var e;const t=r[0],i=(e=ps())==null?void 0:e.proxy;if(i==null&&!zu())throw new Error("injectLocal must be called in setup");return i&&Ql.has(i)&&t in Ql.get(i)?Ql.get(i)[t]:Vu(...r)},bo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _v=r=>r!=null,nT=Object.prototype.toString,sT=r=>nT.call(r)==="[object Object]",Sr=()=>{};function bv(...r){if(r.length!==1)return Yb(...r);const e=r[0];return typeof e=="function"?Wu(qb(()=>({get:e,set:Sr}))):ve(e)}function cd(r,e){function t(...i){return new Promise((n,s)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(n).catch(s)})}return t}const xv=r=>r();function oT(r,e={}){let t,i,n=Sr;const s=l=>{clearTimeout(l),n(),n=Sr};let o;return l=>{const c=lt(r),d=lt(e.maxWait);return t&&s(t),c<=0||d!==void 0&&d<=0?(i&&(s(i),i=null),Promise.resolve(l())):new Promise((p,m)=>{n=e.rejectOnCancel?m:p,o=l,d&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,p(o())},d)),t=setTimeout(()=>{i&&s(i),i=null,p(l())},c)})}}function aT(...r){let e=0,t,i=!0,n=Sr,s,o,a,l,c;!Hu(r[0])&&typeof r[0]=="object"?{delay:o,trailing:a=!0,leading:l=!0,rejectOnCancel:c=!1}=r[0]:[o,a=!0,l=!0,c=!1]=r;const d=()=>{t&&(clearTimeout(t),t=void 0,n(),n=Sr)};return m=>{const g=lt(o),y=Date.now()-e,x=()=>s=m();return d(),g<=0?(e=Date.now(),x()):(y>g&&(l||!i)?(e=Date.now(),x()):a&&(s=new Promise((w,T)=>{n=c?T:w,t=setTimeout(()=>{e=Date.now(),i=!0,w(x()),d()},Math.max(0,g-y))})),!l&&!t&&(t=setTimeout(()=>i=!0,g)),i=!1,s)}}function lT(r=xv,e={}){const{initialState:t="active"}=e,i=bv(t==="active");function n(){i.value=!1}function s(){i.value=!0}const o=(...a)=>{i.value&&r(...a)};return{isActive:Wu(i),pause:n,resume:s,eventFilter:o}}function _p(r){return r.endsWith("rem")?Number.parseFloat(r)*16:Number.parseFloat(r)}function qs(r){return Array.isArray(r)?r:[r]}function wv(r){return ps()}function cT(r,e=200,t={}){return cd(oT(e,t),r)}function hT(r,e=200,t=!1,i=!0,n=!1){return cd(aT(e,t,i,n),r)}function uT(r,e,t={}){const{eventFilter:i=xv,...n}=t;return dt(r,cd(i,e),n)}function dT(r,e,t={}){const{eventFilter:i,initialState:n="active",...s}=t,{eventFilter:o,pause:a,resume:l,isActive:c}=lT(i,{initialState:n});return{stop:uT(r,e,{...s,eventFilter:o}),pause:a,resume:l,isActive:c}}function xo(r,e=!0,t){wv()?rr(r,t):e?r():Zr(r)}function pT(r,e){wv()&&ll(r,e)}function fT(r=!1,e={}){const{truthyValue:t=!0,falsyValue:i=!1}=e,n=Hu(r),s=bt(r);function o(a){if(arguments.length)return s.value=a,s.value;{const l=lt(t);return s.value=s.value===l?lt(i):l,s.value}}return n?o:[s,o]}function mT(r,e,t){return dt(r,e,{...t,immediate:!0})}const ti=bo?window:void 0,gT=bo?window.document:void 0;function Er(r){var e;const t=lt(r);return(e=t==null?void 0:t.$el)!=null?e:t}function Xr(...r){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},i=(a,l,c,d)=>(a.addEventListener(l,c,d),()=>a.removeEventListener(l,c,d)),n=ue(()=>{const a=qs(lt(r[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),s=mT(()=>{var a,l;return[(l=(a=n.value)==null?void 0:a.map(c=>Er(c)))!=null?l:[ti].filter(c=>c!=null),qs(lt(n.value?r[1]:r[0])),qs(oe(n.value?r[2]:r[1])),lt(n.value?r[3]:r[2])]},([a,l,c,d])=>{if(t(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const p=sT(d)?{...d}:d;e.push(...a.flatMap(m=>l.flatMap(g=>c.map(y=>i(m,g,y,p)))))},{flush:"post"}),o=()=>{s(),t()};return bl(t),o}function vT(){const r=bt(!1),e=ps();return e&&rr(()=>{r.value=!0},e),r}function xl(r){const e=vT();return ue(()=>(e.value,!!r()))}function yT(r,e,t={}){const{window:i=ti,...n}=t;let s;const o=xl(()=>i&&"MutationObserver"in i),a=()=>{s&&(s.disconnect(),s=void 0)},l=ue(()=>{const m=lt(r),g=qs(m).map(Er).filter(_v);return new Set(g)}),c=dt(()=>l.value,m=>{a(),o.value&&m.size&&(s=new MutationObserver(e),m.forEach(g=>s.observe(g,n)))},{immediate:!0,flush:"post"}),d=()=>s==null?void 0:s.takeRecords(),p=()=>{c(),a()};return bl(p),{isSupported:o,stop:p,takeRecords:d}}const _T=Symbol("vueuse-ssr-width");function bT(){const r=zu()?iT(_T,null):null;return typeof r=="number"?r:void 0}function $i(r,e={}){const{window:t=ti,ssrWidth:i=bT()}=e,n=xl(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function"),s=bt(typeof i=="number"),o=bt(),a=bt(!1),l=c=>{a.value=c.matches};return al(()=>{if(s.value){s.value=!n.value;const c=lt(r).split(",");a.value=c.some(d=>{const p=d.includes("not all"),m=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),g=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let y=!!(m||g);return m&&y&&(y=i>=_p(m[1])),g&&y&&(y=i<=_p(g[1])),p?!y:y});return}n.value&&(o.value=t.matchMedia(lt(r)),a.value=o.value.matches)}),Xr(o,"change",l,{passive:!0}),ue(()=>a.value)}const Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zo="__vueuse_ssr_handlers__",xT=wT();function wT(){return zo in Ho||(Ho[zo]=Ho[zo]||{}),Ho[zo]}function Tv(r,e){return xT[r]||e}function TT(r){return $i("(prefers-color-scheme: dark)",r)}function ST(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const ET={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},bp="vueuse-storage";function hd(r,e,t,i={}){var n;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:d,window:p=ti,eventFilter:m,onError:g=Q=>{console.error(Q)},initOnMounted:y}=i,x=(d?bt:ve)(typeof e=="function"?e():e),w=ue(()=>lt(r));if(!t)try{t=Tv("getDefaultStorage",()=>{var Q;return(Q=ti)==null?void 0:Q.localStorage})()}catch(Q){g(Q)}if(!t)return x;const T=lt(e),E=ST(T),P=(n=i.serializer)!=null?n:ET[E],{pause:I,resume:A}=dT(x,()=>b(x.value),{flush:s,deep:o,eventFilter:m});dt(w,()=>H(),{flush:s}),p&&a&&xo(()=>{t instanceof Storage?Xr(p,"storage",H,{passive:!0}):Xr(p,bp,W),y&&H()}),y||H();function F(Q,N){if(p){const G={key:w.value,oldValue:Q,newValue:N,storageArea:t};p.dispatchEvent(t instanceof Storage?new StorageEvent("storage",G):new CustomEvent(bp,{detail:G}))}}function b(Q){try{const N=t.getItem(w.value);if(Q==null)F(N,null),t.removeItem(w.value);else{const G=P.write(Q);N!==G&&(t.setItem(w.value,G),F(N,G))}}catch(N){g(N)}}function B(Q){const N=Q?Q.newValue:t.getItem(w.value);if(N==null)return l&&T!=null&&t.setItem(w.value,P.write(T)),T;if(!Q&&c){const G=P.read(N);return typeof c=="function"?c(G,T):E==="object"&&!Array.isArray(G)?{...T,...G}:G}else return typeof N!="string"?N:P.read(N)}function H(Q){if(!(Q&&Q.storageArea!==t)){if(Q&&Q.key==null){x.value=T;return}if(!(Q&&Q.key!==w.value)){I();try{(Q==null?void 0:Q.newValue)!==P.write(x.value)&&(x.value=B(Q))}catch(N){g(N)}finally{Q?Zr(A):A()}}}}function W(Q){H(Q.detail)}return x}const AT="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function CT(r={}){const{selector:e="html",attribute:t="class",initialValue:i="auto",window:n=ti,storage:s,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:c,disableTransition:d=!0}=r,p={auto:"",light:"light",dark:"dark",...r.modes||{}},m=TT({window:n}),g=ue(()=>m.value?"dark":"light"),y=l||(o==null?bv(i):hd(o,i,s,{window:n,listenToStorageChanges:a})),x=ue(()=>y.value==="auto"?g.value:y.value),w=Tv("updateHTMLAttrs",(I,A,F)=>{const b=typeof I=="string"?n==null?void 0:n.document.querySelector(I):Er(I);if(!b)return;const B=new Set,H=new Set;let W=null;if(A==="class"){const N=F.split(/\s/g);Object.values(p).flatMap(G=>(G||"").split(/\s/g)).filter(Boolean).forEach(G=>{N.includes(G)?B.add(G):H.add(G)})}else W={key:A,value:F};if(B.size===0&&H.size===0&&W===null)return;let Q;d&&(Q=n.document.createElement("style"),Q.appendChild(document.createTextNode(AT)),n.document.head.appendChild(Q));for(const N of B)b.classList.add(N);for(const N of H)b.classList.remove(N);W&&b.setAttribute(W.key,W.value),d&&(n.getComputedStyle(Q).opacity,document.head.removeChild(Q))});function T(I){var A;w(e,t,(A=p[I])!=null?A:I)}function E(I){r.onChanged?r.onChanged(I,T):T(I)}dt(x,E,{flush:"post",immediate:!0}),xo(()=>E(x.value));const P=ue({get(){return c?y.value:x.value},set(I){y.value=I}});return Object.assign(P,{store:y,system:g,state:x})}function PT(r={}){const{valueDark:e="dark",valueLight:t=""}=r,i=CT({...r,onChanged:(o,a)=>{var l;r.onChanged?(l=r.onChanged)==null||l.call(r,o==="dark",a,o):a(o)},modes:{dark:e,light:t}}),n=ue(()=>i.system.value);return ue({get(){return i.value==="dark"},set(o){const a=o?"dark":"light";n.value===a?i.value="auto":i.value=a}})}function RT(r,e,t={}){const{window:i=ti,...n}=t;let s;const o=xl(()=>i&&"ResizeObserver"in i),a=()=>{s&&(s.disconnect(),s=void 0)},l=ue(()=>{const p=lt(r);return Array.isArray(p)?p.map(m=>Er(m)):[Er(p)]}),c=dt(l,p=>{if(a(),o.value&&i){s=new ResizeObserver(e);for(const m of p)m&&s.observe(m,n)}},{immediate:!0,flush:"post"}),d=()=>{a(),c()};return bl(d),{isSupported:o,stop:d}}function XD(r,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:n=!0,immediate:s=!0,updateTiming:o="sync"}=e,a=bt(0),l=bt(0),c=bt(0),d=bt(0),p=bt(0),m=bt(0),g=bt(0),y=bt(0);function x(){const T=Er(r);if(!T){t&&(a.value=0,l.value=0,c.value=0,d.value=0,p.value=0,m.value=0,g.value=0,y.value=0);return}const E=T.getBoundingClientRect();a.value=E.height,l.value=E.bottom,c.value=E.left,d.value=E.right,p.value=E.top,m.value=E.width,g.value=E.x,y.value=E.y}function w(){o==="sync"?x():o==="next-frame"&&requestAnimationFrame(()=>x())}return RT(r,w),dt(()=>Er(r),T=>!T&&w()),yT(r,w,{attributeFilter:["style","class"]}),n&&Xr("scroll",w,{capture:!0,passive:!0}),i&&Xr("resize",w,{passive:!0}),xo(()=>{s&&w()}),{height:a,bottom:l,left:c,right:d,top:p,width:m,x:g,y,update:w}}function YD(r,e,t={}){const{root:i,rootMargin:n="0px",threshold:s=0,window:o=ti,immediate:a=!0}=t,l=xl(()=>o&&"IntersectionObserver"in o),c=ue(()=>{const y=lt(r);return qs(y).map(Er).filter(_v)});let d=Sr;const p=bt(a),m=l.value?dt(()=>[c.value,Er(i),p.value],([y,x])=>{if(d(),!p.value||!y.length)return;const w=new IntersectionObserver(e,{root:Er(x),rootMargin:n,threshold:s});y.forEach(T=>T&&w.observe(T)),d=()=>{w.disconnect(),d=Sr}},{immediate:a,flush:"post"}):Sr,g=()=>{d(),m(),p.value=!1};return bl(g),{isSupported:l,isActive:p,pause(){d(),p.value=!1},resume(){p.value=!0},stop:g}}const xp=1;function IT(r,e={}){const{throttle:t=0,idle:i=200,onStop:n=Sr,onScroll:s=Sr,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:l="auto",window:c=ti,onError:d=b=>{console.error(b)}}=e,p=bt(0),m=bt(0),g=ue({get(){return p.value},set(b){x(b,void 0)}}),y=ue({get(){return m.value},set(b){x(void 0,b)}});function x(b,B){var H,W,Q,N;if(!c)return;const G=lt(r);if(!G)return;(Q=G instanceof Document?c.document.body:G)==null||Q.scrollTo({top:(H=lt(B))!=null?H:y.value,left:(W=lt(b))!=null?W:g.value,behavior:lt(l)});const X=((N=G==null?void 0:G.document)==null?void 0:N.documentElement)||(G==null?void 0:G.documentElement)||G;g!=null&&(p.value=X.scrollLeft),y!=null&&(m.value=X.scrollTop)}const w=bt(!1),T=cp({left:!0,right:!1,top:!0,bottom:!1}),E=cp({left:!1,right:!1,top:!1,bottom:!1}),P=b=>{w.value&&(w.value=!1,E.left=!1,E.right=!1,E.top=!1,E.bottom=!1,n(b))},I=cT(P,t+i),A=b=>{var B;if(!c)return;const H=((B=b==null?void 0:b.document)==null?void 0:B.documentElement)||(b==null?void 0:b.documentElement)||Er(b),{display:W,flexDirection:Q,direction:N}=getComputedStyle(H),G=N==="rtl"?-1:1,X=H.scrollLeft;E.left=X<p.value,E.right=X>p.value;const se=Math.abs(X*G)<=(o.left||0),M=Math.abs(X*G)+H.clientWidth>=H.scrollWidth-(o.right||0)-xp;W==="flex"&&Q==="row-reverse"?(T.left=M,T.right=se):(T.left=se,T.right=M),p.value=X;let L=H.scrollTop;b===c.document&&!L&&(L=c.document.body.scrollTop),E.top=L<m.value,E.bottom=L>m.value;const k=Math.abs(L)<=(o.top||0),z=Math.abs(L)+H.clientHeight>=H.scrollHeight-(o.bottom||0)-xp;W==="flex"&&Q==="column-reverse"?(T.top=z,T.bottom=k):(T.top=k,T.bottom=z),m.value=L},F=b=>{var B;if(!c)return;const H=(B=b.target.documentElement)!=null?B:b.target;A(H),w.value=!0,I(b),s(b)};return Xr(r,"scroll",t?hT(F,t,!0,!1):F,a),xo(()=>{try{const b=lt(r);if(!b)return;A(b)}catch(b){d(b)}}),Xr(r,"scrollend",P,a),{x:g,y,isScrolling:w,arrivedState:T,directions:E,measure(){const b=lt(r);c&&b&&A(b)}}}function qD(r,e=Sr,t={}){const{immediate:i=!0,manual:n=!1,type:s="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:c,defer:d,document:p=gT,attrs:m={}}=t,g=bt(null);let y=null;const x=E=>new Promise((P,I)=>{const A=H=>(g.value=H,P(H),H);if(!p){P(!1);return}let F=!1,b=p.querySelector(`script[src="${lt(r)}"]`);b?b.hasAttribute("data-loaded")&&A(b):(b=p.createElement("script"),b.type=s,b.async=o,b.src=lt(r),d&&(b.defer=d),a&&(b.crossOrigin=a),c&&(b.noModule=c),l&&(b.referrerPolicy=l),Object.entries(m).forEach(([H,W])=>b==null?void 0:b.setAttribute(H,W)),F=!0);const B={passive:!0};Xr(b,"error",H=>I(H),B),Xr(b,"abort",H=>I(H),B),Xr(b,"load",()=>{b.setAttribute("data-loaded","true"),e(b),A(b)},B),F&&(b=p.head.appendChild(b)),E||A(b)}),w=(E=!0)=>(y||(y=x(E)),y),T=()=>{if(!p)return;y=null,g.value&&(g.value=null);const E=p.querySelector(`script[src="${lt(r)}"]`);E&&p.head.removeChild(E)};return i&&!n&&xo(w),n||pT(T),{scriptTag:g,load:w,unload:T}}function kT(r={}){const{window:e=ti,...t}=r;return IT(e,t)}function wl(){const r=Pn();return ue(()=>r.meta.frontmatter||{})}function KD(){const r=dr(),e=Pn();return ue(()=>((r.value.url.endsWith("/")?r.value.url.slice(0,-1):r.value.url)||bo&&window.location.origin)+e.path)}function MT(r={}){const e=PT(r.useDarkOptions),t=fT(e),i=ue(()=>{var s,o;return e.value?((s=r.themeColor)==null?void 0:s.dark)||"#000":((o=r.themeColor)==null?void 0:o.light)||"#fff"});r.circleTransition&&St(()=>Promise.resolve({}),__vite__mapDeps([0]));function n(s,o={}){if(!document.startViewTransition){t();return}const a=s.clientX,l=s.clientY,c=Math.hypot(Math.max(a,innerWidth-a),Math.max(l,innerHeight-l));document.startViewTransition(()=>{t()}).ready.then(()=>{const p=[`circle(0px at ${a}px ${l}px)`,`circle(${c}px at ${a}px ${l}px)`];document.documentElement.animate({clipPath:e.value?p.reverse():p},{duration:o.duration||300,easing:o.easing||"ease-in",pseudoElement:e.value?"::view-transition-old(root)":"::view-transition-new(root)"})})}return{isDark:e,themeColor:i,toggleDark:t,toggleDarkWithTransition:n}}function DT(){const r=$i("(max-width: 639px)"),e=$i("(min-width: 640px)"),t=$i("(min-width: 768px)"),i=$i("(min-width: 1024px)"),n=$i("(min-width: 1280px)"),s=$i("(min-width: 1536px)");return{isXs:r,isSm:e,isMd:t,isLg:i,isXl:n,is2xl:s}}function Sv(r){const e=Pn();return ue(()=>{var t;return(t=e.meta)==null?void 0:t.layout})}function OT(){return $i("(max-width: 768px)")}function LT(){const{availableLocales:r,locale:e}=ni(),t=hd("valaxy-locale",e.value);return ei.locale(e.value==="zh-CN"?"zh-cn":"en"),{lang:t,toggleLocales:()=>{const n=r;e.value=n[(n.indexOf(e.value)+1)%n.length],t.value=e.value,ei.locale(e.value==="zh-CN"?"zh-cn":"en"),bo&&document.documentElement.setAttribute("lang",e.value)}}}function BT(){const e=yv().router;return ue(()=>{const t=["/:..all","/:all(.*)*","/","/:path(.*)"];return e.getRoutes().filter(n=>n.name).filter(n=>n.meta).filter(n=>n.meta.frontmatter).filter(n=>n.path&&!t.includes(n.path)).map(n=>Object.assign({path:n.path,excerpt:n.meta.excerpt},n.meta.frontmatter||{}))})}function FT(r={}){const e=BT();return ue(()=>{const t=e.value.filter(s=>{var o,a;return((o=s.path)==null?void 0:o.startsWith("/posts"))&&!((a=s.path)!=null&&a.endsWith(".html"))&&s.date&&(!r.type||s.type===r.type)&&(!s.hide||s.hide==="index")}),i=yp(t.filter(s=>s.top)).sort((s,o)=>o.top-s.top),n=yp(t.filter(s=>!s.top));return i.concat(n)})}function NT(){const r=ld();return ue(()=>{const e=new Map;return r.postList.forEach(t=>{if(t.tags){let i;typeof t.tags=="string"?i=[t.tags]:i=t.tags,i.forEach(n=>{if(e.has(n)){const s=e.get(n);e.set(n,{...s,count:s.count+1})}else e.set(n,{count:1})})}}),e})}function $T(r={offset:100}){if(!bo)return{percentage:ve(0),show:ve(!1)};const{y:e}=kT(),t=ue(()=>e.value/(document.body.scrollHeight-window.innerHeight)),i=ue(()=>e.value>r.offset);return{percentage:t,show:i,backToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}}function JD(r){return r}const UT={};function GT(r,e){const t=ur("RouterView");return ie(),at(t)}const jT=Et(UT,[["render",GT]]),wp={404:()=>St(()=>import("./404.CUzunXdm.js"),__vite__mapDeps([1,2,3,4,5,6,7,8])),default:jT,empty:()=>St(()=>import("./empty.D7nZ5upe.js"),__vite__mapDeps([9,2,3,4])),post:()=>St(()=>import("./post.KfBjDM2d.js"),__vite__mapDeps([10,2,3,4])),anime:()=>St(()=>import("./anime.BteE34Nm.js"),__vite__mapDeps([11,12,13,2,3,4,14,15,16,5,7,6,17])),archives:()=>St(()=>import("./archives.nWcGVzax.js"),__vite__mapDeps([18,12,13,2,3,4,14,6,5,7,19])),categories:()=>St(()=>import("./categories.CYb1merD.js"),__vite__mapDeps([20,12,13,2,3,4,14,21,22,6,23,24,5,7,25])),comment:()=>St(()=>import("./comment.Dkb_IpTW.js"),__vite__mapDeps([26,12,13,2,3,4,14,27,5,7,6,28])),home:()=>St(()=>import("./home.CpUR7HCV.js"),__vite__mapDeps([29,2,3,4,13,21,22,6,23,24,5,27,7,30])),links:()=>St(()=>import("./links.CVKdWIwj.js"),__vite__mapDeps([31,12,13,2,3,4,14,5,7,6,32])),post:()=>St(()=>import("./post.DKt0NvuP.js"),__vite__mapDeps([33,12,13,2,3,4,14,6,34,5,22,23,7,35])),search:()=>St(()=>import("./search.CiFXv6E0.js"),__vite__mapDeps([36,2,3,4,5,7,6,37])),tags:()=>St(()=>import("./tags.DTZZsvay.js"),__vite__mapDeps([38,12,13,2,3,4,14,21,22,6,23,24,5,7,39]))};function HT(r){function e(t,i=!0){return t.map(n=>{var s,o,a,l,c,d;if(((s=n.children)==null?void 0:s.length)>0&&(n.children=e(n.children,!1)),i){if(!n.component&&((o=n.children)==null?void 0:o.find(m=>{var g;return(m.path===""||m.path==="/")&&((g=m.meta)==null?void 0:g.isLayout)})))return n;if(((a=n.meta)==null?void 0:a.layout)!==!1)return{path:n.path,component:wp[((l=n.meta)==null?void 0:l.layout)||"default"],children:n.path==="/"?[n]:[{...n,path:""}],meta:{isLayout:!0}}}return(c=n.meta)!=null&&c.layout?{path:n.path,component:wp[(d=n.meta)==null?void 0:d.layout],children:[{...n,path:""}],meta:{isLayout:!0}}:n})}return e(r)}async function Ev(r,e={}){const t=e.document||r.resolvedOptions.document;if(!t||!r.dirty)return;const i={shouldRender:!0,tags:[]};if(await r.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return r._domUpdatePromise||(r._domUpdatePromise=new Promise(async n=>{var g;const s=new Map,o=new Promise(y=>{r.resolveTags().then(x=>{y(x.map(w=>{const T=s.get(w._d)||0,E={tag:w,id:(T?`${w._d}:${T}`:w._d)||mp(w),shouldRender:!0};return w._d&&Wg(w._d)&&s.set(w._d,T+1),E}))})});let a=r._dom;if(!a){a={title:t.title,elMap:new Map().set("htmlAttrs",t.documentElement).set("bodyAttrs",t.body)};for(const y of["body","head"]){const x=(g=t[y])==null?void 0:g.children;for(const w of x){const T=w.tagName.toLowerCase();if(!hp.has(T))continue;const E=Xg({tag:T,props:{}},{innerHTML:w.innerHTML,...w.getAttributeNames().reduce((P,I)=>(P[I]=w.getAttribute(I),P),{})||{}});if(E.key=w.getAttribute("data-hid")||void 0,E._d=Mh(E)||mp(E),a.elMap.has(E._d)){let P=1,I=E._d;for(;a.elMap.has(I);)I=`${E._d}:${P++}`;a.elMap.set(I,w)}else a.elMap.set(E._d,w)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(y,x,w){const T=`${y}:${x}`;a.sideEffects[T]=w,delete a.pendingSideEffects[T]}function c({id:y,$el:x,tag:w}){const T=w.tag.endsWith("Attrs");a.elMap.set(y,x),T||(w.textContent&&w.textContent!==x.textContent&&(x.textContent=w.textContent),w.innerHTML&&w.innerHTML!==x.innerHTML&&(x.innerHTML=w.innerHTML),l(y,"el",()=>{x==null||x.remove(),a.elMap.delete(y)}));for(const E in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,E))continue;const P=w.props[E];if(E.startsWith("on")&&typeof P=="function"){const A=x==null?void 0:x.dataset;if(A&&A[`${E}fired`]){const F=E.slice(0,-5);P.call(x,new Event(F.substring(2)))}x.getAttribute(`data-${E}`)!==""&&((w.tag==="bodyAttrs"?t.defaultView:x).addEventListener(E.substring(2),P.bind(x)),x.setAttribute(`data-${E}`,""));continue}const I=`attr:${E}`;if(E==="class"){if(!P)continue;for(const A of P)T&&l(y,`${I}:${A}`,()=>x.classList.remove(A)),!x.classList.contains(A)&&x.classList.add(A)}else if(E==="style"){if(!P)continue;for(const[A,F]of P)l(y,`${I}:${A}`,()=>{x.style.removeProperty(A)}),x.style.setProperty(A,F)}else P!==!1&&P!==null&&(x.getAttribute(E)!==P&&x.setAttribute(E,P===!0?"":String(P)),T&&l(y,I,()=>x.removeAttribute(E)))}}const d=[],p={bodyClose:void 0,bodyOpen:void 0,head:void 0},m=await o;for(const y of m){const{tag:x,shouldRender:w,id:T}=y;if(w){if(x.tag==="title"){t.title=x.textContent,l("title","",()=>t.title=a.title);continue}y.$el=y.$el||a.elMap.get(T),y.$el?c(y):hp.has(x.tag)&&d.push(y)}}for(const y of d){const x=y.tag.tagPosition||"head";y.$el=t.createElement(y.tag.tag),c(y),p[x]=p[x]||t.createDocumentFragment(),p[x].appendChild(y.$el)}for(const y of m)await r.hooks.callHook("dom:renderTag",y,t,l);p.head&&t.head.appendChild(p.head),p.bodyOpen&&t.body.insertBefore(p.bodyOpen,t.body.firstChild),p.bodyClose&&t.body.appendChild(p.bodyClose);for(const y in a.pendingSideEffects)a.pendingSideEffects[y]();r._dom=a,await r.hooks.callHook("dom:rendered",{renders:m}),n()}).finally(()=>{r._domUpdatePromise=void 0,r.dirty=!1})),r._domUpdatePromise}function zT(r={}){var i,n,s;const e=((i=r.domOptions)==null?void 0:i.render)||Ev;r.document=r.document||(typeof window<"u"?document:void 0);const t=((s=(n=r.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return Fw({...r,plugins:[...r.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[t?JSON.parse(t):!1,...r.init||[]]})}function VT(r,e){let t=0;return()=>{const i=++t;e(()=>{t===i&&r()})}}function WT(r={}){const e=zT({domOptions:{render:VT(()=>Ev(e),t=>setTimeout(t,0))},...r});return e.install=$w(e),e}function XT(r){return document.readyState==="loading"?new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>e(r))}):Promise.resolve(r)}const YT=Ve({setup(r,{slots:e}){const t=ve(!1);return rr(()=>t.value=!0),()=>t.value?e.default&&e.default({}):e.placeholder&&e.placeholder({})}});function qT(r){try{return JSON.parse(r||"{}")}catch(e){return console.error("[SSG] On state deserialization -",e,r),{}}}function KT(r,e,t,i){const{transformState:n,registerComponents:s=!0,useHead:o=!0,rootContainer:a="#app"}={};async function l(c=!1,d){const p=Lg(r);let m;o&&p.use(m=WT());const g=ix({history:nx(e.base),...e}),{routes:y}=e;s&&p.component("ClientOnly",YT);const x=[],E={app:p,head:m,isClient:!0,router:g,routes:y,onSSRAppRendered:()=>{},triggerOnSSRAppRendered:()=>Promise.all(x.map(F=>F())),initialState:{},transformState:n,routePath:d};await XT(),E.initialState=(n==null?void 0:n(window.__INITIAL_STATE__||{}))||qT(window.__INITIAL_STATE__),await(t==null?void 0:t(E)),p.use(g);let P,I=!0;g.beforeEach((F,b,B)=>{(I||P&&P===F.path)&&(I=!1,P=F.path,F.meta.state=E.initialState),B()});const A=E.initialState;return{...E,initialState:A}}return(async()=>{const{app:c,router:d}=await l();await d.isReady(),c.mount(a,!0)})(),l}var Tp;const Zi=typeof window<"u",JT=r=>typeof r=="function",QT=r=>typeof r=="string",Fa=()=>{},Sp=Zi&&((Tp=window==null?void 0:window.navigator)==null?void 0:Tp.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ar(r){return typeof r=="function"?r():oe(r)}function Av(r,e){function t(...i){return new Promise((n,s)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(n).catch(s)})}return t}const Cv=r=>r();function ZT(r,e=!0,t=!0,i=!1){let n=0,s,o=!0,a=Fa,l;const c=()=>{s&&(clearTimeout(s),s=void 0,a(),a=Fa)};return p=>{const m=Ar(r),g=Date.now()-n,y=()=>l=p();return c(),m<=0?(n=Date.now(),y()):(g>m&&(t||!o)?(n=Date.now(),y()):e&&(l=new Promise((x,w)=>{a=i?w:x,s=setTimeout(()=>{n=Date.now(),o=!0,x(y()),c()},Math.max(0,m-g))})),!t&&!s&&(s=setTimeout(()=>o=!0,m)),o=!1,l)}}function e1(r=Cv){const e=ve(!0);function t(){e.value=!1}function i(){e.value=!0}const n=(...s)=>{e.value&&r(...s)};return{isActive:Wu(e),pause:t,resume:i,eventFilter:n}}function t1(r){return r}function r1(r,e){var t;if(typeof r=="number")return r+e;const i=((t=r.match(/^-?[0-9]+\.?[0-9]*/))==null?void 0:t[0])||"",n=r.slice(i.length),s=parseFloat(i)+e;return Number.isNaN(s)?r:s+n}function ud(r){return Dg()?(Og(r),!0):!1}function QD(r,e=200,t=!1,i=!0,n=!1){return Av(ZT(e,t,i,n),r)}function Pv(r){return typeof r=="function"?ue(r):ve(r)}function dd(r,e=!0){ps()?rr(r):e?r():Zr(r)}function i1(r){ps()&&ll(r)}var Ep=Object.getOwnPropertySymbols,n1=Object.prototype.hasOwnProperty,s1=Object.prototype.propertyIsEnumerable,o1=(r,e)=>{var t={};for(var i in r)n1.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Ep)for(var i of Ep(r))e.indexOf(i)<0&&s1.call(r,i)&&(t[i]=r[i]);return t};function a1(r,e,t={}){const i=t,{eventFilter:n=Cv}=i,s=o1(i,["eventFilter"]);return dt(r,Av(n,e),s)}function ZD(r,e,t){const i=dt(r,(...n)=>(Zr(()=>i()),e(...n)),t)}var l1=Object.defineProperty,c1=Object.defineProperties,h1=Object.getOwnPropertyDescriptors,Na=Object.getOwnPropertySymbols,Rv=Object.prototype.hasOwnProperty,Iv=Object.prototype.propertyIsEnumerable,Ap=(r,e,t)=>e in r?l1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u1=(r,e)=>{for(var t in e||(e={}))Rv.call(e,t)&&Ap(r,t,e[t]);if(Na)for(var t of Na(e))Iv.call(e,t)&&Ap(r,t,e[t]);return r},d1=(r,e)=>c1(r,h1(e)),p1=(r,e)=>{var t={};for(var i in r)Rv.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Na)for(var i of Na(r))e.indexOf(i)<0&&Iv.call(r,i)&&(t[i]=r[i]);return t};function f1(r,e,t={}){const i=t,{eventFilter:n}=i,s=p1(i,["eventFilter"]),{eventFilter:o,pause:a,resume:l,isActive:c}=e1(n);return{stop:a1(r,e,d1(u1({},s),{eventFilter:o})),pause:a,resume:l,isActive:c}}function kv(r){var e;const t=Ar(r);return(e=t==null?void 0:t.$el)!=null?e:t}const wi=Zi?window:void 0,m1=Zi?window.document:void 0;function hr(...r){let e,t,i,n;if(QT(r[0])||Array.isArray(r[0])?([t,i,n]=r,e=wi):[e,t,i,n]=r,!e)return Fa;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(d=>d()),s.length=0},a=(d,p,m,g)=>(d.addEventListener(p,m,g),()=>d.removeEventListener(p,m,g)),l=dt(()=>[kv(e),Ar(n)],([d,p])=>{o(),d&&s.push(...t.flatMap(m=>i.map(g=>a(d,m,g,p))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return ud(c),c}function g1(r,e=!1){const t=ve(),i=()=>t.value=!!r();return i(),dd(i,e),t}function Wn(r,e={}){const{window:t=wi}=e,i=g1(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let n;const s=ve(!1),o=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",a):n.removeListener(a))},a=()=>{i.value&&(o(),n=t.matchMedia(Pv(r).value),s.value=n.matches,"addEventListener"in n?n.addEventListener("change",a):n.addListener(a))};return al(a),ud(()=>o()),s}const v1={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};var y1=Object.defineProperty,Cp=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,b1=Object.prototype.propertyIsEnumerable,Pp=(r,e,t)=>e in r?y1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,x1=(r,e)=>{for(var t in e||(e={}))_1.call(e,t)&&Pp(r,t,e[t]);if(Cp)for(var t of Cp(e))b1.call(e,t)&&Pp(r,t,e[t]);return r};function eO(r,e={}){function t(a,l){let c=r[a];return l!=null&&(c=r1(c,l)),typeof c=="number"&&(c=`${c}px`),c}const{window:i=wi}=e;function n(a){return i?i.matchMedia(a).matches:!1}const s=a=>Wn(`(min-width: ${t(a)})`,e),o=Object.keys(r).reduce((a,l)=>(Object.defineProperty(a,l,{get:()=>s(l),enumerable:!0,configurable:!0}),a),{});return x1({greater(a){return Wn(`(min-width: ${t(a,.1)})`,e)},greaterOrEqual:s,smaller(a){return Wn(`(max-width: ${t(a,-.1)})`,e)},smallerOrEqual(a){return Wn(`(max-width: ${t(a)})`,e)},between(a,l){return Wn(`(min-width: ${t(a)}) and (max-width: ${t(l,-.1)})`,e)},isGreater(a){return n(`(min-width: ${t(a,.1)})`)},isGreaterOrEqual(a){return n(`(min-width: ${t(a)})`)},isSmaller(a){return n(`(max-width: ${t(a,-.1)})`)},isSmallerOrEqual(a){return n(`(max-width: ${t(a)})`)},isInBetween(a,l){return n(`(min-width: ${t(a)}) and (max-width: ${t(l,-.1)})`)}},o)}function w1({window:r=wi}={}){const e=i=>{const{state:n,length:s}=(r==null?void 0:r.history)||{},{hash:o,host:a,hostname:l,href:c,origin:d,pathname:p,port:m,protocol:g,search:y}=(r==null?void 0:r.location)||{};return{trigger:i,state:n,length:s,hash:o,host:a,hostname:l,href:c,origin:d,pathname:p,port:m,protocol:g,search:y}},t=ve(e("load"));return r&&(hr(r,"popstate",()=>t.value=e("popstate"),{passive:!0}),hr(r,"hashchange",()=>t.value=e("hashchange"),{passive:!0})),t}const Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$h="__vueuse_ssr_handlers__";Nh[$h]=Nh[$h]||{};const T1=Nh[$h];function S1(r,e){return T1[r]||e}function E1(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}var A1=Object.defineProperty,Rp=Object.getOwnPropertySymbols,C1=Object.prototype.hasOwnProperty,P1=Object.prototype.propertyIsEnumerable,Ip=(r,e,t)=>e in r?A1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kp=(r,e)=>{for(var t in e||(e={}))C1.call(e,t)&&Ip(r,t,e[t]);if(Rp)for(var t of Rp(e))P1.call(e,t)&&Ip(r,t,e[t]);return r};const R1={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},Mp="vueuse-storage";function I1(r,e,t,i={}){var n;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:d,window:p=wi,eventFilter:m,onError:g=B=>{console.error(B)}}=i,y=(d?bt:ve)(e);if(!t)try{t=S1("getDefaultStorage",()=>{var B;return(B=wi)==null?void 0:B.localStorage})()}catch(B){g(B)}if(!t)return y;const x=Ar(e),w=E1(x),T=(n=i.serializer)!=null?n:R1[w],{pause:E,resume:P}=f1(y,()=>I(y.value),{flush:s,deep:o,eventFilter:m});return p&&a&&(hr(p,"storage",b),hr(p,Mp,F)),b(),y;function I(B){try{if(B==null)t.removeItem(r);else{const H=T.write(B),W=t.getItem(r);W!==H&&(t.setItem(r,H),p&&p.dispatchEvent(new CustomEvent(Mp,{detail:{key:r,oldValue:W,newValue:H,storageArea:t}})))}}catch(H){g(H)}}function A(B){const H=B?B.newValue:t.getItem(r);if(H==null)return l&&x!==null&&t.setItem(r,T.write(x)),x;if(!B&&c){const W=T.read(H);return JT(c)?c(W,x):w==="object"&&!Array.isArray(W)?kp(kp({},x),W):W}else return typeof H!="string"?H:T.read(H)}function F(B){b(B.detail)}function b(B){if(!(B&&B.storageArea!==t)){if(B&&B.key==null){y.value=x;return}if(!(B&&B.key!==r)){E();try{y.value=A(B)}catch(H){g(H)}finally{B?Zr(P):P()}}}}}function k1(r,e,{window:t=wi,initialValue:i=""}={}){const n=ve(i),s=ue(()=>{var o;return kv(e)||((o=t==null?void 0:t.document)==null?void 0:o.documentElement)});return dt([s,()=>Ar(r)],([o,a])=>{var l;if(o&&t){const c=(l=t.getComputedStyle(o).getPropertyValue(a))==null?void 0:l.trim();n.value=c||i}},{immediate:!0}),dt(n,o=>{var a;(a=s.value)!=null&&a.style&&s.value.style.setProperty(Ar(r),o)}),n}function tO(){const r=ve(!1);return rr(()=>{r.value=!0}),r}var Dp;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(Dp||(Dp={}));function Op(r,e=Fa,t={}){const{immediate:i=!0,manual:n=!1,type:s="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:c,defer:d,document:p=m1,attrs:m={}}=t,g=ve(null);let y=null;const x=E=>new Promise((P,I)=>{const A=B=>(g.value=B,P(B),B);if(!p){P(!1);return}let F=!1,b=p.querySelector(`script[src="${Ar(r)}"]`);b?b.hasAttribute("data-loaded")&&A(b):(b=p.createElement("script"),b.type=s,b.async=o,b.src=Ar(r),d&&(b.defer=d),a&&(b.crossOrigin=a),c&&(b.noModule=c),l&&(b.referrerPolicy=l),Object.entries(m).forEach(([B,H])=>b==null?void 0:b.setAttribute(B,H)),F=!0),b.addEventListener("error",B=>I(B)),b.addEventListener("abort",B=>I(B)),b.addEventListener("load",()=>{b.setAttribute("data-loaded","true"),e(b),A(b)}),F&&(b=p.head.appendChild(b)),E||A(b)}),w=(E=!0)=>(y||(y=x(E)),y),T=()=>{if(!p)return;y=null,g.value&&(g.value=null);const E=p.querySelector(`script[src="${Ar(r)}"]`);E&&p.head.removeChild(E)};return i&&!n&&dd(w),n||i1(T),{scriptTag:g,load:w,unload:T}}function Mv(r){const e=window.getComputedStyle(r);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&r.clientHeight<r.scrollHeight||e.overflowY==="auto"&&r.clientWidth<r.scrollWidth)return!0;{const t=r.parentNode;return!t||t.tagName==="BODY"?!1:Mv(t)}}function M1(r){const e=r||window.event,t=e.target;return Mv(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}function D1(r,e=!1){const t=ve(e);let i=null,n;dt(Pv(r),a=>{if(a){const l=a;n=l.style.overflow,t.value&&(l.style.overflow="hidden")}},{immediate:!0});const s=()=>{const a=Ar(r);!a||t.value||(Sp&&(i=hr(a,"touchmove",l=>{M1(l)},{passive:!1})),a.style.overflow="hidden",t.value=!0)},o=()=>{const a=Ar(r);!a||!t.value||(Sp&&(i==null||i()),a.style.overflow=n,t.value=!1)};return ud(o),ue({get(){return t.value},set(a){a?s():o()}})}var O1=Object.defineProperty,Lp=Object.getOwnPropertySymbols,L1=Object.prototype.hasOwnProperty,B1=Object.prototype.propertyIsEnumerable,Bp=(r,e,t)=>e in r?O1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,F1=(r,e)=>{for(var t in e||(e={}))L1.call(e,t)&&Bp(r,t,e[t]);if(Lp)for(var t of Lp(e))B1.call(e,t)&&Bp(r,t,e[t]);return r};const N1={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};F1({linear:t1},N1);function Dv({window:r=wi}={}){if(!r)return{x:ve(0),y:ve(0)};const e=ve(r.scrollX),t=ve(r.scrollY);return hr(r,"scroll",()=>{e.value=r.scrollX,t.value=r.scrollY},{capture:!1,passive:!0}),{x:e,y:t}}function $1(r={}){const{window:e=wi,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:n=!0,includeScrollbar:s=!0}=r,o=ve(t),a=ve(i),l=()=>{e&&(s?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),dd(l),hr("resize",l,{passive:!0}),n&&hr("orientationchange",l,{passive:!0}),{width:o,height:a}}class U1{constructor(e){fe(this,"live2dTips");fe(this,"messageArray",[]);fe(this,"messageTimer",null);this.live2dTips=e}init(){this.setupEvents(),this.setupSeasonalTips(this.live2dTips.seasons),this.welcomeMessage(),this.activityBasedMessages(),this.setupAdditionalEvents(),this.showMessage(this.generateReferrerMessage(),7e3,10)}setupEvents(){this.setupEventHandlers(this.live2dTips.mouseover,"mouseover"),this.setupEventHandlers(this.live2dTips.click,"click")}setupEventHandlers(e,t){e.forEach(i=>{window.addEventListener(t,n=>{const s=n.target;if(s.matches(i.selector)){const o=this.randomSelection(i.text).replace("{text}",s.textContent||"");this.showMessage(o,4e3,8)}})})}setupSeasonalTips(e){const t=new Date;e.forEach(i=>{const[n,s]=i.date.split("-"),[o,a]=n.split("/").map(Number),[l,c]=s?s.split("/").map(Number):[o,a],d=t.getMonth()+1,p=t.getDate();if(o<=d&&d<=l&&a<=p&&p<=c){let m=this.randomSelection(i.text);m=m.replace("{year}",String(t.getFullYear())),this.showMessage(m,7e3,100),this.messageArray.push(m)}})}randomSelection(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}welcomeMessage(){const e=new Date().getHours();let t;const i=this.live2dTips.time;for(let n=0;n<i.length;n++){const s=i[n].hour.split("-"),o=Number.parseInt(s[0]),a=Number.parseInt(s[1]);if(e>=o&&e<=a){const l=i[n].text;Array.isArray(l)?t=this.randomSelection(l):t=l;break}}setTimeout(()=>{this.showMessage(t,7e3,8)},3e3)}generateReferrerMessage(){var e,t;if(document.referrer!==""){const i=new URL(document.referrer),n=i.hostname.split(".")[1];if(location.hostname===i.hostname)return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`;{const s=i.search.split("&");return n==="baidu"?`Hello！来自 百度搜索 的朋友<br>你是搜索 <span>${(e=s.find(o=>o.startsWith("wd=")))==null?void 0:e.split("=")[1]}</span> 找到的我吗？`:n==="so"?`Hello！来自 360搜索 的朋友<br>你是搜索 <span>${(t=s.find(o=>o.startsWith("q=")))==null?void 0:t.split("=")[1]}</span> 找到的我吗？`:n==="google"?`Hello！来自 谷歌搜索 的朋友<br>欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`:`Hello！来自 <span>${i.hostname}</span> 的朋友`}}else return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`}activityBasedMessages(){let e=!1,t=null;const i=this.live2dTips.message.default;window.addEventListener("mousemove",()=>e=!0),window.addEventListener("keydown",()=>e=!0),setInterval(()=>{e?(e=!1,t!==null&&(clearInterval(t),t=null)):t||(t=setInterval(()=>{this.showMessage(this.randomSelection(i),6e3,9)},2e4))},1e3)}setupAdditionalEvents(){window.addEventListener("copy",()=>{this.showMessage(this.live2dTips.message.copy,6e3,9)}),window.addEventListener("visibilitychange",()=>{document.hidden||this.showMessage(this.live2dTips.message.visibilitychange,6e3,9)})}showHitokoto(){fetch("https://v1.hitokoto.cn").then(e=>e.json()).then(e=>{const t=`这句一言是 <span>${e.creator}</span>投稿的。`;this.showMessage(e.hitokoto,6e3,9),setTimeout(()=>{this.showMessage(t,4e3,9)},6e3)})}showMessage(e,t=3e3,i){const n=document.getElementById("live2d-tips");if(!e){n.classList.remove("live2d-tips-active");return}const s=sessionStorage.getItem("live2d-text");Number(s)<=i&&(this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null),sessionStorage.setItem("live2d-text",i.toString()),n.innerHTML=typeof e=="string"?e:this.randomSelection(e),n.classList.add("live2d-tips-active"),this.messageTimer=window.setTimeout(()=>{sessionStorage.removeItem("live2d-text"),n.classList.remove("live2d-tips-active")},t))}}function Fp(r,e,t){let i="";{const n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3),i=`; expires=${n.toUTCString()}`}document.cookie=`${encodeURIComponent(r)}=${encodeURIComponent(e)}${i}; path=/`}function Np(r){const e=`${encodeURIComponent(r)}=`,t=document.cookie.split(";");for(let i of t)if(i=i.trim(),i.startsWith(e))return decodeURIComponent(i.substring(e.length));return null}async function G1(r){try{const e=await fetch(r);if(!e.ok)throw new Error(`请求失败，状态码: ${e.status}`);return await e.json()}catch(e){return console.error(`请求或解析错误: ${e}`),null}}function Ov(r){const e=/https:\/\/cdn\.jsdelivr\.net\/gh\/([\w-]+)\/([\w-]+)\/([\w\-/]+)\/index\.json/,t=r.match(e);if(t){const i=t[1],n=t[2],s=t[3];return`https://api.github.com/repos/${i}/${n}/contents/${s}/textures`}else throw new Error("URL格式不正确")}async function Lv(r){const e=`live2d-cache-${r}`,t=`live2d-cacheTime-${r}`,i=24*60*60*1e3,n=localStorage.getItem(e),s=localStorage.getItem(t);if(n&&s&&Date.now()-Number.parseInt(s)<i)return JSON.parse(n);try{const o=await fetch(r);if(!o.ok)throw new Error(`Network request failed, status code: ${o.status}`);const a=await o.json();if(!Array.isArray(a))throw new TypeError("目录内容获取失败");const l=a.map(c=>c.name);return localStorage.setItem(e,JSON.stringify(l)),localStorage.setItem(t,Date.now().toString()),l}catch(o){throw console.error("获取文件名失败:",o),o}}const Bv="modelKey",Fv="skinKey";async function Vo(r){const e=localStorage.getItem(Bv),t=localStorage.getItem(Fv),i=e||Object.keys(r)[0];let n=Number.parseInt(t||"0",10),s=r[i];if(!s){const a=Object.keys(r)[0];s=r[a],es(Object.keys(r)[0],0),console.warn(`缓存中的人物Key值"${i}"不存在，已初始化为默认值`)}n>=s.models.length&&(n=0,console.warn("皮肤索引越界，已初始化皮肤索引。如果这是由于您删除了某些人物 models 导致的，请放心忽略此消息"));const o=typeof s.models=="string"?await ma(s.models,n):s.models[n];return{currentCharacterKey:i,currentSkinIndex:n,availableModels:s,selectedModel:o}}function es(r,e){r!==null&&localStorage.setItem(Bv,r.toString()),e!==null&&localStorage.setItem(Fv,e.toString())}async function ma(r,e){const t=Ov(r);try{const i=await Lv(t),n=await G1(r);return n.url=r,n.textures[0]=`textures/${i[e]}`,es(null,e),n}catch(i){console.error(i)}}const j1={XiaoYun:{message:"来自云游君的小云 ~",models:["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/小云.model3.json"]},Tia:{message:"来自 Potion Maker 的 Tia 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},Pio:{message:"来自 Potion Maker 的 Pio 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"},ShizukuTalk:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-48/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-pajama/index.json"]},BiliBili22:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/22/index.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.cba-normal.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.newyear.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.school.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.2.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.high.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.low.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.valley.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.vdays.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.lover.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.spring.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.default.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.2.model.json"]},BiliBili33:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/33/index.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.cba-normal.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.newyear.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.school.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.high.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.low.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.valley.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.vdays.json","https://summerscar.me/live2dDemo/assets/33.default/model.2018.lover.json","https://summerscar.me/live2dDemo/assets/33.defaultmodel.2018.spring.json"]}},H1={mouseover:[{selector:"#live2d-canvas",text:["干嘛呢你，快把手拿开～～","鼠…鼠标放错地方了！","你要干嘛呀？","喵喵喵？","怕怕(ノ≧∇≦)ノ","非礼呀！救命！","这样的话，只能使用武力了！","我要生气了哦","不要动手动脚的！","真…真的是不知羞耻！","Hentai！"]},{selector:"#live2d-tool-hitokoto",text:["猜猜我要说些什么？","我从青蛙王子那里听到了不少人生经验。"]},{selector:"#live2d-tool-asteroids",text:["要不要来玩飞机大战？","这个按钮上写着「不要点击」。","怎么，你想来和我玩个游戏？","听说这样可以蹦迪！"]},{selector:"#live2d-tool-switch-model",text:["你是不是不爱人家了呀，呜呜呜～","要见见我的姐姐嘛？","想要看我妹妹嘛？","要切换看板娘吗？"]},{selector:"#live2d-tool-switch-texture",text:["喜欢换装 PLAY 吗？","这次要扮演什么呢？","变装！","让我们看看接下来会发生什么！"]},{selector:"#live2d-tool-photo",text:["你要给我拍照呀？一二三～茄子～","要不，我们来合影吧！","保持微笑就好了～"]},{selector:"#live2d-tool-info",text:["想要知道更多关于我的事么？","这里记录着我搬家的历史呢。","你想深入了解我什么呢？"]},{selector:"#live2d-tool-quit",text:["到了要说再见的时候了吗？","呜呜 QAQ 后会有期……","不要抛弃我呀……","我们，还能再见面吗……","哼，你会后悔的！"]},{selector:".menu-item-home a",text:["点击前往首页，想回到上一页可以使用浏览器的后退功能哦。","点它就可以回到首页啦！","回首页看看吧。"]},{selector:".menu-item-about a",text:["你想知道我家主人是谁吗？","这里有一些关于我家主人的秘密哦，要不要看看呢？","发现主人出没地点！"]},{selector:".menu-item-tags a",text:["点击就可以看文章的标签啦！","点击来查看所有标签哦。"]},{selector:".menu-item-categories a",text:["文章都分类好啦～","点击来查看文章分类哦。"]},{selector:".menu-item-archives a",text:["翻页比较麻烦吗，那就来看看文章归档吧。","文章目录都整理在这里啦！"]},{selector:".menu-item-friends a",text:["这是我的朋友们哦ヾ(◍°∇°◍)ﾉﾞ","要去大佬们的家看看吗？","要去拜访一下我的朋友们吗？"]},{selector:".menu-item-search a",text:["找不到想看的内容？搜索看看吧！","在找什么东西呢，需要帮忙吗？"]},{selector:".menu-item a",text:["快看看这里都有什么呢？"]},{selector:".site-author",text:["我家主人好看吗？","这是我家主人(*´∇｀*)"]},{selector:".site-state",text:["这是文章的统计信息～","要不要点进去看看？"]},{selector:".feed-link a",text:["这里可以使用 RSS 订阅呢！","利用 feed 订阅器，就能快速知道博客有没有更新了呢。"]},{selector:".cc-opacity, .post-copyright-author",text:["要记得规范转载哦。","所有文章均采用 CC BY-NC-SA 4.0 许可协议～","转载前要先注意下文章的版权协议呢。"]},{selector:".links-of-author",text:["这里是主人的常驻地址哦。","这里有主人的联系方式！"]},{selector:".followme",text:["手机扫一下就能继续看，很方便呢～","扫一扫，打开新世界的大门！"]},{selector:".fancybox img, img.medium-zoom-image",text:["点击图片可以放大呢！"]},{selector:".copy-btn",text:["代码可以直接点击复制哟。"]},{selector:".highlight .table-container, .gist",text:["GitHub！我是新手！","PHP 是最好的语言！"]},{selector:"a[href^='mailto']",text:["邮件我会及时回复的！","点击就可以发送邮件啦～"]},{selector:"a[href^='/tags/']",text:["要去看看 <span>{text}</span> 标签么？","点它可以查看此标签下的所有文章哟！"]},{selector:"a[href^='/categories/']",text:["要去看看 <span>{text}</span> 分类么？","点它可以查看此分类下的所有文章哟！"]},{selector:".post-title-link",text:["要看看 <span>{text}</span> 这篇文章吗？"]},{selector:"a[rel='contents']",text:["点击来阅读全文哦。"]},{selector:"a[itemprop='discussionUrl']",text:["要去看看评论吗？"]},{selector:".beian a",text:["我也是有户口的人哦。","我的主人可是遵纪守法的好主人。"]},{selector:".container a[href^='http'], .nav-link .nav-text",text:["要去看看 <span>{text}</span> 么？","去 <span>{text}</span> 逛逛吧。","到 <span>{text}</span> 看看吧。"]},{selector:".back-to-top",text:["点它就可以回到顶部啦！","又回到最初的起点～","要回到开始的地方么？"]},{selector:".reward-container",text:["我是不是棒棒哒～快给我点赞吧！","要打赏我嘛？好期待啊～","主人最近在吃土呢，很辛苦的样子，给他一些钱钱吧～"]},{selector:"#wechat",text:["这是我的微信二维码～"]},{selector:"#alipay",text:["这是我的支付宝哦！"]},{selector:"#bitcoin",text:["这是我的比特币账号！"]},{selector:"#needsharebutton-postbottom .btn",text:["好东西要让更多人知道才行哦。","觉得文章有帮助的话，可以分享给更多需要的朋友呢。"]},{selector:".need-share-button_weibo",text:["微博？来分享一波喵！"]},{selector:".need-share-button_wechat",text:["分享到微信吧！"]},{selector:".need-share-button_douban",text:["分享到豆瓣好像也不错！"]},{selector:".need-share-button_qqzone",text:["QQ 空间，一键转发，耶～"]},{selector:".need-share-button_twitter",text:["Twitter？好像是不存在的东西？"]},{selector:".need-share-button_facebook",text:["emmm…FB 好像也是不存在的东西？"]},{selector:".post-nav-item a[rel='next']",text:["来看看下一篇文章吧。","点它可以看下一篇文章哦！","要翻到下一篇文章吗？"]},{selector:".post-nav-item a[rel='prev']",text:["来看看上一篇文章吧。","点它可以看上一篇文章哦！","要翻到上一篇文章吗？"]},{selector:".extend.next",text:["去下一页看看吧。","点它可以前进哦！","要翻到下一页吗？"]},{selector:".extend.prev",text:["去上一页看看吧。","点它可以后退哦！","要翻到上一页吗？"]},{selector:"input.vnick",text:["该怎么称呼你呢？","留下你的尊姓大名！"]},{selector:".vmail",text:["留下你的邮箱，不然就是无头像人士了！","记得设置好 Gravatar 头像哦！","为了方便通知你最新消息，一定要留下邮箱！"]},{selector:".vlink",text:["快快告诉我你的家在哪里，好让我去参观参观！"]},{selector:".veditor",text:["想要去评论些什么吗？","要说点什么吗？","觉得博客不错？快来留言和主人交流吧！"]},{selector:".vcontrol a",text:["你会不会熟练使用 Markdown 呀？","使用 Markdown 让评论更美观吧～"]},{selector:".vemoji-btn",text:["要插入一个萌萌哒的表情吗？","要来一发表情吗？"]},{selector:".vpreview-btn",text:["要预览一下你的发言吗？","快看看你的评论有多少负熵！"]},{selector:".vsubmit",text:["评论没有审核，要对自己的发言负责哦～","要提交了吗，请耐心等待回复哦～"]},{selector:".vcontent",text:["哇，快看看这个精彩评论！","如果有疑问，请尽快留言哦～"]}],click:[{selector:"#live2d",text:["是…是不小心碰到了吧…","萝莉控是什么呀？","你看到我的小熊了吗？","再摸的话我可要报警了！⌇●﹏●⌇","110 吗，这里有个变态一直在摸我(ó﹏ò｡)","不要摸我了，我会告诉老婆来打你的！","干嘛动我呀！小心我咬你！","别摸我，有什么好摸的！"]},{selector:".veditor",text:["要吐槽些什么呢？","一定要认真填写喵～","有什么想说的吗？"]},{selector:".vsubmit",text:["输入验证码就可以提交评论啦～"]}],seasons:[{date:"01/01",text:"<span>元旦</span>了呢，新的一年又开始了，今年是{year}年～"},{date:"02/14",text:"又是一年<span>情人节</span>，{year}年找到对象了嘛～"},{date:"03/08",text:"今天是<span>国际妇女节</span>！"},{date:"03/12",text:"今天是<span>植树节</span>，要保护环境呀！"},{date:"04/01",text:"悄悄告诉你一个秘密～<span>今天是愚人节，不要被骗了哦～</span>"},{date:"05/01",text:"今天是<span>五一劳动节</span>，计划好假期去哪里了吗～"},{date:"06/01",text:"<span>儿童节</span>了呢，快活的时光总是短暂，要是永远长不大该多好啊…"},{date:"09/03",text:"<span>中国人民抗日战争胜利纪念日</span>，铭记历史、缅怀先烈、珍爱和平、开创未来。"},{date:"09/10",text:"<span>教师节</span>，在学校要给老师问声好呀～"},{date:"10/01",text:"<span>国庆节</span>到了，为祖国母亲庆生！"},{date:"11/05-11/12",text:"今年的<span>双十一</span>是和谁一起过的呢～"},{date:"12/20-12/31",text:"这几天是<span>圣诞节</span>，主人肯定又去剁手买买买了～"}],time:[{hour:"6-7",text:"早上好！一日之计在于晨，美好的一天就要开始了～"},{hour:"8-11",text:"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！"},{hour:"12-13",text:"中午了，工作了一个上午，现在是午餐时间！"},{hour:"14-17",text:"午后很容易犯困呢，今天的运动目标完成了吗？"},{hour:"18-19",text:"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～"},{hour:"20-21",text:"晚上好，今天过得怎么样？"},{hour:"22-23",text:["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]},{hour:"0-5",text:"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？"}],message:{default:["好久不见，日子过得好快呢……","大坏蛋！你都多久没理人家了呀，嘤嘤嘤～","嗨～快来逗我玩吧！","拿小拳拳锤你胸口！","记得把小家加入收藏夹哦！"],console:"哈哈，你打开了控制台，是想要看看我的小秘密吗？",copy:"你都复制了些什么呀，转载要记得加上出处哦！",visibilitychange:"哇，你终于回来了～",clothes:["我还没有其他衣服呢！"]},tool:{camera:["照好了嘛，是不是很可爱呢？"],display:["愿你有一天能与重要的人重逢"]}};function z1(r,e){const t={...r};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]?Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=[...t[i],...e[i]]:t[i]=[t[i],e[i]]:t[i]=e[i]);return t}function V1(r,e){return Array.isArray(r)?r.reduce((t,i)=>(i in e&&(t[i]=e[i]),t),{}):{}}function W1(){const r=_l();return ue(()=>{const{options:e}=r.value.addons["valaxy-addon-live2d"],t=(e==null?void 0:e.enableLive2D)??"all",i={...j1,...e==null?void 0:e.live2DCollection},n=t==="all"?i:V1(t,i),s=z1(H1,(e==null?void 0:e.live2dTips)||{});return{widthLimit:250,safetyMargin:50,randomCharacter:!1,randomSkin:!1,skipHello:!1,hideOnScreenSizes:600,debugger:!1,...e,live2DCollection:n,enableLive2D:t,live2dTips:s}})}function X1(){const r=W1(),{randomCharacter:e,randomSkin:t,live2DCollection:i,live2dTips:n,hideOnScreenSizes:s}=r.value,o=ve(),a=ve(!1);let l=ve(!1);const c=new U1(n);async function d(){await St(()=>import("./index.BM2biJQd.js"),__vite__mapDeps([40,3,5,2,4,7,6])),o.value=(await St(async()=>{const{Live2DApp:A}=await import("./Live2DApp.UlSVIU2Z.js");return{Live2DApp:A}},__vite__mapDeps([41,3,42,43,44,5,2,4,7,6]))).Live2DApp,Np("live2d")==="Show"&&setTimeout(()=>{I()},0),Np("live2d")==="Hide"&&setTimeout(()=>{P()},0),c.init(),o.value.init(r.value,c),o.value.loadModel((await Vo(i)).selectedModel)}async function p(A=e){var F;(F=o.value)==null||F.switchModel(A?await g():await y())}async function m(A=t){var F;(F=o.value)==null||F.switchModel(A?await x():await w()),c.showMessage("我的新衣服好看嘛？",4e3,10)}function g(){const A=Object.keys(i),F=A[Math.floor(Math.random()*A.length)];return es(F,0),c.showMessage(i[F].message,4e3,10),i[F].models[0]}async function y(){const{currentCharacterKey:A}=await Vo(i),F=Object.keys(i),b=F[(F.indexOf(A)+1)%F.length],B=i[b].models;return es(b,0),c.showMessage(i[b].message,4e3,10),typeof B=="string"?await ma(B,0):B[0]}async function x(){const{currentCharacterKey:A}=await Vo(i),F=i[A],b=Math.floor(Math.random()*F.models.length);return es(null,b),F.models.length===0&&c.showMessage(n.message.clothes,4e3,10),typeof F.models=="string"?await ma(F.models,b):F.models[b]}async function w(){const{currentCharacterKey:A,currentSkinIndex:F}=await Vo(i),b=i[A],B=H=>(F+1)%H;if(typeof b.models=="string"){const H=await Lv(Ov(b.models)),W=B(H.length);return ma(b.models,W)}else{if(b.models.length===0)return c.showMessage(n.message.clothes,4e3,10),b.models[0];const H=B(b.models.length);return es(null,H),b.models[H]}}function T(){var A;(A=o.value)==null||A.captureFrame()}function E(){const A=document.getElementById("live2d");a.value=A.style.bottom==="0px"||A.style.bottom==="",a.value?P():I()}function P(){a.value=!0;const A=document.getElementById("live2d");localStorage.setItem("live2d-display",Date.now().toString()),c.showMessage(n.tool.display,2e3,11),A.style.bottom="-100%",setTimeout(()=>{Fp("live2d","Hide",7)},0)}function I(){a.value=!1;const A=document.getElementById("live2d");A.style.bottom="0px",setTimeout(()=>{localStorage.removeItem("live2d-display"),A.style.display="",Fp("live2d","Show",7)},0)}if(Zi&&d(),s!==!1){const A=typeof s=="string"?s:`${s}px`;l=Wn(`(max-width: ${A})`)}return dt(l,A=>{A?P():I()}),{live2DApp:o,switchCharacter:p,switchSkin:m,getRandomCharacter:g,getSequentialCharacter:y,getRandomSkin:x,getSequentialSkin:w,captureFrame:T,toggleLive2DVisibility:E,isLive2DHide:a,live2dTipsHandler:c,isHidden:l}}function Y1(r=200){const e=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let t=null;function i(n){t||(t=n);const s=n-t,o=Math.min(s/r,1);e.forEach(a=>{a.style.padding=`${5*o}px 0`,a.style.maxHeight=`${60*o}px`}),o<1?requestAnimationFrame(i):e.forEach(a=>{a.style.transform=""})}requestAnimationFrame(i)}function q1(r=200){const e=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let t=null;function i(n){t===null&&(t=n);const s=n-t,o=Math.min(s/r,1);e.forEach(a=>{o<1?(a.style.padding="5px 0",a.style.maxHeight="60px",a.style.transform=`translateX(${-40*o}px)`):(a.style.padding="0",a.style.maxHeight="0")}),o<1||s<r*2?requestAnimationFrame(i):t=null}requestAnimationFrame(i)}var Rn=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Rn||{}),Nv=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(Nv||{}),Uh=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Uh||{}),Be=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Be||{}),Hr=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Hr||{}),he=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(he||{}),rs=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(rs||{}),Oe=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Oe||{}),ye=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(ye||{}),mi=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(mi||{}),Wi=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Wi||{}),ri=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(ri||{}),Wt=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Wt||{}),jr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(jr||{}),pd=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(pd||{}),ar=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(ar||{}),Tt=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Tt||{}),wt=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(wt||{}),Yr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Yr||{});const K1={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},_e={ADAPTER:K1,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Zl=/iPhone/i,$p=/iPod/i,Up=/iPad/i,Gp=/\biOS-universal(?:.+)Mac\b/i,ec=/\bAndroid(?:.+)Mobile\b/i,jp=/Android/i,Hn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Wo=/Silk/i,ui=/Windows Phone/i,Hp=/\bWindows(?:.+)ARM\b/i,zp=/BlackBerry/i,Vp=/BB10/i,Wp=/Opera Mini/i,Xp=/\b(CriOS|Chrome)(?:.+)Mobile/i,Yp=/Mobile(?:.+)Firefox\b/i,qp=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function J1(r){return function(e){return e.test(r)}}function Kp(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var n=J1(t),s={apple:{phone:n(Zl)&&!n(ui),ipod:n($p),tablet:!n(Zl)&&(n(Up)||qp(e))&&!n(ui),universal:n(Gp),device:(n(Zl)||n($p)||n(Up)||n(Gp)||qp(e))&&!n(ui)},amazon:{phone:n(Hn),tablet:!n(Hn)&&n(Wo),device:n(Hn)||n(Wo)},android:{phone:!n(ui)&&n(Hn)||!n(ui)&&n(ec),tablet:!n(ui)&&!n(Hn)&&!n(ec)&&(n(Wo)||n(jp)),device:!n(ui)&&(n(Hn)||n(Wo)||n(ec)||n(jp))||n(/\bokhttp\b/i)},windows:{phone:n(ui),tablet:n(Hp),device:n(ui)||n(Hp)},other:{blackberry:n(zp),blackberry10:n(Vp),opera:n(Wp),firefox:n(Yp),chrome:n(Xp),device:n(zp)||n(Vp)||n(Wp)||n(Yp)||n(Xp)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Q1=Kp.default??Kp,gi=Q1(globalThis.navigator);_e.RETINA_PREFIX=/@([0-9\.]+)x/;_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var tc={exports:{}},Jp;function Z1(){return Jp||(Jp=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,p,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new n(d,p||l,m),y=t?t+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,p;if(this._eventsCount===0)return c;for(p in d=this._events)e.call(d,p)&&c.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=t?t+c:c,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,g=p.length,y=new Array(g);m<g;m++)y[m]=p[m].fn;return y},a.prototype.listenerCount=function(c){var d=t?t+c:c,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(c,d,p,m,g,y){var x=t?t+c:c;if(!this._events[x])return!1;var w=this._events[x],T=arguments.length,E,P;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),T){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,p),!0;case 4:return w.fn.call(w.context,d,p,m),!0;case 5:return w.fn.call(w.context,d,p,m,g),!0;case 6:return w.fn.call(w.context,d,p,m,g,y),!0}for(P=1,E=new Array(T-1);P<T;P++)E[P-1]=arguments[P];w.fn.apply(w.context,E)}else{var I=w.length,A;for(P=0;P<I;P++)switch(w[P].once&&this.removeListener(c,w[P].fn,void 0,!0),T){case 1:w[P].fn.call(w[P].context);break;case 2:w[P].fn.call(w[P].context,d);break;case 3:w[P].fn.call(w[P].context,d,p);break;case 4:w[P].fn.call(w[P].context,d,p,m);break;default:if(!E)for(A=1,E=new Array(T-1);A<T;A++)E[A-1]=arguments[A];w[P].fn.apply(w[P].context,E)}}return!0},a.prototype.on=function(c,d,p){return s(this,c,d,p,!1)},a.prototype.once=function(c,d,p){return s(this,c,d,p,!0)},a.prototype.removeListener=function(c,d,p,m){var g=t?t+c:c;if(!this._events[g])return this;if(!d)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!m||y.once)&&(!p||y.context===p)&&o(this,g);else{for(var x=0,w=[],T=y.length;x<T;x++)(y[x].fn!==d||m&&!y[x].once||p&&y[x].context!==p)&&w.push(y[x]);w.length?this._events[g]=w.length===1?w[0]:w:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=t?t+c:c,this._events[d]&&o(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(tc)),tc.exports}var eS=Z1();const wo=hl(eS);var Xo={exports:{}},Qp;function tS(){if(Qp)return Xo.exports;Qp=1,Xo.exports=r,Xo.exports.default=r;function r(M,L,k){k=k||2;var z=L&&L.length,U=z?L[0]*k:M.length,j=e(M,0,U,k,!0),K=[];if(!j||j.next===j.prev)return K;var Y,te,ae,pe,be,Ae,ee;if(z&&(j=l(M,L,j,k)),M.length>80*k){Y=ae=M[0],te=pe=M[1];for(var le=k;le<U;le+=k)be=M[le],Ae=M[le+1],be<Y&&(Y=be),Ae<te&&(te=Ae),be>ae&&(ae=be),Ae>pe&&(pe=Ae);ee=Math.max(ae-Y,pe-te),ee=ee!==0?32767/ee:0}return i(j,K,k,Y,te,ee,0),K}function e(M,L,k,z,U){var j,K;if(U===se(M,L,k,z)>0)for(j=L;j<k;j+=z)K=N(j,M[j],M[j+1],K);else for(j=k-z;j>=L;j-=z)K=N(j,M[j],M[j+1],K);return K&&I(K,K.next)&&(G(K),K=K.next),K}function t(M,L){if(!M)return M;L||(L=M);var k=M,z;do if(z=!1,!k.steiner&&(I(k,k.next)||P(k.prev,k,k.next)===0)){if(G(k),k=L=k.prev,k===k.next)break;z=!0}else k=k.next;while(z||k!==L);return L}function i(M,L,k,z,U,j,K){if(M){!K&&j&&g(M,z,U,j);for(var Y=M,te,ae;M.prev!==M.next;){if(te=M.prev,ae=M.next,j?s(M,z,U,j):n(M)){L.push(te.i/k|0),L.push(M.i/k|0),L.push(ae.i/k|0),G(M),M=ae.next,Y=ae.next;continue}if(M=ae,M===Y){K?K===1?(M=o(t(M),L,k),i(M,L,k,z,U,j,2)):K===2&&a(M,L,k,z,U,j):i(t(M),L,k,z,U,j,1);break}}}}function n(M){var L=M.prev,k=M,z=M.next;if(P(L,k,z)>=0)return!1;for(var U=L.x,j=k.x,K=z.x,Y=L.y,te=k.y,ae=z.y,pe=U<j?U<K?U:K:j<K?j:K,be=Y<te?Y<ae?Y:ae:te<ae?te:ae,Ae=U>j?U>K?U:K:j>K?j:K,ee=Y>te?Y>ae?Y:ae:te>ae?te:ae,le=z.next;le!==L;){if(le.x>=pe&&le.x<=Ae&&le.y>=be&&le.y<=ee&&T(U,Y,j,te,K,ae,le.x,le.y)&&P(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function s(M,L,k,z){var U=M.prev,j=M,K=M.next;if(P(U,j,K)>=0)return!1;for(var Y=U.x,te=j.x,ae=K.x,pe=U.y,be=j.y,Ae=K.y,ee=Y<te?Y<ae?Y:ae:te<ae?te:ae,le=pe<be?pe<Ae?pe:Ae:be<Ae?be:Ae,we=Y>te?Y>ae?Y:ae:te>ae?te:ae,Pe=pe>be?pe>Ae?pe:Ae:be>Ae?be:Ae,Ne=x(ee,le,L,k,z),We=x(we,Pe,L,k,z),Ee=M.prevZ,Te=M.nextZ;Ee&&Ee.z>=Ne&&Te&&Te.z<=We;){if(Ee.x>=ee&&Ee.x<=we&&Ee.y>=le&&Ee.y<=Pe&&Ee!==U&&Ee!==K&&T(Y,pe,te,be,ae,Ae,Ee.x,Ee.y)&&P(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,Te.x>=ee&&Te.x<=we&&Te.y>=le&&Te.y<=Pe&&Te!==U&&Te!==K&&T(Y,pe,te,be,ae,Ae,Te.x,Te.y)&&P(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;Ee&&Ee.z>=Ne;){if(Ee.x>=ee&&Ee.x<=we&&Ee.y>=le&&Ee.y<=Pe&&Ee!==U&&Ee!==K&&T(Y,pe,te,be,ae,Ae,Ee.x,Ee.y)&&P(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;Te&&Te.z<=We;){if(Te.x>=ee&&Te.x<=we&&Te.y>=le&&Te.y<=Pe&&Te!==U&&Te!==K&&T(Y,pe,te,be,ae,Ae,Te.x,Te.y)&&P(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function o(M,L,k){var z=M;do{var U=z.prev,j=z.next.next;!I(U,j)&&A(U,z,z.next,j)&&H(U,j)&&H(j,U)&&(L.push(U.i/k|0),L.push(z.i/k|0),L.push(j.i/k|0),G(z),G(z.next),z=M=j),z=z.next}while(z!==M);return t(z)}function a(M,L,k,z,U,j){var K=M;do{for(var Y=K.next.next;Y!==K.prev;){if(K.i!==Y.i&&E(K,Y)){var te=Q(K,Y);K=t(K,K.next),te=t(te,te.next),i(K,L,k,z,U,j,0),i(te,L,k,z,U,j,0);return}Y=Y.next}K=K.next}while(K!==M)}function l(M,L,k,z){var U=[],j,K,Y,te,ae;for(j=0,K=L.length;j<K;j++)Y=L[j]*z,te=j<K-1?L[j+1]*z:M.length,ae=e(M,Y,te,z,!1),ae===ae.next&&(ae.steiner=!0),U.push(w(ae));for(U.sort(c),j=0;j<U.length;j++)k=d(U[j],k);return k}function c(M,L){return M.x-L.x}function d(M,L){var k=p(M,L);if(!k)return L;var z=Q(k,M);return t(z,z.next),t(k,k.next)}function p(M,L){var k=L,z=M.x,U=M.y,j=-1/0,K;do{if(U<=k.y&&U>=k.next.y&&k.next.y!==k.y){var Y=k.x+(U-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(Y<=z&&Y>j&&(j=Y,K=k.x<k.next.x?k:k.next,Y===z))return K}k=k.next}while(k!==L);if(!K)return null;var te=K,ae=K.x,pe=K.y,be=1/0,Ae;k=K;do z>=k.x&&k.x>=ae&&z!==k.x&&T(U<pe?z:j,U,ae,pe,U<pe?j:z,U,k.x,k.y)&&(Ae=Math.abs(U-k.y)/(z-k.x),H(k,M)&&(Ae<be||Ae===be&&(k.x>K.x||k.x===K.x&&m(K,k)))&&(K=k,be=Ae)),k=k.next;while(k!==te);return K}function m(M,L){return P(M.prev,M,L.prev)<0&&P(L.next,M,M.next)<0}function g(M,L,k,z){var U=M;do U.z===0&&(U.z=x(U.x,U.y,L,k,z)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==M);U.prevZ.nextZ=null,U.prevZ=null,y(U)}function y(M){var L,k,z,U,j,K,Y,te,ae=1;do{for(k=M,M=null,j=null,K=0;k;){for(K++,z=k,Y=0,L=0;L<ae&&(Y++,z=z.nextZ,!!z);L++);for(te=ae;Y>0||te>0&&z;)Y!==0&&(te===0||!z||k.z<=z.z)?(U=k,k=k.nextZ,Y--):(U=z,z=z.nextZ,te--),j?j.nextZ=U:M=U,U.prevZ=j,j=U;k=z}j.nextZ=null,ae*=2}while(K>1);return M}function x(M,L,k,z,U){return M=(M-k)*U|0,L=(L-z)*U|0,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,M|L<<1}function w(M){var L=M,k=M;do(L.x<k.x||L.x===k.x&&L.y<k.y)&&(k=L),L=L.next;while(L!==M);return k}function T(M,L,k,z,U,j,K,Y){return(U-K)*(L-Y)>=(M-K)*(j-Y)&&(M-K)*(z-Y)>=(k-K)*(L-Y)&&(k-K)*(j-Y)>=(U-K)*(z-Y)}function E(M,L){return M.next.i!==L.i&&M.prev.i!==L.i&&!B(M,L)&&(H(M,L)&&H(L,M)&&W(M,L)&&(P(M.prev,M,L.prev)||P(M,L.prev,L))||I(M,L)&&P(M.prev,M,M.next)>0&&P(L.prev,L,L.next)>0)}function P(M,L,k){return(L.y-M.y)*(k.x-L.x)-(L.x-M.x)*(k.y-L.y)}function I(M,L){return M.x===L.x&&M.y===L.y}function A(M,L,k,z){var U=b(P(M,L,k)),j=b(P(M,L,z)),K=b(P(k,z,M)),Y=b(P(k,z,L));return!!(U!==j&&K!==Y||U===0&&F(M,k,L)||j===0&&F(M,z,L)||K===0&&F(k,M,z)||Y===0&&F(k,L,z))}function F(M,L,k){return L.x<=Math.max(M.x,k.x)&&L.x>=Math.min(M.x,k.x)&&L.y<=Math.max(M.y,k.y)&&L.y>=Math.min(M.y,k.y)}function b(M){return M>0?1:M<0?-1:0}function B(M,L){var k=M;do{if(k.i!==M.i&&k.next.i!==M.i&&k.i!==L.i&&k.next.i!==L.i&&A(k,k.next,M,L))return!0;k=k.next}while(k!==M);return!1}function H(M,L){return P(M.prev,M,M.next)<0?P(M,L,M.next)>=0&&P(M,M.prev,L)>=0:P(M,L,M.prev)<0||P(M,M.next,L)<0}function W(M,L){var k=M,z=!1,U=(M.x+L.x)/2,j=(M.y+L.y)/2;do k.y>j!=k.next.y>j&&k.next.y!==k.y&&U<(k.next.x-k.x)*(j-k.y)/(k.next.y-k.y)+k.x&&(z=!z),k=k.next;while(k!==M);return z}function Q(M,L){var k=new X(M.i,M.x,M.y),z=new X(L.i,L.x,L.y),U=M.next,j=L.prev;return M.next=L,L.prev=M,k.next=U,U.prev=k,z.next=k,k.prev=z,j.next=z,z.prev=j,z}function N(M,L,k,z){var U=new X(M,L,k);return z?(U.next=z.next,U.prev=z,z.next.prev=U,z.next=U):(U.prev=U,U.next=U),U}function G(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function X(M,L,k){this.i=M,this.x=L,this.y=k,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(M,L,k,z){var U=L&&L.length,j=U?L[0]*k:M.length,K=Math.abs(se(M,0,j,k));if(U)for(var Y=0,te=L.length;Y<te;Y++){var ae=L[Y]*k,pe=Y<te-1?L[Y+1]*k:M.length;K-=Math.abs(se(M,ae,pe,k))}var be=0;for(Y=0;Y<z.length;Y+=3){var Ae=z[Y]*k,ee=z[Y+1]*k,le=z[Y+2]*k;be+=Math.abs((M[Ae]-M[le])*(M[ee+1]-M[Ae+1])-(M[Ae]-M[ee])*(M[le+1]-M[Ae+1]))}return K===0&&be===0?0:Math.abs((be-K)/K)};function se(M,L,k,z){for(var U=0,j=L,K=k-z;j<k;j+=z)U+=(M[K]-M[j])*(M[j+1]+M[K+1]),K=j;return U}return r.flatten=function(M){for(var L=M[0][0].length,k={vertices:[],holes:[],dimensions:L},z=0,U=0;U<M.length;U++){for(var j=0;j<M[U].length;j++)for(var K=0;K<L;K++)k.vertices.push(M[U][j][K]);U>0&&(z+=M[U-1].length,k.holes.push(z))}return k},Xo.exports}var rS=tS();const iS=hl(rS);var an={},Ns={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var nS=Ns.exports,Zp;function sS(){return Zp||(Zp=1,function(r,e){(function(t){var i=e&&!e.nodeType&&e,n=r&&!r.nodeType&&r,s=typeof Oa=="object"&&Oa;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,c=1,d=26,p=38,m=700,g=72,y=128,x="-",w=/^xn--/,T=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=l-c,A=Math.floor,F=String.fromCharCode,b;function B(U){throw new RangeError(P[U])}function H(U,j){for(var K=U.length,Y=[];K--;)Y[K]=j(U[K]);return Y}function W(U,j){var K=U.split("@"),Y="";K.length>1&&(Y=K[0]+"@",U=K[1]),U=U.replace(E,".");var te=U.split("."),ae=H(te,j).join(".");return Y+ae}function Q(U){for(var j=[],K=0,Y=U.length,te,ae;K<Y;)te=U.charCodeAt(K++),te>=55296&&te<=56319&&K<Y?(ae=U.charCodeAt(K++),(ae&64512)==56320?j.push(((te&1023)<<10)+(ae&1023)+65536):(j.push(te),K--)):j.push(te);return j}function N(U){return H(U,function(j){var K="";return j>65535&&(j-=65536,K+=F(j>>>10&1023|55296),j=56320|j&1023),K+=F(j),K}).join("")}function G(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:l}function X(U,j){return U+22+75*(U<26)-((j!=0)<<5)}function se(U,j,K){var Y=0;for(U=K?A(U/m):U>>1,U+=A(U/j);U>I*d>>1;Y+=l)U=A(U/I);return A(Y+(I+1)*U/(U+p))}function M(U){var j=[],K=U.length,Y,te=0,ae=y,pe=g,be,Ae,ee,le,we,Pe,Ne,We,Ee;for(be=U.lastIndexOf(x),be<0&&(be=0),Ae=0;Ae<be;++Ae)U.charCodeAt(Ae)>=128&&B("not-basic"),j.push(U.charCodeAt(Ae));for(ee=be>0?be+1:0;ee<K;){for(le=te,we=1,Pe=l;ee>=K&&B("invalid-input"),Ne=G(U.charCodeAt(ee++)),(Ne>=l||Ne>A((a-te)/we))&&B("overflow"),te+=Ne*we,We=Pe<=pe?c:Pe>=pe+d?d:Pe-pe,!(Ne<We);Pe+=l)Ee=l-We,we>A(a/Ee)&&B("overflow"),we*=Ee;Y=j.length+1,pe=se(te-le,Y,le==0),A(te/Y)>a-ae&&B("overflow"),ae+=A(te/Y),te%=Y,j.splice(te++,0,ae)}return N(j)}function L(U){var j,K,Y,te,ae,pe,be,Ae,ee,le,we,Pe=[],Ne,We,Ee,Te;for(U=Q(U),Ne=U.length,j=y,K=0,ae=g,pe=0;pe<Ne;++pe)we=U[pe],we<128&&Pe.push(F(we));for(Y=te=Pe.length,te&&Pe.push(x);Y<Ne;){for(be=a,pe=0;pe<Ne;++pe)we=U[pe],we>=j&&we<be&&(be=we);for(We=Y+1,be-j>A((a-K)/We)&&B("overflow"),K+=(be-j)*We,j=be,pe=0;pe<Ne;++pe)if(we=U[pe],we<j&&++K>a&&B("overflow"),we==j){for(Ae=K,ee=l;le=ee<=ae?c:ee>=ae+d?d:ee-ae,!(Ae<le);ee+=l)Te=Ae-le,Ee=l-le,Pe.push(F(X(le+Te%Ee,0))),Ae=A(Te/Ee);Pe.push(F(X(Ae,0))),ae=se(K,We,Y==te),K=0,++Y}++K,++j}return Pe.join("")}function k(U){return W(U,function(j){return w.test(j)?M(j.slice(4).toLowerCase()):j})}function z(U){return W(U,function(j){return T.test(j)?"xn--"+L(j):j})}if(o={version:"1.4.1",ucs2:{decode:Q,encode:N},decode:M,encode:L,toASCII:z,toUnicode:k},i&&n)if(r.exports==i)n.exports=o;else for(b in o)o.hasOwnProperty(b)&&(i[b]=o[b]);else t.punycode=o})(nS)}(Ns,Ns.exports)),Ns.exports}var rc,ef;function gs(){return ef||(ef=1,rc=TypeError),rc}const oS={},aS=Object.freeze(Object.defineProperty({__proto__:null,default:oS},Symbol.toStringTag,{value:"Module"})),lS=hx(aS);var ic,tf;function Tl(){if(tf)return ic;tf=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,i=r&&Map.prototype.forEach,n=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=n&&s&&typeof s.get=="function"?s.get:null,a=n&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,c=l?WeakMap.prototype.has:null,d=typeof WeakSet=="function"&&WeakSet.prototype,p=d?WeakSet.prototype.has:null,m=typeof WeakRef=="function"&&WeakRef.prototype,g=m?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,x=Object.prototype.toString,w=Function.prototype.toString,T=String.prototype.match,E=String.prototype.slice,P=String.prototype.replace,I=String.prototype.toUpperCase,A=String.prototype.toLowerCase,F=RegExp.prototype.test,b=Array.prototype.concat,B=Array.prototype.join,H=Array.prototype.slice,W=Math.floor,Q=typeof BigInt=="function"?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,X=typeof Symbol=="function"&&typeof Symbol.iterator=="object",se=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===X||!0)?Symbol.toStringTag:null,M=Object.prototype.propertyIsEnumerable,L=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(q){return q.__proto__}:null);function k(q,J){if(q===1/0||q===-1/0||q!==q||q&&q>-1e3&&q<1e3||F.call(/e/,J))return J;var Ye=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof q=="number"){var et=q<0?-W(-q):W(q);if(et!==q){var tt=String(et),je=E.call(J,tt.length+1);return P.call(tt,Ye,"$&_")+"."+P.call(P.call(je,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(J,Ye,"$&_")}var z=lS,U=z.custom,j=We(U)?U:null,K={__proto__:null,double:'"',single:"'"},Y={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};ic=function q(J,Ye,et,tt){var je=Ye||{};if(pt(je,"quoteStyle")&&!pt(K,je.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pt(je,"maxStringLength")&&(typeof je.maxStringLength=="number"?je.maxStringLength<0&&je.maxStringLength!==1/0:je.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ir=pt(je,"customInspect")?je.customInspect:!0;if(typeof ir!="boolean"&&ir!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pt(je,"indent")&&je.indent!==null&&je.indent!=="	"&&!(parseInt(je.indent,10)===je.indent&&je.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pt(je,"numericSeparator")&&typeof je.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Lr=je.numericSeparator;if(typeof J>"u")return"undefined";if(J===null)return"null";if(typeof J=="boolean")return J?"true":"false";if(typeof J=="string")return Ao(J,je);if(typeof J=="number"){if(J===0)return 1/0/J>0?"0":"-0";var Rt=String(J);return Lr?k(J,Rt):Rt}if(typeof J=="bigint"){var nr=String(J)+"n";return Lr?k(J,nr):nr}var Fn=typeof je.depth>"u"?5:je.depth;if(typeof et>"u"&&(et=0),et>=Fn&&Fn>0&&typeof J=="object")return be(J)?"[Array]":"[Object]";var ci=Co(je,et);if(typeof tt>"u")tt=[];else if(Yt(tt,J)>=0)return"[Circular]";function qt(Ci,Br,Es){if(Br&&(tt=H.call(tt),tt.push(Br)),Es){var Mo={depth:je.depth};return pt(je,"quoteStyle")&&(Mo.quoteStyle=je.quoteStyle),q(Ci,Mo,et+1,tt)}return q(Ci,je,et+1,tt)}if(typeof J=="function"&&!ee(J)){var Nn=Ei(J),$n=li(J,qt);return"[Function"+(Nn?": "+Nn:" (anonymous)")+"]"+($n.length>0?" { "+B.call($n,", ")+" }":"")}if(We(J)){var Po=X?P.call(String(J),/^(Symbol\(.*\))_[^)]*$/,"$1"):G.call(J);return typeof J=="object"&&!X?Ai(Po):Po}if(tn(J)){for(var nn="<"+A.call(String(J.nodeName)),Un=J.attributes||[],Ht=0;Ht<Un.length;Ht++)nn+=" "+Un[Ht].name+"="+te(ae(Un[Ht].value),"double",je);return nn+=">",J.childNodes&&J.childNodes.length&&(nn+="..."),nn+="</"+A.call(String(J.nodeName))+">",nn}if(be(J)){if(J.length===0)return"[]";var fr=li(J,qt);return ci&&!ws(fr)?"["+Bn(fr,ci)+"]":"[ "+B.call(fr,", ")+" ]"}if(le(J)){var Kt=li(J,qt);return!("cause"in Error.prototype)&&"cause"in J&&!M.call(J,"cause")?"{ ["+String(J)+"] "+B.call(b.call("[cause]: "+qt(J.cause),Kt),", ")+" }":Kt.length===0?"["+String(J)+"]":"{ ["+String(J)+"] "+B.call(Kt,", ")+" }"}if(typeof J=="object"&&ir){if(j&&typeof J[j]=="function"&&z)return z(J,{depth:Fn-et});if(ir!=="symbol"&&typeof J.inspect=="function")return J.inspect()}if(Ot(J)){var Ro=[];return i&&i.call(J,function(Ci,Br){Ro.push(qt(Br,J,!0)+" => "+qt(Ci,J))}),Ln("Map",t.call(J),Ro,ci)}if(pr(J)){var Io=[];return a&&a.call(J,function(Ci){Io.push(qt(Ci,J))}),Ln("Set",o.call(J),Io,ci)}if(oi(J))return rn("WeakMap");if(Eo(J))return rn("WeakSet");if(ai(J))return rn("WeakRef");if(Pe(J))return Ai(qt(Number(J)));if(Ee(J))return Ai(qt(Q.call(J)));if(Ne(J))return Ai(y.call(J));if(we(J))return Ai(qt(String(J)));if(typeof window<"u"&&J===window)return"{ [object Window] }";if(typeof globalThis<"u"&&J===globalThis||typeof Oa<"u"&&J===Oa)return"{ [object globalThis] }";if(!Ae(J)&&!ee(J)){var Gn=li(J,qt),mr=L?L(J)===Object.prototype:J instanceof Object||J.constructor===Object,Le=J instanceof Object?"":"null prototype",Ts=!mr&&se&&Object(J)===J&&se in J?E.call(ct(J),8,-1):Le?"Object":"",ko=mr||typeof J.constructor!="function"?"":J.constructor.name?J.constructor.name+" ":"",Ss=ko+(Ts||Le?"["+B.call(b.call([],Ts||[],Le||[]),": ")+"] ":"");return Gn.length===0?Ss+"{}":ci?Ss+"{"+Bn(Gn,ci)+"}":Ss+"{ "+B.call(Gn,", ")+" }"}return String(J)};function te(q,J,Ye){var et=Ye.quoteStyle||J,tt=K[et];return tt+q+tt}function ae(q){return P.call(String(q),/"/g,"&quot;")}function pe(q){return!se||!(typeof q=="object"&&(se in q||typeof q[se]<"u"))}function be(q){return ct(q)==="[object Array]"&&pe(q)}function Ae(q){return ct(q)==="[object Date]"&&pe(q)}function ee(q){return ct(q)==="[object RegExp]"&&pe(q)}function le(q){return ct(q)==="[object Error]"&&pe(q)}function we(q){return ct(q)==="[object String]"&&pe(q)}function Pe(q){return ct(q)==="[object Number]"&&pe(q)}function Ne(q){return ct(q)==="[object Boolean]"&&pe(q)}function We(q){if(X)return q&&typeof q=="object"&&q instanceof Symbol;if(typeof q=="symbol")return!0;if(!q||typeof q!="object"||!G)return!1;try{return G.call(q),!0}catch{}return!1}function Ee(q){if(!q||typeof q!="object"||!Q)return!1;try{return Q.call(q),!0}catch{}return!1}var Te=Object.prototype.hasOwnProperty||function(q){return q in this};function pt(q,J){return Te.call(q,J)}function ct(q){return x.call(q)}function Ei(q){if(q.name)return q.name;var J=T.call(w.call(q),/^function\s*([\w$]+)/);return J?J[1]:null}function Yt(q,J){if(q.indexOf)return q.indexOf(J);for(var Ye=0,et=q.length;Ye<et;Ye++)if(q[Ye]===J)return Ye;return-1}function Ot(q){if(!t||!q||typeof q!="object")return!1;try{t.call(q);try{o.call(q)}catch{return!0}return q instanceof Map}catch{}return!1}function oi(q){if(!c||!q||typeof q!="object")return!1;try{c.call(q,c);try{p.call(q,p)}catch{return!0}return q instanceof WeakMap}catch{}return!1}function ai(q){if(!g||!q||typeof q!="object")return!1;try{return g.call(q),!0}catch{}return!1}function pr(q){if(!o||!q||typeof q!="object")return!1;try{o.call(q);try{t.call(q)}catch{return!0}return q instanceof Set}catch{}return!1}function Eo(q){if(!p||!q||typeof q!="object")return!1;try{p.call(q,p);try{c.call(q,c)}catch{return!0}return q instanceof WeakSet}catch{}return!1}function tn(q){return!q||typeof q!="object"?!1:typeof HTMLElement<"u"&&q instanceof HTMLElement?!0:typeof q.nodeName=="string"&&typeof q.getAttribute=="function"}function Ao(q,J){if(q.length>J.maxStringLength){var Ye=q.length-J.maxStringLength,et="... "+Ye+" more character"+(Ye>1?"s":"");return Ao(E.call(q,0,J.maxStringLength),J)+et}var tt=Y[J.quoteStyle||"single"];tt.lastIndex=0;var je=P.call(P.call(q,tt,"\\$1"),/[\x00-\x1f]/g,xs);return te(je,"single",J)}function xs(q){var J=q.charCodeAt(0),Ye={8:"b",9:"t",10:"n",12:"f",13:"r"}[J];return Ye?"\\"+Ye:"\\x"+(J<16?"0":"")+I.call(J.toString(16))}function Ai(q){return"Object("+q+")"}function rn(q){return q+" { ? }"}function Ln(q,J,Ye,et){var tt=et?Bn(Ye,et):B.call(Ye,", ");return q+" ("+J+") {"+tt+"}"}function ws(q){for(var J=0;J<q.length;J++)if(Yt(q[J],`
`)>=0)return!1;return!0}function Co(q,J){var Ye;if(q.indent==="	")Ye="	";else if(typeof q.indent=="number"&&q.indent>0)Ye=B.call(Array(q.indent+1)," ");else return null;return{base:Ye,prev:B.call(Array(J+1),Ye)}}function Bn(q,J){if(q.length===0)return"";var Ye=`
`+J.prev+J.base;return Ye+B.call(q,","+Ye)+`
`+J.prev}function li(q,J){var Ye=be(q),et=[];if(Ye){et.length=q.length;for(var tt=0;tt<q.length;tt++)et[tt]=pt(q,tt)?J(q[tt],q):""}var je=typeof N=="function"?N(q):[],ir;if(X){ir={};for(var Lr=0;Lr<je.length;Lr++)ir["$"+je[Lr]]=je[Lr]}for(var Rt in q)pt(q,Rt)&&(Ye&&String(Number(Rt))===Rt&&Rt<q.length||X&&ir["$"+Rt]instanceof Symbol||(F.call(/[^\w$]/,Rt)?et.push(J(Rt,q)+": "+J(q[Rt],q)):et.push(Rt+": "+J(q[Rt],q))));if(typeof N=="function")for(var nr=0;nr<je.length;nr++)M.call(q,je[nr])&&et.push("["+J(je[nr])+"]: "+J(q[je[nr]],q));return et}return ic}var nc,rf;function cS(){if(rf)return nc;rf=1;var r=Tl(),e=gs(),t=function(a,l,c){for(var d=a,p;(p=d.next)!=null;d=p)if(p.key===l)return d.next=p.next,c||(p.next=a.next,a.next=p),p},i=function(a,l){if(a){var c=t(a,l);return c&&c.value}},n=function(a,l,c){var d=t(a,l);d?d.value=c:a.next={key:l,next:a.next,value:c}},s=function(a,l){return a?!!t(a,l):!1},o=function(a,l){if(a)return t(a,l,!0)};return nc=function(){var l,c={assert:function(d){if(!c.has(d))throw new e("Side channel does not contain "+r(d))},delete:function(d){var p=l&&l.next,m=o(l,d);return m&&p&&p===m&&(l=void 0),!!m},get:function(d){return i(l,d)},has:function(d){return s(l,d)},set:function(d,p){l||(l={next:void 0}),n(l,d,p)}};return c},nc}var sc,nf;function $v(){return nf||(nf=1,sc=Object),sc}var oc,sf;function hS(){return sf||(sf=1,oc=Error),oc}var ac,of;function uS(){return of||(of=1,ac=EvalError),ac}var lc,af;function dS(){return af||(af=1,lc=RangeError),lc}var cc,lf;function pS(){return lf||(lf=1,cc=ReferenceError),cc}var hc,cf;function fS(){return cf||(cf=1,hc=SyntaxError),hc}var uc,hf;function mS(){return hf||(hf=1,uc=URIError),uc}var dc,uf;function gS(){return uf||(uf=1,dc=Math.abs),dc}var pc,df;function vS(){return df||(df=1,pc=Math.floor),pc}var fc,pf;function yS(){return pf||(pf=1,fc=Math.max),fc}var mc,ff;function _S(){return ff||(ff=1,mc=Math.min),mc}var gc,mf;function bS(){return mf||(mf=1,gc=Math.pow),gc}var vc,gf;function xS(){return gf||(gf=1,vc=Math.round),vc}var yc,vf;function wS(){return vf||(vf=1,yc=Number.isNaN||function(e){return e!==e}),yc}var _c,yf;function TS(){if(yf)return _c;yf=1;var r=wS();return _c=function(t){return r(t)||t===0?t:t<0?-1:1},_c}var bc,_f;function SS(){return _f||(_f=1,bc=Object.getOwnPropertyDescriptor),bc}var xc,bf;function Uv(){if(bf)return xc;bf=1;var r=SS();if(r)try{r([],"length")}catch{r=null}return xc=r,xc}var wc,xf;function ES(){if(xf)return wc;xf=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return wc=r,wc}var Tc,wf;function AS(){return wf||(wf=1,Tc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),Tc}var Sc,Tf;function CS(){if(Tf)return Sc;Tf=1;var r=typeof Symbol<"u"&&Symbol,e=AS();return Sc=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Sc}var Ec,Sf;function Gv(){return Sf||(Sf=1,Ec=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Ec}var Ac,Ef;function jv(){if(Ef)return Ac;Ef=1;var r=$v();return Ac=r.getPrototypeOf||null,Ac}var Cc,Af;function PS(){if(Af)return Cc;Af=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",n=function(l,c){for(var d=[],p=0;p<l.length;p+=1)d[p]=l[p];for(var m=0;m<c.length;m+=1)d[m+l.length]=c[m];return d},s=function(l,c){for(var d=[],p=c,m=0;p<l.length;p+=1,m+=1)d[m]=l[p];return d},o=function(a,l){for(var c="",d=0;d<a.length;d+=1)c+=a[d],d+1<a.length&&(c+=l);return c};return Cc=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==i)throw new TypeError(r+c);for(var d=s(arguments,1),p,m=function(){if(this instanceof p){var T=c.apply(this,n(d,arguments));return Object(T)===T?T:this}return c.apply(l,n(d,arguments))},g=t(0,c.length-d.length),y=[],x=0;x<g;x++)y[x]="$"+x;if(p=Function("binder","return function ("+o(y,",")+"){ return binder.apply(this,arguments); }")(m),c.prototype){var w=function(){};w.prototype=c.prototype,p.prototype=new w,w.prototype=null}return p},Cc}var Pc,Cf;function Sl(){if(Cf)return Pc;Cf=1;var r=PS();return Pc=Function.prototype.bind||r,Pc}var Rc,Pf;function fd(){return Pf||(Pf=1,Rc=Function.prototype.call),Rc}var Ic,Rf;function Hv(){return Rf||(Rf=1,Ic=Function.prototype.apply),Ic}var kc,If;function RS(){return If||(If=1,kc=typeof Reflect<"u"&&Reflect&&Reflect.apply),kc}var Mc,kf;function IS(){if(kf)return Mc;kf=1;var r=Sl(),e=Hv(),t=fd(),i=RS();return Mc=i||r.call(t,e),Mc}var Dc,Mf;function zv(){if(Mf)return Dc;Mf=1;var r=Sl(),e=gs(),t=fd(),i=IS();return Dc=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return i(r,t,s)},Dc}var Oc,Df;function kS(){if(Df)return Oc;Df=1;var r=zv(),e=Uv(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!t&&e&&e(Object.prototype,"__proto__"),n=Object,s=n.getPrototypeOf;return Oc=i&&typeof i.get=="function"?r([i.get]):typeof s=="function"?function(a){return s(a==null?a:n(a))}:!1,Oc}var Lc,Of;function MS(){if(Of)return Lc;Of=1;var r=Gv(),e=jv(),t=kS();return Lc=r?function(n){return r(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:t?function(n){return t(n)}:null,Lc}var Bc,Lf;function DS(){if(Lf)return Bc;Lf=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Sl();return Bc=t.call(r,e),Bc}var Fc,Bf;function md(){if(Bf)return Fc;Bf=1;var r,e=$v(),t=hS(),i=uS(),n=dS(),s=pS(),o=fS(),a=gs(),l=mS(),c=gS(),d=vS(),p=yS(),m=_S(),g=bS(),y=xS(),x=TS(),w=Function,T=function(ee){try{return w('"use strict"; return ('+ee+").constructor;")()}catch{}},E=Uv(),P=ES(),I=function(){throw new a},A=E?function(){try{return arguments.callee,I}catch{try{return E(arguments,"callee").get}catch{return I}}}():I,F=CS()(),b=MS(),B=jv(),H=Gv(),W=Hv(),Q=fd(),N={},G=typeof Uint8Array>"u"||!b?r:b(Uint8Array),X={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":F&&b?b([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":N,"%AsyncGenerator%":N,"%AsyncGeneratorFunction%":N,"%AsyncIteratorPrototype%":N,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":N,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":F&&b?b(b([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!F||!b?r:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!F||!b?r:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":F&&b?b(""[Symbol.iterator]()):r,"%Symbol%":F?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":A,"%TypedArray%":G,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":Q,"%Function.prototype.apply%":W,"%Object.defineProperty%":P,"%Object.getPrototypeOf%":B,"%Math.abs%":c,"%Math.floor%":d,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":y,"%Math.sign%":x,"%Reflect.getPrototypeOf%":H};if(b)try{null.error}catch(ee){var se=b(b(ee));X["%Error.prototype%"]=se}var M=function ee(le){var we;if(le==="%AsyncFunction%")we=T("async function () {}");else if(le==="%GeneratorFunction%")we=T("function* () {}");else if(le==="%AsyncGeneratorFunction%")we=T("async function* () {}");else if(le==="%AsyncGenerator%"){var Pe=ee("%AsyncGeneratorFunction%");Pe&&(we=Pe.prototype)}else if(le==="%AsyncIteratorPrototype%"){var Ne=ee("%AsyncGenerator%");Ne&&b&&(we=b(Ne.prototype))}return X[le]=we,we},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=Sl(),z=DS(),U=k.call(Q,Array.prototype.concat),j=k.call(W,Array.prototype.splice),K=k.call(Q,String.prototype.replace),Y=k.call(Q,String.prototype.slice),te=k.call(Q,RegExp.prototype.exec),ae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pe=/\\(\\)?/g,be=function(le){var we=Y(le,0,1),Pe=Y(le,-1);if(we==="%"&&Pe!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Pe==="%"&&we!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var Ne=[];return K(le,ae,function(We,Ee,Te,pt){Ne[Ne.length]=Te?K(pt,pe,"$1"):Ee||We}),Ne},Ae=function(le,we){var Pe=le,Ne;if(z(L,Pe)&&(Ne=L[Pe],Pe="%"+Ne[0]+"%"),z(X,Pe)){var We=X[Pe];if(We===N&&(We=M(Pe)),typeof We>"u"&&!we)throw new a("intrinsic "+le+" exists, but is not available. Please file an issue!");return{alias:Ne,name:Pe,value:We}}throw new o("intrinsic "+le+" does not exist!")};return Fc=function(le,we){if(typeof le!="string"||le.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof we!="boolean")throw new a('"allowMissing" argument must be a boolean');if(te(/^%?[^%]*%?$/,le)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Pe=be(le),Ne=Pe.length>0?Pe[0]:"",We=Ae("%"+Ne+"%",we),Ee=We.name,Te=We.value,pt=!1,ct=We.alias;ct&&(Ne=ct[0],j(Pe,U([0,1],ct)));for(var Ei=1,Yt=!0;Ei<Pe.length;Ei+=1){var Ot=Pe[Ei],oi=Y(Ot,0,1),ai=Y(Ot,-1);if((oi==='"'||oi==="'"||oi==="`"||ai==='"'||ai==="'"||ai==="`")&&oi!==ai)throw new o("property names with quotes must have matching quotes");if((Ot==="constructor"||!Yt)&&(pt=!0),Ne+="."+Ot,Ee="%"+Ne+"%",z(X,Ee))Te=X[Ee];else if(Te!=null){if(!(Ot in Te)){if(!we)throw new a("base intrinsic for "+le+" exists, but the property is not available.");return}if(E&&Ei+1>=Pe.length){var pr=E(Te,Ot);Yt=!!pr,Yt&&"get"in pr&&!("originalValue"in pr.get)?Te=pr.get:Te=Te[Ot]}else Yt=z(Te,Ot),Te=Te[Ot];Yt&&!pt&&(X[Ee]=Te)}}return Te},Fc}var Nc,Ff;function Vv(){if(Ff)return Nc;Ff=1;var r=md(),e=zv(),t=e([r("%String.prototype.indexOf%")]);return Nc=function(n,s){var o=r(n,!!s);return typeof o=="function"&&t(n,".prototype.")>-1?e([o]):o},Nc}var $c,Nf;function Wv(){if(Nf)return $c;Nf=1;var r=md(),e=Vv(),t=Tl(),i=gs(),n=r("%Map%",!0),s=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),l=e("Map.prototype.delete",!0),c=e("Map.prototype.size",!0);return $c=!!n&&function(){var p,m={assert:function(g){if(!m.has(g))throw new i("Side channel does not contain "+t(g))},delete:function(g){if(p){var y=l(p,g);return c(p)===0&&(p=void 0),y}return!1},get:function(g){if(p)return s(p,g)},has:function(g){return p?a(p,g):!1},set:function(g,y){p||(p=new n),o(p,g,y)}};return m},$c}var Uc,$f;function OS(){if($f)return Uc;$f=1;var r=md(),e=Vv(),t=Tl(),i=Wv(),n=gs(),s=r("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),c=e("WeakMap.prototype.delete",!0);return Uc=s?function(){var p,m,g={assert:function(y){if(!g.has(y))throw new n("Side channel does not contain "+t(y))},delete:function(y){if(s&&y&&(typeof y=="object"||typeof y=="function")){if(p)return c(p,y)}else if(i&&m)return m.delete(y);return!1},get:function(y){return s&&y&&(typeof y=="object"||typeof y=="function")&&p?o(p,y):m&&m.get(y)},has:function(y){return s&&y&&(typeof y=="object"||typeof y=="function")&&p?l(p,y):!!m&&m.has(y)},set:function(y,x){s&&y&&(typeof y=="object"||typeof y=="function")?(p||(p=new s),a(p,y,x)):i&&(m||(m=i()),m.set(y,x))}};return g}:i,Uc}var Gc,Uf;function LS(){if(Uf)return Gc;Uf=1;var r=gs(),e=Tl(),t=cS(),i=Wv(),n=OS(),s=n||i||t;return Gc=function(){var a,l={assert:function(c){if(!l.has(c))throw new r("Side channel does not contain "+e(c))},delete:function(c){return!!a&&a.delete(c)},get:function(c){return a&&a.get(c)},has:function(c){return!!a&&a.has(c)},set:function(c,d){a||(a=s()),a.set(c,d)}};return l},Gc}var jc,Gf;function gd(){if(Gf)return jc;Gf=1;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return jc={default:t.RFC3986,formatters:{RFC1738:function(i){return r.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},jc}var Hc,jf;function Xv(){if(jf)return Hc;jf=1;var r=gd(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=function(){for(var w=[],T=0;T<256;++T)w.push("%"+((T<16?"0":"")+T.toString(16)).toUpperCase());return w}(),n=function(T){for(;T.length>1;){var E=T.pop(),P=E.obj[E.prop];if(t(P)){for(var I=[],A=0;A<P.length;++A)typeof P[A]<"u"&&I.push(P[A]);E.obj[E.prop]=I}}},s=function(T,E){for(var P=E&&E.plainObjects?{__proto__:null}:{},I=0;I<T.length;++I)typeof T[I]<"u"&&(P[I]=T[I]);return P},o=function w(T,E,P){if(!E)return T;if(typeof E!="object"&&typeof E!="function"){if(t(T))T.push(E);else if(T&&typeof T=="object")(P&&(P.plainObjects||P.allowPrototypes)||!e.call(Object.prototype,E))&&(T[E]=!0);else return[T,E];return T}if(!T||typeof T!="object")return[T].concat(E);var I=T;return t(T)&&!t(E)&&(I=s(T,P)),t(T)&&t(E)?(E.forEach(function(A,F){if(e.call(T,F)){var b=T[F];b&&typeof b=="object"&&A&&typeof A=="object"?T[F]=w(b,A,P):T.push(A)}else T[F]=A}),T):Object.keys(E).reduce(function(A,F){var b=E[F];return e.call(A,F)?A[F]=w(A[F],b,P):A[F]=b,A},I)},a=function(T,E){return Object.keys(E).reduce(function(P,I){return P[I]=E[I],P},T)},l=function(w,T,E){var P=w.replace(/\+/g," ");if(E==="iso-8859-1")return P.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(P)}catch{return P}},c=1024,d=function(T,E,P,I,A){if(T.length===0)return T;var F=T;if(typeof T=="symbol"?F=Symbol.prototype.toString.call(T):typeof T!="string"&&(F=String(T)),P==="iso-8859-1")return escape(F).replace(/%u[0-9a-f]{4}/gi,function(G){return"%26%23"+parseInt(G.slice(2),16)+"%3B"});for(var b="",B=0;B<F.length;B+=c){for(var H=F.length>=c?F.slice(B,B+c):F,W=[],Q=0;Q<H.length;++Q){var N=H.charCodeAt(Q);if(N===45||N===46||N===95||N===126||N>=48&&N<=57||N>=65&&N<=90||N>=97&&N<=122||A===r.RFC1738&&(N===40||N===41)){W[W.length]=H.charAt(Q);continue}if(N<128){W[W.length]=i[N];continue}if(N<2048){W[W.length]=i[192|N>>6]+i[128|N&63];continue}if(N<55296||N>=57344){W[W.length]=i[224|N>>12]+i[128|N>>6&63]+i[128|N&63];continue}Q+=1,N=65536+((N&1023)<<10|H.charCodeAt(Q)&1023),W[W.length]=i[240|N>>18]+i[128|N>>12&63]+i[128|N>>6&63]+i[128|N&63]}b+=W.join("")}return b},p=function(T){for(var E=[{obj:{o:T},prop:"o"}],P=[],I=0;I<E.length;++I)for(var A=E[I],F=A.obj[A.prop],b=Object.keys(F),B=0;B<b.length;++B){var H=b[B],W=F[H];typeof W=="object"&&W!==null&&P.indexOf(W)===-1&&(E.push({obj:F,prop:H}),P.push(W))}return n(E),T},m=function(T){return Object.prototype.toString.call(T)==="[object RegExp]"},g=function(T){return!T||typeof T!="object"?!1:!!(T.constructor&&T.constructor.isBuffer&&T.constructor.isBuffer(T))},y=function(T,E){return[].concat(T,E)},x=function(T,E){if(t(T)){for(var P=[],I=0;I<T.length;I+=1)P.push(E(T[I]));return P}return E(T)};return Hc={arrayToObject:s,assign:a,combine:y,compact:p,decode:l,encode:d,isBuffer:g,isRegExp:m,maybeMap:x,merge:o},Hc}var zc,Hf;function BS(){if(Hf)return zc;Hf=1;var r=LS(),e=Xv(),t=gd(),i=Object.prototype.hasOwnProperty,n={brackets:function(w){return w+"[]"},comma:"comma",indices:function(w,T){return w+"["+T+"]"},repeat:function(w){return w}},s=Array.isArray,o=Array.prototype.push,a=function(x,w){o.apply(x,s(w)?w:[w])},l=Date.prototype.toISOString,c=t.default,d={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(w){return l.call(w)},skipNulls:!1,strictNullHandling:!1},p=function(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w=="symbol"||typeof w=="bigint"},m={},g=function x(w,T,E,P,I,A,F,b,B,H,W,Q,N,G,X,se,M,L){for(var k=w,z=L,U=0,j=!1;(z=z.get(m))!==void 0&&!j;){var K=z.get(w);if(U+=1,typeof K<"u"){if(K===U)throw new RangeError("Cyclic object value");j=!0}typeof z.get(m)>"u"&&(U=0)}if(typeof H=="function"?k=H(T,k):k instanceof Date?k=N(k):E==="comma"&&s(k)&&(k=e.maybeMap(k,function(Ee){return Ee instanceof Date?N(Ee):Ee})),k===null){if(A)return B&&!se?B(T,d.encoder,M,"key",G):T;k=""}if(p(k)||e.isBuffer(k)){if(B){var Y=se?T:B(T,d.encoder,M,"key",G);return[X(Y)+"="+X(B(k,d.encoder,M,"value",G))]}return[X(T)+"="+X(String(k))]}var te=[];if(typeof k>"u")return te;var ae;if(E==="comma"&&s(k))se&&B&&(k=e.maybeMap(k,B)),ae=[{value:k.length>0?k.join(",")||null:void 0}];else if(s(H))ae=H;else{var pe=Object.keys(k);ae=W?pe.sort(W):pe}var be=b?String(T).replace(/\./g,"%2E"):String(T),Ae=P&&s(k)&&k.length===1?be+"[]":be;if(I&&s(k)&&k.length===0)return Ae+"[]";for(var ee=0;ee<ae.length;++ee){var le=ae[ee],we=typeof le=="object"&&le&&typeof le.value<"u"?le.value:k[le];if(!(F&&we===null)){var Pe=Q&&b?String(le).replace(/\./g,"%2E"):String(le),Ne=s(k)?typeof E=="function"?E(Ae,Pe):Ae:Ae+(Q?"."+Pe:"["+Pe+"]");L.set(w,U);var We=r();We.set(m,L),a(te,x(we,Ne,E,P,I,A,F,b,E==="comma"&&se&&s(k)?null:B,H,W,Q,N,G,X,se,M,We))}}return te},y=function(w){if(!w)return d;if(typeof w.allowEmptyArrays<"u"&&typeof w.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof w.encodeDotInKeys<"u"&&typeof w.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(w.encoder!==null&&typeof w.encoder<"u"&&typeof w.encoder!="function")throw new TypeError("Encoder has to be a function.");var T=w.charset||d.charset;if(typeof w.charset<"u"&&w.charset!=="utf-8"&&w.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof w.format<"u"){if(!i.call(t.formatters,w.format))throw new TypeError("Unknown format option provided.");E=w.format}var P=t.formatters[E],I=d.filter;(typeof w.filter=="function"||s(w.filter))&&(I=w.filter);var A;if(w.arrayFormat in n?A=w.arrayFormat:"indices"in w?A=w.indices?"indices":"repeat":A=d.arrayFormat,"commaRoundTrip"in w&&typeof w.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var F=typeof w.allowDots>"u"?w.encodeDotInKeys===!0?!0:d.allowDots:!!w.allowDots;return{addQueryPrefix:typeof w.addQueryPrefix=="boolean"?w.addQueryPrefix:d.addQueryPrefix,allowDots:F,allowEmptyArrays:typeof w.allowEmptyArrays=="boolean"?!!w.allowEmptyArrays:d.allowEmptyArrays,arrayFormat:A,charset:T,charsetSentinel:typeof w.charsetSentinel=="boolean"?w.charsetSentinel:d.charsetSentinel,commaRoundTrip:!!w.commaRoundTrip,delimiter:typeof w.delimiter>"u"?d.delimiter:w.delimiter,encode:typeof w.encode=="boolean"?w.encode:d.encode,encodeDotInKeys:typeof w.encodeDotInKeys=="boolean"?w.encodeDotInKeys:d.encodeDotInKeys,encoder:typeof w.encoder=="function"?w.encoder:d.encoder,encodeValuesOnly:typeof w.encodeValuesOnly=="boolean"?w.encodeValuesOnly:d.encodeValuesOnly,filter:I,format:E,formatter:P,serializeDate:typeof w.serializeDate=="function"?w.serializeDate:d.serializeDate,skipNulls:typeof w.skipNulls=="boolean"?w.skipNulls:d.skipNulls,sort:typeof w.sort=="function"?w.sort:null,strictNullHandling:typeof w.strictNullHandling=="boolean"?w.strictNullHandling:d.strictNullHandling}};return zc=function(x,w){var T=x,E=y(w),P,I;typeof E.filter=="function"?(I=E.filter,T=I("",T)):s(E.filter)&&(I=E.filter,P=I);var A=[];if(typeof T!="object"||T===null)return"";var F=n[E.arrayFormat],b=F==="comma"&&E.commaRoundTrip;P||(P=Object.keys(T)),E.sort&&P.sort(E.sort);for(var B=r(),H=0;H<P.length;++H){var W=P[H],Q=T[W];E.skipNulls&&Q===null||a(A,g(Q,W,F,b,E.allowEmptyArrays,E.strictNullHandling,E.skipNulls,E.encodeDotInKeys,E.encode?E.encoder:null,E.filter,E.sort,E.allowDots,E.serializeDate,E.format,E.formatter,E.encodeValuesOnly,E.charset,B))}var N=A.join(E.delimiter),G=E.addQueryPrefix===!0?"?":"";return E.charsetSentinel&&(E.charset==="iso-8859-1"?G+="utf8=%26%2310003%3B&":G+="utf8=%E2%9C%93&"),N.length>0?G+N:""},zc}var Vc,zf;function FS(){if(zf)return Vc;zf=1;var r=Xv(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},n=function(m){return m.replace(/&#(\d+);/g,function(g,y){return String.fromCharCode(parseInt(y,10))})},s=function(m,g,y){if(m&&typeof m=="string"&&g.comma&&m.indexOf(",")>-1)return m.split(",");if(g.throwOnLimitExceeded&&y>=g.arrayLimit)throw new RangeError("Array limit exceeded. Only "+g.arrayLimit+" element"+(g.arrayLimit===1?"":"s")+" allowed in an array.");return m},o="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",l=function(g,y){var x={__proto__:null},w=y.ignoreQueryPrefix?g.replace(/^\?/,""):g;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var T=y.parameterLimit===1/0?void 0:y.parameterLimit,E=w.split(y.delimiter,y.throwOnLimitExceeded?T+1:T);if(y.throwOnLimitExceeded&&E.length>T)throw new RangeError("Parameter limit exceeded. Only "+T+" parameter"+(T===1?"":"s")+" allowed.");var P=-1,I,A=y.charset;if(y.charsetSentinel)for(I=0;I<E.length;++I)E[I].indexOf("utf8=")===0&&(E[I]===a?A="utf-8":E[I]===o&&(A="iso-8859-1"),P=I,I=E.length);for(I=0;I<E.length;++I)if(I!==P){var F=E[I],b=F.indexOf("]="),B=b===-1?F.indexOf("="):b+1,H,W;B===-1?(H=y.decoder(F,i.decoder,A,"key"),W=y.strictNullHandling?null:""):(H=y.decoder(F.slice(0,B),i.decoder,A,"key"),W=r.maybeMap(s(F.slice(B+1),y,t(x[H])?x[H].length:0),function(N){return y.decoder(N,i.decoder,A,"value")})),W&&y.interpretNumericEntities&&A==="iso-8859-1"&&(W=n(String(W))),F.indexOf("[]=")>-1&&(W=t(W)?[W]:W);var Q=e.call(x,H);Q&&y.duplicates==="combine"?x[H]=r.combine(x[H],W):(!Q||y.duplicates==="last")&&(x[H]=W)}return x},c=function(m,g,y,x){var w=0;if(m.length>0&&m[m.length-1]==="[]"){var T=m.slice(0,-1).join("");w=Array.isArray(g)&&g[T]?g[T].length:0}for(var E=x?g:s(g,y,w),P=m.length-1;P>=0;--P){var I,A=m[P];if(A==="[]"&&y.parseArrays)I=y.allowEmptyArrays&&(E===""||y.strictNullHandling&&E===null)?[]:r.combine([],E);else{I=y.plainObjects?{__proto__:null}:{};var F=A.charAt(0)==="["&&A.charAt(A.length-1)==="]"?A.slice(1,-1):A,b=y.decodeDotInKeys?F.replace(/%2E/g,"."):F,B=parseInt(b,10);!y.parseArrays&&b===""?I={0:E}:!isNaN(B)&&A!==b&&String(B)===b&&B>=0&&y.parseArrays&&B<=y.arrayLimit?(I=[],I[B]=E):b!=="__proto__"&&(I[b]=E)}E=I}return E},d=function(g,y,x,w){if(g){var T=x.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,E=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,I=x.depth>0&&E.exec(T),A=I?T.slice(0,I.index):T,F=[];if(A){if(!x.plainObjects&&e.call(Object.prototype,A)&&!x.allowPrototypes)return;F.push(A)}for(var b=0;x.depth>0&&(I=P.exec(T))!==null&&b<x.depth;){if(b+=1,!x.plainObjects&&e.call(Object.prototype,I[1].slice(1,-1))&&!x.allowPrototypes)return;F.push(I[1])}if(I){if(x.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+x.depth+" and strictDepth is true");F.push("["+T.slice(I.index)+"]")}return c(F,y,x,w)}},p=function(g){if(!g)return i;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof g.throwOnLimitExceeded<"u"&&typeof g.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var y=typeof g.charset>"u"?i.charset:g.charset,x=typeof g.duplicates>"u"?i.duplicates:g.duplicates;if(x!=="combine"&&x!=="first"&&x!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:i.allowDots:!!g.allowDots;return{allowDots:w,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:i.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:i.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:i.arrayLimit,charset:y,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:i.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:i.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:i.decoder,delimiter:typeof g.delimiter=="string"||r.isRegExp(g.delimiter)?g.delimiter:i.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:i.depth,duplicates:x,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:i.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:i.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:i.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof g.throwOnLimitExceeded=="boolean"?g.throwOnLimitExceeded:!1}};return Vc=function(m,g){var y=p(g);if(m===""||m===null||typeof m>"u")return y.plainObjects?{__proto__:null}:{};for(var x=typeof m=="string"?l(m,y):m,w=y.plainObjects?{__proto__:null}:{},T=Object.keys(x),E=0;E<T.length;++E){var P=T[E],I=d(P,x[P],y,typeof m=="string");w=r.merge(w,I,y)}return y.allowSparse===!0?w:r.compact(w)},Vc}var Wc,Vf;function NS(){if(Vf)return Wc;Vf=1;var r=BS(),e=FS(),t=gd();return Wc={formats:t,parse:e,stringify:r},Wc}var Wf;function $S(){if(Wf)return an;Wf=1;var r=sS();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,n=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),a=["'"].concat(o),l=["%","/","?",";","#"].concat(a),c=["/","?","#"],d=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=NS();function T(A,F,b){if(A&&typeof A=="object"&&A instanceof e)return A;var B=new e;return B.parse(A,F,b),B}e.prototype.parse=function(A,F,b){if(typeof A!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof A);var B=A.indexOf("?"),H=B!==-1&&B<A.indexOf("#")?"?":"#",W=A.split(H),Q=/\\/g;W[0]=W[0].replace(Q,"/"),A=W.join(H);var N=A;if(N=N.trim(),!b&&A.split("#").length===1){var G=n.exec(N);if(G)return this.path=N,this.href=N,this.pathname=G[1],G[2]?(this.search=G[2],F?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):F&&(this.search="",this.query={}),this}var X=t.exec(N);if(X){X=X[0];var se=X.toLowerCase();this.protocol=se,N=N.substr(X.length)}if(b||X||N.match(/^\/\/[^@/]+@[^@/]+/)){var M=N.substr(0,2)==="//";M&&!(X&&y[X])&&(N=N.substr(2),this.slashes=!0)}if(!y[X]&&(M||X&&!x[X])){for(var L=-1,k=0;k<c.length;k++){var z=N.indexOf(c[k]);z!==-1&&(L===-1||z<L)&&(L=z)}var U,j;L===-1?j=N.lastIndexOf("@"):j=N.lastIndexOf("@",L),j!==-1&&(U=N.slice(0,j),N=N.slice(j+1),this.auth=decodeURIComponent(U)),L=-1;for(var k=0;k<l.length;k++){var z=N.indexOf(l[k]);z!==-1&&(L===-1||z<L)&&(L=z)}L===-1&&(L=N.length),this.host=N.slice(0,L),N=N.slice(L),this.parseHost(),this.hostname=this.hostname||"";var K=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!K)for(var Y=this.hostname.split(/\./),k=0,te=Y.length;k<te;k++){var ae=Y[k];if(ae&&!ae.match(p)){for(var pe="",be=0,Ae=ae.length;be<Ae;be++)ae.charCodeAt(be)>127?pe+="x":pe+=ae[be];if(!pe.match(p)){var ee=Y.slice(0,k),le=Y.slice(k+1),we=ae.match(m);we&&(ee.push(we[1]),le.unshift(we[2])),le.length&&(N="/"+le.join(".")+N),this.hostname=ee.join(".");break}}}this.hostname.length>d?this.hostname="":this.hostname=this.hostname.toLowerCase(),K||(this.hostname=r.toASCII(this.hostname));var Pe=this.port?":"+this.port:"",Ne=this.hostname||"";this.host=Ne+Pe,this.href+=this.host,K&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!g[se])for(var k=0,te=a.length;k<te;k++){var We=a[k];if(N.indexOf(We)!==-1){var Ee=encodeURIComponent(We);Ee===We&&(Ee=escape(We)),N=N.split(We).join(Ee)}}var Te=N.indexOf("#");Te!==-1&&(this.hash=N.substr(Te),N=N.slice(0,Te));var pt=N.indexOf("?");if(pt!==-1?(this.search=N.substr(pt),this.query=N.substr(pt+1),F&&(this.query=w.parse(this.query)),N=N.slice(0,pt)):F&&(this.search="",this.query={}),N&&(this.pathname=N),x[se]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Pe=this.pathname||"",ct=this.search||"";this.path=Pe+ct}return this.href=this.format(),this};function E(A){return typeof A=="string"&&(A=T(A)),A instanceof e?A.format():e.prototype.format.call(A)}e.prototype.format=function(){var A=this.auth||"";A&&(A=encodeURIComponent(A),A=A.replace(/%3A/i,":"),A+="@");var F=this.protocol||"",b=this.pathname||"",B=this.hash||"",H=!1,W="";this.host?H=A+this.host:this.hostname&&(H=A+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(H+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(W=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Q=this.search||W&&"?"+W||"";return F&&F.substr(-1)!==":"&&(F+=":"),this.slashes||(!F||x[F])&&H!==!1?(H="//"+(H||""),b&&b.charAt(0)!=="/"&&(b="/"+b)):H||(H=""),B&&B.charAt(0)!=="#"&&(B="#"+B),Q&&Q.charAt(0)!=="?"&&(Q="?"+Q),b=b.replace(/[?#]/g,function(N){return encodeURIComponent(N)}),Q=Q.replace("#","%23"),F+H+b+Q+B};function P(A,F){return T(A,!1,!0).resolve(F)}e.prototype.resolve=function(A){return this.resolveObject(T(A,!1,!0)).format()};function I(A,F){return A?T(A,!1,!0).resolveObject(F):F}return e.prototype.resolveObject=function(A){if(typeof A=="string"){var F=new e;F.parse(A,!1,!0),A=F}for(var b=new e,B=Object.keys(this),H=0;H<B.length;H++){var W=B[H];b[W]=this[W]}if(b.hash=A.hash,A.href==="")return b.href=b.format(),b;if(A.slashes&&!A.protocol){for(var Q=Object.keys(A),N=0;N<Q.length;N++){var G=Q[N];G!=="protocol"&&(b[G]=A[G])}return x[b.protocol]&&b.hostname&&!b.pathname&&(b.pathname="/",b.path=b.pathname),b.href=b.format(),b}if(A.protocol&&A.protocol!==b.protocol){if(!x[A.protocol]){for(var X=Object.keys(A),se=0;se<X.length;se++){var M=X[se];b[M]=A[M]}return b.href=b.format(),b}if(b.protocol=A.protocol,!A.host&&!y[A.protocol]){for(var te=(A.pathname||"").split("/");te.length&&!(A.host=te.shift()););A.host||(A.host=""),A.hostname||(A.hostname=""),te[0]!==""&&te.unshift(""),te.length<2&&te.unshift(""),b.pathname=te.join("/")}else b.pathname=A.pathname;if(b.search=A.search,b.query=A.query,b.host=A.host||"",b.auth=A.auth,b.hostname=A.hostname||A.host,b.port=A.port,b.pathname||b.search){var L=b.pathname||"",k=b.search||"";b.path=L+k}return b.slashes=b.slashes||A.slashes,b.href=b.format(),b}var z=b.pathname&&b.pathname.charAt(0)==="/",U=A.host||A.pathname&&A.pathname.charAt(0)==="/",j=U||z||b.host&&A.pathname,K=j,Y=b.pathname&&b.pathname.split("/")||[],te=A.pathname&&A.pathname.split("/")||[],ae=b.protocol&&!x[b.protocol];if(ae&&(b.hostname="",b.port=null,b.host&&(Y[0]===""?Y[0]=b.host:Y.unshift(b.host)),b.host="",A.protocol&&(A.hostname=null,A.port=null,A.host&&(te[0]===""?te[0]=A.host:te.unshift(A.host)),A.host=null),j=j&&(te[0]===""||Y[0]==="")),U)b.host=A.host||A.host===""?A.host:b.host,b.hostname=A.hostname||A.hostname===""?A.hostname:b.hostname,b.search=A.search,b.query=A.query,Y=te;else if(te.length)Y||(Y=[]),Y.pop(),Y=Y.concat(te),b.search=A.search,b.query=A.query;else if(A.search!=null){if(ae){b.host=Y.shift(),b.hostname=b.host;var pe=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;pe&&(b.auth=pe.shift(),b.hostname=pe.shift(),b.host=b.hostname)}return b.search=A.search,b.query=A.query,(b.pathname!==null||b.search!==null)&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b}if(!Y.length)return b.pathname=null,b.search?b.path="/"+b.search:b.path=null,b.href=b.format(),b;for(var be=Y.slice(-1)[0],Ae=(b.host||A.host||Y.length>1)&&(be==="."||be==="..")||be==="",ee=0,le=Y.length;le>=0;le--)be=Y[le],be==="."?Y.splice(le,1):be===".."?(Y.splice(le,1),ee++):ee&&(Y.splice(le,1),ee--);if(!j&&!K)for(;ee--;ee)Y.unshift("..");j&&Y[0]!==""&&(!Y[0]||Y[0].charAt(0)!=="/")&&Y.unshift(""),Ae&&Y.join("/").substr(-1)!=="/"&&Y.push("");var we=Y[0]===""||Y[0]&&Y[0].charAt(0)==="/";if(ae){b.hostname=we?"":Y.length?Y.shift():"",b.host=b.hostname;var pe=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;pe&&(b.auth=pe.shift(),b.hostname=pe.shift(),b.host=b.hostname)}return j=j||b.host&&Y.length,j&&!we&&Y.unshift(""),Y.length>0?b.pathname=Y.join("/"):(b.pathname=null,b.path=null),(b.pathname!==null||b.search!==null)&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.auth=A.auth||b.auth,b.slashes=b.slashes||A.slashes,b.href=b.format(),b},e.prototype.parseHost=function(){var A=this.host,F=i.exec(A);F&&(F=F[0],F!==":"&&(this.port=F.substr(1)),A=A.substr(0,A.length-F.length)),A&&(this.hostname=A)},an.parse=T,an.resolve=P,an.resolveObject=I,an.format=E,an.Url=e,an}var rO=$S();const Xf={};function qe(r,e,t=3){if(Xf[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(i))),Xf[e]=!0}function vr(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Ms(r){return r.split("?")[0].split("#")[0]}function US(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function GS(r,e,t){return r.replace(new RegExp(US(e),"g"),t)}function jS(r,e){let t="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),n=a,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,n=a,s=0;continue}}}else t.length>0?t+=`/${r.slice(n+1,a)}`:t=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Pt={toPosix(r){return GS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){vr(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(vr(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=Ms(this.toPosix(e??_e.ADAPTER.getBaseUrl())),n=Ms(this.toPosix(t??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Pt.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(vr(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const i=r.endsWith("/");return r=jS(r),r.length>0&&i&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return vr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];if(vr(i),i.length>0)if(e===void 0)e=i;else{const n=r[t-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(vr(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let i=-1,n=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!n){i=a;break}}else n=!1;return i===-1?t?"/":this.isUrl(o)?s+r:s:t&&i===1?"//":s+r.slice(0,i)},rootname(r){vr(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){vr(r),e&&vr(e),r=Ms(this.toPosix(r));let t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(t,i)},extname(r){vr(r),r=Ms(this.toPosix(r));let e=-1,t=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":r.slice(e,i)},parse(r){vr(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Ms(this.toPosix(r));let t=r.charCodeAt(0);const i=this.isAbsolute(r);let n;e.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,c=r.length-1,d=0;for(;c>=n;--c){if(t=r.charCodeAt(c),t===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),t===46?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||a===-1||d===0||d===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&i?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Xc;async function HS(){return Xc??(Xc=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return Wt.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return Wt.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.deleteFramebuffer(i),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?Wt.PMA:Wt.UNPACK})()),Xc}let Yc;function zS(){return typeof Yc>"u"&&(Yc=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!_e.ADAPTER.getWebGLRenderingContext())return!1;const t=_e.ADAPTER.createCanvas();let i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const n=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),Yc}var VS={grad:.9,turn:360,rad:360/(2*Math.PI)},di=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},At=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},lr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},Yv=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Yf=function(r){return{r:lr(r.r,0,255),g:lr(r.g,0,255),b:lr(r.b,0,255),a:lr(r.a)}},qc=function(r){return{r:At(r.r),g:At(r.g),b:At(r.b),a:At(r.a,3)}},WS=/^#([0-9a-f]{3,8})$/i,Yo=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},qv=function(r){var e=r.r,t=r.g,i=r.b,n=r.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},Kv=function(r){var e=r.h,t=r.s,i=r.v,n=r.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:n}},qf=function(r){return{h:Yv(r.h),s:lr(r.s,0,100),l:lr(r.l,0,100),a:lr(r.a)}},Kf=function(r){return{h:At(r.h),s:At(r.s),l:At(r.l),a:At(r.a,3)}},Jf=function(r){return Kv((t=(e=r).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Ks=function(r){return{h:(e=qv(r)).h,s:(n=(200-(t=e.s))*(i=e.v)/100)>0&&n<200?t*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,t,i,n},XS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gh={string:[[function(r){var e=WS.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?At(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?At(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=qS.exec(r)||KS.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:Yf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=XS.exec(r)||YS.exec(r);if(!e)return null;var t,i,n=qf({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(VS[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Jf(n)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,i=r.b,n=r.a,s=n===void 0?1:n;return di(e)&&di(t)&&di(i)?Yf({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,i=r.l,n=r.a,s=n===void 0?1:n;if(!di(e)||!di(t)||!di(i))return null;var o=qf({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return Jf(o)},"hsl"],[function(r){var e=r.h,t=r.s,i=r.v,n=r.a,s=n===void 0?1:n;if(!di(e)||!di(t)||!di(i))return null;var o=function(a){return{h:Yv(a.h),s:lr(a.s,0,100),v:lr(a.v,0,100),a:lr(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return Kv(o)},"hsv"]]},Qf=function(r,e){for(var t=0;t<e.length;t++){var i=e[t][0](r);if(i)return[i,e[t][1]]}return[null,void 0]},JS=function(r){return typeof r=="string"?Qf(r.trim(),Gh.string):typeof r=="object"&&r!==null?Qf(r,Gh.object):[null,void 0]},Kc=function(r,e){var t=Ks(r);return{h:t.h,s:lr(t.s+100*e,0,100),l:t.l,a:t.a}},Jc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Zf=function(r,e){var t=Ks(r);return{h:t.h,s:t.s,l:lr(t.l+100*e,0,100),a:t.a}},jh=function(){function r(e){this.parsed=JS(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return At(Jc(this.rgba),2)},r.prototype.isDark=function(){return Jc(this.rgba)<.5},r.prototype.isLight=function(){return Jc(this.rgba)>=.5},r.prototype.toHex=function(){return e=qc(this.rgba),t=e.r,i=e.g,n=e.b,o=(s=e.a)<1?Yo(At(255*s)):"","#"+Yo(t)+Yo(i)+Yo(n)+o;var e,t,i,n,s,o},r.prototype.toRgb=function(){return qc(this.rgba)},r.prototype.toRgbString=function(){return e=qc(this.rgba),t=e.r,i=e.g,n=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+n+", "+s+")":"rgb("+t+", "+i+", "+n+")";var e,t,i,n,s},r.prototype.toHsl=function(){return Kf(Ks(this.rgba))},r.prototype.toHslString=function(){return e=Kf(Ks(this.rgba)),t=e.h,i=e.s,n=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+n+"%, "+s+")":"hsl("+t+", "+i+"%, "+n+"%)";var e,t,i,n,s},r.prototype.toHsv=function(){return e=qv(this.rgba),{h:At(e.h),s:At(e.s),v:At(e.v),a:At(e.a,3)};var e},r.prototype.invert=function(){return Fr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Fr(Kc(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fr(Kc(this.rgba,-e))},r.prototype.grayscale=function(){return Fr(Kc(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Fr(Zf(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Fr(Zf(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Fr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):At(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=Ks(this.rgba);return typeof e=="number"?Fr({h:e,s:t.s,l:t.l,a:t.a}):At(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Fr(e).toHex()},r}(),Fr=function(r){return r instanceof jh?r:new jh(r)},em=[],QS=function(r){r.forEach(function(e){em.indexOf(e)<0&&(e(jh,Gh),em.push(e))})};function ZS(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in t)i[t[n]]=n;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var d=this.toRgb(),p=1/0,m="black";if(!s.length)for(var g in t)s[g]=new r(t[g]).toRgb();for(var y in t){var x=(a=d,l=s[y],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));x<p&&(p=x,m=y)}return m}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}QS([ZS]);const Xn=class ga{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ga)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,s)=>n===t[s]);if(e!==null&&t!==null){const n=Object.keys(e),s=Object.keys(t);return n.length!==s.length?!1:n.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,n]=this._components;return{r:e,g:t,b:i,a:n}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,i,n]=this._components;return e[0]=t,e[1]=i,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,n,s]=ga.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,n=n*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(n<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,n,s]=this._components;return e[0]=t,e[1]=i,e[2]=n,e[3]=s,e}normalize(e){let t,i,n,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,n=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,n,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,n,s=255]=e,t/=255,i/=255,n/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=ga.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Fr(e);o.isValid()&&({r:t,g:i,b:n,a:s}=o.rgba,t/=255,i/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((n,s)=>{e[s]=Math.min(Math.max(n,t),i)}),e)}};Xn.shared=new Xn,Xn.temp=new Xn,Xn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ht=Xn;function eE(r){return qe("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ht.shared.setValue(r).toHex()}function tE(r){return qe("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ht.shared.setValue(r).toNumber()}function rE(){const r=[],e=[];for(let i=0;i<32;i++)r[i]=i,e[i]=i;r[Be.NORMAL_NPM]=Be.NORMAL,r[Be.ADD_NPM]=Be.ADD,r[Be.SCREEN_NPM]=Be.SCREEN,e[Be.NORMAL]=Be.NORMAL_NPM,e[Be.ADD]=Be.ADD_NPM,e[Be.SCREEN]=Be.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const Jv=rE();function Qv(r,e){return Jv[e?1:0][r]}function iE(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,n=0;i<t;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function Zv(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function $a(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function tm(r){return!(r&r-1)&&!!r}function rm(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function is(r,e,t){const i=r.length;let n;if(e>=i||t===0)return;t=e+t>i?i-e:t;const s=i-t;for(n=e;n<s;++n)r[n]=r[n+t];r.length=s}function Hi(r){return r===0?0:r<0?-1:1}let nE=0;function En(){return++nE}const Hh=class{constructor(r,e,t,i){this.left=r,this.top=e,this.right=t,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Hh.EMPTY=new Hh(0,0,0,0);let im=Hh;const nm={},Nr=Object.create(null),Mi=Object.create(null);class sE{constructor(e,t,i){this._canvas=_e.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||_e.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function sm(r,e,t){for(let i=0,n=4*t*e;i<e;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function om(r,e,t,i,n){const s=4*e;for(let o=i,a=i*s+4*t;o<=n;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function oE(r){const{width:e,height:t}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&sm(n,e,o);)++o;if(o===t)return im.EMPTY;for(;sm(n,e,l);)--l;for(;om(n,e,s,o,l);)++s;for(;om(n,e,a,o,l);)--a;return++a,++l,new im(s,o,a,l)}function aE(r){const e=oE(r),{width:t,height:i}=e;let n=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(e.left,e.top,t,i)}return{width:t,height:i,data:n}}function lE(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Ti(r,e=1){var i;const t=(i=_e.RETINA_PREFIX)==null?void 0:i.exec(r);return t?parseFloat(t[1]):e}var de=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(de||{});const zh=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},am=(r,e)=>zh(r).priority??e,ke={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(zh).forEach(e=>{e.type.forEach(t=>{var i,n;return(n=(i=this._removeHandlers)[t])==null?void 0:n.call(i,e)})}),this},add(...r){return r.map(zh).forEach(e=>{e.type.forEach(t=>{var s,o;const i=this._addHandlers,n=this._queue;i[t]?(s=i[t])==null||s.call(i,e):(n[t]=n[t]||[],(o=n[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=e,n[r]=t;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((n,s)=>am(s,t)-am(n,t)))},i=>{const n=e.indexOf(i.ref);n!==-1&&e.splice(n,1)})}};class Vh{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const cE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function hE(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function uE(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=cE.replace(/%forloop%/gi,hE(r));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Qc=0,Zc=1,eh=2,th=3,rh=4,ih=5;class si{constructor(){this.data=0,this.blendMode=Be.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Qc)}set blend(e){!!(this.data&1<<Qc)!==e&&(this.data^=1<<Qc)}get offsets(){return!!(this.data&1<<Zc)}set offsets(e){!!(this.data&1<<Zc)!==e&&(this.data^=1<<Zc)}get culling(){return!!(this.data&1<<eh)}set culling(e){!!(this.data&1<<eh)!==e&&(this.data^=1<<eh)}get depthTest(){return!!(this.data&1<<th)}set depthTest(e){!!(this.data&1<<th)!==e&&(this.data^=1<<th)}get depthMask(){return!!(this.data&1<<ih)}set depthMask(e){!!(this.data&1<<ih)!==e&&(this.data^=1<<ih)}get clockwiseFrontFace(){return!!(this.data&1<<rh)}set clockwiseFrontFace(e){!!(this.data&1<<rh)!==e&&(this.data^=1<<rh)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Be.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new si;return e.depthTest=!1,e.blend=!0,e}}si.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Wh=[];function ey(r,e){if(!r)return null;let t="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(t=i[1].toLowerCase())}for(let i=Wh.length-1;i>=0;--i){const n=Wh[i];if(n.test&&n.test(r,t))return new n(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Cr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:d}=this;this._aliasCount++;for(let p=0,m=d.length;p<m;p++)d[p][c](e,t,i,n,s,o,a,l);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Cr.prototype,{dispatch:{value:Cr.prototype.emit},run:{value:Cr.prototype.emit}});class oo{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Cr("setRealSize"),this.onUpdate=new Cr("update"),this.onError=new Cr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class El extends oo{constructor(e,t){const{width:i,height:n}=t||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,i){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK);const s=t.realWidth,o=t.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(t.target,0,0,0,s,o,t.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const dE={scaleMode:mi.NEAREST,alphaMode:Wt.NPM},Xh=class Yn extends wo{constructor(e=null,t=null){super(),t=Object.assign({},Yn.defaultOptions,t);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:d,type:p,target:m,resolution:g,resourceOptions:y}=t;e&&!(e instanceof oo)&&(e=ey(e,y),e.internal=!0),this.resolution=g||_e.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=d,this.type=p,this.target=m,this.alphaMode=i,this.uid=En(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=tm(this.realWidth)&&tm(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Mi[this.cacheId],delete Nr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Yn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=_e.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${En()}`}s=e._pixiId}let o=Mi[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Yn(e,t),o.cacheId=s,Yn.addToCache(o,s)),o}static fromBuffer(e,t,i,n){e=e||new Float32Array(t*i*4);const s=new El(e,{width:t,height:i,...n==null?void 0:n.resourceOptions});let o,a;return e instanceof Float32Array?(o=he.RGBA,a=Oe.FLOAT):e instanceof Int32Array?(o=he.RGBA_INTEGER,a=Oe.INT):e instanceof Uint32Array?(o=he.RGBA_INTEGER,a=Oe.UNSIGNED_INT):e instanceof Int16Array?(o=he.RGBA_INTEGER,a=Oe.SHORT):e instanceof Uint16Array?(o=he.RGBA_INTEGER,a=Oe.UNSIGNED_SHORT):e instanceof Int8Array?(o=he.RGBA,a=Oe.BYTE):(o=he.RGBA,a=Oe.UNSIGNED_BYTE),s.internal=!0,new Yn(s,Object.assign({},dE,{type:a,format:o},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Mi[t]&&Mi[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Mi[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Mi[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Mi[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Mi[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Xh.defaultOptions={mipmap:ri.POW2,anisotropicLevel:0,scaleMode:mi.LINEAR,wrapMode:Wi.CLAMP,alphaMode:Wt.UNPACK,target:rs.TEXTURE_2D,format:he.RGBA,type:Oe.UNSIGNED_BYTE},Xh._globalBatch=0;let Ue=Xh;class Yh{constructor(){this.texArray=null,this.blend=0,this.type=Hr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let pE=0;class xt{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=pE++,this.disposeRunner=new Cr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Yr.ELEMENT_ARRAY_BUFFER:Yr.ARRAY_BUFFER}get index(){return this.type===Yr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new xt(e)}}class Ua{constructor(e,t=0,i=!1,n=Oe.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,i,n,s){return new Ua(e,t,i,n,s)}}const fE={Float32Array,Uint32Array,Int32Array,Uint8Array};function mE(r,e){let t=0,i=0;const n={};for(let l=0;l<r.length;l++)i+=e[l],t+=r[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<r.length;l++){const c=e[l],d=r[l],p=Zv(d);n[p]||(n[p]=new fE[p](s)),o=n[p];for(let m=0;m<d.length;m++){const g=(m/c|0)*i+a,y=m%c;o[g+y]=d[m]}a+=c}return new Float32Array(s)}const lm={5126:4,5123:2,5121:1};let gE=0;const vE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ki{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=gE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Cr("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,n=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof xt||(t instanceof Array&&(t=new Float32Array(t)),t=new xt(t));const c=e.split("|");if(c.length>1){for(let p=0;p<c.length;p++)this.addAttribute(c[p],t,i,n,s);return this}let d=this.buffers.indexOf(t);return d===-1&&(this.buffers.push(t),d=this.buffers.length-1),this.attributes[e]=new Ua(d,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof xt||(e instanceof Array&&(e=new Uint16Array(e)),e=new xt(e)),e.type=Yr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],i=new xt;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*lm[s.type]/4),s.buffer=0}for(i.data=mE(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Ki;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new xt(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new Ua(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Yr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Ki,i=[],n=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new vE[Zv(o.buffers[a].data)](n[a]),t.buffers[a]=new xt(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Yr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,d=0;for(let p=0;p<o.buffers.length;p++)if(o.buffers[p]!==o.indexBuffer){d=p;break}for(const p in o.attributes){const m=o.attributes[p];(m.buffer|0)===d&&(l+=m.size*lm[m.type]/4)}for(let p=0;p<e.length;p++){const m=e[p].indexBuffer.data;for(let g=0;g<m.length;g++)t.indexBuffer.data[g+c]+=a;a+=e[p].buffers[d].data.length/l,c+=m.length}}return t}}class ty extends Ki{constructor(e=!1){super(),this._buffer=new xt(null,e,!1),this._indexBuffer=new xt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Oe.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Oe.FLOAT).addAttribute("aColor",this._buffer,4,!0,Oe.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Oe.FLOAT).addIndex(this._indexBuffer)}}const Ga=Math.PI*2,yE=180/Math.PI,_E=Math.PI/180;var Mt=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Mt||{});class Qe{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Qe(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}Qe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const qo=[new Qe,new Qe,new Qe,new Qe];class ze{constructor(e=0,t=0,i=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(n),this.type=Mt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ze(0,0,0,0)}clone(){return new ze(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const B=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=B)return!1;const H=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>H}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=qo[0].set(e.left,e.top),l=qo[1].set(e.left,e.bottom),c=qo[2].set(e.right,e.top),d=qo[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(d,d),Math.max(a.x,l.x,c.x,d.x)<=i||Math.min(a.x,l.x,c.x,d.x)>=n||Math.max(a.y,l.y,c.y,d.y)<=s||Math.min(a.y,l.y,c.y,d.y)>=o))return!1;const m=p*(l.y-a.y),g=p*(a.x-l.x),y=m*i+g*s,x=m*n+g*s,w=m*i+g*o,T=m*n+g*o;if(Math.max(y,x,w,T)<=m*a.x+g*a.y||Math.min(y,x,w,T)>=m*d.x+g*d.y)return!1;const E=p*(a.y-c.y),P=p*(c.x-a.x),I=E*i+P*s,A=E*n+P*s,F=E*i+P*o,b=E*n+P*o;return!(Math.max(I,A,F,b)<=E*a.x+P*a.y||Math.min(I,A,F,b)>=E*d.x+P*d.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=n,this.height=s-n,this}}ze.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Al{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=Mt.CIRC}clone(){return new Al(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-e,s=this.y-t;return n*=n,s*=s,n+s<=i}getBounds(){return new ze(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Al.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Cl{constructor(e=0,t=0,i=0,n=0){this.x=e,this.y=t,this.width=i,this.height=n,this.type=Mt.ELIP}clone(){return new Cl(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,n=(t-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new ze(this.x-this.width,this.y-this.height,this.width,this.height)}}Cl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class xn{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let n=0,s=t.length;n<s;n++)i.push(t[n].x,t[n].y);t=i}this.points=t,this.type=Mt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new xn(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],d=this.points[o*2+1];l>t!=d>t&&e<(c-a)*((t-l)/(d-l))+a&&(i=!i)}return i}}xn.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class Pl{constructor(e=0,t=0,i=0,n=0,s=20){this.x=e,this.y=t,this.width=i,this.height=n,this.radius=s,this.type=Mt.RREC}clone(){return new Pl(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let n=e-(this.x+i),s=t-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=e-(this.x+this.width-i),n*n+s*s<=o)||(s=t-(this.y+this.height-i),n*n+s*s<=o)||(n=e-(this.x+i),n*n+s*s<=o))return!0}return!1}}Pl.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ut{constructor(e=1,t=0,i=0,n=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,n,s,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Qe;const i=e.x,n=e.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t}applyInverse(e,t){t=t||new Qe;const i=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return t.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,t,i,n,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,t),c=Math.abs(a+l);return c<1e-5||Math.abs(Ga-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*t+o.y*n),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,t=this.b,i=this.c,n=this.d,s=this.tx,o=e*n-t*i;return this.a=n/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ut;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ut}static get TEMP_MATRIX(){return new ut}}ut.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const un=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],pn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qh=[],ry=[],Ko=Math.sign;function bE(){for(let r=0;r<16;r++){const e=[];qh.push(e);for(let t=0;t<16;t++){const i=Ko(un[r]*un[t]+pn[r]*dn[t]),n=Ko(dn[r]*un[t]+fn[r]*dn[t]),s=Ko(un[r]*pn[t]+pn[r]*fn[t]),o=Ko(dn[r]*pn[t]+fn[r]*fn[t]);for(let a=0;a<16;a++)if(un[a]===i&&dn[a]===n&&pn[a]===s&&fn[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new ut;e.set(un[r],dn[r],pn[r],fn[r],0,0),ry.push(e)}}bE();const mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>un[r],uY:r=>dn[r],vX:r=>pn[r],vY:r=>fn[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>qh[r][e],sub:(r,e)=>qh[r][mt.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?mt.S:mt.N:Math.abs(e)*2<=Math.abs(r)?r>0?mt.E:mt.W:e>0?r>0?mt.SE:mt.SW:r>0?mt.NE:mt.NW,matrixAppendRotationInv:(r,e,t=0,i=0)=>{const n=ry[mt.inv(e)];n.tx=t,n.ty=i,r.append(n)}};class vi{constructor(e,t,i=0,n=0){this._x=i,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new vi(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}vi.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Kh=class{constructor(){this.worldTransform=new ut,this.localTransform=new ut,this.position=new vi(this.onChange,this,0,0),this.scale=new vi(this.onChange,this,1,1),this.pivot=new vi(this.onChange,this,0,0),this.skew=new vi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};Kh.IDENTITY=new Kh;let vd=Kh;vd.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var xE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,wE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function cm(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}function nh(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function iy(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return nh(2*e);case"bvec3":return nh(3*e);case"bvec4":return nh(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ns=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],TE={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},SE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function EE(r,e){var i;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=e[n];if(!s){((i=r.uniforms[n])==null?void 0:i.group)===!0&&(r.uniforms[n].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=r.uniforms[n];let a=!1;for(let l=0;l<ns.length;l++)if(ns[l].test(s,o)){t.push(ns[l].code(n,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?TE:SE)[s.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const ny={};let zn=ny;function AE(){if(zn===ny||zn!=null&&zn.isContextLost()){const r=_e.ADAPTER.createCanvas();let e;_e.PREFER_ENV>=Rn.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),zn=e}return zn}let Jo;function CE(){if(!Jo){Jo=ar.MEDIUM;const r=AE();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Jo=e.precision?ar.HIGH:ar.MEDIUM)}}return Jo}function hm(r,e){const t=r.getShaderSource(e).split(`
`).map((c,d)=>`${d}: ${c}`),i=r.getShaderInfoLog(e),n=i.split(`
`),s={},o=n.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{t[c-1]=`%c${t[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function PE(r,e,t,i){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||hm(r,t),r.getShaderParameter(i,r.COMPILE_STATUS)||hm(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const RE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function sy(r){return RE[r]}let Qo=null;const um={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function oy(r,e){if(!Qo){const t=Object.keys(um);Qo={};for(let i=0;i<t.length;++i){const n=t[i];Qo[r[n]]=um[n]}}return Qo[e]}function dm(r,e,t){if(r.substring(0,9)!=="precision"){let i=e;return e===ar.HIGH&&t!==ar.HIGH&&(i=ar.MEDIUM),`precision ${i} float;
${r}`}else if(t!==ar.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Ds;function IE(){if(typeof Ds=="boolean")return Ds;try{Ds=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ds=!1}return Ds}let kE=0;const Zo={},Jh=class qn{constructor(e,t,i="pixi-shader",n={}){this.extra={},this.id=kE++,this.vertexSrc=e||qn.defaultVertexSrc,this.fragmentSrc=t||qn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Zo[i]?(Zo[i]++,i+=`-${Zo[i]}`):Zo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=dm(this.vertexSrc,qn.defaultVertexPrecision,ar.HIGH),this.fragmentSrc=dm(this.fragmentSrc,qn.defaultFragmentPrecision,CE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return wE}static get defaultFragmentSrc(){return xE}static from(e,t,i){const n=e+t;let s=nm[n];return s||(nm[n]=s=new qn(e,t,i)),s}};Jh.defaultVertexPrecision=ar.HIGH,Jh.defaultFragmentPrecision=gi.apple.device?ar.HIGH:ar.MEDIUM;let yi=Jh,ME=0;class Pr{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ME++,this.static=!!t,this.ubo=!!i,e instanceof xt?(this.buffer=e,this.buffer.type=Yr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new xt(new Float32Array(1)),this.buffer.type=Yr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(!this.ubo)this.uniforms[e]=new Pr(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,i){return new Pr(e,t,i)}static uboFrom(e,t){return new Pr(e,t??!0,!0)}}class qr{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Pr?this.uniformGroup=t:this.uniformGroup=new Pr(t):this.uniformGroup=new Pr({}),this.disposeRunner=new Cr("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const n=t.uniforms[i];if(n.group===!0&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const n=yi.from(e,t);return new qr(n,i)}}class DE{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=Pr.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${e}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new yi(this.vertexSrc,n)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new ut,default:this.defaultGroupCache[e]};return new qr(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Qh{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function OE(){return!gi.apple.device}function LE(r){let e=!0;const t=_e.ADAPTER.getNavigator();if(gi.tablet||gi.phone){if(gi.apple.device){const i=t.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(gi.android.device){const i=t.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?r:4}class Rl{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var BE=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FE=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const $s=class _r extends Rl{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=ty,this.vertexSize=6,this.state=si.for2d(),this.size=_r.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??LE(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??OE(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return qe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return FE}static get defaultFragmentTemplate(){return BE}setShaderGenerator({vertex:e=_r.defaultVertexSrc,fragment:t=_r.defaultFragmentTemplate}={}){this.shaderGenerator=new DE(e,t)}contextChange(){const e=this.renderer.gl;_e.PREFER_ENV===Rn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_r.defaultMaxTextures),this.maxTextures=uE(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=_r,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Yh);for(;t.length<n;)t.push(new Qh);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=_r._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Ue._globalBatch,l=0,c=i[0],d=0;n.copyBoundTextures(s,t);for(let p=0;p<this._bufferSize;++p){const m=e[p];e[p]=null,m._batchEnabled!==a&&(c.count>=t&&(n.boundArray(c,s,a,t),this.buildDrawCalls(c,d,p),d=p,c=i[++l],++a),m._batchEnabled=a,m.touched=o,c.elements[c.count++]=m)}c.count>0&&(n.boundArray(c,s,a,t),this.buildDrawCalls(c,d,this._bufferSize),++l,++a);for(let p=0;p<s.length;p++)s[p]=null;Ue._globalBatch=a}buildDrawCalls(e,t,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=_r._drawCallPool;let c=this._dcIndex,d=this._aIndex,p=this._iIndex,m=l[c];m.start=this._iIndex,m.texArray=e;for(let g=t;g<i;++g){const y=n[g],x=y._texture.baseTexture,w=Jv[x.alphaMode?1:0][y.blendMode];n[g]=null,t<g&&m.blend!==w&&(m.size=p-m.start,t=g,m=l[++c],m.texArray=e,m.start=p),this.packInterleavedGeometry(y,s,o,d,p),d+=y.vertexData.length/2*a,p+=y.indices.length,m.blend=w}t<i&&(m.size=p-m.start,++c),this._dcIndex=c,this._aIndex=d,this._iIndex=p}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;_r.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,n=_r._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:d,blend:p}=n[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=p,i.set(this.state),t.drawElements(l,c,t.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_r.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=$a(Math.ceil(e/8)),i=rm(t),n=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new Vh(n*this.vertexSize*4)),s}getIndexBuffer(e){const t=$a(Math.ceil(e/12)),i=rm(t),n=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(e,t,i,n,s){const{uint32View:o,float32View:a}=t,l=n/this.vertexSize,c=e.uvs,d=e.indices,p=e.vertexData,m=e._texture.baseTexture._batchLocation,g=Math.min(e.worldAlpha,1),y=ht.shared.setValue(e._tintRGB).toPremultiplied(g,e._texture.baseTexture.alphaMode>0);for(let x=0;x<p.length;x+=2)a[n++]=p[x],a[n++]=p[x+1],a[n++]=c[x],a[n++]=c[x+1],o[n++]=y,a[n++]=m;for(let x=0;x<d.length;x++)i[s++]=l+d[x]}};$s.defaultBatchSize=4096,$s.extension={name:"batch",type:de.RendererPlugin},$s._drawCallPool=[],$s._textureArrayPool=[];let mn=$s;ke.add(mn);var NE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,$E=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Zh=class Us extends qr{constructor(e,t,i){const n=yi.from(e||Us.defaultVertexSrc,t||Us.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=Us.defaultResolution,this.multisample=Us.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new si}apply(e,t,i,n,s){e.applyFilter(this,t,i,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return $E}static get defaultFragmentSrc(){return NE}};Zh.defaultResolution=1,Zh.defaultMultisample=wt.NONE;let $t=Zh;class ja{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ht(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:i,backgroundAlpha:n}=e,s=i??t;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}ja.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},ja.extension={type:[de.RendererSystem,de.CanvasRendererSystem],name:"background"};ke.add(ja);class ay{constructor(e){this.renderer=e,this.emptyRenderer=new Rl(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,i,n){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const d=s[c],p=d._batchLocation;if(p>=0&&p<n&&t[p]===d){o[c]=p;continue}for(;l<n;){const m=t[l];if(m&&m._batchEnabled===i&&m._batchLocation===l){l++;continue}o[c]=l,d._batchLocation=l,t[l]=d;break}}}destroy(){this.renderer=null}}ay.extension={type:de.RendererSystem,name:"batch"};ke.add(ay);let pm=0;class Ha{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=pm++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=pm++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(_e.PREFER_ENV>=Rn.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ha.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ha.extension={type:de.RendererSystem,name:"context"};ke.add(Ha);class eu{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Cr("disposeFramebuffer"),this.multisample=wt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Ue(null,{scaleMode:mi.NEAREST,resolution:1,mipmap:ri.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Ue(null,{scaleMode:mi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ri.OFF,format:he.DEPTH_COMPONENT,type:Oe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(e/s,t/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class ly extends Ue{constructor(e={}){if(typeof e=="number"){const t=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];e={width:t,height:i,scaleMode:n,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=wt.NONE),super(null,e),this.mipmap=ri.OFF,this.valid=!0,this._clear=new ht([0,0,0,0]),this.framebuffer=new eu(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Si extends oo{constructor(e){const t=e,i=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,n=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(i,n),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){i===void 0&&!t.startsWith("data:")?e.crossOrigin=lE(t):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,t,i,n){const s=e.gl,o=t.realWidth,a=t.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(t.target,0,i.internalFormat,t.format,i.type,n)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}dispose(){this.source=null}}class cy extends Si{constructor(e,t){if(t=t||{},typeof e=="string"){const i=new Image;Si.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??_e.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>t(n,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==t.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class yd{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const n=t.width,s=t.height;if(i){const o=e.width/2/n,a=e.height/2/s,l=e.x/n+o,c=e.y/s+a;i=mt.add(i,mt.NW),this.x0=l+o*mt.uX(i),this.y0=c+a*mt.uY(i),i=mt.add(i,2),this.x1=l+o*mt.uX(i),this.y1=c+a*mt.uY(i),i=mt.add(i,2),this.x2=l+o*mt.uX(i),this.y2=c+a*mt.uY(i),i=mt.add(i,2),this.x3=l+o*mt.uX(i),this.y3=c+a*mt.uY(i)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}yd.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const fm=new yd;function ea(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class Re extends wo{constructor(e,t,i,n,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ze(0,0,1,1)),e instanceof Re&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=fm,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Qe(o.x,o.y):new Qe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&Nr[t.url]&&Re.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Re.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new Re(this.baseTexture,!this.noFrame&&e,t,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===fm&&(this._uvs=new yd),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=_e.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else if(e instanceof Ue){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${En()}`,Ue.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${En()}`}s=e._pixiId}let o=Nr[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Ue)?(t.resolution||(t.resolution=Ti(e)),o=new Re(new Ue(e,t)),o.baseTexture.cacheId=s,Ue.addToCache(o.baseTexture,s),Re.addToCache(o,s)):!o&&e instanceof Ue&&(o=new Re(e),Re.addToCache(o,s)),o}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),n=Re.from(e,Object.assign({resourceOptions:i},t),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(e,t,i,n){return new Re(Ue.fromBuffer(e,t,i,n))}static fromLoader(e,t,i,n){const s=new Ue(e,Object.assign({scaleMode:Ue.defaultOptions.scaleMode,resolution:Ti(t)},n)),{resource:o}=s;o instanceof cy&&(o.url=t);const a=new Re(s);return i||(i=t),Ue.addToCache(a.baseTexture,i),Re.addToCache(a,i),i!==t&&(Ue.addToCache(a.baseTexture,t),Re.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Nr[t]&&Nr[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Nr[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Nr[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Nr[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Nr[e.textureCacheIds[t]]===e&&delete Nr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:n,height:s}=e,o=t+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,d=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${d}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Re._EMPTY||(Re._EMPTY=new Re(new Ue),ea(Re._EMPTY),ea(Re._EMPTY.baseTexture)),Re._EMPTY}static get WHITE(){if(!Re._WHITE){const e=_e.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),Re._WHITE=new Re(Ue.from(e)),ea(Re._WHITE),ea(Re._WHITE.baseTexture)}return Re._WHITE}}class In extends Re{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const n=this.baseTexture.resolution,s=Math.round(e*n)/n,o=Math.round(t*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new In(new ly(e))}}class hy{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,i=wt.NONE){const n=new ly(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new In(n)}getOptimalTexture(e,t,i=1,n=wt.NONE){let s;e=Math.max(Math.ceil(e*i-1e-6),1),t=Math.max(Math.ceil(t*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=$a(e),t=$a(t),s=((e&65535)<<16|t&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(e,t,i){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||wt.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const i=this.texturePool[t];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const i=this.texturePool[t];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}hy.SCREEN_KEY=-1;class UE extends Ki{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class uy extends Ki{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new xt(this.vertices),this.uvBuffer=new xt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+t.width/e.width,this.uvs[3]=n,this.uvs[4]=i+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=i,this.uvs[7]=n+t.height/e.height,i=t.x,n=t.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+t.width,this.vertices[3]=n,this.vertices[4]=i+t.width,this.vertices[5]=n+t.height,this.vertices[6]=i,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class GE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=wt.NONE,this.sourceFrame=new ze,this.destinationFrame=new ze,this.bindingSourceFrame=new ze,this.bindingDestinationFrame=new ze,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ta=[new Qe,new Qe,new Qe,new Qe],sh=new ut;class dy{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new hy,this.statePool=[],this.quad=new UE,this.quadUv=new uy,this.tempRect=new ze,this.activeState={},this.globalUniforms=new Pr({outputFrame:new ze,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new GE,o=i.renderTexture;let a,l;if(o.current){const w=o.current;a=w.resolution,l=w.multisample}else a=i.resolution,l=i.multisample;let c=t[0].resolution||a,d=t[0].multisample??l,p=t[0].padding,m=t[0].autoFit,g=t[0].legacy??!0;for(let w=1;w<t.length;w++){const T=t[w];c=Math.min(c,T.resolution||a),d=Math.min(d,T.multisample??l),p=this.useMaxPadding?Math.max(p,T.padding):p+T.padding,m=m&&T.autoFit,g=g||(T.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=c,s.multisample=d,s.legacy=g,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(p);const y=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(sh.copyFrom(i.projection.transform).invert(),y),m?(s.sourceFrame.fit(y),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(y)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,d),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const x=this.tempRect;x.x=0,x.y=0,x.width=s.sourceFrame.width,x.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,x),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const c=n.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,l.renderTexture,jr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let c=t.renderTexture,d=this.getOptimalFilterTexture(c.width,c.height,t.resolution);d.filterFrame=c.filterFrame;let p=0;for(p=0;p<i.length-1;++p){p===1&&t.multisample>1&&(d=this.getOptimalFilterTexture(c.width,c.height,t.resolution),d.filterFrame=c.filterFrame),i[p].apply(this,c,d,jr.CLEAR,t);const m=c;c=d,d=m}i[p].apply(this,c,l.renderTexture,jr.BLEND,t),p>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(d)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=jr.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(t===jr.CLEAR||t===jr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,n){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Hr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Hr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=t._texture,o=e.set(n.width,0,0,n.height,i.x,i.y),a=t.worldTransform.copyTo(ut.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,n=wt.NONE){return this.texturePool.getOptimalTexture(e,t,i,n)}getFilterTexture(e,t,i){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||wt.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=ta[0],n=ta[1],s=ta[2],o=ta[3];i.set(t.left,t.top),n.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(n,n),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),c=Math.max(i.x,n.x,s.x,o.x),d=Math.max(i.y,n.y,s.y,o.y);t.x=a,t.y=l,t.width=c-a,t.height=d-l}roundFrame(e,t,i,n,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?sh.copyFrom(s):sh.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}dy.extension={type:de.RendererSystem,name:"filter"};ke.add(dy);class jE{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=wt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const HE=new ze;class py{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new eu(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ze,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;_e.PREFER_ENV===Rn.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=n=>t.drawBuffersWEBGL(n):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:n}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>i,a=t.height>>i,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,n){const s=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=i,s.height=n,this.gl.viewport(e,t,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,n,s=Uh.COLOR|Uh.DEPTH){const{gl:o}=this;o.clearColor(e,t,i,n),o.clear(s)}initFramebuffer(e){const{gl:t}=this,i=new jE(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){t.bindRenderbuffer(t.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const n=e.colorTextures;let s=n.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,c.target,d._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,c=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,c=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,c=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,c=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,c,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,c,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=wt.NONE;if(e<=1||t===null)return i;for(let n=0;n<t.length;n++)if(t[n]<=e){i=t[n];break}return i===1&&(i=wt.NONE),i}blit(e,t,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const d=n.colorTextures[0];if(!d)return;l.blitFramebuffer||(l.blitFramebuffer=new eu(n.width,n.height),l.blitFramebuffer.addColorTexture(0,d)),e=l.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||(t=HE,t.width=n.width,t.height=n.height),i||(i=t);const c=t.width===i.width&&t.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,n=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,i,n):s.renderbufferStorage(s.RENDERBUFFER,l,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ze}destroy(){this.renderer=null}}py.extension={type:de.RendererSystem,name:"framebuffer"};ke.add(py);const oh={5126:4,5123:2,5121:1};class fy{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;_e.PREFER_ENV===Rn.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=n=>i.bindVertexArrayOES(n),e.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),e.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),e.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const n=e.buffers[i];t.update(n)}}checkCompatibility(e,t){const i=e.attributes,n=t.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const i=e.attributes,n=t.attributeData,s=["g",e.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(e,t,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let d=c[l];if(d)return c[a.id]=d,d;const p=e.buffers,m=e.attributes,g={},y={};for(const x in p)g[x]=0,y[x]=0;for(const x in m)!m[x].size&&a.attributeData[x]?m[x].size=a.attributeData[x].size:m[x].size||console.warn(`PIXI Geometry attribute '${x}' size cannot be determined (likely the bound shader does not have the attribute)`),g[m[x].buffer]+=m[x].size*oh[m[x].type];for(const x in m){const w=m[x],T=w.size;w.stride===void 0&&(g[w.buffer]===T*oh[w.type]?w.stride=0:w.stride=g[w.buffer]),w.start===void 0&&(w.start=y[w.buffer],y[w.buffer]+=T*oh[w.type])}d=n.createVertexArray(),n.bindVertexArray(d);for(let x=0;x<p.length;x++){const w=p[x];o.bind(w),i&&w._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=d,c[l]=d,n.bindVertexArray(null),o.unbind(Yr.ARRAY_BUFFER),d}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in i)if(l[0]==="g"){const c=i[l];this._activeVao===c&&this.unbind(),n.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const d=a[c],p=o[d.buffer],m=p._glBuffers[n];if(t.attributeData[c]){l!==m&&(s.bind(p),l=m);const g=t.attributeData[c].location;if(i.enableVertexAttribArray(g),i.vertexAttribPointer(g,d.size,d.type||i.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)i.vertexAttribDivisor(g,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,t||o.getSize(),n||1):s.drawArrays(e,i,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}fy.extension={type:de.RendererSystem,name:"geometry"};ke.add(fy);const mm=new ut;class my{constructor(e,t){this._texture=e,this.mapCoord=new ut,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let n=0;n<e.length;n+=2){const s=e[n],o=e[n+1];t[n]=s*i.a+o*i.c+i.tx,t[n+1]=s*i.b+o*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=t.orig,s=t.trim;s&&(mm.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(mm));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+l+c)/o.width,a[1]=(t._frame.y+l+c)/o.height,a[2]=(t._frame.x+t._frame.width-l+c)/o.width,a[3]=(t._frame.y+t._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var zE=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,VE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class WE extends $t{constructor(e,t,i){let n=null;typeof e!="string"&&t===void 0&&i===void 0&&(n=e,e=void 0,t=void 0,i=void 0),super(e||VE,t||zE,i),this.maskSprite=n,this.maskMatrix=new ut}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new my(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,i,n))}}class XE{constructor(e=null){this.type=Tt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=$t.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Tt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class gy{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const s=this.maskDataPool.pop()||new XE;s.pooled=!0,s.maskObject=t,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Tt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Tt.SCISSOR:this.renderer.scissor.push(i);break;case Tt.STENCIL:this.renderer.stencil.push(i);break;case Tt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Tt.COLOR:this.pushColorMask(i);break}i.type===Tt.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Tt.SCISSOR:this.renderer.scissor.pop(t);break;case Tt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Tt.SPRITE:this.popSpriteMask(t);break;case Tt.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Tt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=Tt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Tt.SCISSOR:e.type=Tt.STENCIL:e.type=Tt.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new WE])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;const s=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}gy.extension={type:de.RendererSystem,name:"mask"};ke.add(gy);class vy{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==i&&(n===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const gm=new ut,vm=[],yy=class va extends vy{constructor(e){super(e),this.glConst=_e.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:n}=this,s=n.renderTexture,o=i.getBounds(!0,vm.pop()??new ze);this.roundFrameToPixels(o,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:n,d:s}=e;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||va.isMatrixRotated(t.worldTransform)||va.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,n,s){va.isMatrixRotated(s)||(s=s?gm.copyFrom(s):gm.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&vm.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};yy.extension={type:de.RendererSystem,name:"scissor"};let YE=yy;ke.add(YE);class _y extends vy{constructor(e){super(e),this.glConst=_e.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,n=e._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(i._colorMask=n,t.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}_y.extension={type:de.RendererSystem,name:"stencil"};ke.add(_y);class by{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}by.extension={type:[de.RendererSystem,de.CanvasRendererSystem],name:"_plugin"};ke.add(by);class xy{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ut,this.transform=null}update(e,t,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}xy.extension={type:de.RendererSystem,name:"projection"};ke.add(xy);const qE=new vd,ym=new ze;class wy{constructor(e){this.renderer=e,this._tempMatrix=new ut}generateTexture(e,t){const{region:i,...n}=t||{},s=(i==null?void 0:i.copyTo(ym))||e.getLocalBounds(ym,!0),o=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),n.width=s.width,n.height=s.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const a=In.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=qE,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}wy.extension={type:[de.RendererSystem,de.CanvasRendererSystem],name:"textureGenerator"};ke.add(wy);const ln=new ze,Os=new ze;class Ty{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ze,this.destinationFrame=new ze,this.viewportFrame=new ze}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,i){const n=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(ln.width=e.frame.width,ln.height=e.frame.height,t=ln),i||(Os.x=e.frame.x,Os.y=e.frame.y,Os.width=t.width,Os.height=t.height,i=Os),o=s.framebuffer):(a=n.resolution,t||(ln.width=n._view.screen.width,ln.height=n._view.screen.height,t=ln),i||(i=ln,i.width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=ht.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:d,height:p}=this.viewportFrame;l=Math.round(l),c=Math.round(c),d=Math.round(d),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,d,p)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Ty.extension={type:de.RendererSystem,name:"renderTexture"};ke.add(Ty);class KE{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function JE(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=e.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const o=oy(e,s.type),a={type:o,name:s.name,size:sy(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function QE(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=e.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=oy(e,s.type);t[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:iy(l,s.size)}}return t}function ZE(r,e){var a;const t=cm(r,r.VERTEX_SHADER,e.vertexSrc),i=cm(r,r.FRAGMENT_SHADER,e.fragmentSrc),n=r.createProgram();r.attachShader(n,t),r.attachShader(n,i);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||PE(r,n,t,i),e.attributeData=JE(n,r),e.uniformData=QE(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,d)=>c>d?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,r.bindAttribLocation(n,c,l[c]);r.linkProgram(n)}r.deleteShader(t),r.deleteShader(i);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:r.getUniformLocation(n,l),value:iy(c.type,c.size)}}return new KE(n,o)}function eA(r,e,t,i,n){t.buffer.update(n)}const tA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Sy={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function rA(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,i=0,n=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=Sy[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!==0&&i<16){const a=i%t%16;i+=a,n+=a}i+t>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=t,i=t):(o.offset=n,i+=t,n+=t)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function iA(r,e){const t=[];for(const i in r)e[i]&&t.push(e[i]);return t.sort((i,n)=>i.index-n.index),t}function nA(r,e){if(!r.autoManage)return{size:0,syncFunc:eA};const t=iA(r.uniforms,e),{uboElements:i,size:n}=rA(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],c=a.data.name;let d=!1;for(let p=0;p<ns.length;p++){const m=ns[p];if(m.codeUbo&&m.test(a.data,l)){s.push(`offset = ${a.offset/4};`,ns[p].codeUbo(a.data.name,l)),d=!0;break}}if(!d)if(a.data.size>1){const p=sy(a.data.type),m=Math.max(Sy[a.data.type]/16,1),g=p/m,y=(4-g%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*m}; i++)
                {
                    for(var j = 0; j < ${g}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{const p=tA[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${p};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let sA=0;const ra={textureCount:0,uboCount:0};class Ey{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=sA++}systemCheck(){if(!IE())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),t||(ra.textureCount=0,ra.uboCount=0,this.syncUniformGroup(e.uniformGroup,ra)),n}setUniforms(e){const t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=EE(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,ra,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=nA(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const n=e.uniforms,s=[`${i}-`];for(const o in n)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,i=e.program,n=ZE(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Ey.extension={type:de.RendererSystem,name:"shader"};ke.add(Ey);class za{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}za.defaultOptions={hello:!1},za.extension={type:[de.RendererSystem,de.CanvasRendererSystem],name:"startup"};ke.add(za);function oA(r,e=[]){return e[Be.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.ADD]=[r.ONE,r.ONE],e[Be.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.NONE]=[0,0],e[Be.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Be.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Be.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Be.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Be.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Be.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Be.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Be.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Be.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Be.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Be.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const aA=0,lA=1,cA=2,hA=3,uA=4,dA=5,Ay=class tu{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Be.NONE,this._blendEq=!1,this.map=[],this.map[aA]=this.setBlend,this.map[lA]=this.setOffset,this.map[cA]=this.setCullFace,this.map[hA]=this.setDepthTest,this.map[uA]=this.setFrontFace,this.map[dA]=this.setDepthMask,this.checks=[],this.defaultState=new si,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=oA(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(tu.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(tu.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Ay.extension={type:de.RendererSystem,name:"state"};let pA=Ay;ke.add(pA);class fA extends wo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(n=>e.systems[n]),i=[...t,...Object.keys(e.systems).filter(n=>!t.includes(n))];for(const n of i)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Cr(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Gs=class ya{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ya.defaultMaxIdle,this.checkCountMax=ya.defaultCheckCountMax,this.mode=ya.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==pd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let n=0;n<t.length;n++){const s=t[n];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[n++]=t[s]);t.length=n}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};Gs.defaultMode=pd.AUTO,Gs.defaultMaxIdle=60*60,Gs.defaultCheckCountMax=60*10,Gs.extension={type:de.RendererSystem,name:"textureGC"};let gn=Gs;ke.add(gn);class ah{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Oe.UNSIGNED_BYTE,this.internalFormat=he.RGBA,this.samplerType=0}}function mA(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:ye.FLOAT,[r.RGBA]:ye.FLOAT,[r.ALPHA]:ye.FLOAT,[r.LUMINANCE]:ye.FLOAT,[r.LUMINANCE_ALPHA]:ye.FLOAT,[r.R8]:ye.FLOAT,[r.R8_SNORM]:ye.FLOAT,[r.RG8]:ye.FLOAT,[r.RG8_SNORM]:ye.FLOAT,[r.RGB8]:ye.FLOAT,[r.RGB8_SNORM]:ye.FLOAT,[r.RGB565]:ye.FLOAT,[r.RGBA4]:ye.FLOAT,[r.RGB5_A1]:ye.FLOAT,[r.RGBA8]:ye.FLOAT,[r.RGBA8_SNORM]:ye.FLOAT,[r.RGB10_A2]:ye.FLOAT,[r.RGB10_A2UI]:ye.FLOAT,[r.SRGB8]:ye.FLOAT,[r.SRGB8_ALPHA8]:ye.FLOAT,[r.R16F]:ye.FLOAT,[r.RG16F]:ye.FLOAT,[r.RGB16F]:ye.FLOAT,[r.RGBA16F]:ye.FLOAT,[r.R32F]:ye.FLOAT,[r.RG32F]:ye.FLOAT,[r.RGB32F]:ye.FLOAT,[r.RGBA32F]:ye.FLOAT,[r.R11F_G11F_B10F]:ye.FLOAT,[r.RGB9_E5]:ye.FLOAT,[r.R8I]:ye.INT,[r.R8UI]:ye.UINT,[r.R16I]:ye.INT,[r.R16UI]:ye.UINT,[r.R32I]:ye.INT,[r.R32UI]:ye.UINT,[r.RG8I]:ye.INT,[r.RG8UI]:ye.UINT,[r.RG16I]:ye.INT,[r.RG16UI]:ye.UINT,[r.RG32I]:ye.INT,[r.RG32UI]:ye.UINT,[r.RGB8I]:ye.INT,[r.RGB8UI]:ye.UINT,[r.RGB16I]:ye.INT,[r.RGB16UI]:ye.UINT,[r.RGB32I]:ye.INT,[r.RGB32UI]:ye.UINT,[r.RGBA8I]:ye.INT,[r.RGBA8UI]:ye.UINT,[r.RGBA16I]:ye.INT,[r.RGBA16UI]:ye.UINT,[r.RGBA32I]:ye.INT,[r.RGBA32UI]:ye.UINT,[r.DEPTH_COMPONENT16]:ye.FLOAT,[r.DEPTH_COMPONENT24]:ye.FLOAT,[r.DEPTH_COMPONENT32F]:ye.FLOAT,[r.DEPTH_STENCIL]:ye.FLOAT,[r.DEPTH24_STENCIL8]:ye.FLOAT,[r.DEPTH32F_STENCIL8]:ye.FLOAT}:e={[r.RGB]:ye.FLOAT,[r.RGBA]:ye.FLOAT,[r.ALPHA]:ye.FLOAT,[r.LUMINANCE]:ye.FLOAT,[r.LUMINANCE_ALPHA]:ye.FLOAT,[r.DEPTH_STENCIL]:ye.FLOAT},e}function gA(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Oe.UNSIGNED_BYTE]:{[he.RGBA]:r.RGBA8,[he.RGB]:r.RGB8,[he.RG]:r.RG8,[he.RED]:r.R8,[he.RGBA_INTEGER]:r.RGBA8UI,[he.RGB_INTEGER]:r.RGB8UI,[he.RG_INTEGER]:r.RG8UI,[he.RED_INTEGER]:r.R8UI,[he.ALPHA]:r.ALPHA,[he.LUMINANCE]:r.LUMINANCE,[he.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Oe.BYTE]:{[he.RGBA]:r.RGBA8_SNORM,[he.RGB]:r.RGB8_SNORM,[he.RG]:r.RG8_SNORM,[he.RED]:r.R8_SNORM,[he.RGBA_INTEGER]:r.RGBA8I,[he.RGB_INTEGER]:r.RGB8I,[he.RG_INTEGER]:r.RG8I,[he.RED_INTEGER]:r.R8I},[Oe.UNSIGNED_SHORT]:{[he.RGBA_INTEGER]:r.RGBA16UI,[he.RGB_INTEGER]:r.RGB16UI,[he.RG_INTEGER]:r.RG16UI,[he.RED_INTEGER]:r.R16UI,[he.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Oe.SHORT]:{[he.RGBA_INTEGER]:r.RGBA16I,[he.RGB_INTEGER]:r.RGB16I,[he.RG_INTEGER]:r.RG16I,[he.RED_INTEGER]:r.R16I},[Oe.UNSIGNED_INT]:{[he.RGBA_INTEGER]:r.RGBA32UI,[he.RGB_INTEGER]:r.RGB32UI,[he.RG_INTEGER]:r.RG32UI,[he.RED_INTEGER]:r.R32UI,[he.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Oe.INT]:{[he.RGBA_INTEGER]:r.RGBA32I,[he.RGB_INTEGER]:r.RGB32I,[he.RG_INTEGER]:r.RG32I,[he.RED_INTEGER]:r.R32I},[Oe.FLOAT]:{[he.RGBA]:r.RGBA32F,[he.RGB]:r.RGB32F,[he.RG]:r.RG32F,[he.RED]:r.R32F,[he.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Oe.HALF_FLOAT]:{[he.RGBA]:r.RGBA16F,[he.RGB]:r.RGB16F,[he.RG]:r.RG16F,[he.RED]:r.R16F},[Oe.UNSIGNED_SHORT_5_6_5]:{[he.RGB]:r.RGB565},[Oe.UNSIGNED_SHORT_4_4_4_4]:{[he.RGBA]:r.RGBA4},[Oe.UNSIGNED_SHORT_5_5_5_1]:{[he.RGBA]:r.RGB5_A1},[Oe.UNSIGNED_INT_2_10_10_10_REV]:{[he.RGBA]:r.RGB10_A2,[he.RGBA_INTEGER]:r.RGB10_A2UI},[Oe.UNSIGNED_INT_10F_11F_11F_REV]:{[he.RGB]:r.R11F_G11F_B10F},[Oe.UNSIGNED_INT_5_9_9_9_REV]:{[he.RGB]:r.RGB9_E5},[Oe.UNSIGNED_INT_24_8]:{[he.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Oe.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[he.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Oe.UNSIGNED_BYTE]:{[he.RGBA]:r.RGBA,[he.RGB]:r.RGB,[he.ALPHA]:r.ALPHA,[he.LUMINANCE]:r.LUMINANCE,[he.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Oe.UNSIGNED_SHORT_5_6_5]:{[he.RGB]:r.RGB},[Oe.UNSIGNED_SHORT_4_4_4_4]:{[he.RGBA]:r.RGBA},[Oe.UNSIGNED_SHORT_5_5_5_1]:{[he.RGBA]:r.RGBA}},e}class Cy{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ue,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=gA(e),this.samplerTypes=mA(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new ah(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ah(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,t=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[n].samplerType!==ye.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new ah(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var i;t.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??ye.FLOAT,this.webGLVersion===2&&e.type===Oe.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var n;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),(n=e.resource)==null?void 0:n.upload(i,e,t))t.samplerType!==ye.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=i.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const n=this.managedTextures.indexOf(e);n!==-1&&is(this.managedTextures,n,1)}}updateTextureStyle(e){var i;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===ri.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Wi.CLAMP:t.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==ri.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===mi.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===mi.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===mi.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===mi.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Cy.extension={type:de.RendererSystem,name:"texture"};ke.add(Cy);class Py{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:n}=this;t&&n.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:n}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[n]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}i&&(t||n.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Py.extension={type:de.RendererSystem,name:"transformFeedback"};ke.add(Py);class Va{constructor(e){this.renderer=e}init(e){this.screen=new ze(0,0,e.width,e.height),this.element=e.view||_e.ADAPTER.createCanvas(),this.resolution=e.resolution||_e.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Va.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Va.extension={type:[de.RendererSystem,de.CanvasRendererSystem],name:"_view"};ke.add(Va);_e.PREFER_ENV=Rn.WEBGL2;_e.STRICT_TEXTURE_CACHE=!1;_e.RENDER_OPTIONS={...Ha.defaultOptions,...ja.defaultOptions,...Va.defaultOptions,...za.defaultOptions};Object.defineProperties(_e,{WRAP_MODE:{get(){return Ue.defaultOptions.wrapMode},set(r){qe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Ue.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Ue.defaultOptions.scaleMode},set(r){qe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Ue.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Ue.defaultOptions.mipmap},set(r){qe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Ue.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Ue.defaultOptions.anisotropicLevel},set(r){qe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Ue.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return qe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),$t.defaultResolution},set(r){$t.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return qe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),$t.defaultMultisample},set(r){$t.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return mn.defaultMaxTextures},set(r){qe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),mn.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return mn.defaultBatchSize},set(r){qe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),mn.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return mn.canUploadSameBuffer},set(r){qe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),mn.canUploadSameBuffer=r}},GC_MODE:{get(){return gn.defaultMode},set(r){qe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),gn.defaultMode=r}},GC_MAX_IDLE:{get(){return gn.defaultMaxIdle},set(r){qe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),gn.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return gn.defaultCheckCountMax},set(r){qe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),gn.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return yi.defaultVertexPrecision},set(r){qe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),yi.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return yi.defaultFragmentPrecision},set(r){qe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),yi.defaultFragmentPrecision=r}}});var An=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(An||{});class lh{constructor(e,t=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Ry=class Zt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new lh(null,null,1/0),this.deltaMS=1/Zt.targetFPMS,this.elapsedMS=1/Zt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=An.NORMAL){return this._addListener(new lh(e,t,i))}addOnce(e,t,i=An.NORMAL){return this._addListener(new lh(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Zt.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Zt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Zt._shared){const e=Zt._shared=new Zt;e.autoStart=!0,e._protected=!0}return Zt._shared}static get system(){if(!Zt._system){const e=Zt._system=new Zt;e.autoStart=!0,e._protected=!0}return Zt._system}};Ry.targetFPMS=.06;let er=Ry;Object.defineProperties(_e,{TARGET_FPMS:{get(){return er.targetFPMS},set(r){qe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),er.targetFPMS=r}}});class Iy{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,An.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?er.shared:new er,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Iy.extension=de.Application;ke.add(Iy);const ky=[];ke.handleByList(de.Renderer,ky);function vA(r){for(const e of ky)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var yA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_A=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const bA=yA,My=_A;class Dy{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=wt.HIGH?this.multisample=wt.HIGH:t>=wt.MEDIUM?this.multisample=wt.MEDIUM:t>=wt.LOW?this.multisample=wt.LOW:this.multisample=wt.NONE}destroy(){}}Dy.extension={type:de.RendererSystem,name:"_multisample"};ke.add(Dy);class xA{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Oy{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,o.buffer,i*256,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(t||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new xA(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Oy.extension={type:de.RendererSystem,name:"buffer"};ke.add(Oy);class Ly{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let n,s,o,a;if(t&&(n=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),n&&(t.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Ly.extension={type:de.RendererSystem,name:"objectRenderer"};ke.add(Ly);const _a=class ru extends fA{constructor(e){super(),this.type=Nv.WEBGL,e=Object.assign({},_e.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Pr({projectionMatrix:new ut},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ru.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(qe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=ru.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:zS()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return qe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return qe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return qe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return qe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){qe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return qe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){qe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return qe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};_a.extension={type:de.Renderer,priority:1},_a.__plugins={},_a.__systems={};let _d=_a;ke.handleByMap(de.RendererPlugin,_d.__plugins);ke.handleByMap(de.RendererSystem,_d.__systems);ke.add(_d);class By extends oo{constructor(e,t){const{width:i,height:n}=t||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Ue;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof oo?this.addResourceAt(e[i],i):this.addResourceAt(ey(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:i}=this.items[0];return this.resize(t,i),this.update(),Promise.resolve(this)}),this._load}}class wA extends By{constructor(e,t){const{width:i,height:n}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:n}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=rs.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,t.format,i.type,null);for(let l=0;l<n;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,i.type,c.resource.source))}return!0}}class TA extends Si{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Fy=class js extends By{constructor(e,t){const{width:i,height:n,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==js.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:n});for(let a=0;a<js.SIDES;a++)this.items[a].target=rs.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=rs.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=rs.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const n=this.itemDirtyIds;for(let s=0;s<js.SIDES;s++){const o=this.items[s];(n[s]<o.dirtyId||i.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,i),n[s]=o.dirtyId):n[s]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),n[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===js.SIDES}};Fy.SIDES=6;let SA=Fy;class ts extends Si{constructor(e,t){t=t||{};let i,n,s;typeof e=="string"?(i=ts.EMPTY,n=e,s=!0):(i=e,n=null,s=!1),super(i),this.url=n,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const i=await _e.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(i){if(this.destroyed)return;t(i),this.onError.emit(i)}}),this._load)}upload(e,t,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return ts._EMPTY=ts._EMPTY??_e.ADAPTER.createCanvas(0,0),ts._EMPTY}}const iu=class ba extends Si{constructor(e,t){t=t||{},super(_e.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},ba.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Si.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*t,s=this._overrideHeight||this._overrideWidth/t*i),n=Math.round(n),s=Math.round(s);const o=this.source;o.width=n,o.height=s,o._pixiId=`canvas_${En()}`,o.getContext("2d").drawImage(e,0,0,t,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(e){const t=ba.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&ba.SVG_XML.test(e)}};iu.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,iu.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let nu=iu;class EA extends Si{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const su=class ou extends Si{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");t.autoLoad!==!1&&i.setAttribute("preload","auto"),t.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),t.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),t.loop===!0&&i.setAttribute("loop",""),t.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Si.crossOrigin(i,n,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),d=c.slice(c.lastIndexOf(".")+1);l=l||ou.MIME_TYPES[d]||`video/${d}`}o.src=a,l&&(o.type=l),i.appendChild(o)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=er.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,i)=>{this.valid?t(this):(this._resolve=t,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(er.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(er.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(er.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||ou.TYPES.includes(t)}};su.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],su.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ny=su;Wh.push(ts,cy,TA,Ny,EA,nu,El,SA,wA);class Wa{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ze.EMPTY:(e=e||new ze(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=e,c=i*t.x+s*t.y+a,d=n*t.x+o*t.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(e){let t=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=t,this.minY=i,this.maxX=n,this.maxY=s}addFrame(e,t,i,n,s){this.addFrameMatrix(e.worldTransform,t,i,n,s)}addFrameMatrix(e,t,i,n,s){const o=e.a,a=e.b,l=e.c,c=e.d,d=e.tx,p=e.ty;let m=this.minX,g=this.minY,y=this.maxX,x=this.maxY,w=o*t+l*i+d,T=a*t+c*i+p;m=w<m?w:m,g=T<g?T:g,y=w>y?w:y,x=T>x?T:x,w=o*n+l*i+d,T=a*n+c*i+p,m=w<m?w:m,g=T<g?T:g,y=w>y?w:y,x=T>x?T:x,w=o*t+l*s+d,T=a*t+c*s+p,m=w<m?w:m,g=T<g?T:g,y=w>y?w:y,x=T>x?T:x,w=o*n+l*s+d,T=a*n+c*s+p,m=w<m?w:m,g=T<g?T:g,y=w>y?w:y,x=T>x?T:x,this.minX=m,this.minY=g,this.maxX=y,this.maxY=x}addVertexData(e,t,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<i;l+=2){const c=e[l],d=e[l+1];n=c<n?c:n,s=d<s?d:s,o=c>o?c:o,a=d>a?d:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,i,n){this.addVerticesMatrix(e.worldTransform,t,i,n)}addVerticesMatrix(e,t,i,n,s=0,o=s){const a=e.a,l=e.b,c=e.c,d=e.d,p=e.tx,m=e.ty;let g=this.minX,y=this.minY,x=this.maxX,w=this.maxY;for(let T=i;T<n;T+=2){const E=t[T],P=t[T+1],I=a*E+c*P+p,A=d*P+l*E+m;g=Math.min(g,I-s),x=Math.max(x,I+s),y=Math.min(y,A-o),w=Math.max(w,A+o)}this.minX=g,this.minY=y,this.maxX=x,this.maxY=w}addBounds(e){const t=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>c?s:c,this.maxY=o>d?o:d}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>c?s:c,this.maxY=o>d?o:d}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,n,s,o){e-=s,t-=o,i+=s,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class yt extends wo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new vd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Wa,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const n=t[i];Object.defineProperty(yt.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ze),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ze),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Wa);const t=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,n){return t&&(e=t.toGlobal(e,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,i=1,n=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new AA),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*yE}set angle(e){this.transform.rotation=e*_E}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class AA extends yt{constructor(){super(...arguments),this.sortDirty=null}}yt.prototype.displayObjectUpdateTransform=yt.prototype.updateTransform;const CA=new ut;function PA(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const $y=class au extends yt{constructor(){super(),this.children=[],this.sortableChildren=au.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),n=this.getChildIndex(t);this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);is(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,is(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,is(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,n=t,s=n-i;let o;if(s>0&&s<=n){o=this.children.splice(i,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(PA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let n=0,s=this.children.length;n<s;++n){const o=this.children[n];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==au.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(n?(n=CA.copyFrom(n),n.prepend(s)):n=s),i&&t.intersects(i,n))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const n=t&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Tt.NONE));if(n&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}n&&e.batch.flush(),i&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<i.length;++n)i[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};$y.defaultSortableChildren=!1;let Mr=$y;Mr.prototype.containerUpdateTransform=Mr.prototype.updateTransform;Object.defineProperties(_e,{SORTABLE_CHILDREN:{get(){return Mr.defaultSortableChildren},set(r){qe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Mr.defaultSortableChildren=r}}});const Ls=new Qe,RA=new Uint16Array([0,1,2,0,2,3]);class vs extends Mr{constructor(e){super(),this._anchor=new vi(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ht(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Be.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Re.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=RA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=_e.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Hi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Hi(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this.vertexData,d=e.trim,p=e.orig,m=this._anchor;let g=0,y=0,x=0,w=0;if(d?(y=d.x-m._x*p.width,g=y+d.width,w=d.y-m._y*p.height,x=w+d.height):(y=-m._x*p.width,g=y+p.width,w=-m._y*p.height,x=w+p.height),c[0]=i*y+s*w+a,c[1]=o*w+n*y+l,c[2]=i*g+s*w+a,c[3]=o*w+n*g+l,c[4]=i*g+s*x+a,c[5]=o*x+n*g+l,c[6]=i*y+s*x+a,c[7]=o*x+n*y+l,this._roundPixels){const T=_e.RESOLUTION;for(let E=0;E<c.length;++E)c[E]=Math.round(c[E]*T)/T}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,i=e.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,d=s.tx,p=s.ty,m=-n._x*i.width,g=m+i.width,y=-n._y*i.height,x=y+i.height;if(t[0]=o*m+l*y+d,t[1]=c*y+a*m+p,t[2]=o*g+l*y+d,t[3]=c*y+a*g+p,t[4]=o*g+l*x+d,t[5]=c*x+a*g+p,t[6]=o*m+l*x+d,t[7]=c*x+a*m+p,this._roundPixels){const w=_e.RESOLUTION;for(let T=0;T<t.length;++T)t[T]=Math.round(t[T]*w)/w}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Wa),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ze),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Ls);const t=this._texture.orig.width,i=this._texture.orig.height,n=-t*this.anchor.x;let s=0;return Ls.x>=n&&Ls.x<n+t&&(s=-i*this.anchor.y,Ls.y>=s&&Ls.y<s+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const i=e instanceof Re?e:Re.from(e,t);return new vs(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Hi(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Hi(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Re.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Uy=new ut;yt.prototype._cacheAsBitmap=!1;yt.prototype._cacheData=null;yt.prototype._cacheAsBitmapResolution=null;yt.prototype._cacheAsBitmapMultisample=null;class IA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(yt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new IA),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});yt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};yt.prototype._initCachedDisplayObject=function(r){var m,g;if((m=this._cacheData)!=null&&m.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new ze,!0);if((g=this.filters)!=null&&g.length){const y=this.filters[0].padding;t.pad(y)}const i=this.cacheAsBitmapResolution||r.resolution;t.ceil(i),t.width=Math.max(t.width,1/i),t.height=Math.max(t.height,1/i);const n=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=In.create({width:t.width,height:t.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),c=`cacheAsBitmap_${En()}`;this._cacheData.textureCacheId=c,Ue.addToCache(l.baseTexture,c),Re.addToCache(l,c);const d=this.transform.localTransform.copyTo(Uy).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const p=new vs(l);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(t.x/t.width),p.anchor.y=-(t.y/t.height),p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)};yt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};yt.prototype._initCachedDisplayObjectCanvas=function(r){var d;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.getLocalBounds(new ze,!0),t=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,n=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=In.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${En()}`;this._cacheData.textureCacheId=a,Ue.addToCache(o.baseTexture,a),Re.addToCache(o,a);const l=Uy;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const c=new vs(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};yt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};yt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};yt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ue.removeFromCache(this._cacheData.textureCacheId),Re.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};yt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};yt.prototype.name=null;Mr.prototype.getChildByName=function(r,e){for(let t=0,i=this.children.length;t<i;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,i=this.children.length;t<i;t++){const n=this.children[t];if(!n.getChildByName)continue;const s=n.getChildByName(r,!0);if(s)return s}return null};yt.prototype.getGlobalPosition=function(r=new Qe,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var kA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class MA extends $t{constructor(e=1){super(bA,kA,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const DA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},OA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function LA(r){const e=DA[r],t=e.length;let i=OA,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}const BA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function FA(r,e){const t=Math.ceil(r/2);let i=BA,n="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}class lu extends $t{constructor(e,t=8,i=4,n=$t.defaultResolution,s=5){const o=FA(s,e),a=LA(s);super(o,a),this.horizontal=e,this.resolution=n,this._quality=0,this.quality=i,this.blur=t}apply(e,t,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/t.width):this.uniforms.strength=1/i.height*(i.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,i,n);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,jr.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,jr.BLIT),this.uniforms.uSampler=l;const d=l;l=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,n),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class NA extends $t{constructor(e=8,t=4,i=$t.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new lu(!0,e,t,i,n),this.blurYFilter=new lu(!1,e,t,i,n),this.resolution=i,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,jr.CLEAR),this.blurYFilter.apply(e,a,i,n),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,i,n):this.blurXFilter.apply(e,t,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var $A=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class cu extends $t{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(My,$A,e),this.alpha=1}_loadMatrix(e,t=!1){let i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}tint(e,t){const[i,n,s]=ht.shared.setValue(e).toArray(),o=[i,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const i=Math.cos(e),n=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,c=o*(1-i)-a*n,d=o*(1-i)+a*n,p=o*(1-i)+a*n,m=i+o*(1-i),g=o*(1-i)-a*n,y=o*(1-i)-a*n,x=o*(1-i)+a*n,w=i+o*(1-i),T=[l,c,d,0,0,p,m,g,0,0,y,x,w,0,0,0,0,0,1,0];this._loadMatrix(T,t)}contrast(e,t){const i=(e||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const i=e*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,i,n,s){e=e||.2,t=t||.15,i=i||16770432,n=n||3375104;const o=ht.shared,[a,l,c]=o.setValue(i).toArray(),[d,p,m]=o.setValue(n).toArray(),g=[.3,.59,.11,0,0,a,l,c,e,0,d,p,m,t,0,a-d,l-p,c-m,0,0];this._loadMatrix(g,s)}night(e,t){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,t)}predator(e,t){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}cu.prototype.grayscale=cu.prototype.greyscale;var UA=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,GA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class jA extends $t{constructor(e,t){const i=new ut;e.renderable=!1,super(GA,UA,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,t==null&&(t=20),this.scale=new Qe(t,t)}apply(e,t,i,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,i,n)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var HA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,zA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class VA extends $t{constructor(){super(zA,HA)}}var WA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class XA extends $t{constructor(e=.5,t=Math.random()){super(My,WA,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const _m={AlphaFilter:MA,BlurFilter:NA,BlurFilterPass:lu,ColorMatrixFilter:cu,DisplacementFilter:jA,FXAAFilter:VA,NoiseFilter:XA};Object.entries(_m).forEach(([r,e])=>{Object.defineProperty(_m,r,{get(){return qe("7.1.0",`filters.${r} has moved to ${r}`),e}})});class YA{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(er.system.add(this.tickerUpdate,this,An.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(er.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Gi=new YA;class To{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=To.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Qe,this.page=new Qe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Xa extends To{constructor(){super(...arguments),this.client=new Qe,this.movement=new Qe,this.offset=new Qe,this.global=new Qe,this.screen=new Qe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,n,s,o,a,l,c,d,p,m,g,y,x){throw new Error("Method not implemented.")}}class br extends Xa{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ss extends Xa{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ss.DOM_DELTA_PIXEL=0,ss.DOM_DELTA_LINE=1,ss.DOM_DELTA_PAGE=2;const qA=2048,KA=new Qe,ch=new Qe;class JA{constructor(e){this.dispatch=new wo,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,n)=>i.priority-n.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,n=t.length;i<n;i++)t[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Gi.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,KA.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(t)?t:[t];for(let s=i.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let i=0;i<qA&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,n,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Gi.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const m=d[p],g=this.hitTestMoveRecursive(m,this._isInteractive(t)?t:m.eventMode,i,n,s,o||s(e,i));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const y=e.isInteractive();(g.length>0||y)&&(y&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),a=!0}}}const l=this._isInteractive(t),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,i)&&n(e,i)?c?[e]:[]:null}hitTestRecursive(e,t,i,n,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Gi.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const d=l[c],p=this.hitTestRecursive(d,this._isInteractive(t)?t:d.eventMode,i,n,s);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=e.isInteractive();return(p.length>0||m)&&p.push(e),p}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&n(e,i)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var i;if(e.hitArea&&(e.worldTransform.applyInverse(t,ch),!e.hitArea.contains(ch.x,ch.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const i=`on${t}`;(o=(s=e.currentTarget)[i])==null||o.call(s,e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const n=t.button===2;this.dispatchEvent(t,n?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,c;if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&s!==t.target){const d=e.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(e,d,s);if(this.dispatchEvent(p,"pointerout"),i&&this.dispatchEvent(p,"mouseout"),!t.composedPath().includes(s)){const m=this.createPointerEvent(e,"pointerleave",s);for(m.eventPhase=m.AT_TARGET;m.target&&!t.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),i&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(p)}if(s!==t.target){const d=e.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(t,d);this.dispatchEvent(p,"pointerover"),i&&this.dispatchEvent(p,"mouseover");let m=s==null?void 0:s.parent;for(;m&&m!==this.rootTarget.parent&&m!==t.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const g=this.clonePointerEvent(t,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),i&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(p)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=t.target)==null?void 0:c.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=n.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof br)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof ss)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const n=this.allocateEvent(br);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof t=="string"&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(ss);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(br);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof br&&t instanceof br&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Xa&&t instanceof Xa&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let n=0,s=i.length;n<s&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}const QA=1,ZA={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},hu=class uu{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new JA(null),Gi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new br(null),this.rootWheelEvent=new ss(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...uu.defaultEventFeatures},{set:(t,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,uu._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,n=t.length;i<n;i++){const s=t[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Gi.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Gi.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Gi.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Gi.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=QA),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ZA[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};hu.extension={name:"events",type:[de.RendererSystem,de.CanvasRendererSystem]},hu.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let du=hu;ke.add(du);function bm(r){return r==="dynamic"||r==="static"}const eC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??bm(du.defaultEventMode)},set interactive(r){qe("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??du.defaultEventMode},set eventMode(r){this._internalInteractive=bm(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,n=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=i?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,l=this;n&&n.addEventListener("abort",()=>{l.off(r,a,o)}),s?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,n=typeof e=="function"?void 0:e;r=i?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,n)},dispatchEvent(r){if(!(r instanceof To))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};yt.mixin(eC);const tC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};yt.mixin(tC);const rC=9,ia=100,iC=0,nC=0,xm=2,wm=1,sC=-1e3,oC=-1e3,aC=2;class Gy{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(gi.tablet||gi.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${ia}px`,t.style.height=`${ia}px`,t.style.position="absolute",t.style.top=`${iC}px`,t.style.left=`${nC}px`,t.style.zIndex=xm.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${wm}px`,e.style.height=`${wm}px`,e.style.position="absolute",e.style.top=`${sC}px`,e.style.left=`${oC}px`,e.style.zIndex=aC.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}update(){const e=performance.now();if(gi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=n/o*l,d=s/a*l;let p=this.div;p.style.left=`${t}px`,p.style.top=`${i}px`,p.style.width=`${o}px`,p.style.height=`${a}px`;for(let m=0;m<this.children.length;m++){const g=this.children[m];if(g.renderId!==this.renderId)g._accessibleActive=!1,is(this.children,m,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,m--;else{p=g._accessibleDiv;let y=g.hitArea;const x=g.worldTransform;g.hitArea?(p.style.left=`${(x.tx+y.x*x.a)*c}px`,p.style.top=`${(x.ty+y.y*x.d)*d}px`,p.style.width=`${y.width*x.a*c}px`,p.style.height=`${y.height*x.d*d}px`):(y=g.getBounds(),this.capHitArea(y),p.style.left=`${y.x*c}px`,p.style.top=`${y.y*d}px`,p.style.width=`${y.width*c}px`,p.style.height=`${y.height*d}px`,p.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(p.title=g.accessibleTitle),p.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&p.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==p.title||g.tabIndex!==p.tabIndex)&&(p.title=g.accessibleTitle,p.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${ia}px`,t.style.height=`${ia}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=xm.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:i}=e.target,n=this.renderer.events.rootBoundary,s=Object.assign(new To(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>n.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===rC&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Gy.extension={name:"accessibility",type:[de.RendererPlugin,de.CanvasRendererPlugin]};ke.add(Gy);const jy=class pu{constructor(e){this.stage=new Mr,e=Object.assign({forceCanvas:!1},e),this.renderer=vA(e),pu._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const i=pu._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};jy._plugins=[];let lC=jy;ke.handleByList(de.Application,lC._plugins);class Hy{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;t=n,i=s}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Hy.extension=de.Application;ke.add(Hy);const Tm={loader:de.LoadParser,resolver:de.ResolveParser,cache:de.CacheParser,detection:de.DetectionParser};ke.handle(de.Asset,r=>{const e=r.ref;Object.entries(Tm).filter(([t])=>!!e[t]).forEach(([t,i])=>ke.add(Object.assign(e[t],{extension:e[t].extension??i})))},r=>{const e=r.ref;Object.keys(Tm).filter(t=>!!e[t]).forEach(t=>ke.remove(e[t]))});class cC{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function ys(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function en(r,e){const t=r.split("?")[0],i=Pt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const wr=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(i=>typeof i=="string"||t?e(i):i):r),fu=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function zy(r,e,t,i,n){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?zy(r.replace(i[t],a),e,t+1,i,n):n.push(r.replace(i[t],a))}}function hC(r){const e=/\{(.*?)\}/g,t=r.match(e),i=[];if(t){const n=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),zy(r,n,0,t,i)}else i.push(r);return i}const Ya=r=>!Array.isArray(r);class uC{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=wr(e);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){n=l.getCacheableAssets(i,t);break}}n||(n={},i.forEach(a=>{n[a]=t}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{const l=n?n[a]:t;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),t instanceof Re){const a=t;i.forEach(l=>{a.baseTexture!==Re.EMPTY.baseTexture&&Ue.addToCache(a.baseTexture,l),Re.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const yn=new uC;class dC{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let n=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,t,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(e,t,this),i.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,n,t,this))&&(n=await c.parse(n,t,this)||n,i.parser=c)}return n})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const n={},s=Ya(e),o=wr(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const d=Pt.toAbsolute(c.src);if(!n[c.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,c)),n[c.src]=await this.promiseCache[d].promise,t&&t(++i/a)}catch(p){throw delete this.promiseCache[d],delete n[c.src],new Error(`[Loader.load] Failed to load ${d}.
${p}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(e){const t=wr(e,i=>({alias:[i],src:i})).map(async i=>{var o,a;const n=Pt.toAbsolute(i.src),s=this.promiseCache[n];if(s){const l=await s.promise;delete this.promiseCache[n],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Or=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Or||{});const pC=".json",fC="application/json",mC={extension:{type:de.LoadParser,priority:Or.Low},name:"loadJson",test(r){return ys(r,fC)||en(r,pC)},async load(r){return await(await _e.ADAPTER.fetch(r)).json()}};ke.add(mC);const gC=".txt",vC="text/plain",yC={name:"loadTxt",extension:{type:de.LoadParser,priority:Or.Low},test(r){return ys(r,vC)||en(r,gC)},async load(r){return await(await _e.ADAPTER.fetch(r)).text()}};ke.add(yC);const _C=["normal","bold","100","200","300","400","500","600","700","800","900"],bC=[".ttf",".otf",".woff",".woff2"],xC=["font/ttf","font/otf","font/woff","font/woff2"],wC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function TC(r){const e=Pt.extname(r),t=Pt.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=t.length>0;for(const s of t)if(!s.match(wC)){i=!1;break}let n=t.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const SC=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function EC(r){return SC.test(r)?r:encodeURI(r)}const AC={extension:{type:de.LoadParser,priority:Or.Low},name:"loadWebFont",test(r){return ys(r,xC)||en(r,bC)},async load(r,e){var i,n,s;const t=_e.ADAPTER.getFontFaceSet();if(t){const o=[],a=((i=e.data)==null?void 0:i.family)??TC(r),l=((s=(n=e.data)==null?void 0:n.weights)==null?void 0:s.filter(d=>_C.includes(d)))??["normal"],c=e.data??{};for(let d=0;d<l.length;d++){const p=l[d],m=new FontFace(a,`url(${EC(r)})`,{...c,weight:p});await m.load(),t.add(m),o.push(m)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>_e.ADAPTER.getFontFaceSet().delete(e))}};ke.add(AC);const CC=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let os=null,mu=class{constructor(){os||(os=URL.createObjectURL(new Blob([CC],{type:"application/javascript"}))),this.worker=new Worker(os)}};mu.revokeObjectURL=function(){os&&(URL.revokeObjectURL(os),os=null)};const PC=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let as=null;class Vy{constructor(){as||(as=URL.createObjectURL(new Blob([PC],{type:"application/javascript"}))),this.worker=new Worker(as)}}Vy.revokeObjectURL=function(){as&&(URL.revokeObjectURL(as),as=null)};let Sm=0,hh;class RC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new mu;t.addEventListener("message",i=>{t.terminate(),mu.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){hh===void 0&&(hh=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<hh&&(this._createdWorkers++,e=new Vy().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:e,arguments:t,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),i=t.id;this.resolveHash[Sm]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Sm++,id:i})}}const Em=new RC;function So(r,e,t){r.resource.internal=!0;const i=new Re(r),n=()=>{delete e.promiseCache[t],yn.has(t)&&yn.remove(t)};return i.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const IC=[".jpeg",".jpg",".png",".webp",".avif"],kC=["image/jpeg","image/png","image/webp","image/avif"];async function MC(r){const e=await _e.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Il={name:"loadTextures",extension:{type:de.LoadParser,priority:Or.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return ys(r,kC)||en(r,IC)},async load(r,e,t){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await Em.isImageBitmapSupported()?n=await Em.loadImageBitmap(r):n=await MC(r):n=await new Promise((l,c)=>{const d=new Image;d.crossOrigin=this.config.crossOrigin,d.src=r,d.complete?l(d):(d.onload=()=>l(d),d.onerror=p=>c(p))});const s={...e.data};s.resolution??(s.resolution=Ti(r)),i&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Ue(n,s);return o.resource.src=r,So(o,t,r)},unload(r){r.destroy(!0)}};ke.add(Il);const DC=".svg",OC="image/svg+xml",LC={extension:{type:de.LoadParser,priority:Or.High},name:"loadSVG",test(r){return ys(r,OC)||en(r,DC)},async testParse(r){return nu.test(r)},async parse(r,e,t){var s;const i=new nu(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await i.load();const n=new Ue(i,{resolution:Ti(r),...e==null?void 0:e.data});return n.resource.src=e.src,So(n,t,e.src)},async load(r,e){return(await _e.ADAPTER.fetch(r)).text()},unload:Il.unload};ke.add(LC);const BC=[".mp4",".m4v",".webm",".ogv"],FC=["video/mp4","video/webm","video/ogg"],NC={name:"loadVideo",extension:{type:de.LoadParser,priority:Or.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return ys(r,FC)||en(r,BC)},async load(r,e,t){var o;let i;const n=await(await _e.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(n);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new Ny(s,a);await l.load();const c=new Ue(l,{alphaMode:await HS(),resolution:Ti(r),...e==null?void 0:e.data});c.resource.src=r,i=So(c,t,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return i},unload(r){r.destroy(!0)}};ke.add(NC);class $C{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,name:i,src:n,srcs:s}=e;return wr(t||i||n||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];Array.isArray(t)?t.forEach(n=>{const s=n.src??n.srcs,o=n.alias??n.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);i.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));i.push(...l),a=[...o,...l]}this.add({...n,alias:a,src:s})}):Object.keys(t).forEach(n=>{const s=[n,this._createBundleAssetId(e,n)];if(typeof t[n]=="string")this.add({alias:s,src:t[n]});else if(Array.isArray(t[n]))this.add({alias:s,src:t[n]});else{const o=t[n],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}i.push(...s)}),this._bundles[e]=i}add(e,t,i,n,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(qe("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:i,format:n,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},wr(o).forEach(l=>{const{src:c,srcs:d}=l;let{data:p,format:m,loadParser:g}=l;const y=wr(c||d).map(T=>typeof T=="string"?hC(T):Array.isArray(T)?T:[T]),x=this.getAlias(l);Array.isArray(x)?x.forEach(a):a(x);const w=[];y.forEach(T=>{T.forEach(E=>{let P={};if(typeof E!="object"){P.src=E;for(let I=0;I<this._parsers.length;I++){const A=this._parsers[I];if(A.test(E)){P=A.parse(E);break}}}else p=E.data??p,m=E.format??m,g=E.loadParser??g,P={...P,...E};if(!x)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this.buildResolvedAsset(P,{aliases:x,data:p,format:m,loadParser:g}),w.push(P)})}),x.forEach(T=>{this._assetMap[T]=w})})}resolveBundle(e){const t=Ya(e);e=wr(e);const i={};return e.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(n,l)]=c}i[n]=a}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const n in t)i[n]=t[n].src;return i}return t.src}resolve(e){const t=Ya(e);e=wr(e);const i={};return e.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const d=s.filter(p=>p[l]?p[l]===c:!1);d.length&&(s=d)})}),this._resolverHash[n]=s[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:i,data:n,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Pt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...n||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Pt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class UC{constructor(){this._detections=[],this._initialized=!1,this.resolver=new $C,this.loader=new dC,this.cache=yn,this._backgroundLoader=new cC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,i=typeof t=="number"?[t]:t,n=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,i,n,s){this.resolver.add(e,t,i,n,s)}async load(e,t){this._initialized||await this.init();const i=Ya(e),n=wr(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,t);return i?o[n[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const n=this.resolver.resolveBundle(e),s={},o=Object.keys(n);let a=0,l=0;const c=()=>{t==null||t(++a/l)},d=o.map(p=>{const m=n[p];return l+=Object.keys(m).length,this._mapLoadToResolve(m,c).then(g=>{s[p]=g})});return await Promise.all(d),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return yn.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=yn.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(i,t);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const c=s[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[n[l]]=c,yn.set(d,c)}),o}async unload(e){this._initialized||await this.init();const t=wr(e).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=wr(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(n=>this._unloadFromResolved(t[n]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{yn.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,n)=>t.indexOf(i)===n),t}get detections(){return this._detections}get preferWorkers(){return Il.config.preferWorkers}set preferWorkers(e){qe("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const na=new UC;ke.handleByList(de.LoadParser,na.loader.parsers).handleByList(de.ResolveParser,na.resolver.parsers).handleByList(de.CacheParser,na.cache.parsers).handleByList(de.DetectionParser,na.detections);const GC={extension:de.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof Re),getCacheableAssets:(r,e)=>{const t={};return r.forEach(i=>{e.forEach((n,s)=>{t[i+(s===0?"":s+1)]=n})}),t}};ke.add(GC);async function Wy(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const jC={extension:{type:de.DetectionParser,priority:1},test:async()=>Wy("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};ke.add(jC);const HC={extension:{type:de.DetectionParser,priority:0},test:async()=>Wy("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};ke.add(HC);const Am=["png","jpg","jpeg"],zC={extension:{type:de.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...Am],remove:async r=>r.filter(e=>!Am.includes(e))};ke.add(zC);const VC="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function bd(r){return VC?!1:document.createElement("video").canPlayType(r)!==""}const WC={extension:{type:de.DetectionParser,priority:0},test:async()=>bd("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};ke.add(WC);const XC={extension:{type:de.DetectionParser,priority:0},test:async()=>bd("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};ke.add(XC);const YC={extension:{type:de.DetectionParser,priority:0},test:async()=>bd("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};ke.add(YC);const qC={extension:de.ResolveParser,test:Il.test,parse:r=>{var e;return{resolution:parseFloat(((e=_e.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:Pt.extname(r).slice(1),src:r}}};ke.add(qC);var kt=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(kt||{});const qa={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let $r,Kn;function Cm(){Kn={bptc:$r.getExtension("EXT_texture_compression_bptc"),astc:$r.getExtension("WEBGL_compressed_texture_astc"),etc:$r.getExtension("WEBGL_compressed_texture_etc"),s3tc:$r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:$r.getExtension("WEBGL_compressed_texture_pvrtc")||$r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:$r.getExtension("WEBGL_compressed_texture_etc1"),atc:$r.getExtension("WEBGL_compressed_texture_atc")}}const KC={extension:{type:de.DetectionParser,priority:2},test:async()=>{const r=_e.ADAPTER.createCanvas().getContext("webgl");return r?($r=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Kn||Cm();const e=[];for(const t in Kn)Kn[t]&&e.push(t);return[...e,...r]},remove:async r=>(Kn||Cm(),r.filter(e=>!(e in Kn)))};ke.add(KC);class JC extends El{constructor(e,t={width:1,height:1,autoLoad:!0}){let i,n;typeof e=="string"?(i=e,n=new Uint8Array):(i=null,n=e),super(n,t),this.origin=i,this.buffer=n?new Vh(n):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Vh(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class wn extends JC{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=wn._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||wn._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,i){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:d}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,l,c,0,d)}return!0}onBlobLoaded(){this._levelBuffers=wn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,i,n,s,o,a){const l=new Array(i);let c=e.byteOffset,d=o,p=a,m=d+n-1&~(n-1),g=p+s-1&~(s-1),y=m*g*qa[t];for(let x=0;x<i;x++)l[x]={levelID:x,levelWidth:i>1?d:m,levelHeight:i>1?p:g,levelBuffer:new Uint8Array(e.buffer,c,y)},c+=y,d=d>>1||1,p=p>>1||1,m=d+n-1&~(n-1),g=p+s-1&~(s-1),y=m*g*qa[t];return l}}const uh=4,sa=124,QC=32,Pm=20,ZC=542327876,oa={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},eP={FOURCC:2},aa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},tP=1,rP=2,iP=4,nP=64,sP=512,oP=131072,aP=827611204,lP=861165636,cP=894720068,hP=808540228,uP=4,dP={[aP]:kt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[lP]:kt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[cP]:kt.COMPRESSED_RGBA_S3TC_DXT5_EXT},pP={70:kt.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:kt.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:kt.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:kt.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:kt.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:kt.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:kt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:kt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:kt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:kt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:kt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:kt.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:kt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function fP(r){const e=new Uint32Array(r);if(e[0]!==ZC)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,sa/Uint32Array.BYTES_PER_ELEMENT),i=t[oa.HEIGHT],n=t[oa.WIDTH],s=t[oa.MIPMAP_COUNT],o=new Uint32Array(r,oa.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,QC/Uint32Array.BYTES_PER_ELEMENT),a=o[tP];if(a&iP){const l=o[eP.FOURCC];if(l!==hP){const E=dP[l],P=uh+sa,I=new Uint8Array(r,P);return[new wn(I,{format:E,width:n,height:i,levels:s})]}const c=uh+sa,d=new Uint32Array(e.buffer,c,Pm/Uint32Array.BYTES_PER_ELEMENT),p=d[aa.DXGI_FORMAT],m=d[aa.RESOURCE_DIMENSION],g=d[aa.MISC_FLAG],y=d[aa.ARRAY_SIZE],x=pP[p];if(x===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${p}`);if(g===uP)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const w=new Array,T=uh+sa+Pm;if(y===1)w.push(new Uint8Array(r,T));else{const E=qa[x];let P=0,I=n,A=i;for(let b=0;b<s;b++){const B=Math.max(1,I+3&-4),H=Math.max(1,A+3&-4),W=B*H*E;P+=W,I=I>>>1,A=A>>>1}let F=T;for(let b=0;b<y;b++)w.push(new Uint8Array(r,F,P)),F+=P}return w.map(E=>new wn(E,{format:x,width:n,height:i,levels:s}))}throw a&nP?new Error("DDSParser does not support uncompressed texture data."):a&sP?new Error("DDSParser does not supported YUV uncompressed texture data."):a&oP?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&rP?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Rm=[171,75,84,88,32,49,49,187,13,10,26,10],mP=67305985,yr={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},gu=64,Im={[Oe.UNSIGNED_BYTE]:1,[Oe.UNSIGNED_SHORT]:2,[Oe.INT]:4,[Oe.UNSIGNED_INT]:4,[Oe.FLOAT]:4,[Oe.HALF_FLOAT]:8},gP={[he.RGBA]:4,[he.RGB]:3,[he.RG]:2,[he.RED]:1,[he.LUMINANCE]:1,[he.LUMINANCE_ALPHA]:2,[he.ALPHA]:1},vP={[Oe.UNSIGNED_SHORT_4_4_4_4]:2,[Oe.UNSIGNED_SHORT_5_5_5_1]:2,[Oe.UNSIGNED_SHORT_5_6_5]:2};function yP(r,e,t=!1){const i=new DataView(e);if(!_P(r,i))return null;const n=i.getUint32(yr.ENDIANNESS,!0)===mP,s=i.getUint32(yr.GL_TYPE,n),o=i.getUint32(yr.GL_FORMAT,n),a=i.getUint32(yr.GL_INTERNAL_FORMAT,n),l=i.getUint32(yr.PIXEL_WIDTH,n),c=i.getUint32(yr.PIXEL_HEIGHT,n)||1,d=i.getUint32(yr.PIXEL_DEPTH,n)||1,p=i.getUint32(yr.NUMBER_OF_ARRAY_ELEMENTS,n)||1,m=i.getUint32(yr.NUMBER_OF_FACES,n),g=i.getUint32(yr.NUMBER_OF_MIPMAP_LEVELS,n),y=i.getUint32(yr.BYTES_OF_KEY_VALUE_DATA,n);if(c===0||d!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");const x=4,w=4,T=l+3&-4,E=c+3&-4,P=new Array(p);let I=l*c;s===0&&(I=T*E);let A;if(s!==0?Im[s]?A=Im[s]*gP[o]:A=vP[s]:A=qa[a],A===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=t?xP(i,y,n):null;let b=I*A,B=l,H=c,W=T,Q=E,N=gu+y;for(let G=0;G<g;G++){const X=i.getUint32(N,n);let se=N+4;for(let M=0;M<p;M++){let L=P[M];L||(L=P[M]=new Array(g)),L[G]={levelID:G,levelWidth:g>1||s!==0?B:W,levelHeight:g>1||s!==0?H:Q,levelBuffer:new Uint8Array(e,se,b)},se+=b}N+=X+4,N=N%4!==0?N+4-N%4:N,B=B>>1||1,H=H>>1||1,W=B+x-1&-4,Q=H+w-1&-4,b=W*Q*A}return s!==0?{uncompressed:P.map(G=>{let X=G[0].levelBuffer,se=!1;return s===Oe.FLOAT?X=new Float32Array(G[0].levelBuffer.buffer,G[0].levelBuffer.byteOffset,G[0].levelBuffer.byteLength/4):s===Oe.UNSIGNED_INT?(se=!0,X=new Uint32Array(G[0].levelBuffer.buffer,G[0].levelBuffer.byteOffset,G[0].levelBuffer.byteLength/4)):s===Oe.INT&&(se=!0,X=new Int32Array(G[0].levelBuffer.buffer,G[0].levelBuffer.byteOffset,G[0].levelBuffer.byteLength/4)),{resource:new El(X,{width:G[0].levelWidth,height:G[0].levelHeight}),type:s,format:se?bP(o):o}}),kvData:F}:{compressed:P.map(G=>new wn(null,{format:a,width:l,height:c,levels:g,levelBuffers:G})),kvData:F}}function _P(r,e){for(let t=0;t<Rm.length;t++)if(e.getUint8(t)!==Rm[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function bP(r){switch(r){case he.RGBA:return he.RGBA_INTEGER;case he.RGB:return he.RGB_INTEGER;case he.RG:return he.RG_INTEGER;case he.RED:return he.RED_INTEGER;default:return r}}function xP(r,e,t){const i=new Map;let n=0;for(;n<e;){const s=r.getUint32(gu+n,t),o=gu+n+4,a=3-(s+3)%4;if(s===0||s>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),d=new DataView(r.buffer,o+l+1,s-l-1);i.set(c,d),n+=4+s+a}return i}const wP={extension:{type:de.LoadParser,priority:Or.High},name:"loadDDS",test(r){return en(r,".dds")},async load(r,e,t){const i=await(await _e.ADAPTER.fetch(r)).arrayBuffer(),n=fP(i).map(s=>{const o=new Ue(s,{mipmap:ri.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:Ti(r),...e.data});return So(o,t,r)});return n.length===1?n[0]:n},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};ke.add(wP);const TP={extension:{type:de.LoadParser,priority:Or.High},name:"loadKTX",test(r){return en(r,".ktx")},async load(r,e,t){const i=await(await _e.ADAPTER.fetch(r)).arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=yP(r,i),a=n??s,l={mipmap:ri.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:Ti(r),...e.data},c=a.map(d=>{a===s&&Object.assign(l,{type:d.type,format:d.format});const p=d.resource??d,m=new Ue(p,l);return m.ktxKeyValueData=o,So(m,t,r)});return c.length===1?c[0]:c},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};ke.add(TP);const SP=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],EP={extension:de.ResolveParser,test:r=>{const e=Pt.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var i,n;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(SP.includes(s))return{resolution:parseFloat(((i=_e.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:s,src:r}}return{resolution:parseFloat(((n=_e.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:t,src:r}}};ke.add(EP);const la=new ze,AP=4,Xy=class Hs{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,i,n){const s=new Image;return s.src=await this.base64(e,t,i,n),s}async base64(e,t,i,n){const s=this.canvas(e,n);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},t,i)});if(s.toDataURL!==void 0)return s.toDataURL(t,i);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:i});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&Hs._flipY(i,n,s),a&&Hs._unpremultiplyAlpha(i);const l=new sE(n,s,1),c=new ImageData(new Uint8ClampedArray(i.buffer),n,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,t){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&Hs._flipY(i,n,s),a&&Hs._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let n,s=!1,o=!1,a,l=!1;e&&(e instanceof In?a=e:(a=i.generateTexture(e,{region:t,resolution:i.resolution,multisample:i.multisample}),l=!0,t&&(la.width=t.width,la.height=t.height,t=la)));const c=i.gl;if(a){if(n=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===he.RGBA,!l){i.renderTexture.bind(a);const g=a.framebuffer.glFramebuffers[i.CONTEXT_UID];g.blitFramebuffer&&i.framebuffer.bind(g.blitFramebuffer)}}else n=i.resolution,t||(t=la,t.width=i.width/n,t.height=i.height/n),s=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const d=Math.max(Math.round(t.width*n),1),p=Math.max(Math.round(t.height*n),1),m=new Uint8Array(AP*d*p);return c.readPixels(Math.round(t.x*n),Math.round(t.y*n),d,p,c.RGBA,c.UNSIGNED_BYTE,m),l&&(a==null||a.destroy(!0)),{pixels:m,width:d,height:p,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,i){const n=t<<2,s=i>>1,o=new Uint8Array(n);for(let a=0;a<s;a++){const l=a*n,c=(i-a-1)*n;o.set(e.subarray(l,l+n)),e.copyWithin(l,c,c+n),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const n=e[i+3];if(n!==0){const s=255.001/n;e[i]=e[i]*s+.5,e[i+1]=e[i+1]*s+.5,e[i+2]=e[i+2]*s+.5}}}};Xy.extension={name:"extract",type:de.RendererSystem};let CP=Xy;ke.add(CP);const Ka={build(r){const e=r.points;let t,i,n,s,o,a;if(r.type===Mt.CIRC){const y=r.shape;t=y.x,i=y.y,o=a=y.radius,n=s=0}else if(r.type===Mt.ELIP){const y=r.shape;t=y.x,i=y.y,o=y.width,a=y.height,n=s=0}else{const y=r.shape,x=y.width/2,w=y.height/2;t=y.x+x,i=y.y+w,o=a=Math.max(0,Math.min(y.radius,Math.min(x,w))),n=x-o,s=w-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(n?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=t+n,e[1]=e[3]=i+s,e[2]=e[4]=t-n,e[5]=e[7]=i-s;return}let d=0,p=l*4+(n?2:0)+2,m=p,g=c;{const y=n+o,x=s,w=t+y,T=t-y,E=i+x;if(e[d++]=w,e[d++]=E,e[--p]=E,e[--p]=T,s){const P=i-x;e[m++]=T,e[m++]=P,e[--g]=P,e[--g]=w}}for(let y=1;y<l;y++){const x=Math.PI/2*(y/l),w=n+Math.cos(x)*o,T=s+Math.sin(x)*a,E=t+w,P=t-w,I=i+T,A=i-T;e[d++]=E,e[d++]=I,e[--p]=I,e[--p]=P,e[m++]=P,e[m++]=A,e[--g]=A,e[--g]=E}{const y=n,x=s+a,w=t+y,T=t-y,E=i+x,P=i-x;e[d++]=w,e[d++]=E,e[--g]=P,e[--g]=w,n&&(e[d++]=T,e[d++]=E,e[--g]=P,e[--g]=T)}},triangulate(r,e){const t=r.points,i=e.points,n=e.indices;if(t.length===0)return;let s=i.length/2;const o=s;let a,l;if(r.type!==Mt.RREC){const d=r.shape;a=d.x,l=d.y}else{const d=r.shape;a=d.x+d.width/2,l=d.y+d.height/2}const c=r.matrix;i.push(r.matrix?c.a*a+c.c*l+c.tx:a,r.matrix?c.b*a+c.d*l+c.ty:l),s++,i.push(t[0],t[1]);for(let d=2;d<t.length;d+=2)i.push(t[d],t[d+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function km(r,e=!1){const t=r.length;if(t<6)return;let i=0;for(let n=0,s=r[t-2],o=r[t-1];n<t;n+=2){const a=r[n],l=r[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const n=t/2;for(let s=n+n%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,c=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[c]]=[r[c],r[a]]}}}const Yy={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const i=r.holes,n=e.points,s=e.indices;if(t.length>=6){km(t,!1);const o=[];for(let c=0;c<i.length;c++){const d=i[c];km(d.points,!0),o.push(t.length/2),t=t.concat(d.points)}const a=iS(t,o,2);if(!a)return;const l=n.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<t.length;c++)n.push(t[c])}}},PP={build(r){const e=r.shape,t=e.x,i=e.y,n=e.width,s=e.height,o=r.points;o.length=0,n>=0&&s>=0&&o.push(t,i,t+n,i,t+n,i+s,t,i+s)},triangulate(r,e){const t=r.points,i=e.points;if(t.length===0)return;const n=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},RP={build(r){Ka.build(r)},triangulate(r,e){Ka.triangulate(r,e)}};var or=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(or||{}),zi=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(zi||{});const hs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class Mm{static curveTo(e,t,i,n,s,o){const a=o[o.length-2],l=o[o.length-1]-t,c=a-e,d=n-t,p=i-e,m=Math.abs(l*p-c*d);if(m<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const g=l*l+c*c,y=d*d+p*p,x=l*d+c*p,w=s*Math.sqrt(g)/m,T=s*Math.sqrt(y)/m,E=w*x/g,P=T*x/y,I=w*p+T*c,A=w*d+T*l,F=c*(T+E),b=l*(T+E),B=p*(w+P),H=d*(w+P),W=Math.atan2(b-A,F-I),Q=Math.atan2(H-A,B-I);return{cx:I+e,cy:A+t,radius:s,startAngle:W,endAngle:Q,anticlockwise:c*d>p*l}}static arc(e,t,i,n,s,o,a,l,c){const d=a-o,p=hs._segmentsCount(Math.abs(d)*s,Math.ceil(Math.abs(d)/Ga)*40),m=d/(p*2),g=m*2,y=Math.cos(m),x=Math.sin(m),w=p-1,T=w%1/w;for(let E=0;E<=w;++E){const P=E+T*E,I=m+o+g*P,A=Math.cos(I),F=-Math.sin(I);c.push((y*A+x*F)*s+i,(y*-F+x*A)*s+n)}}}class IP{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class xd{static curveLength(e,t,i,n,s,o,a,l){let c=0,d=0,p=0,m=0,g=0,y=0,x=0,w=0,T=0,E=0,P=0,I=e,A=t;for(let F=1;F<=10;++F)d=F/10,p=d*d,m=p*d,g=1-d,y=g*g,x=y*g,w=x*e+3*y*d*i+3*g*p*s+m*a,T=x*t+3*y*d*n+3*g*p*o+m*l,E=I-w,P=A-T,I=w,A=T,c+=Math.sqrt(E*E+P*P);return c}static curveTo(e,t,i,n,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const d=hs._segmentsCount(xd.curveLength(l,c,e,t,i,n,s,o));let p=0,m=0,g=0,y=0,x=0;a.push(l,c);for(let w=1,T=0;w<=d;++w)T=w/d,p=1-T,m=p*p,g=m*p,y=T*T,x=y*T,a.push(g*l+3*m*T*e+3*p*y*i+x*s,g*c+3*m*T*t+3*p*y*n+x*o)}}function Dm(r,e,t,i,n,s,o,a){const l=r-t*n,c=e-i*n,d=r+t*s,p=e+i*s;let m,g;o?(m=i,g=-t):(m=-i,g=t);const y=l+m,x=c+g,w=d+m,T=p+g;return a.push(y,x,w,T),2}function cn(r,e,t,i,n,s,o,a){const l=t-r,c=i-e;let d=Math.atan2(l,c),p=Math.atan2(n-r,s-e);a&&d<p?d+=Math.PI*2:!a&&d>p&&(p+=Math.PI*2);let m=d;const g=p-d,y=Math.abs(g),x=Math.sqrt(l*l+c*c),w=(15*y*Math.sqrt(x)/Math.PI>>0)+1,T=g/w;if(m+=T,a){o.push(r,e,t,i);for(let E=1,P=m;E<w;E++,P+=T)o.push(r,e,r+Math.sin(P)*x,e+Math.cos(P)*x);o.push(r,e,n,s)}else{o.push(t,i,r,e);for(let E=1,P=m;E<w;E++,P+=T)o.push(r+Math.sin(P)*x,e+Math.cos(P)*x,r,e);o.push(n,s,r,e)}return w*2}function kP(r,e){const t=r.shape;let i=r.points||t.points.slice();const n=e.closePointEps;if(i.length===0)return;const s=r.lineStyle,o=new Qe(i[0],i[1]),a=new Qe(i[i.length-2],i[i.length-1]),l=t.type!==Mt.POLY||t.closeStroke,c=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),c&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const L=(o.x+a.x)*.5,k=(a.y+o.y)*.5;i.unshift(L,k),i.push(L,k)}const d=e.points,p=i.length/2;let m=i.length;const g=d.length/2,y=s.width/2,x=y*y,w=s.miterLimit*s.miterLimit;let T=i[0],E=i[1],P=i[2],I=i[3],A=0,F=0,b=-(E-I),B=T-P,H=0,W=0,Q=Math.sqrt(b*b+B*B);b/=Q,B/=Q,b*=y,B*=y;const N=s.alignment,G=(1-N)*2,X=N*2;l||(s.cap===zi.ROUND?m+=cn(T-b*(G-X)*.5,E-B*(G-X)*.5,T-b*G,E-B*G,T+b*X,E+B*X,d,!0)+2:s.cap===zi.SQUARE&&(m+=Dm(T,E,b,B,G,X,!0,d))),d.push(T-b*G,E-B*G,T+b*X,E+B*X);for(let L=1;L<p-1;++L){T=i[(L-1)*2],E=i[(L-1)*2+1],P=i[L*2],I=i[L*2+1],A=i[(L+1)*2],F=i[(L+1)*2+1],b=-(E-I),B=T-P,Q=Math.sqrt(b*b+B*B),b/=Q,B/=Q,b*=y,B*=y,H=-(I-F),W=P-A,Q=Math.sqrt(H*H+W*W),H/=Q,W/=Q,H*=y,W*=y;const k=P-T,z=E-I,U=P-A,j=F-I,K=k*U+z*j,Y=z*U-j*k,te=Y<0;if(Math.abs(Y)<.001*Math.abs(K)){d.push(P-b*G,I-B*G,P+b*X,I+B*X),K>=0&&(s.join===or.ROUND?m+=cn(P,I,P-b*G,I-B*G,P-H*G,I-W*G,d,!1)+4:m+=2,d.push(P-H*X,I-W*X,P+H*G,I+W*G));continue}const ae=(-b+T)*(-B+I)-(-b+P)*(-B+E),pe=(-H+A)*(-W+I)-(-H+P)*(-W+F),be=(k*pe-U*ae)/Y,Ae=(j*ae-z*pe)/Y,ee=(be-P)*(be-P)+(Ae-I)*(Ae-I),le=P+(be-P)*G,we=I+(Ae-I)*G,Pe=P-(be-P)*X,Ne=I-(Ae-I)*X,We=Math.min(k*k+z*z,U*U+j*j),Ee=te?G:X,Te=We+Ee*Ee*x,pt=ee<=Te;let ct=s.join;if(ct===or.MITER&&ee/x>w&&(ct=or.BEVEL),pt)switch(ct){case or.MITER:{d.push(le,we,Pe,Ne);break}case or.BEVEL:{te?d.push(le,we,P+b*X,I+B*X,le,we,P+H*X,I+W*X):d.push(P-b*G,I-B*G,Pe,Ne,P-H*G,I-W*G,Pe,Ne),m+=2;break}case or.ROUND:{te?(d.push(le,we,P+b*X,I+B*X),m+=cn(P,I,P+b*X,I+B*X,P+H*X,I+W*X,d,!0)+4,d.push(le,we,P+H*X,I+W*X)):(d.push(P-b*G,I-B*G,Pe,Ne),m+=cn(P,I,P-b*G,I-B*G,P-H*G,I-W*G,d,!1)+4,d.push(P-H*G,I-W*G,Pe,Ne));break}}else{switch(d.push(P-b*G,I-B*G,P+b*X,I+B*X),ct){case or.MITER:{te?d.push(Pe,Ne,Pe,Ne):d.push(le,we,le,we),m+=2;break}case or.ROUND:{te?m+=cn(P,I,P+b*X,I+B*X,P+H*X,I+W*X,d,!0)+2:m+=cn(P,I,P-b*G,I-B*G,P-H*G,I-W*G,d,!1)+2;break}}d.push(P-H*G,I-W*G,P+H*X,I+W*X),m+=2}}T=i[(p-2)*2],E=i[(p-2)*2+1],P=i[(p-1)*2],I=i[(p-1)*2+1],b=-(E-I),B=T-P,Q=Math.sqrt(b*b+B*B),b/=Q,B/=Q,b*=y,B*=y,d.push(P-b*G,I-B*G,P+b*X,I+B*X),l||(s.cap===zi.ROUND?m+=cn(P-b*(G-X)*.5,I-B*(G-X)*.5,P-b*G,I-B*G,P+b*X,I+B*X,d,!1)+2:s.cap===zi.SQUARE&&(m+=Dm(P,I,b,B,G,X,!1,d)));const se=e.indices,M=hs.epsilon*hs.epsilon;for(let L=g;L<m+g-2;++L)T=d[L*2],E=d[L*2+1],P=d[(L+1)*2],I=d[(L+1)*2+1],A=d[(L+2)*2],F=d[(L+2)*2+1],!(Math.abs(T*(I-F)+P*(F-E)+A*(E-I))<M)&&se.push(L,L+1,L+2)}function MP(r,e){let t=0;const i=r.shape,n=r.points||i.points,s=i.type!==Mt.POLY||i.closeStroke;if(n.length===0)return;const o=e.points,a=e.indices,l=n.length/2,c=o.length/2;let d=c;for(o.push(n[0],n[1]),t=1;t<l;t++)o.push(n[t*2],n[t*2+1]),a.push(d,d+1),d++;s&&a.push(d,c)}function Om(r,e){r.lineStyle.native?MP(r,e):kP(r,e)}class wd{static curveLength(e,t,i,n,s,o){const a=e-2*i+s,l=t-2*n+o,c=2*i-2*e,d=2*n-2*t,p=4*(a*a+l*l),m=4*(a*c+l*d),g=c*c+d*d,y=2*Math.sqrt(p+m+g),x=Math.sqrt(p),w=2*p*x,T=2*Math.sqrt(g),E=m/x;return(w*y+x*m*(y-T)+(4*g*p-m*m)*Math.log((2*x+E+y)/(E+T)))/(4*w)}static curveTo(e,t,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=hs._segmentsCount(wd.curveLength(o,a,e,t,i,n));let c=0,d=0;for(let p=1;p<=l;++p){const m=p/l;c=o+(e-o)*m,d=a+(t-a)*m,s.push(c+(e+(i-e)*m-c)*m,d+(t+(n-t)*m-d)*m)}}}const dh={[Mt.POLY]:Yy,[Mt.CIRC]:Ka,[Mt.ELIP]:Ka,[Mt.RECT]:PP,[Mt.RREC]:RP},Lm=[],ca=[];class Ja{constructor(e,t=null,i=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=n,this.type=e.type}clone(){return new Ja(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Vn=new Qe,qy=class Ky extends ty{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Wa,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ca.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Lm.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,n=null){const s=new Ja(e,t,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new Ja(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const n=t[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,Vn):Vn.copyFrom(e),n.shape.contains(Vn.x,Vn.y))){let s=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(Vn.x,Vn.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const c=t[l],d=c.fillStyle,p=c.lineStyle;dh[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(d.visible||p.visible)&&this.processHoles(c.holes);for(let m=0;m<2;m++){const g=m===0?d:p;if(!g.visible)continue;const y=g.texture.baseTexture,x=this.indices.length,w=this.points.length/2;y.wrapMode=Wi.REPEAT,m===0?this.processFill(c):this.processLine(c);const T=this.points.length/2-w;T!==0&&(i&&!this._compareStyles(n,g)&&(i.end(x,w),i=null),i||(i=Lm.pop()||new IP,i.begin(g,x,w),this.batches.push(i),n=g),this.addUvs(this.points,e,g.texture,w,T,g.matrix))}}const s=this.indices.length,o=this.points.length/2;if(i&&i.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const n=e[t];for(let s=0;s<n.size;s++){const o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Ky.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Ue._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),ca.push(this.drawCalls[p]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let n=ca.pop();n||(n=new Yh,n.texArray=new Qh),n.texArray.count=0,n.start=0,n.size=0,n.type=Hr.TRIANGLES;let s=0,o=null,a=0,l=!1,c=Hr.TRIANGLES,d=0;this.drawCalls.push(n);for(let p=0;p<this.batches.length;p++){const m=this.batches[p],g=8,y=m.style,x=y.texture.baseTexture;l!==!!y.native&&(l=!!y.native,c=l?Hr.LINES:Hr.TRIANGLES,o=null,s=g,e++),o!==x&&(o=x,x._batchEnabled!==e&&(s===g&&(e++,s=0,n.size>0&&(n=ca.pop(),n||(n=new Yh,n.texArray=new Qh),this.drawCalls.push(n)),n.start=d,n.size=0,n.texArray.count=0,n.type=c),x.touched=1,x._batchEnabled=e,x._batchLocation=s,x.wrapMode=Wi.REPEAT,n.texArray.elements[n.texArray.count++]=x,s++)),n.size+=m.size,d+=m.size,a=x._batchLocation,this.addColors(t,y.color,y.alpha,m.attribSize,m.attribStart),this.addTextureIds(i,a,m.attribSize,m.attribStart)}Ue._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=t[c*2],o[l++]=t[c*2+1],a[l++]=i[c],o[l++]=n[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Yy.triangulate(e,this):dh[e.type].triangulate(e,this)}processLine(e){Om(e,this);for(let t=0;t<e.holes.length;t++)Om(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];dh[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const n=e[i*2],s=e[i*2+1];e[i*2]=t.a*n+t.c*s+t.tx,e[i*2+1]=t.b*n+t.d*s+t.ty}}addColors(e,t,i,n,s=0){const o=ht.shared.setValue(t).toLittleEndianNumber(),a=ht.shared.setValue(o).toPremultiplied(i);e.length=Math.max(e.length,s+n);for(let l=0;l<n;l++)e[s+l]=a}addTextureIds(e,t,i,n=0){e.length=Math.max(e.length,n+i);for(let s=0;s<i;s++)e[n+s]=t}addUvs(e,t,i,n,s,o=null){let a=0;const l=t.length,c=i.frame;for(;a<s;){let p=e[(n+a)*2],m=e[(n+a)*2+1];if(o){const g=o.a*p+o.c*m+o.tx;m=o.b*p+o.d*m+o.ty,p=g}a++,t.push(p/c.width,m/c.height)}const d=i.baseTexture;(c.width<d.width||c.height<d.height)&&this.adjustUvs(t,i,l,s)}adjustUvs(e,t,i,n){const s=t.baseTexture,o=1e-6,a=i+n*2,l=t.frame,c=l.width/s.width,d=l.height/s.height;let p=l.x/l.width,m=l.y/l.height,g=Math.floor(e[i]+o),y=Math.floor(e[i+1]+o);for(let x=i+2;x<a;x+=2)g=Math.min(g,Math.floor(e[x]+o)),y=Math.min(y,Math.floor(e[x+1]+o));p-=g,m-=y;for(let x=i;x<a;x+=2)e[x]=(e[x]+p)*c,e[x+1]=(e[x+1]+m)*d}};qy.BATCHABLE_SIZE=100;let DP=qy;class kl{constructor(){this.color=16777215,this.alpha=1,this.texture=Re.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new kl;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Re.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Td extends kl{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=zi.BUTT,this.join=or.MITER,this.miterLimit=10}clone(){const e=new Td;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=zi.BUTT,this.join=or.MITER,this.miterLimit=10}}const ph={},vu=class xa extends Mr{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new kl,this._lineStyle=new Td,this._matrix=null,this._holeMode=!1,this.state=si.for2d(),this._geometry=e||new DP,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ht(16777215),this.blendMode=Be.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new xa(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,n=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:n,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Re.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:zi.BUTT,join:or.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new xn,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new xn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==e||s!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),wd.curveTo(e,t,i,n,s),this}bezierCurveTo(e,t,i,n,s,o){return this._initCurve(),xd.curveTo(e,t,i,n,s,o,this.currentPath.points),this}arcTo(e,t,i,n,s){this._initCurve(e,t);const o=this.currentPath.points,a=Mm.curveTo(e,t,i,n,s,o);if(a){const{cx:l,cy:c,radius:d,startAngle:p,endAngle:m,anticlockwise:g}=a;this.arc(l,c,d,p,m,g)}return this}arc(e,t,i,n,s,o=!1){if(n===s)return this;if(!o&&s<=n?s+=Ga:o&&n<=s&&(n+=Ga),s-n===0)return this;const a=e+Math.cos(n)*i,l=t+Math.sin(n)*i,c=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const p=Math.abs(d[d.length-2]-a),m=Math.abs(d[d.length-1]-l);p<c&&m<c||d.push(a,l)}else this.moveTo(a,l),d=this.currentPath.points;return Mm.arc(a,l,e,t,i,n,s,o,d),this}beginFill(e=0,t){return this.beginTextureFill({texture:Re.WHITE,color:e,alpha:t})}normalizeColor(e){const t=ht.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Re.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,n){return this.drawShape(new ze(e,t,i,n))}drawRoundedRect(e,t,i,n,s){return this.drawShape(new Pl(e,t,i,n,s))}drawCircle(e,t,i){return this.drawShape(new Al(e,t,i))}drawEllipse(e,t,i,n){return this.drawShape(new Cl(e,t,i,n))}drawPolygon(...e){let t,i=!0;const n=e[0];n.points?(i=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new xn(t);return s.closeStroke=i,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Mt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let n=0;n<i;n++){const s=e.batches[n],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),d={vertexData:a,blendMode:t,indices:c,uvs:l,_batchRGB:ht.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=d}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,n=this.worldAlpha,s=t.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,ht.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:i,type:n,size:s,start:o}=t,a=i.count;for(let l=0;l<a;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(n,s,o)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!ph[i]){const{maxTextures:n}=e.plugins[i],s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ut,default:Pr.from({uSamplers:s},!0)},a=e.plugins[i]._shader.program;ph[i]=new qr(a,o)}t=ph[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:n,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,i,n,s)}containsPoint(e){return this.worldTransform.applyInverse(e,xa._TEMP_POINT),this._geometry.containsPoint(xa._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=ht.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this._geometry.points,d=this.vertexData;let p=0;for(let m=0;m<c.length;m+=2){const g=c[m],y=c[m+1];d[p++]=i*g+s*y+a,d[p++]=o*y+n*g+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};vu.curves=hs,vu._TEMP_POINT=new Qe;let Jy=vu;class OP{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const fh=new Qe,Bm=new xn,Qy=class Zy extends Mr{constructor(e,t,i,n=Hr.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||si.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=_e.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Hr.TRIANGLES&&t.length<Zy.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,c=n.tx,d=n.ty,p=this.vertexData;for(let m=0;m<p.length/2;m++){const g=t[m*2],y=t[m*2+1];p[m*2]=s*g+a*y+c,p[m*2+1]=o*g+l*y+d}if(this._roundPixels){const m=_e.RESOLUTION;for(let g=0;g<p.length;++g)p[g]=Math.round(p[g]*m)/m}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new OP(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,fh);const t=this.geometry.getBuffer("aVertexPosition").data,i=Bm.points,n=this.geometry.getIndex().data,s=n.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=n[a]*2,c=n[a+1]*2,d=n[a+2]*2;if(i[0]=t[l],i[1]=t[l+1],i[2]=t[c],i[3]=t[c+1],i[4]=t[d],i[5]=t[d+1],Bm.contains(fh.x,fh.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Qy.BATCHABLE_SIZE=100;let Fm=Qy;class LP extends Ki{constructor(e,t,i){super();const n=new xt(e),s=new xt(t,!0),o=new xt(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,Oe.FLOAT).addAttribute("aTextureCoord",s,2,!1,Oe.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var BP=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,FP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Nm extends qr{constructor(e,t){const i={uSampler:e,alpha:1,uTextureMatrix:ut.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(i,t.uniforms),super(t.program||yi.from(FP,BP),i),this._colorDirty=!1,this.uvMatrix=new my(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new ht(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;ht.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class $m{constructor(e,t,i){this.geometry=new Ki,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let s=e[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Oe.FLOAT,offset:s.offset},t[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new xt(iE(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new xt(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new xt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Oe.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Oe.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(e,t,i,s.type===Oe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(e,t,i,s.type===Oe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var NP=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,$P=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class e_ extends Rl{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new ut,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Oe.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=qr.from($P,NP,{}),this.state=si.for2d()}render(e){const t=e.children,i=e._maxSize,n=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=Qv(e.blendMode,c),s.state.set(this.state);const d=s.gl,p=e.worldTransform.copyTo(this.tempMatrix);p.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=ht.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let m=!1;for(let g=0,y=0;g<o;g+=n,y+=1){let x=o-g;x>n&&(x=n),y>=a.length&&a.push(this._generateOneMoreBuffer(e));const w=a[y];w.uploadDynamic(t,g,x);const T=e._bufferUpdateIDs[y]||0;m=m||w._updateID<T,m&&(w._updateID=e._updateID,w.uploadStatic(t,g,x)),s.geometry.bind(w.geometry),d.drawElements(d.TRIANGLES,x*6,d.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],i=e._maxSize,n=e._batchSize,s=e._properties;for(let o=0;o<i;o+=n)t.push(new $m(this.properties,s,n));return t}_generateOneMoreBuffer(e){const t=e._batchSize,i=e._properties;return new $m(this.properties,i,t)}uploadVertices(e,t,i,n,s,o){let a=0,l=0,c=0,d=0;for(let p=0;p<i;++p){const m=e[t+p],g=m._texture,y=m.scale.x,x=m.scale.y,w=g.trim,T=g.orig;w?(l=w.x-m.anchor.x*T.width,a=l+w.width,d=w.y-m.anchor.y*T.height,c=d+w.height):(a=T.width*(1-m.anchor.x),l=T.width*-m.anchor.x,c=T.height*(1-m.anchor.y),d=T.height*-m.anchor.y),n[o]=l*y,n[o+1]=d*x,n[o+s]=a*y,n[o+s+1]=d*x,n[o+s*2]=a*y,n[o+s*2+1]=c*x,n[o+s*3]=l*y,n[o+s*3+1]=c*x,o+=s*4}}uploadPosition(e,t,i,n,s,o){for(let a=0;a<i;a++){const l=e[t+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,i,n,s,o){for(let a=0;a<i;a++){const l=e[t+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(e,t,i,n,s,o){for(let a=0;a<i;++a){const l=e[t+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,i,n,s,o){for(let a=0;a<i;++a){const l=e[t+a],c=ht.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=c,n[o+s]=c,n[o+s*2]=c,n[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}e_.extension={name:"particle",type:de.RendererPlugin};ke.add(e_);var Ml=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Ml||{});const ha={willReadFrequently:!0},Ur=class Me{static get experimentalLetterSpacingSupported(){let e=Me._experimentalLetterSpacingSupported;if(e!==void 0){const t=_e.ADAPTER.getCanvasRenderingContext2D().prototype;e=Me._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,n,s,o,a,l,c){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,t,i,n=Me._canvas){i=i??t.wordWrap;const s=t.toFontString(),o=Me.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=n.getContext("2d",ha);a.font=s;const l=(i?Me.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let d=0;for(let y=0;y<l.length;y++){const x=Me._measureText(l[y],t.letterSpacing,a);c[y]=x,d=Math.max(d,x)}let p=d+t.strokeThickness;t.dropShadow&&(p+=t.dropShadowDistance);const m=t.lineHeight||o.fontSize+t.strokeThickness;let g=Math.max(m,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(m+t.leading);return t.dropShadow&&(g+=t.dropShadowDistance),new Me(e,t,p,g,l,c,m+t.leading,d,o)}static _measureText(e,t,i){let n=!1;Me.experimentalLetterSpacingSupported&&(Me.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e).width;return s>0&&(n?s-=t:s+=(Me.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,i=Me._canvas){const n=i.getContext("2d",ha);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:d}=t,p=Me.collapseSpaces(d),m=Me.collapseNewlines(d);let g=!p;const y=t.wordWrapWidth+c,x=Me.tokenize(e);for(let w=0;w<x.length;w++){let T=x[w];if(Me.isNewline(T)){if(!m){a+=Me.addLine(o),g=!p,o="",s=0;continue}T=" "}if(p){const P=Me.isBreakingSpace(T),I=Me.isBreakingSpace(o[o.length-1]);if(P&&I)continue}const E=Me.getFromCache(T,c,l,n);if(E>y)if(o!==""&&(a+=Me.addLine(o),o="",s=0),Me.canBreakWords(T,t.breakWords)){const P=Me.wordWrapSplit(T);for(let I=0;I<P.length;I++){let A=P[I],F=A,b=1;for(;P[I+b];){const H=P[I+b];if(!Me.canBreakChars(F,H,T,I,t.breakWords))A+=H;else break;F=H,b++}I+=b-1;const B=Me.getFromCache(A,c,l,n);B+s>y&&(a+=Me.addLine(o),g=!1,o="",s=0),o+=A,s+=B}}else{o.length>0&&(a+=Me.addLine(o),o="",s=0);const P=w===x.length-1;a+=Me.addLine(T,!P),g=!1,o="",s=0}else E+s>y&&(g=!1,a+=Me.addLine(o),o="",s=0),(o.length>0||!Me.isBreakingSpace(T)||g)&&(o+=T,s+=E)}return a+=Me.addLine(o,!1),a}static addLine(e,t=!0){return e=Me.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,n){let s=i[e];return typeof s!="number"&&(s=Me._measureText(e,t,n)+t,i[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!Me.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Me._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Me._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const s=e[n],o=e[n+1];if(Me.isBreakingSpace(s,o)||Me.isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,n,s){return!0}static wordWrapSplit(e){return Me.graphemeSegmenter(e)}static measureFont(e){if(Me._fonts[e])return Me._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=Me._canvas,n=Me._context;n.font=e;const s=Me.METRICS_STRING+Me.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width);let a=Math.ceil(n.measureText(Me.BASELINE_SYMBOL).width);const l=Math.ceil(Me.HEIGHT_MULTIPLIER*a);if(a=a*Me.BASELINE_MULTIPLIER|0,o===0||l===0)return Me._fonts[e]=t,t;i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);const c=n.getImageData(0,0,o,l).data,d=c.length,p=o*4;let m=0,g=0,y=!1;for(m=0;m<a;++m){for(let x=0;x<p;x+=4)if(c[g+x]!==255){y=!0;break}if(!y)g+=p;else break}for(t.ascent=a-m,g=d-p,y=!1,m=l;m>a;--m){for(let x=0;x<p;x+=4)if(c[g+x]!==255){y=!0;break}if(!y)g-=p;else break}return t.descent=m-a,t.fontSize=t.ascent+t.descent,Me._fonts[e]=t,t}static clearMetrics(e=""){e?delete Me._fonts[e]:Me._fonts={}}static get _canvas(){var e;if(!Me.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if((e=i.getContext("2d",ha))!=null&&e.measureText)return Me.__canvas=i,i;t=_e.ADAPTER.createCanvas()}catch{t=_e.ADAPTER.createCanvas()}t.width=t.height=10,Me.__canvas=t}return Me.__canvas}static get _context(){return Me.__context||(Me.__context=Me._canvas.getContext("2d",ha)),Me.__context}};Ur.METRICS_STRING="|ÉqÅ",Ur.BASELINE_SYMBOL="M",Ur.BASELINE_MULTIPLIER=1.4,Ur.HEIGHT_MULTIPLIER=2,Ur.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),Ur.experimentalLetterSpacing=!1,Ur._fonts={},Ur._newlines=[10,13],Ur._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ui=Ur;const UP=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],t_=class zs{constructor(e){this.styleID=0,this.reset(),gh(this,e,e)}clone(){const e={};return gh(e,this,zs.defaultStyle),new zs(e)}reset(){gh(this,zs.defaultStyle,zs.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=mh(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=mh(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){GP(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=mh(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!UP.includes(n)&&(n=`"${n}"`),t[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};t_.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ml.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ji=t_;function mh(r){const e=ht.shared,t=i=>{const n=e.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function GP(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function gh(r,e,t){for(const i in t)Array.isArray(e[i])?r[i]=e[i].slice():r[i]=e[i]}const jP={texture:!0,children:!1,baseTexture:!0},r_=class yu extends vs{constructor(e,t,i){let n=!1;i||(i=_e.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=Re.from(i);s.orig=new ze,s.trim=new ze,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=yu.defaultResolution??_e.RESOLUTION,this._autoResolution=yu.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ui.experimentalLetterSpacing}static set experimentalLetterSpacing(e){qe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ui.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,n=Ui.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,o=n.height,a=n.lines,l=n.lineHeight,c=n.lineWidths,d=n.maxLineWidth,p=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let m,g;const y=t.dropShadow?2:1;for(let x=0;x<y;++x){const w=t.dropShadow&&x===0,T=w?Math.ceil(Math.max(1,o)+t.padding*2):0,E=T*this._resolution;if(w){i.fillStyle="black",i.strokeStyle="black";const I=t.dropShadowColor,A=t.dropShadowBlur*this._resolution,F=t.dropShadowDistance*this._resolution;i.shadowColor=ht.shared.setValue(I).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=A,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*F,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*F+E}else i.fillStyle=this._generateFillStyle(t,a,n),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let P=(l-p.fontSize)/2;l-p.fontSize<0&&(P=0);for(let I=0;I<a.length;I++)m=t.strokeThickness/2,g=t.strokeThickness/2+I*l+p.ascent+P,t.align==="right"?m+=d-c[I]:t.align==="center"&&(m+=(d-c[I])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[I],m+t.padding,g+t.padding-T,!0),t.fill&&this.drawLetterSpacing(a[I],m+t.padding,g+t.padding-T)}this.updateTexture()}drawLetterSpacing(e,t,i,n=!1){const s=this._style.letterSpacing;let o=!1;if(Ui.experimentalLetterSpacingSupported&&(Ui.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=Ui.graphemeSegmenter(e);let c=this.context.measureText(e).width,d=0;for(let p=0;p<l.length;++p){const m=l[p];n?this.context.strokeText(m,a,i):this.context.fillText(m,a,i);let g="";for(let y=p+1;y<l.length;++y)g+=l[y];d=this.context.measureText(g).width,a+=c-d+s,c=d}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=aE(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,i=this._style,n=i.trim?0:i.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,d=n.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=d.length+1;for(let g=1;g<m;++g)p.push(g/m)}if(d.unshift(n[0]),p.unshift(0),d.push(n[n.length-1]),p.push(1),e.fillGradientType===Ml.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const m=i.fontProperties.fontSize+e.strokeThickness;for(let g=0;g<t.length;g++){const y=i.lineHeight*(g-1)+m,x=i.lineHeight*g;let w=x;g>0&&y>x&&(w=(x+y)/2);const T=x+m,E=i.lineHeight*(g+1);let P=T;g+1<t.length&&E<T&&(P=(T+E)/2);const I=(P-w)/c;for(let A=0;A<d.length;A++){let F=0;typeof p[A]=="number"?F=p[A]:F=A/d.length;let b=Math.min(1,Math.max(0,w/c+F*I));b=Number(b.toFixed(5)),s.addColorStop(b,d[A])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const m=d.length+1;let g=1;for(let y=0;y<d.length;y++){let x;typeof p[y]=="number"?x=p[y]:x=g/m,s.addColorStop(x,d[y]),g++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},jP,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Hi(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Hi(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Ji?this._style=e:this._style=new Ji(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};r_.defaultAutoResolution=!0;let i_=r_;class HP{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function zP(r,e){var i;let t=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof Re){const s=r._textures[n].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function VP(r,e){if(r.baseTexture instanceof Ue){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function WP(r,e){if(r._texture&&r._texture instanceof Re){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function XP(r,e){return e instanceof i_?(e.updateText(!0),!0):!1}function YP(r,e){if(e instanceof Ji){const t=e.toFontString();return Ui.measureFont(t),!0}return!1}function qP(r,e){if(r instanceof i_){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function KP(r,e){return r instanceof Ji?(e.includes(r)||e.push(r),!0):!1}const n_=class s_{constructor(e){this.limiter=new HP(s_.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(qP),this.registerFindHook(KP),this.registerFindHook(zP),this.registerFindHook(VP),this.registerFindHook(WP),this.registerUploadHook(XP),this.registerUploadHook(YP)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,er.system.addOnce(this.tick,this,An.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)er.system.addOnce(this.tick,this,An.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Mr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&er.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};n_.uploadsPerFrame=4;let _u=n_;Object.defineProperties(_e,{UPLOADS_PER_FRAME:{get(){return _u.uploadsPerFrame},set(r){qe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),_u.uploadsPerFrame=r}}});function o_(r,e){return e instanceof Ue?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function JP(r,e){if(!(e instanceof Jy))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:i}=t;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&o_(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function QP(r,e){return r instanceof Jy?(e.push(r),!0):!1}class a_ extends _u{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(QP),this.registerUploadHook(o_),this.registerUploadHook(JP)}}a_.extension={name:"prepare",type:de.RendererSystem};ke.add(a_);var ZP=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,eR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,tR=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Um=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,rR=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ua=new ut;class l_ extends Rl{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new uy,this.state=si.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=qr.from(Um,rR,t),this.shader=e.context.webGLVersion>1?qr.from(eR,ZP,t):qr.from(Um,tR,t)}render(e){const t=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,d=e.tileTransform.localTransform,p=e.uvMatrix;let m=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;m&&(l._glTextures[t.CONTEXT_UID]?m=l.wrapMode!==Wi.CLAMP:l.wrapMode===Wi.CLAMP&&(l.wrapMode=Wi.REPEAT));const g=m?this.simpleShader:this.shader,y=a.width,x=a.height,w=e._width,T=e._height;ua.set(d.a*y/w,d.b*y/T,d.c*x/w,d.d*x/T,d.tx/w,d.ty/T),ua.invert(),m?ua.prepend(p.mapCoord):(g.uniforms.uMapCoord=p.mapCoord.toArray(!0),g.uniforms.uClampFrame=p.uClampFrame,g.uniforms.uClampOffset=p.uClampOffset),g.uniforms.uTransform=ua.toArray(!0),g.uniforms.uColor=ht.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,t.shader.bind(g),t.geometry.bind(i),this.state.blendMode=Qv(e.blendMode,c),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}l_.extension={name:"tilingSprite",type:de.RendererPlugin};ke.add(l_);const c_=class Vs{constructor(e,t,i){this.linkedSheets=[],(e instanceof Ue||e instanceof Re)&&(e={texture:e,data:t,resolutionFilename:i});const{texture:n,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=n instanceof Re?n:null,this.baseTexture=n instanceof Ue?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=Ti(e,null);return i===null&&(i=typeof t=="number"?t:parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Vs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Vs.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const n=this._frameKeys[t],s=this._frames[n],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new ze(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new ze(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new ze(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ze(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Re(this.baseTexture,a,d,l,s.rotated?2:0,s.anchor,s.borders),Re.addToCache(this.textures[n],this.cachePrefix+n.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const n=e[t][i];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Vs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Vs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};c_.BATCH_SIZE=1e3;let Gm=c_;const iR=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function h_(r,e,t){const i={};if(r.forEach(n=>{i[n]=e}),Object.keys(e.textures).forEach(n=>{i[`${e.cachePrefix}${n}`]=e.textures[n]}),!t){const n=Pt.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(i,h_([`${n}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return i}const nR={extension:de.Asset,cache:{test:r=>r instanceof Gm,getCacheableAssets:(r,e)=>h_(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&iR.includes(i)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=_e.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:de.LoadParser,priority:Or.Normal},async testParse(r,e){return Pt.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var d,p;const{texture:i,imageFilename:n,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Pt.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const m=fu(o+(n??r.meta.image),e.src);a=(await t.load([m]))[m]}const l=new Gm({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=(d=r==null?void 0:r.meta)==null?void 0:d.related_multi_packs;if(Array.isArray(c)){const m=[];for(const y of c){if(typeof y!="string")continue;let x=o+y;(p=e.data)!=null&&p.ignoreMultiPack||(x=fu(x,e.src),m.push(t.load({src:x,data:{ignoreMultiPack:!0}})))}const g=await Promise.all(m);l.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[l].concat(l.linkedSheets.filter(x=>x!==y))})}return l},unload(r){r.destroy(!0)}}};ke.add(nR);class Qa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class wa{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const d=a[c].split("="),p=d[0],m=d[1].replace(/"/gm,""),g=parseFloat(m),y=isNaN(g)?m:g;l[p]=y}i[o].push(l)}const n=new Qa;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class bu{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Qa,i=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<i.length;c++)t.info.push({face:i[c].getAttribute("face"),size:parseInt(i[c].getAttribute("size"),10)});for(let c=0;c<n.length;c++)t.common.push({lineHeight:parseInt(n[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)t.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const d=o[c];t.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)t.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)t.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return t}}class xu{static test(e){return typeof e=="string"&&e.includes("<font>")?bu.test(_e.ADAPTER.parseXML(e)):!1}static parse(e){return bu.parse(_e.ADAPTER.parseXML(e))}}const vh=[wa,bu,xu];function sR(r){for(let e=0;e<vh.length;e++)if(vh[e].test(r))return vh[e];return null}function oR(r,e,t,i,n,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,d=r.width/i-l-c*2,p=r.height/i-l-c*2,m=o.slice(),g=t.fillGradientStops.slice();if(!g.length){const y=m.length+1;for(let x=1;x<y;++x)g.push(x/y)}if(m.unshift(o[0]),g.unshift(0),m.push(o[o.length-1]),g.push(1),t.fillGradientType===Ml.LINEAR_VERTICAL){a=e.createLinearGradient(d/2,c,d/2,p+c);let y=0;const x=(s.fontProperties.fontSize+t.strokeThickness)/p;for(let w=0;w<n.length;w++){const T=s.lineHeight*w;for(let E=0;E<m.length;E++){let P=0;typeof g[E]=="number"?P=g[E]:P=E/m.length;const I=T/p+P*x;let A=Math.max(y,I);A=Math.min(A,1),a.addColorStop(A,m[E]),y=A}}}else{a=e.createLinearGradient(c,p/2,d+c,p/2);const y=m.length+1;let x=1;for(let w=0;w<m.length;w++){let T;typeof g[w]=="number"?T=g[w]:T=x/y,a.addColorStop(T,m[w]),x++}}return a}function aR(r,e,t,i,n,s,o){const a=t.text,l=t.fontProperties;e.translate(i,n),e.scale(s,s);const c=o.strokeThickness/2,d=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=oR(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const p=o.dropShadowColor,m=o.dropShadowBlur*s,g=o.dropShadowDistance*s;e.shadowColor=ht.shared.setValue(p).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=m,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,d+t.lineHeight-l.descent),o.fill&&e.fillText(a,c,d+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Ta(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function u_(r){return Array.from?Array.from(r):r.split("")}function lR(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,i=r.length;t<i;t++){const n=r[t];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...u_(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Oi=class Gr{constructor(e,t,i){var d;const[n]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Ti(o.file),c={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let p=0;p<e.page.length;p++){const{id:m,file:g}=e.page[p];c[m]=t instanceof Array?t[p]:t[g],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[m].baseTexture.alphaMode=Wt.NO_PREMULTIPLIED_ALPHA,c[m].baseTexture.mipmap=ri.OFF)}for(let p=0;p<e.char.length;p++){const{id:m,page:g}=e.char[p];let{x:y,y:x,width:w,height:T,xoffset:E,yoffset:P,xadvance:I}=e.char[p];y/=l,x/=l,w/=l,T/=l,E/=l,P/=l,I/=l;const A=new ze(y+c[g].frame.x/l,x+c[g].frame.y/l,w,T);this.chars[m]={xOffset:E,yOffset:P,xAdvance:I,kerning:{},texture:new Re(c[g].baseTexture,A),page:g}}for(let p=0;p<e.kerning.length;p++){let{first:m,second:g,amount:y}=e.kerning[p];m/=l,g/=l,y/=l,this.chars[g]&&(this.chars[g].kerning[m]=y)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((d=a==null?void 0:a.fieldType)==null?void 0:d.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let n;if(e instanceof Qa)n=e;else{const o=sR(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}t instanceof Re&&(t=[t]);const s=new Gr(n,t,i);return Gr.available[s.font]=s,s}static uninstall(e){const t=Gr.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Gr.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},Gr.defaultOptions,i),d=lR(n),p=t instanceof Ji?t:new Ji(t),m=a,g=new Qa;g.info[0]={face:p.fontFamily,size:p.fontSize},g.common[0]={lineHeight:p.fontSize};let y=0,x=0,w,T,E,P=0;const I=[];for(let F=0;F<d.length;F++){w||(w=_e.ADAPTER.createCanvas(),w.width=a,w.height=l,T=w.getContext("2d"),E=new Ue(w,{resolution:o,...c}),I.push(new Re(E)),g.page.push({id:I.length-1,file:""}));const b=d[F],B=Ui.measureText(b,p,!1,w),H=B.width,W=Math.ceil(B.height),Q=Math.ceil((p.fontStyle==="italic"?2:1)*H);if(x>=l-W*o){if(x===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${b}')`);--F,w=null,T=null,E=null,x=0,y=0,P=0;continue}if(P=Math.max(W+B.fontProperties.descent,P),Q*o+y>=m){if(y===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${b}')`);--F,x+=P*o,x=Math.ceil(x),y=0,P=0;continue}aR(w,T,B,y,x,o,p);const N=Ta(B.text);g.char.push({id:N,page:I.length-1,x:y/o,y:x/o,width:Q,height:W,xoffset:0,yoffset:0,xadvance:H-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),y+=(Q+2*s)*o,y=Math.ceil(y)}if(!(i!=null&&i.skipKerning))for(let F=0,b=d.length;F<b;F++){const B=d[F];for(let H=0;H<b;H++){const W=d[H],Q=T.measureText(B).width,N=T.measureText(W).width,G=T.measureText(B+W).width-(Q+N);G&&g.kerning.push({first:Ta(B),second:Ta(W),amount:G})}}const A=new Gr(g,I,!0);return Gr.available[e]!==void 0&&Gr.uninstall(e),Gr.available[e]=A,A}};Oi.ALPHA=[["a","z"],["A","Z"]," "],Oi.NUMERIC=[["0","9"]],Oi.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Oi.ASCII=[[" ","~"]],Oi.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Oi.ALPHANUMERIC},Oi.available={};let Li=Oi;var cR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,hR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const jm=[],Hm=[],zm=[],uR=class d_ extends Mr{constructor(e,t={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},d_.styleDefaults,t);if(!Li.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new ht(n),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new vi(()=>{this.dirty=!0},this,0,0),this._roundPixels=_e.ROUND_PIXELS,this.dirty=!0,this._resolution=_e.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Q;const e=Li.available[this._fontName],t=this.fontSize,i=t/e.size,n=new Qe,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=u_(l),d=this._maxWidth*e.size/t,p=e.distanceFieldType==="none"?jm:Hm;let m=null,g=0,y=0,x=0,w=-1,T=0,E=0,P=0,I=0;for(let N=0;N<c.length;N++){const G=c[N],X=Ta(G);if(/(?:\s)/.test(G)&&(w=N,T=g,I++),G==="\r"||G===`
`){o.push(g),a.push(-1),y=Math.max(y,g),++x,++E,n.x=0,n.y+=e.lineHeight,m=null,I=0;continue}const se=e.chars[X];if(!se)continue;m&&se.kerning[m]&&(n.x+=se.kerning[m]);const M=zm.pop()||{texture:Re.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Qe};M.texture=se.texture,M.line=x,M.charCode=X,M.position.x=Math.round(n.x+se.xOffset+this._letterSpacing/2),M.position.y=Math.round(n.y+se.yOffset),M.prevSpaces=I,s.push(M),g=M.position.x+Math.max(se.xAdvance-se.xOffset,se.texture.orig.width),n.x+=se.xAdvance+this._letterSpacing,P=Math.max(P,se.yOffset+se.texture.height),m=X,w!==-1&&d>0&&n.x>d&&(++E,is(s,1+w-E,1+N-w),N=w,w=-1,o.push(T),a.push(s.length>0?s[s.length-1].prevSpaces:0),y=Math.max(y,T),x++,n.x=0,n.y+=e.lineHeight,m=null,I=0)}const A=c[c.length-1];A!=="\r"&&A!==`
`&&(/(?:\s)/.test(A)&&(g=T),o.push(g),y=Math.max(y,g),a.push(-1));const F=[];for(let N=0;N<=x;N++){let G=0;this._align==="right"?G=y-o[N]:this._align==="center"?G=(y-o[N])/2:this._align==="justify"&&(G=a[N]<0?0:(y-o[N])/a[N]),F.push(G)}const b=s.length,B={},H=[],W=this._activePagesMeshData;p.push(...W);for(let N=0;N<b;N++){const G=s[N].texture,X=G.baseTexture.uid;if(!B[X]){let se=p.pop();if(!se){const L=new LP;let k,z;e.distanceFieldType==="none"?(k=new Nm(Re.EMPTY),z=Be.NORMAL):(k=new Nm(Re.EMPTY,{program:yi.from(hR,cR),uniforms:{uFWidth:0}}),z=Be.NORMAL_NPM);const U=new Fm(L,k);U.blendMode=z,se={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:U,vertices:null,uvs:null,indices:null}}se.index=0,se.indexCount=0,se.vertexCount=0,se.uvsCount=0,se.total=0;const{_textureCache:M}=this;M[X]=M[X]||new Re(G.baseTexture),se.mesh.texture=M[X],se.mesh.tint=this._tintColor.value,H.push(se),B[X]=se}B[X].total++}for(let N=0;N<W.length;N++)H.includes(W[N])||this.removeChild(W[N].mesh);for(let N=0;N<H.length;N++)H[N].mesh.parent!==this&&this.addChild(H[N].mesh);this._activePagesMeshData=H;for(const N in B){const G=B[N],X=G.total;if(!(((Q=G.indices)==null?void 0:Q.length)>6*X)||G.vertices.length<Fm.BATCHABLE_SIZE*2)G.vertices=new Float32Array(4*2*X),G.uvs=new Float32Array(4*2*X),G.indices=new Uint16Array(6*X);else{const se=G.total,M=G.vertices;for(let L=se*4*2;L<M.length;L++)M[L]=0}G.mesh.size=6*X}for(let N=0;N<b;N++){const G=s[N];let X=G.position.x+F[G.line]*(this._align==="justify"?G.prevSpaces:1);this._roundPixels&&(X=Math.round(X));const se=X*i,M=G.position.y*i,L=G.texture,k=B[L.baseTexture.uid],z=L.frame,U=L._uvs,j=k.index++;k.indices[j*6+0]=0+j*4,k.indices[j*6+1]=1+j*4,k.indices[j*6+2]=2+j*4,k.indices[j*6+3]=0+j*4,k.indices[j*6+4]=2+j*4,k.indices[j*6+5]=3+j*4,k.vertices[j*8+0]=se,k.vertices[j*8+1]=M,k.vertices[j*8+2]=se+z.width*i,k.vertices[j*8+3]=M,k.vertices[j*8+4]=se+z.width*i,k.vertices[j*8+5]=M+z.height*i,k.vertices[j*8+6]=se,k.vertices[j*8+7]=M+z.height*i,k.uvs[j*8+0]=U.x0,k.uvs[j*8+1]=U.y0,k.uvs[j*8+2]=U.x1,k.uvs[j*8+3]=U.y1,k.uvs[j*8+4]=U.x2,k.uvs[j*8+5]=U.y2,k.uvs[j*8+6]=U.x3,k.uvs[j*8+7]=U.y3}this._textWidth=y*i,this._textHeight=(n.y+e.lineHeight)*i;for(const N in B){const G=B[N];if(this.anchor.x!==0||this.anchor.y!==0){let L=0;const k=this._textWidth*this.anchor.x,z=this._textHeight*this.anchor.y;for(let U=0;U<G.total;U++)G.vertices[L++]-=k,G.vertices[L++]-=z,G.vertices[L++]-=k,G.vertices[L++]-=z,G.vertices[L++]-=k,G.vertices[L++]-=z,G.vertices[L++]-=k,G.vertices[L++]-=z}this._maxLineHeight=P*i;const X=G.mesh.geometry.getBuffer("aVertexPosition"),se=G.mesh.geometry.getBuffer("aTextureCoord"),M=G.mesh.geometry.getIndex();X.data=G.vertices,se.data=G.uvs,M.data=G.indices,X.update(),se.update(),M.update()}for(let N=0;N<s.length;N++)zm.push(s[N]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:n}=Li.available[this._fontName];if(i!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),d=Math.sqrt(a*a+l*l),p=(Math.abs(c)+Math.abs(d))/2,m=this.fontSize/n,g=e._view.resolution;for(const y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=p*t*m*g}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Li.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Li.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Li.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,i=Li.available[this._fontName].distanceFieldType==="none"?jm:Hm;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=Re.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};uR.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const dR=[".xml",".fnt"],pR={extension:{type:de.LoadParser,priority:Or.Normal},name:"loadBitmapFont",test(r){return dR.includes(Pt.extname(r).toLowerCase())},async testParse(r){return wa.test(r)||xu.test(r)},async parse(r,e,t){const i=wa.test(r)?wa.parse(r):xu.parse(r),{src:n}=e,{page:s}=i,o=[];for(let c=0;c<s.length;++c){const d=s[c].file;let p=Pt.join(Pt.dirname(n),d);p=fu(p,n),o.push(p)}const a=await t.load(o),l=o.map(c=>a[c]);return Li.install(i,l,!0)},async load(r,e){return(await _e.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};ke.add(pR);const wu=class Jn extends Ji{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Jn(Object.keys(Jn.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Jn.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=Jn;if(i[e]){const n=i[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return _e.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((s,o)=>{const a=URL.createObjectURL(n),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(n)})).then(async([n,s])=>{const o=Object.assign({family:Pt.basename(e,Pt.extname(e)),weight:"normal",style:"normal",display:"auto",src:n,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);i[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=tE(e)),typeof e=="number"?eE(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${i}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Jn.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=_e.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};wu.availableFonts={},wu.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let yh=wu;const da=class Qn extends vs{constructor(e="",t={}){super(Re.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,n=Re.from(i,{scaleMode:_e.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new ze,n.trim=new ze,this.texture=n;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),d=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Qn.defaultMaxWidth,this.maxHeight=Qn.defaultMaxHeight,this._domElement=c,this._styleElement=d,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(d),this._foreignObject.appendChild(c),this._image=i,this._loadImage=new Image,this._autoResolution=Qn.defaultAutoResolution,this._resolution=Qn.defaultResolution??_e.RESOLUTION,this.text=e,this.style=t}measureText(e){var d,p;const{text:t,style:i,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(n)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(d=this._style)==null?void 0:d.toCSS(n)}),this._styleElement.textContent=(p=this._style)==null?void 0:p.toGlobalCSS()),{width:l+i.padding*2,height:c+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();i.width=n.width=Math.ceil(Math.max(1,s)),i.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{n.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),i.src=n.src,n.onload=null,n.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:n}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=i.width/n,t.trim.height=t._frame.height=i.height/n,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,n,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Qn.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(n=this._svgRoot)==null||n.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Hi(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Hi(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof yh?(this.ownsStyle=!1,this._style=e):e instanceof Ji?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=yh.from(e)):(this.ownsStyle=!0,this._style=new yh(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};da.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},da.defaultMaxWidth=2024,da.defaultMaxHeight=2024,da.defaultAutoResolution=!0;const fR=Ve({__name:"App",setup(r){const{switchCharacter:e,switchSkin:t,captureFrame:i,toggleLive2DVisibility:n,isLive2DHide:s}=X1();return dt(s,o=>(o?q1:Y1)()),(o,a)=>(ie(),me(jt,null,[a[4]||(a[4]=Ie("div",{id:"live2d"},[Ie("div",{id:"live2d-tips"}),Ie("canvas",{id:"live2d-canvas"})],-1)),Ie("div",{id:"live2d-tools",class:vt(oe(s)?"hide":"show")},[Ie("span",{id:"live2d-tool-quit",class:"live2d-tool hide-live2d",onClick:a[0]||(a[0]=l=>oe(n)())},it(oe(s)?"Show":"Hide"),1),Ie("span",{id:"live2d-tool-switch-model",class:"live2d-tool",style:{"--live2d-tool-bg":"#c3a6cb"},onClick:a[1]||(a[1]=l=>oe(e)())}," Tia "),Ie("span",{id:"live2d-tool-switch-texture",class:"live2d-tool",style:{"--live2d-tool-bg":"#16a"},onClick:a[2]||(a[2]=l=>oe(t)())}," Switch "),Ie("span",{id:"live2d-tool-photo",class:"live2d-tool",style:{"--live2d-tool-bg":"orange"},onClick:a[3]||(a[3]=l=>oe(i)())}," Save ")],2)],64))}}),mR=Et(fR,[["__scopeId","data-v-e2073eae"]]);function Sd(r,e){r&&Object.entries(e).forEach(([t,i])=>{r[t]&&i()})}function gR(){const r=document.querySelector(".aplayer.aplayer-fixed .aplayer-body"),e=document.querySelector(".aplayer-body .aplayer-miniswitcher .aplayer-icon");let t=!0;function i(){t=!t}function n(){t&&(r.style.left="-66px")}function s(){r.style.left="0"}hr(r,"mouseenter",s),hr(r,"mouseleave",n),hr(e,"click",i)}function p_(r,e){const t=document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body");t&&(r===Tu.metingLoadBefore?t.style.display="initial":r===Tu.metingLoad&&(t.style.left=e))}function f_(r){p_(r,"0")}function vR(r){p_(r,"-66px")}var Tu=(r=>(r.metingInit="metingInit",r.metingLoadBefore="metingLoadBefore",r.metingLoad="metingLoad",r))(Tu||{});function yR({options:r}){Sd(r,{animationIn:()=>rr(()=>St(()=>Promise.resolve({}),__vite__mapDeps([45])))})}function _R({options:r}){Sd(r,{animationIn:()=>f_("metingLoadBefore")})}function bR({options:r}){Sd(r,{lyricHidden:()=>xR(),animationIn:()=>{f_("metingLoad")},autoHidden:()=>{gR(),vR("metingLoad")}})}function xR(){const r=new MutationObserver(e=>{const t=document.querySelector(".aplayer-lrc .aplayer-lrc-contents .aplayer-lrc-current"),i=document.querySelector(".aplayer-icon-lrc");function n(){t&&(t.style.display="none",t.textContent!=="Loading"&&(i.click(),t.style.display="",r==null||r.disconnect()))}e.forEach(s=>{n()})});r.observe(document.body,{childList:!0,subtree:!0})}function wR(r){let e=!1,t;rr(()=>{t=new MutationObserver(i=>{function n(){if(e)return;document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body")&&(e=!0,setTimeout(()=>{_R(r),requestAnimationFrame(()=>{bR(r),t==null||t.disconnect(),t=null})},0))}i.forEach(s=>{n()})}),t.observe(document.body,{childList:!0,subtree:!0})}),ll(()=>{t==null||t.disconnect(),t=null})}function m_(){const r=_l();return ue(()=>r.value.addons["valaxy-addon-meting"])}function TR(){const r=dr(),e=m_(),t=ue(()=>r.value.cdn.prefix);yo({link:[{rel:"stylesheet",href:`${t.value}aplayer/dist/APlayer.min.css`}]}),Op(`${t.value}aplayer/dist/APlayer.min.js`,()=>{Op(`${t.value}meting@2/dist/Meting.min.js`)}),yR(e.value),wR(e.value)}function SR(){const r=Pn(),e=m_(),t=wl(),i=ve(!0);return dt(()=>r.path,()=>{var n,s;i.value=((n=t.value)==null?void 0:n.aplayer)??((s=e.value)==null?void 0:s.global)??!0},{immediate:!0}),i}const ER=Ve({__name:"App",props:{id:{default:"308168565"},server:{default:"netease"},type:{default:"playlist"}},setup(r){const e=r;TR();const t=SR();return(i,n)=>(ie(),me(jt,null,[Ge(" eslint-disable-next-line vue/component-name-in-template-casing "),io(Ie("meting-js",_i(e,{fixed:!0}),null,16),[[Da,oe(t)]])],2112))}}),AR=[{component:mR,props:{}},{component:ER,props:{id:"1477727243",server:"netease",type:"song"}}],CR=Ve({__name:"ValaxyAddons",setup(r){return(e,t)=>(ie(!0),me(jt,null,go(oe(AR),({component:i,props:n},s)=>(ie(),at(Bg(i),_i({ref_for:!0},n,{key:s}),null,16))),128))}}),PR={class:"vc-site-live-time"},RR={"mx-1":""},IR={"mx-1":""},kR={"mx-1":""},MR={"mx-1":""},DR=Ve({__name:"VCLiveTime",props:{startTime:{}},setup(r){const e=r,{t}=ni(),i=ve(0),n=ve(0),s=ve(0),o=ve(0);function a(){const l=ei(e.startTime),d=ei().diff(l)/1e3;i.value=Math.floor(d/60/60/24),n.value=Math.floor(d/60/60%24),s.value=Math.floor(d/60%60),o.value=Math.floor(d%60)}return rr(()=>{setInterval(a,1e3)}),(l,c)=>(ie(),me("div",PR,[Ze(l.$slots,"live-time-before"),Ie("span",RR,it(oe(t)("time.day",i.value)),1),Ie("span",IR,it(oe(t)("time.hour",n.value)),1),Ie("span",kR,it(oe(t)("time.minute",s.value)),1),Ie("span",MR,it(oe(t)("time.second",o.value)),1),Ze(l.$slots,"live-time-after")]))}});class OR{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return LR(e).buffer}}function LR(r){let e=0;for(const n of r)e+=n.byteLength;const t=new Uint8Array(e);let i=0;for(const n of r){const s=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);t.set(s,i),i+=n.byteLength}return t}function g_(r){return new BR(r).unpack()}function v_(r){const e=new FR,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class BR{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,n="",s,o;for(;i<e;)s=t[i],s<160?(o=s,i++):(s^192)<32?(o=(s&31)<<6|t[i+1]&63,i+=2):(s^224)<16?(o=(s&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(o=(s&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),n+=String.fromCodePoint(o);return this.index+=e,n}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const n=this.unpack();t[n]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,n=e&8388607|8388608;return(t===0?1:-1)*n*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,n=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(n-20)+t*2**(n-52);return(i===0?1:-1)*o}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class FR{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=n=>{if(n<t){const s=this.pack(e[n]);return s instanceof Promise?s.then(()=>i(n+1)):i(n+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),n=e/2**i-1,s=Math.floor(n*2**52),o=2**32,a=t<<31|i+1023<<20|s/o&1048575,l=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const n=s=>{if(s<t.length){const o=t[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>n(s+1))}return n(s+1)}};return n(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new OR,this._textEncoder=new TextEncoder}}let y_=!0,__=!0;function Ws(r,e,t){const i=r.match(e);return i&&i.length>=t&&parseFloat(i[t],10)}function kn(r,e,t){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(o,a){if(o!==e)return n.apply(this,arguments);const l=c=>{const d=t(c);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),n.apply(this,[o,l])};const s=i.removeEventListener;i.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function NR(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(y_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function $R(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(__=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function b_(){if(typeof window=="object"){if(y_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ed(r,e){__&&console.warn(r+" is deprecated, please use "+e+" instead.")}function UR(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(n=>n.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ws(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ws(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ws(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=Ws(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Vm(r){return Object.prototype.toString.call(r)==="[object Object]"}function x_(r){return Vm(r)?Object.keys(r).reduce(function(e,t){const i=Vm(r[t]),n=i?x_(r[t]):r[t],s=i&&!Object.keys(n).length;return n===void 0||s?e:Object.assign(e,{[t]:n})},{}):r}function Su(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Su(r,r.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(n=>{Su(r,r.get(n),t)})}))}function Wm(r,e,t){const i=t?"outbound-rtp":"inbound-rtp",n=new Map;if(e===null)return n;const s=[];return r.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{r.forEach(a=>{a.type===i&&a.trackId===o.id&&Su(r,a,n)})}),n}const Xm=b_;function w_(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const i=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const d=typeof a[c]=="object"?a[c]:{ideal:a[c]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const p=function(m,g){return m?m+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(d.ideal!==void 0){l.optional=l.optional||[];let m={};typeof d.ideal=="number"?(m[p("min",c)]=d.ideal,l.optional.push(m),m={},m[p("max",c)]=d.ideal,l.optional.push(m)):(m[p("",c)]=d.ideal,l.optional.push(m))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[p("",c)]=d.exact):["min","max"].forEach(m=>{d[m]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[p(m,c)]=d[m])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},n=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(d,p,m){p in d&&!(m in d)&&(d[m]=d[p],delete d[p])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=i(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const d=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let p;if(c.exact==="environment"||c.ideal==="environment"?p=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(p=["front"]),p)return t.mediaDevices.enumerateDevices().then(m=>{m=m.filter(y=>y.kind==="videoinput");let g=m.find(y=>p.some(x=>y.label.toLowerCase().includes(x)));return!g&&m.length&&p.includes("back")&&(g=m[m.length-1]),g&&(a.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),a.video=i(a.video),Xm("chrome: "+JSON.stringify(a)),l(a)})}a.video=i(a.video)}return Xm("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){n(a,d=>{t.webkitGetUserMedia(d,l,p=>{c&&c(s(p))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(l){return n(l,c=>a(c).then(d=>{if(c.audio&&!d.getAudioTracks().length||c.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(s(d))))}}}function T_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function S_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",n=>{let s;r.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):s={track:n.track};const o=new Event("track");o.track=n.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[i.stream],this.dispatchEvent(o)}),i.stream.getTracks().forEach(n=>{let s;r.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===n.id):s={track:n};const o=new Event("track");o.track=n,o.receiver=s,o.transceiver={receiver:s},o.streams=[i.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else kn(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function E_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(n,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=n.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:n}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(a,l){let c=n.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const s=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(n=>n._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function A_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),r.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>Wm(o,s.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(s=>s._pc=this),n}),kn(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(s=>Wm(s,n.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let n,s,o;return this.getSenders().forEach(a=>{a.track===i&&(n?o=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===i&&(s?o=!0:s=a),a.track===i)),o||n&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function C_(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(p=>p.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],i.apply(this,arguments)};const n=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),n.apply(this,arguments)}}function P_(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return C_(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const d=t.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(p=>this._reverseStreams[p.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(p=>{if(this.getSenders().find(g=>g.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const p=new r.MediaStream(d.getTracks());this._streams[d.id]=p,this._reverseStreams[p.id]=d,d=p}i.apply(this,[d])};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},r.RTCPeerConnection.prototype.addTrack=function(d,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(x=>x===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[p.id];if(y)y.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new r.MediaStream([d]);this._streams[p.id]=x,this._reverseStreams[x.id]=p,this.addStream(x)}return this.getSenders().find(x=>x.track===d)};function s(c,d){let p=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(m=>{const g=c._reverseStreams[m],y=c._streams[g.id];p=p.replace(new RegExp(y.id,"g"),g.id)}),new RTCSessionDescription({type:d.type,sdp:p})}function o(c,d){let p=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(m=>{const g=c._reverseStreams[m],y=c._streams[g.id];p=p.replace(new RegExp(g.id,"g"),y.id)}),new RTCSessionDescription({type:d.type,sdp:p})}["createOffer","createAnswer"].forEach(function(c){const d=r.RTCPeerConnection.prototype[c],p={[c](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[y=>{const x=s(this,y);m[0].apply(null,[x])},y=>{m[1]&&m[1].apply(null,y)},arguments[2]]):d.apply(this,arguments).then(y=>s(this,y))}};r.RTCPeerConnection.prototype[c]=p[c]});const a=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),r.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(x=>d.track===x)&&(m=this._streams[g])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Eu(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=r.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=n[t]})}function R_(r,e){kn(r,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const Ym=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:R_,shimAddTrackRemoveTrack:P_,shimAddTrackRemoveTrackWithNative:C_,shimGetSendersWithDtmf:E_,shimGetUserMedia:w_,shimMediaStream:T_,shimOnTrack:S_,shimPeerConnection:Eu,shimSenderReceiverGetStats:A_},Symbol.toStringTag,{value:"Module"}));function I_(r,e){const t=r&&r.navigator,i=r&&r.MediaStreamTrack;if(t.getUserMedia=function(n,s,o){Ed("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(n).then(s,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const n=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),n(o.audio,"autoGainControl","mozAutoGainControl"),n(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},i&&i.prototype.getSettings){const o=i.prototype.getSettings;i.prototype.getSettings=function(){const a=o.apply(this,arguments);return n(a,"mozAutoGainControl","autoGainControl"),n(a,"mozNoiseSuppression","noiseSuppression"),a}}if(i&&i.prototype.applyConstraints){const o=i.prototype.applyConstraints;i.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),n(a,"autoGainControl","mozAutoGainControl"),n(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function GR(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(i)})}function k_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Au(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return i.apply(this,[s||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((d,p)=>{l.set(p,Object.assign({},d,{type:t[d.type]||d.type}))})}return l}).then(o,a)}}function M_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const n=t.apply(this,arguments);return n._pc=this,n}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function D_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(n=>n._pc=this),i}),kn(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function O_(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){Ed("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function L_(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function B_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const n=i.length>0;n&&i.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(n){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=i,o.sendEncodings=i,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function F_(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function N_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function $_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const qm=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:B_,shimCreateAnswer:$_,shimCreateOffer:N_,shimGetDisplayMedia:GR,shimGetParameters:F_,shimGetUserMedia:I_,shimOnTrack:k_,shimPeerConnection:Au,shimRTCDataChannel:L_,shimReceiverGetStats:D_,shimRemoveStream:O_,shimSenderGetStats:M_},Symbol.toStringTag,{value:"Module"}));function U_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(n=>e.call(this,n,i)),i.getVideoTracks().forEach(n=>e.call(this,n,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...n){return n&&n.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const n=t.getTracks();this.getSenders().forEach(s=>{n.includes(s.track)&&this.removeTrack(s)})})}}function G_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const s=new Event("addstream");s.stream=n,this.dispatchEvent(s)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(s=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(s)>=0)return;i._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,i.dispatchEvent(o)})}),e.apply(i,arguments)}}}function j_(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,n=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,d){const p=arguments.length>=2?arguments[2]:arguments[0],m=t.apply(this,[p]);return d?(m.then(c,d),Promise.resolve()):m},e.createAnswer=function(c,d){const p=arguments.length>=2?arguments[2]:arguments[0],m=i.apply(this,[p]);return d?(m.then(c,d),Promise.resolve()):m};let a=function(l,c,d){const p=n.apply(this,[l]);return d?(p.then(c,d),Promise.resolve()):p};e.setLocalDescription=a,a=function(l,c,d){const p=s.apply(this,[l]);return d?(p.then(c,d),Promise.resolve()):p},e.setRemoteDescription=a,a=function(l,c,d){const p=o.apply(this,[l]);return d?(p.then(c,d),Promise.resolve()):p},e.addIceCandidate=a}function H_(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=n=>i(z_(n))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,n,s){e.mediaDevices.getUserMedia(i).then(n,s)}).bind(e))}function z_(r){return r&&r.video!==void 0?Object.assign({},r,{video:x_(r.video)}):r}function V_(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(i,n){if(i&&i.iceServers){const s=[];for(let o=0;o<i.iceServers.length;o++){let a=i.iceServers[o];a.urls===void 0&&a.url?(Ed("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(i.iceServers[o])}i.iceServers=s}return new e(i,n)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function W_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function X_(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const n=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):i.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Y_(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Km=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Y_,shimCallbacksAPI:j_,shimConstraints:z_,shimCreateOfferLegacy:X_,shimGetUserMedia:H_,shimLocalStreamsAPI:U_,shimRTCIceServerUrls:V_,shimRemoteStreamsAPI:G_,shimTrackEventTransceiver:W_},Symbol.toStringTag,{value:"Module"}));var _h={exports:{}},Jm;function jR(){return Jm||(Jm=1,function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((n,s)=>(s>0?"m="+n:n).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(n=>n.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const n={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let s=8;s<i.length;s+=2)switch(i[s]){case"raddr":n.relatedAddress=i[s+1];break;case"rport":n.relatedPort=parseInt(i[s+1],10);break;case"tcptype":n.tcpType=i[s+1];break;case"ufrag":n.ufrag=i[s+1],n.usernameFragment=i[s+1];break;default:n[i[s]]===void 0&&(n[i[s]]=i[s+1]);break}return n},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const n=t.component;n==="rtp"?i.push(1):n==="rtcp"?i.push(2):i.push(n),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const s=t.type;return i.push("typ"),i.push(s),s!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const n={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),n.name=i[0],n.clockRate=parseInt(i[1],10),n.channels=i.length===3?parseInt(i[2],10):1,n.numChannels=n.channels,n},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const n=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(n!==1?"/"+n:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let n;const s=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)n=s[o].trim().split("="),i[n[0].trim()]=n[1];return i},e.writeFmtp=function(t){let i="",n=t.payloadType;if(t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const s=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?s.push(o+"="+t.parameters[o]):s.push(o)}),i+="a=fmtp:"+n+" "+s.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",n=t.payloadType;return t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(s=>{i+="a=rtcp-fb:"+n+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),n={ssrc:parseInt(t.substring(7,i),10)},s=t.indexOf(":",i);return s>-1?(n.attribute=t.substring(i+1,s),n.value=t.substring(s+1)):n.attribute=t.substring(i+1),n},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(n=>parseInt(n,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let n="a=setup:"+i+`\r
`;return t.fingerprints.forEach(s=>{n+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),n},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const n=e.matchPrefix(t+i,"a=ice-ufrag:")[0],s=e.matchPrefix(t+i,"a=ice-pwd:")[0];return n&&s?{usernameFragment:n.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(t)[0].split(" ");i.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],c=e.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(c){const d=e.parseRtpMap(c),p=e.matchPrefix(t,"a=fmtp:"+l+" ");switch(d.parameters=p.length?e.parseFmtp(p[0]):{},d.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),i.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{i.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(d=>d.type===l.type&&d.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),i},e.writeRtpDescription=function(t,i){let n="";n+="m="+t+" ",n+=i.codecs.length>0?"9":"0",n+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=i.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(o=>{n+=e.writeRtpMap(o),n+=e.writeFmtp(o),n+=e.writeRtcpFb(o)});let s=0;return i.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(n+="a=maxptime:"+s+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(o=>{n+=e.writeExtmap(o)}),n},e.parseRtpEncodingParameters=function(t){const i=[],n=e.parseRtpParameters(t),s=n.fecMechanisms.indexOf("RED")!==-1,o=n.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(t,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const d=e.matchPrefix(t,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(y=>parseInt(y,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(c=d[0][1]),n.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let g={ssrc:l,codecPayloadType:parseInt(m.parameters.apt,10)};l&&c&&(g.rtx={ssrc:c}),i.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},i.push(g))}}),i.length===0&&l&&i.push({ssrc:l});let p=e.matchPrefix(t,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-50*40*8:p=void 0,i.forEach(m=>{m.maxBitrate=p})),i},e.parseRtcpParameters=function(t){const i={},n=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);const s=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=s.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return i.mux=o.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const n=e.matchPrefix(t,"a=msid:");if(n.length===1)return i=n[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return i=s[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),n=e.matchPrefix(t,"a=max-message-size:");let s;n.length>0&&(s=parseInt(n[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(t,i){let n=[];return t.protocol!=="DTLS/SCTP"?n=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:n=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&n.push("a=max-message-size:"+i.maxMessageSize+`\r
`),n.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,n){let s;const o=i!==void 0?i:2;return t?s=t:s=e.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const n=e.splitLines(t);for(let s=0;s<n.length;s++)switch(n[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[s].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const n=e.splitLines(t)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(t){const n=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let n=0;n<i.length;n++)if(i[n].length<2||i[n].charAt(1)!=="=")return!1;return!0},r.exports=e}(_h)),_h.exports}var q_=jR();const ls=hl(q_),HR=fx({__proto__:null,default:ls},[q_]);function Sa(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const n=new e(i),s=ls.parseCandidate(i.candidate);for(const o in s)o in n||Object.defineProperty(n,o,{value:s[o]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new e(i)},r.RTCIceCandidate.prototype=e.prototype,kn(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Cu(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||kn(r,"icecandidate",e=>{if(e.candidate){const t=ls.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Ea(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(a){if(!a||!a.sdp)return!1;const l=ls.splitSections(a.sdp);return l.shift(),l.some(c=>{const d=ls.parseMLine(c);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},i=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},n=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(a,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const d=ls.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?c=parseInt(d[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const l=i(arguments[0]),c=n(l),d=s(arguments[0],l);let p;c===0&&d===0?p=Number.POSITIVE_INFINITY:c===0||d===0?p=Math.max(c,d):p=Math.min(c,d);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return p}}),this._sctp=m}return o.apply(this,arguments)}}function Aa(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(i,n){const s=i.send;i.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(i.readyState==="open"&&n.sctp&&l>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return s.apply(i,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const n=t.apply(this,arguments);return e(n,this),n},kn(r,"datachannel",i=>(e(i.channel,i.target),i))}function Pu(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const s=n.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",n);s.dispatchEvent(o)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Ru(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=n.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&n instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:n.type,sdp:s}):n.sdp=s}return t.apply(this,arguments)}}function Ca(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Pa(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return t.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?t.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const zR=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ru,shimAddIceCandidateNullOrEmpty:Ca,shimConnectionState:Pu,shimMaxMessageSize:Ea,shimParameterlessSetLocalDescription:Pa,shimRTCIceCandidate:Sa,shimRTCIceCandidateRelayProtocol:Cu,shimSendThrowTypeError:Aa},Symbol.toStringTag,{value:"Module"}));function VR({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=b_,i=UR(r),n={browserDetails:i,commonShim:zR,extractVersion:Ws,disableLog:NR,disableWarnings:$R,sdp:HR};switch(i.browser){case"chrome":if(!Ym||!Eu||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),n;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),n;t("adapter.js shimming chrome."),n.browserShim=Ym,Ca(r,i),Pa(r),w_(r,i),T_(r),Eu(r,i),S_(r),P_(r,i),E_(r),A_(r),R_(r,i),Sa(r),Cu(r),Pu(r),Ea(r,i),Aa(r),Ru(r,i);break;case"firefox":if(!qm||!Au||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),n;t("adapter.js shimming firefox."),n.browserShim=qm,Ca(r,i),Pa(r),I_(r,i),Au(r,i),k_(r),O_(r),M_(r),D_(r),L_(r),B_(r),F_(r),N_(r),$_(r),Sa(r),Pu(r),Ea(r,i),Aa(r);break;case"safari":if(!Km||!e.shimSafari)return t("Safari shim is not included in this adapter release."),n;t("adapter.js shimming safari."),n.browserShim=Km,Ca(r,i),Pa(r),V_(r),X_(r),j_(r),U_(r),G_(r),W_(r),H_(r),Y_(r),Sa(r),Cu(r),Ea(r,i),Aa(r),Ru(r,i);break;default:t("Unsupported browser!");break}return n}const Qm=VR({window:typeof window>"u"?void 0:window});function Mn(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}class K_{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,n=Math.ceil(i/this.chunkedMTU);let s=0,o=0;for(;o<i;){const a=Math.min(i,o+this.chunkedMTU),l=e.slice(o,a),c={__peerData:this._dataCount,n:s,data:l,total:n};t.push(c),o=a,s++}return this._dataCount++,t}}}function WR(r){let e=0;for(const n of r)e+=n.byteLength;const t=new Uint8Array(e);let i=0;for(const n of r)t.set(n,i),i+=n.byteLength;return t}const bh=Qm.default||Qm,Bs=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return bh.browserDetails.browser}getVersion(){return bh.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=bh.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},XR=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),J_=()=>Math.random().toString(36).slice(2),Zm={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class YR extends K_{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(n){n.target&&t(n.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Zm,this.browser=Bs.getBrowser(),this.browserVersion=Bs.getVersion(),this.pack=v_,this.unpack=g_,this.supports=function(){const t={browser:Bs.isBrowserSupported(),webRTC:Bs.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(Zm),t.audioVideo=!0;let n;try{n=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!Bs.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{i&&i.close()}return t}(),this.validateId=XR,this.randomToken=J_}}const Vt=new YR,qR="PeerJS: ";var eg;(function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"})(eg||(eg={}));class KR{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[qR,...t];for(const n in i)i[n]instanceof Error&&(i[n]="("+i[n].name+") "+i[n].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var Ce=new KR,Ad={},JR=Object.prototype.hasOwnProperty,Gt="~";function ao(){}Object.create&&(ao.prototype=Object.create(null),new ao().__proto__||(Gt=!1));function QR(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function Q_(r,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new QR(t,i||r,n),o=Gt?Gt+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],s]:r._events[o].push(s):(r._events[o]=s,r._eventsCount++),r}function Ra(r,e){--r._eventsCount===0?r._events=new ao:delete r._events[e]}function Bt(){this._events=new ao,this._eventsCount=0}Bt.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)JR.call(t,i)&&e.push(Gt?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Bt.prototype.listeners=function(e){var t=Gt?Gt+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};Bt.prototype.listenerCount=function(e){var t=Gt?Gt+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Bt.prototype.emit=function(e,t,i,n,s,o){var a=Gt?Gt+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,d,p;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,s),!0;case 6:return l.fn.call(l.context,t,i,n,s,o),!0}for(p=1,d=new Array(c-1);p<c;p++)d[p-1]=arguments[p];l.fn.apply(l.context,d)}else{var m=l.length,g;for(p=0;p<m;p++)switch(l[p].once&&this.removeListener(e,l[p].fn,void 0,!0),c){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,t);break;case 3:l[p].fn.call(l[p].context,t,i);break;case 4:l[p].fn.call(l[p].context,t,i,n);break;default:if(!d)for(g=1,d=new Array(c-1);g<c;g++)d[g-1]=arguments[g];l[p].fn.apply(l[p].context,d)}}return!0};Bt.prototype.on=function(e,t,i){return Q_(this,e,t,i,!1)};Bt.prototype.once=function(e,t,i){return Q_(this,e,t,i,!0)};Bt.prototype.removeListener=function(e,t,i,n){var s=Gt?Gt+e:e;if(!this._events[s])return this;if(!t)return Ra(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&Ra(this,s);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:Ra(this,s)}return this};Bt.prototype.removeAllListeners=function(e){var t;return e?(t=Gt?Gt+e:e,this._events[t]&&Ra(this,t)):(this._events=new ao,this._eventsCount=0),this};Bt.prototype.off=Bt.prototype.removeListener;Bt.prototype.addListener=Bt.prototype.on;Bt.prefixed=Gt;Bt.EventEmitter=Bt;Ad=Bt;var Dn={};Mn(Dn,"ConnectionType",()=>Kr);Mn(Dn,"PeerErrorType",()=>_t);Mn(Dn,"BaseConnectionErrorType",()=>lo);Mn(Dn,"DataConnectionErrorType",()=>co);Mn(Dn,"SerializationType",()=>us);Mn(Dn,"SocketEventType",()=>zr);Mn(Dn,"ServerMessageType",()=>Ct);var Kr;(function(r){r.Data="data",r.Media="media"})(Kr||(Kr={}));var _t;(function(r){r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc"})(_t||(_t={}));var lo;(function(r){r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed"})(lo||(lo={}));var co;(function(r){r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big"})(co||(co={}));var us;(function(r){r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw"})(us||(us={}));var zr;(function(r){r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close"})(zr||(zr={}));var Ct;(function(r){r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE"})(Ct||(Ct={}));var Cd={};Cd=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class ZR extends Ad.EventEmitter{constructor(e,t,i,n,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+t+":"+i+n+"peerjs?key="+s}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Cd.version),this._disconnected=!1,this._socket.onmessage=n=>{let s;try{s=JSON.parse(n.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",n.data);return}this.emit(zr.Message,s)},this._socket.onclose=n=>{this._disconnected||(Ce.log("Socket closed.",n),this._cleanup(),this._disconnected=!0,this.emit(zr.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ct.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(zr.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Z_{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Kr.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,n={ordered:!!e.reliable},s=t.createDataChannel(i.label,n);i._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,n=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(Ce.log(`Received ICE candidates for ${t}:`,o.candidate),s.socket.send({type:Ct.Candidate,payload:{candidate:o.candidate,type:n,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(lo.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(lo.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ce.log("Listening for data channel"),e.ondatachannel=o=>{Ce.log("Received data channel");const a=o.channel;s.getConnection(t,i)._initializeDataChannel(a)},Ce.log("Listening for remote stream"),e.ontrack=o=>{Ce.log("Received remote stream");const a=o.streams[0],l=s.getConnection(t,i);if(l.type===Kr.Media){const c=l;this._addStreamToMediaConnection(a,c)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const n=this.connection.dataChannel;n&&(i=!!n.readyState&&n.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Ce.log("Set localDescription:",i,`for:${this.connection.peer}`);let n={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Kr.Data){const s=this.connection;n={...n,label:s.label,reliable:s.reliable,serialization:s.serialization}}t.socket.send({type:Ct.Offer,payload:n,dst:this.connection.peer})}catch(n){n!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(_t.WebRTC,n),Ce.log("Failed to setLocalDescription, ",n))}}catch(i){t.emitError(_t.WebRTC,i),Ce.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Ce.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:Ct.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(n){t.emitError(_t.WebRTC,n),Ce.log("Failed to setLocalDescription, ",n)}}catch(i){t.emitError(_t.WebRTC,i),Ce.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,n=this.connection.provider;Ce.log("Setting remote description",t);const s=this;try{await i.setRemoteDescription(t),Ce.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){n.emitError(_t.WebRTC,o),Ce.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){Ce.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(_t.WebRTC,t),Ce.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Ce.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){Ce.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class e0 extends Ad.EventEmitter{emitError(e,t){Ce.error("Error:",t),this.emit("error",new eI(`${e}`,t))}}class eI extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class t0 extends e0{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}var $u;const to=class to extends t0{get type(){return Kr.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||to.ID_PREFIX+Vt.randomToken(),this._negotiator=new Z_(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ce.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case Ct.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case Ct.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:Ce.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const n of i)this.handleMessage(n);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};$u=new WeakMap,sr(to,$u,to.ID_PREFIX="mc_");let Za=to;class tI{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:n,path:s,key:o}=this._options,a=new URL(`${t}://${i}:${n}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Cd.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Ce.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Vt.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Vt.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Ce.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Uu,Gu;const _n=class _n extends t0{get type(){return Kr.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||_n.ID_PREFIX+J_(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Z_(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(co.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Ct.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Ct.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Ce.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Uu=new WeakMap,Gu=new WeakMap,sr(_n,Uu,_n.ID_PREFIX="dc_"),sr(_n,Gu,_n.MAX_BUFFERED_AMOUNT=8388608);let el=_n;class Pd extends el{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>el.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Ce.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class xh extends Pd{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new K_,this.serialization=us.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=g_(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const n=WR(i.data);this._handleDataMessage({data:n})}}_send(e,t){const i=v_(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Ce.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class rI extends Pd{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=us.None}}class iI extends Pd{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=Vt.chunkedMTU){this.emitError(co.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=us.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var ju;const ro=class ro extends e0{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:rI,json:iI,binary:xh,"binary-utf8":xh,default:xh},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:Vt.CLOUD_HOST,port:Vt.CLOUD_PORT,path:"/",key:ro.DEFAULT_KEY,token:Vt.randomToken(),config:Vt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Vt.CLOUD_HOST?this._options.secure=Vt.isSecure():this._options.host==Vt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new tI(t),this._socket=this._createServerConnection(),!Vt.supports.audioVideo&&!Vt.supports.data){this._delayedAbort(_t.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!Vt.validateId(i)){this._delayedAbort(_t.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(n=>this._initialize(n)).catch(n=>this._abort(_t.ServerError,n))}_createServerConnection(){const e=new ZR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(zr.Message,t=>{this._handleMessage(t)}),e.on(zr.Error,t=>{this._abort(_t.SocketError,t)}),e.on(zr.Disconnected,()=>{this.disconnected||(this.emitError(_t.Network,"Lost connection to server."),this.disconnect())}),e.on(zr.Close,()=>{this.disconnected||this._abort(_t.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,n=e.src;switch(t){case Ct.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ct.Error:this._abort(_t.ServerError,i.msg);break;case Ct.IdTaken:this._abort(_t.UnavailableID,`ID "${this.id}" is taken`);break;case Ct.InvalidKey:this._abort(_t.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ct.Leave:Ce.log(`Received leave message from ${n}`),this._cleanupPeer(n),this._connections.delete(n);break;case Ct.Expire:this.emitError(_t.PeerUnavailable,`Could not connect to peer ${n}`);break;case Ct.Offer:{const s=i.connectionId;let o=this.getConnection(n,s);if(o&&(o.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),i.type===Kr.Media){const l=new Za(n,this,{connectionId:s,_payload:i,metadata:i.metadata});o=l,this._addConnection(n,o),this.emit("call",l)}else if(i.type===Kr.Data){const l=new this._serializers[i.serialization](n,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});o=l,this._addConnection(n,o),this.emit("connection",l)}else{Ce.warn(`Received malformed connection type:${i.type}`);return}const a=this._getMessages(s);for(const l of a)o.handleMessage(l);break}default:{if(!i){Ce.warn(`You received a malformed message from ${n} of type ${t}`);return}const s=i.connectionId,o=this.getConnection(n,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):Ce.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(_t.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(_t.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const n=new Za(e,this,{...i,_stream:t});return this._addConnection(e,n),n}_addConnection(e,t){Ce.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const n of i)if(n.connectionId===t)return n;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Ce.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ce.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(_t.ServerError,t))}};ju=new WeakMap,sr(ro,ju,ro.DEFAULT_KEY="peerjs");let Iu=ro;var tg=Iu;const nI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function sI(r){return typeof r=="string"&&nI.test(r)}function oI(r){if(!sI(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var It=[];for(var wh=0;wh<256;++wh)It.push((wh+256).toString(16).slice(1));function aI(r,e=0){return(It[r[e+0]]+It[r[e+1]]+It[r[e+2]]+It[r[e+3]]+"-"+It[r[e+4]]+It[r[e+5]]+"-"+It[r[e+6]]+It[r[e+7]]+"-"+It[r[e+8]]+It[r[e+9]]+"-"+It[r[e+10]]+It[r[e+11]]+It[r[e+12]]+It[r[e+13]]+It[r[e+14]]+It[r[e+15]]).toLowerCase()}function lI(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var cI="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hI="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function uI(r,e,t){function i(n,s,o,a){var l;if(typeof n=="string"&&(n=lI(n)),typeof s=="string"&&(s=oI(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+n.length);if(c.set(s),c.set(n,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var d=0;d<16;++d)o[a+d]=c[d];return o}return aI(c)}try{i.name=r}catch{}return i.DNS=cI,i.URL=hI,i}function dI(r,e,t,i){switch(r){case 0:return e&t^~e&i;case 1:return e^t^i;case 2:return e&t^e&i^t&i;case 3:return e^t^i}}function Th(r,e){return r<<e|r>>>32-e}function pI(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var i=unescape(encodeURIComponent(r));r=[];for(var n=0;n<i.length;++n)r.push(i.charCodeAt(n))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=r[l*64+d*4]<<24|r[l*64+d*4+1]<<16|r[l*64+d*4+2]<<8|r[l*64+d*4+3];a[l]=c}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var p=0;p<o;++p){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[p][g];for(var y=16;y<80;++y)m[y]=Th(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);for(var x=t[0],w=t[1],T=t[2],E=t[3],P=t[4],I=0;I<80;++I){var A=Math.floor(I/20),F=Th(x,5)+dI(A,w,T,E)+P+e[A]+m[I]>>>0;P=E,E=T,T=Th(w,30)>>>0,w=x,x=F}t[0]=t[0]+x>>>0,t[1]=t[1]+w>>>0,t[2]=t[2]+T>>>0,t[3]=t[3]+E>>>0,t[4]=t[4]+P>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var rg=uI("v5",80,pI),bn,pi,zt,xr,ji,gt,r0,Zn,ku,Ia,i0,ka;class ig{constructor(e){sr(this,gt);sr(this,bn,"");sr(this,pi,1);sr(this,zt,null);sr(this,xr,new Map);sr(this,ji,{});const t=rg(e,rg.URL);this.init(t)}async init(e){ki(this,bn,e),ki(this,zt,new tg),rt(this,zt).on("open",t=>{t!==rt(this,bn)&&Lt(this,gt,i0).call(this,rt(this,bn)),Lt(this,gt,Zn).call(this)}),rt(this,zt).on("connection",t=>{Lt(this,gt,Ia).call(this,t)}),rt(this,zt).on("error",t=>{var i;t.type==="peer-unavailable"?((i=rt(this,zt))==null||i.destroy(),ki(this,zt,new tg(rt(this,bn))),rt(this,zt).on("open",()=>{Lt(this,gt,Zn).call(this)}),rt(this,zt).on("connection",n=>{Lt(this,gt,Ia).call(this,n)})):console.error("PeerJS error:",t)}),window.addEventListener("beforeunload",()=>Lt(this,gt,ka).call(this))}on(e,t){rt(this,ji)[e]||(rt(this,ji)[e]=[]),rt(this,ji)[e].push(t)}destroy(){Lt(this,gt,ka).call(this)}}bn=new WeakMap,pi=new WeakMap,zt=new WeakMap,xr=new WeakMap,ji=new WeakMap,gt=new WeakSet,r0=function(e,t){rt(this,ji)[e]&&rt(this,ji)[e].forEach(i=>{i({detail:t})})},Zn=function(){Lt(this,gt,r0).call(this,"OnelineUpdate",{count:rt(this,pi)})},ku=function(){rt(this,xr).forEach(e=>e.send({type:"count",count:rt(this,pi)}))},Ia=function(e){e.on("open",()=>{rt(this,xr).set(e.peer,e),ki(this,pi,rt(this,xr).size+1),Lt(this,gt,Zn).call(this),Lt(this,gt,ku).call(this),e.on("data",t=>{t.type==="count"&&(ki(this,pi,Math.max(t.count,rt(this,pi))),Lt(this,gt,Zn).call(this))}),e.on("close",()=>{rt(this,xr).delete(e.peer),ki(this,pi,rt(this,xr).size+1),Lt(this,gt,Zn).call(this),Lt(this,gt,ku).call(this)})})},i0=function(e){var t;if(!rt(this,xr).has(e)){const i=(t=rt(this,zt))==null?void 0:t.connect(e);i&&Lt(this,gt,Ia).call(this,i)}},ka=function(){var e;rt(this,xr).forEach(t=>t.close()),rt(this,xr).clear(),(e=rt(this,zt))==null||e.destroy(),ki(this,zt,null),window.removeEventListener("beforeunload",Lt(this,gt,ka).bind(this))};function fI(){const r=_l(),e=w1();return ue(()=>{const t=r.value.addons["valaxy-addon-vercount"].options;return{placeholder:"-",baseUrl:e.value.origin,...t}})}function mI(){const r=fI(),{placeholder:e,api:t,baseUrl:i}=r.value,n=ve({pv:e,uv:e,online:e}),s=ve({pv:e,uv:e,online:e});let o,a;if(!Zi)return{page:n,site:s};const l=cl(),p=t==="cn"?"https://cn.vercount.one/log?jsonpCallback=VisitorCountCallback":t||"https://vercount.one/log?jsonpCallback=VisitorCountCallback",m=()=>{const T=`${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`,E=Intl.DateTimeFormat().resolvedOptions().timeZone||"",P=navigator.languages?navigator.languages.join(","):navigator.language||"",A=document.createElement("canvas").getContext("webgl"),F=A?A.getParameter(A.RENDERER):"",b=[T,E,P,navigator.userAgent,F,new Date().getTimezoneOffset()].join("|");let B=0;for(let H=0;H<b.length;H++)B=(B<<5)-B+b.charCodeAt(H),B=B&B;return Math.abs(B).toString(36)},g=T=>{fetch(p,{method:"POST",headers:{"Content-Type":"application/json","X-Browser-Token":m()},body:JSON.stringify({url:T})}).then(E=>{if(!E.ok)throw new Error("Network response was not ok.");return E.json()}).then(E=>{n.value.pv=E.page_pv,n.value.uv=E.page_uv,s.value.pv=E.site_pv,s.value.uv=E.site_uv}).catch(E=>{console.error("Error fetching visitor count:",E)})},y=T=>{o=new ig(T),o.on("OnelineUpdate",E=>{n.value.online=E.detail.count}),a=new ig(i),a.on("OnelineUpdate",E=>{s.value.online=E.detail.count})},x=()=>{o==null||o.destroy(),a==null||a.destroy()},w=T=>{g(T),y(T)};return l.beforeEach(T=>{const E=i+T.fullPath;w(E)}),rr(()=>{const T=window.location.href;w(T)}),ll(()=>{x()}),{page:n,site:s}}const gI="valaxy-theme-sakura",vI="0.9.4",yI={email:"3322543587@qq.com",name:"WRXinYue",url:"https://wrxinyue.org"},_I="https://github.com/WRXinYue/valaxy-theme-sakura",bI={type:"git",url:"https://github.com/WRXinYue/valaxy-theme-sakura.git"},xI={"@wrxinyue:registry":"https://npm.pkg.github.com"},wI=["valaxy","theme","sakura","vue"],TI="client/index.ts",SI="types/index.d.ts",EI={"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},AI={"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3",interactjs:"^1.10.27",lenis:"^1.2.3",typeit:"^8.8.7"},CI={"@interactjs/types":"^1.10.27",valaxy:"^0.23.3"},PI={release:"bumpp && npm publish"},RI={name:gI,version:vI,author:yI,homepage:_I,repository:bI,publishConfig:xI,keywords:wI,main:TI,types:SI,peerDependencies:EI,dependencies:AI,devDependencies:CI,scripts:PI},II={class:"powered",m:"2",translate:"no"},kI=["innerHTML"],MI=["href","title"],DI=Ve({__name:"SakuraPowered",props:{pkg:{}},setup(r){const e=r,{t}=ni(),i=_o(),n=ue(()=>e.pkg||i.value.themeConfig.pkg||RI),s=ue(()=>t("footer.powered",[`<a href="${Fh.repository.url}" target="_blank" rel="noopener">Valaxy</a> v${Fh.version}`]));return(o,a)=>(ie(),me("div",II,[Ie("span",{innerHTML:s.value},null,8,kI),a[0]||(a[0]=Vi(" | ")),Ie("span",null,[Vi(it(oe(t)("footer.theme"))+" ",1),Ie("a",{href:n.value.homepage,title:`valaxy-theme-${oe(i).theme}`,target:"_blank"},it(Kb(oe(i).theme)),9,MI),Vi(" v"+it(n.value.version),1)])]))}});function Xt(){const r=Kw();return ue(()=>r.value.themeConfig)}function OI(){const r=Pn(),e=ue(()=>{var i;return(i=r.meta)==null?void 0:i.layout});function t(i){return typeof i=="boolean"?i:typeof i=="string"?i===e.value:Array.isArray(i)?i.includes(e.value):!1}return{layout:e,isIncludes:t}}function LI(){const r=ve(),e=ve(1),t=ve([]),i=ve(),n=ve(0);return{curPage:r,loadMultiple:e,paginationTargets:t,paginationObserver:i,paginationElementPositionsNumber:n}}function BI(){const r=ve({});function e(i,n){r.value[i]=n}function t(i){return r.value[i]||0}return{positions:r,setScrollPosition:e,getScrollPosition:t}}function FI(){const r=ve(!1);function e(){r.value=!r.value}function t(){r.value=!0}function i(){r.value=!1}return{search:{isOpen:r,toggle:e,open:t,close:i}}}const tl=Object.freeze({IS_SIDEBAR_OPEN:"is-sidebar-open"});function NI(r){return!Number.isNaN(Number.parseFloat(r))&&Number.isFinite(r)}function n0(r,e){try{const t=r.getItem(e);return t===null?null:NI(t)?Number(t):t==="true"?!0:t==="false"?!1:t}catch(t){return console.error("Failed to read from storage:",t),null}}function s0(r,e,t){try{r.setItem(e,t.toString())}catch(i){console.error("Failed to write to storage:",i)}}function $I(r){return n0(localStorage,r)}function UI(r,e){s0(localStorage,r,e)}function GI(r){return n0(sessionStorage,r)}function jI(r,e){s0(sessionStorage,r,e)}function HI(){const r=ve(!1),e=wl(),t=ue(()=>e.value.sidebar!==!1);function i(){r.value=!0}function n(){r.value=!1}function s(){r.value?n():i()}const o=Xt().value.sidebarOptions;return(o==null?void 0:o.persistence)==="permanent"?dt(r,()=>UI(tl.IS_SIDEBAR_OPEN,r.value)):(o==null?void 0:o.persistence)==="session"&&dt(r,()=>jI(tl.IS_SIDEBAR_OPEN,r.value)),{sidebar:{isOpen:r,hasSidebar:t,open:i,close:n,toggle:s}}}function zI(){const r=I1("wallpaperKey-hero",0),e=ve(0),t=ve(),i=ve(!1);function n(){t.value="prevMedia",r.value=(r.value-1+e.value)%e.value,setTimeout(()=>{t.value=""},0)}function s(){t.value="nextMedia",r.value=(r.value+1)%e.value,setTimeout(()=>{t.value=""},0)}function o(){i.value=!i.value}return{wallpaperIndex:r,wallpaperLength:e,wallpaperOperation:t,wallpaperIsPlaying:i,prevWallpaper:n,nextWallpaper:s,togglePlayPause:o}}const _s=ul("sakura-app",()=>{const r=BI(),e=LI(),t=zI(),i=HI(),n=FI();return{...r,...e,...t,...i,...n}});function ng(r){if(typeof r=="string")return r;if(Array.isArray(r)&&r.length>0)return r[Math.floor(Math.random()*r.length)]}function nO(r){return/\.(?:mp4|webm|ogg)$/i.test(r)}var VI="1.3.3";function o0(r,e,t){return Math.max(r,Math.min(e,t))}function WI(r,e,t){return(1-t)*r+t*e}function XI(r,e,t,i){return WI(r,e,1-Math.exp(-t*i))}function YI(r,e){return(r%e+e)%e}var qI=class{constructor(){fe(this,"isRunning",!1);fe(this,"value",0);fe(this,"from",0);fe(this,"to",0);fe(this,"currentTime",0);fe(this,"lerp");fe(this,"duration");fe(this,"easing");fe(this,"onUpdate")}advance(r){var t;if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=r;const i=o0(0,this.currentTime/this.duration,1);e=i>=1;const n=e?1:this.easing(i);this.value=this.from+(this.to-this.from)*n}else this.lerp?(this.value=XI(this.value,this.to,this.lerp*60,r),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),(t=this.onUpdate)==null||t.call(this,this.value,e)}stop(){this.isRunning=!1}fromTo(r,e,{lerp:t,duration:i,easing:n,onStart:s,onUpdate:o}){this.from=this.value=r,this.to=e,this.lerp=t,this.duration=i,this.easing=n,this.currentTime=0,this.isRunning=!0,s==null||s(),this.onUpdate=o}};function KI(r,e){let t;return function(...i){let n=this;clearTimeout(t),t=setTimeout(()=>{t=void 0,r.apply(n,i)},e)}}var JI=class{constructor(r,e,{autoResize:t=!0,debounce:i=250}={}){fe(this,"width",0);fe(this,"height",0);fe(this,"scrollHeight",0);fe(this,"scrollWidth",0);fe(this,"debouncedResize");fe(this,"wrapperResizeObserver");fe(this,"contentResizeObserver");fe(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});fe(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});fe(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=r,this.content=e,t&&(this.debouncedResize=KI(this.resize,i),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var r,e;(r=this.wrapperResizeObserver)==null||r.disconnect(),(e=this.contentResizeObserver)==null||e.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},a0=class{constructor(){fe(this,"events",{})}emit(r,...e){var i;let t=this.events[r]||[];for(let n=0,s=t.length;n<s;n++)(i=t[n])==null||i.call(t,...e)}on(r,e){var t;return(t=this.events[r])!=null&&t.push(e)||(this.events[r]=[e]),()=>{var i;this.events[r]=(i=this.events[r])==null?void 0:i.filter(n=>e!==n)}}off(r,e){var t;this.events[r]=(t=this.events[r])==null?void 0:t.filter(i=>e!==i)}destroy(){this.events={}}},sg=100/6,Di={passive:!1},QI=class{constructor(r,e={wheelMultiplier:1,touchMultiplier:1}){fe(this,"touchStart",{x:0,y:0});fe(this,"lastDelta",{x:0,y:0});fe(this,"window",{width:0,height:0});fe(this,"emitter",new a0);fe(this,"onTouchStart",r=>{const{clientX:e,clientY:t}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=e,this.touchStart.y=t,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:r})});fe(this,"onTouchMove",r=>{const{clientX:e,clientY:t}=r.targetTouches?r.targetTouches[0]:r,i=-(e-this.touchStart.x)*this.options.touchMultiplier,n=-(t-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=t,this.lastDelta={x:i,y:n},this.emitter.emit("scroll",{deltaX:i,deltaY:n,event:r})});fe(this,"onTouchEnd",r=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:r})});fe(this,"onWheel",r=>{let{deltaX:e,deltaY:t,deltaMode:i}=r;const n=i===1?sg:i===2?this.window.width:1,s=i===1?sg:i===2?this.window.height:1;e*=n,t*=s,e*=this.options.wheelMultiplier,t*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:t,event:r})});fe(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=r,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,Di),this.element.addEventListener("touchstart",this.onTouchStart,Di),this.element.addEventListener("touchmove",this.onTouchMove,Di),this.element.addEventListener("touchend",this.onTouchEnd,Di)}on(r,e){return this.emitter.on(r,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,Di),this.element.removeEventListener("touchstart",this.onTouchStart,Di),this.element.removeEventListener("touchmove",this.onTouchMove,Di),this.element.removeEventListener("touchend",this.onTouchEnd,Di)}},og=r=>Math.min(1,1.001-Math.pow(2,-10*r)),ZI=class{constructor({wrapper:r=window,content:e=document.documentElement,eventsTarget:t=r,smoothWheel:i=!0,syncTouch:n=!1,syncTouchLerp:s=.075,touchInertiaMultiplier:o=35,duration:a,easing:l,lerp:c=.1,infinite:d=!1,orientation:p="vertical",gestureOrientation:m="vertical",touchMultiplier:g=1,wheelMultiplier:y=1,autoResize:x=!0,prevent:w,virtualScroll:T,overscroll:E=!0,autoRaf:P=!1,anchors:I=!1,autoToggle:A=!1,allowNestedScroll:F=!1,__experimental__naiveDimensions:b=!1}={}){fe(this,"_isScrolling",!1);fe(this,"_isStopped",!1);fe(this,"_isLocked",!1);fe(this,"_preventNextNativeScrollEvent",!1);fe(this,"_resetVelocityTimeout",null);fe(this,"__rafID",null);fe(this,"isTouching");fe(this,"time",0);fe(this,"userData",{});fe(this,"lastVelocity",0);fe(this,"velocity",0);fe(this,"direction",0);fe(this,"options");fe(this,"targetScroll");fe(this,"animatedScroll");fe(this,"animate",new qI);fe(this,"emitter",new a0);fe(this,"dimensions");fe(this,"virtualScroll");fe(this,"onScrollEnd",r=>{r instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&r.stopPropagation()});fe(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});fe(this,"onTransitionEnd",r=>{if(r.propertyName.includes("overflow")){const e=this.isHorizontal?"overflow-x":"overflow-y",t=getComputedStyle(this.rootElement)[e];["hidden","clip"].includes(t)?this.stop():this.start()}});fe(this,"onClick",r=>{const t=r.composedPath().find(i=>{var n,s,o;return i instanceof HTMLAnchorElement&&(((n=i.getAttribute("href"))==null?void 0:n.startsWith("#"))||((s=i.getAttribute("href"))==null?void 0:s.startsWith("/#"))||((o=i.getAttribute("href"))==null?void 0:o.startsWith("./#")))});if(t){const i=t.getAttribute("href");if(i){const n=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;let s=`#${i.split("#")[1]}`;["#","/#","./#","#top","/#top","./#top"].includes(i)&&(s=0),this.scrollTo(s,n)}}});fe(this,"onPointerDown",r=>{r.button===1&&this.reset()});fe(this,"onVirtualScroll",r=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(r)===!1)return;const{deltaX:e,deltaY:t,event:i}=r;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:t,event:i}),i.ctrlKey||i.lenisStopPropagation)return;const n=i.type.includes("touch"),s=i.type.includes("wheel");this.isTouching=i.type==="touchstart"||i.type==="touchmove";const o=e===0&&t===0;if(this.options.syncTouch&&n&&i.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const l=this.options.gestureOrientation==="vertical"&&t===0||this.options.gestureOrientation==="horizontal"&&e===0;if(o||l)return;let c=i.composedPath();c=c.slice(0,c.indexOf(this.rootElement));const d=this.options.prevent;if(c.find(w=>{var T,E,P;return w instanceof HTMLElement&&(typeof d=="function"&&(d==null?void 0:d(w))||((T=w.hasAttribute)==null?void 0:T.call(w,"data-lenis-prevent"))||n&&((E=w.hasAttribute)==null?void 0:E.call(w,"data-lenis-prevent-touch"))||s&&((P=w.hasAttribute)==null?void 0:P.call(w,"data-lenis-prevent-wheel"))||this.options.allowNestedScroll&&this.checkNestedScroll(w,{deltaX:e,deltaY:t}))}))return;if(this.isStopped||this.isLocked){i.preventDefault();return}if(!(this.options.syncTouch&&n||this.options.smoothWheel&&s)){this.isScrolling="native",this.animate.stop(),i.lenisStopPropagation=!0;return}let m=t;this.options.gestureOrientation==="both"?m=Math.abs(t)>Math.abs(e)?t:e:this.options.gestureOrientation==="horizontal"&&(m=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&t>0||this.animatedScroll===this.limit&&t<0))&&(i.lenisStopPropagation=!0),i.preventDefault();const g=n&&this.options.syncTouch,x=n&&i.type==="touchend"&&Math.abs(m)>5;x&&(m=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+m,{programmatic:!1,...g?{lerp:x?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});fe(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const r=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-r,this.direction=Math.sign(this.animatedScroll-r),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});fe(this,"raf",r=>{const e=r-(this.time||r);this.time=r,this.animate.advance(e*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=VI,(!r||r===document.documentElement)&&(r=window),typeof a=="number"&&typeof l!="function"?l=og:typeof l=="function"&&typeof a!="number"&&(a=1),this.options={wrapper:r,content:e,eventsTarget:t,smoothWheel:i,syncTouch:n,syncTouchLerp:s,touchInertiaMultiplier:o,duration:a,easing:l,lerp:c,infinite:d,gestureOrientation:m,orientation:p,touchMultiplier:g,wheelMultiplier:y,autoResize:x,prevent:w,virtualScroll:T,overscroll:E,autoRaf:P,anchors:I,autoToggle:A,allowNestedScroll:F,__experimental__naiveDimensions:b},this.dimensions=new JI(r,e,{autoResize:x}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new QI(t,{touchMultiplier:g,wheelMultiplier:y}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(r,e){return this.emitter.on(r,e)}off(r,e){return this.emitter.off(r,e)}setScroll(r){this.isHorizontal?this.options.wrapper.scrollTo({left:r,behavior:"instant"}):this.options.wrapper.scrollTo({top:r,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(r,{offset:e=0,immediate:t=!1,lock:i=!1,duration:n=this.options.duration,easing:s=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:l,force:c=!1,programmatic:d=!0,userData:p}={}){if(!((this.isStopped||this.isLocked)&&!c)){if(typeof r=="string"&&["top","left","start"].includes(r))r=0;else if(typeof r=="string"&&["bottom","right","end"].includes(r))r=this.limit;else{let m;if(typeof r=="string"?m=document.querySelector(r):r instanceof HTMLElement&&(r!=null&&r.nodeType)&&(m=r),m){if(this.options.wrapper!==window){const y=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?y.left:y.top}const g=m.getBoundingClientRect();r=(this.isHorizontal?g.left:g.top)+this.animatedScroll}}if(typeof r=="number"){if(r+=e,r=Math.round(r),this.options.infinite){if(d){this.targetScroll=this.animatedScroll=this.scroll;const m=r-this.animatedScroll;m>this.limit/2?r=r-this.limit:m<-this.limit/2&&(r=r+this.limit)}}else r=o0(0,r,this.limit);if(r===this.targetScroll){a==null||a(this),l==null||l(this);return}if(this.userData=p??{},t){this.animatedScroll=this.targetScroll=r,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}d||(this.targetScroll=r),typeof n=="number"&&typeof s!="function"?s=og:typeof s=="function"&&typeof n!="number"&&(n=1),this.animate.fromTo(this.animatedScroll,r,{duration:n,easing:s,lerp:o,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",a==null||a(this)},onUpdate:(m,g)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=m-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=m,this.setScroll(this.scroll),d&&(this.targetScroll=m),g||this.emit(),g&&(this.reset(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(r,{deltaX:e,deltaY:t}){const i=Date.now(),n=r._lenis??(r._lenis={});let s,o,a,l,c,d,p,m;const g=this.options.gestureOrientation;if(i-(n.time??0)>2e3){n.time=Date.now();const A=window.getComputedStyle(r);n.computedStyle=A;const F=A.overflowX,b=A.overflowY;if(s=["auto","overlay","scroll"].includes(F),o=["auto","overlay","scroll"].includes(b),n.hasOverflowX=s,n.hasOverflowY=o,!s&&!o||g==="vertical"&&!o||g==="horizontal"&&!s)return!1;c=r.scrollWidth,d=r.scrollHeight,p=r.clientWidth,m=r.clientHeight,a=c>p,l=d>m,n.isScrollableX=a,n.isScrollableY=l,n.scrollWidth=c,n.scrollHeight=d,n.clientWidth=p,n.clientHeight=m}else a=n.isScrollableX,l=n.isScrollableY,s=n.hasOverflowX,o=n.hasOverflowY,c=n.scrollWidth,d=n.scrollHeight,p=n.clientWidth,m=n.clientHeight;if(!s&&!o||!a&&!l||g==="vertical"&&(!o||!l)||g==="horizontal"&&(!s||!a))return!1;let y;if(g==="horizontal")y="x";else if(g==="vertical")y="y";else{const A=e!==0,F=t!==0;A&&s&&a&&(y="x"),F&&o&&l&&(y="y")}if(!y)return!1;let x,w,T,E,P;if(y==="x")x=r.scrollLeft,w=c-p,T=e,E=s,P=a;else if(y==="y")x=r.scrollTop,w=d-m,T=t,E=o,P=l;else return!1;return(T>0?x<w:x>0)&&E&&P}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const r=this.options.wrapper;return this.isHorizontal?r.scrollX??r.scrollLeft:r.scrollY??r.scrollTop}get scroll(){return this.options.infinite?YI(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(r){this._isScrolling!==r&&(this._isScrolling=r,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(r){this._isStopped!==r&&(this._isStopped=r,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(r){this._isLocked!==r&&(this._isLocked=r,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let r="lenis";return this.options.autoToggle&&(r+=" lenis-autoToggle"),this.isStopped&&(r+=" lenis-stopped"),this.isLocked&&(r+=" lenis-locked"),this.isScrolling&&(r+=" lenis-scrolling"),this.isScrolling==="smooth"&&(r+=" lenis-smooth"),r}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};const Rd=ve();function l0(r){Rd.value.raf(r),requestAnimationFrame(l0)}async function ek(){Rd.value=new ZI({lerp:.04}),requestAnimationFrame(l0)}function c0(r={}){const e=Xt(),{percentage:t,show:i}=$T({offset:100}),n=r.scrollAnimation??e.value.scrollAnimation,s=r.scrollDamping??e.value.scrollDamping;function o(d){var p;s?(p=Rd.value)==null||p.scrollTo(d,{offset:0,immediate:!n}):window.scrollTo({top:d,behavior:n?"smooth":"auto"})}function a(d,p="--sakura-navbar-height"){p=typeof p=="string"?Number.parseInt(k1(p).value||"",10):p;const m=typeof d=="string"?document.querySelector(d):d instanceof Element?d:null;if(!m){console.warn("Target element not found:",d);return}o(m.clientHeight-p)}return{to:a,toTop:()=>o(0),toDown:()=>a(".sakura-hero"),percentage:t,show:i}}function tk(){return Xt().value.scrollLock?D1(Zi?document.body:null):void 0}const ag=ve();function rk(){var r,e;(r=ag.value)==null||r.load(),(e=ag.value)==null||e.dispatchEvent(new Event("load"))}function ik(r){function e(t){t.key.toLowerCase()==="k"&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),r())}rr(()=>{hr("keydown",e)})}const lg=ve(!1);function nk(){const r=_s(),e=dr(),t=ue(()=>e.value.search.type),i=(n=r.search)=>{const s={fuse:()=>ik(n.toggle),algolia:()=>al(()=>{n.isOpen&&rk()})};(s[t.value]||(()=>(console.warn("Warning: Unsupported search type. Defaulting to Fuse search."),s.fuse())))()};return lg.value||(i(),lg.value=!0),r.search}const sk=ve(Zi?location.hash:"");Zi&&window.addEventListener("hashchange",()=>{sk.value=location.hash});const ok={class:"sakura-copyright copyright flex items-center justify-center",p:"1"},ak={itemprop:"copyrightYear"},lk=["href","title"],ck=["src"],hk={itemprop:"copyrightHolder"},h0=Ve({__name:"SakuraCopyright",props:{footer:{}},setup(r){const e=r,t=dr(),i=Xt(),n=ue(()=>e.footer||i.value.footer),s=new Date().getFullYear(),o=ue(()=>s===n.value.since),a=ue(()=>n.value.icon);return(l,c)=>{var d,p;return ie(),me("div",ok,[Ie("span",null,[c[0]||(c[0]=Vi(" Copyright © ")),Ie("span",ak,[o.value?Ge("v-if",!0):(ie(),me(jt,{key:0},[Vi(it(n.value.since)+" - ",1)],64)),Vi(" "+it(oe(s)),1)])]),(d=n.value.icon)!=null&&d.enable?(ie(),me("a",{key:0,m:"x-2",class:"inline-flex animate-pulse",href:a.value.url,target:"_blank",title:a.value.title},[Ie("div",{class:vt(a.value.name)},null,2)],8,lk)):Ge("v-if",!0),!((p=n.value.icon)!=null&&p.enable)&&a.value.img?(ie(),me("img",{key:1,class:"h-6 w-6 inline-flex animate-pulse",src:a.value.img,title:"Footer Icon Description"},null,8,ck)):Ge("v-if",!0),Ie("span",hk,it(oe(t).author.name),1)])}}}),uk={class:"sakura-footer h-$sakura-footer-height",text:"center sm",style:{color:"var(--va-c-text-light)"}},dk=["innerHTML"],pk=Ve({__name:"SakuraFooter",props:{footer:{},pkg:{}},setup(r){const e=r,t=Xt(),i=ue(()=>e.footer||t.value.footer);return(n,s)=>{const o=h0,a=DI;return ie(),me("footer",uk,[i.value.icp?(ie(),me("div",{key:0,class:"icp",p:"y-2",innerHTML:i.value.icp},null,8,dk)):Ge("v-if",!0),st(o),i.value.powered?(ie(),at(a,{key:1})):Ge("v-if",!0),Ze(n.$slots,"default")])}}}),fk={class:"flex flex-col items-center space-y-2"},mk={class:"flex flex-wrap justify-center gap-4 text-sm"},gk={key:0},vk={key:1},yk=Ve({__name:"SakuraFooter",setup(r){const{site:e}=mI();return(t,i)=>{const n=DR;return ie(),at(pk,{class:"py-4"},{default:ot(()=>[Ie("div",fk,[Ie("div",mk,[oe(e).pv?(ie(),me("span",gk,it(t.$t("site.pv"))+": "+it(oe(e).pv),1)):Ge("v-if",!0),oe(e).uv?(ie(),me("span",vk,it(t.$t("site.uv"))+": "+it(oe(e).uv),1)):Ge("v-if",!0)]),st(n,{"start-time":"2024-05-01",class:"text-sm"},{"live-time-before":ot(()=>[Ie("span",null,it(t.$t("site.live-time")),1)]),_:1})])]),_:1})}}});var Xs={exports:{}},_k=Xs.exports,cg;function bk(){return cg||(cg=1,function(r,e){(function(t,i){r.exports=i()})(_k,function(){function t(u,h){var f=Object.keys(u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(u);h&&(v=v.filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable})),f.push.apply(f,v)}return f}function i(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?t(Object(f),!0).forEach(function(v){l(u,v,f[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):t(Object(f)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(f,v))})}return u}function n(u){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(u)}function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function o(u,h){for(var f=0;f<h.length;f++){var v=h[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(u,x(v.key),v)}}function a(u,h,f){return h&&o(u.prototype,h),Object.defineProperty(u,"prototype",{writable:!1}),u}function l(u,h,f){return(h=x(h))in u?Object.defineProperty(u,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[h]=f,u}function c(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),h&&p(u,h)}function d(u){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},d(u)}function p(u,h){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},p(u,h)}function m(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function g(u){var h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,v=d(u);if(h){var _=d(this).constructor;f=Reflect.construct(v,arguments,_)}else f=v.apply(this,arguments);return function(S,C){if(C&&(typeof C=="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(S)}(this,f)}}function y(){return y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(u,h,f){var v=function(S,C){for(;!Object.prototype.hasOwnProperty.call(S,C)&&(S=d(S))!==null;);return S}(u,h);if(v){var _=Object.getOwnPropertyDescriptor(v,h);return _.get?_.get.call(arguments.length<3?u:f):_.value}},y.apply(this,arguments)}function x(u){var h=function(f,v){if(typeof f!="object"||f===null)return f;var _=f[Symbol.toPrimitive];if(_!==void 0){var S=_.call(f,v);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(u,"string");return typeof h=="symbol"?h:h+""}var w=function(u){return!(!u||!u.Window)&&u instanceof u.Window},T=void 0,E=void 0;function P(u){T=u;var h=u.document.createTextNode("");h.ownerDocument!==u.document&&typeof u.wrap=="function"&&u.wrap(h)===h&&(u=u.wrap(u)),E=u}function I(u){return w(u)?u:(u.ownerDocument||u).defaultView||E.window}typeof window<"u"&&window&&P(window);var A=function(u){return!!u&&n(u)==="object"},F=function(u){return typeof u=="function"},b={window:function(u){return u===E||w(u)},docFrag:function(u){return A(u)&&u.nodeType===11},object:A,func:F,number:function(u){return typeof u=="number"},bool:function(u){return typeof u=="boolean"},string:function(u){return typeof u=="string"},element:function(u){if(!u||n(u)!=="object")return!1;var h=I(u)||E;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?u instanceof Element||u instanceof h.Element:u.nodeType===1&&typeof u.nodeName=="string"},plainObject:function(u){return A(u)&&!!u.constructor&&/function Object\b/.test(u.constructor.toString())},array:function(u){return A(u)&&u.length!==void 0&&F(u.splice)}};function B(u){var h=u.interaction;if(h.prepared.name==="drag"){var f=h.prepared.axis;f==="x"?(h.coords.cur.page.y=h.coords.start.page.y,h.coords.cur.client.y=h.coords.start.client.y,h.coords.velocity.client.y=0,h.coords.velocity.page.y=0):f==="y"&&(h.coords.cur.page.x=h.coords.start.page.x,h.coords.cur.client.x=h.coords.start.client.x,h.coords.velocity.client.x=0,h.coords.velocity.page.x=0)}}function H(u){var h=u.iEvent,f=u.interaction;if(f.prepared.name==="drag"){var v=f.prepared.axis;if(v==="x"||v==="y"){var _=v==="x"?"y":"x";h.page[_]=f.coords.start.page[_],h.client[_]=f.coords.start.client[_],h.delta[_]=0}}}var W={id:"actions/drag",install:function(u){var h=u.actions,f=u.Interactable,v=u.defaults;f.prototype.draggable=W.draggable,h.map.drag=W,h.methodDict.drag="draggable",v.actions.drag=W.defaults},listeners:{"interactions:before-action-move":B,"interactions:action-resume":B,"interactions:action-move":H,"auto-start:check":function(u){var h=u.interaction,f=u.interactable,v=u.buttons,_=f.options.drag;if(_&&_.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||(v&f.options.drag.mouseButtons)!=0))return u.action={name:"drag",axis:_.lockAxis==="start"?_.startAxis:_.lockAxis},!1}},draggable:function(u){return b.object(u)?(this.options.drag.enabled=u.enabled!==!1,this.setPerAction("drag",u),this.setOnEvents("drag",u),/^(xy|x|y|start)$/.test(u.lockAxis)&&(this.options.drag.lockAxis=u.lockAxis),/^(xy|x|y)$/.test(u.startAxis)&&(this.options.drag.startAxis=u.startAxis),this):b.bool(u)?(this.options.drag.enabled=u,this):this.options.drag},beforeMove:B,move:H,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(u){return u.search("drag")===0}},Q=W,N={init:function(u){var h=u;N.document=h.document,N.DocumentFragment=h.DocumentFragment||G,N.SVGElement=h.SVGElement||G,N.SVGSVGElement=h.SVGSVGElement||G,N.SVGElementInstance=h.SVGElementInstance||G,N.Element=h.Element||G,N.HTMLElement=h.HTMLElement||N.Element,N.Event=h.Event,N.Touch=h.Touch||G,N.PointerEvent=h.PointerEvent||h.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function G(){}var X=N,se={init:function(u){var h=X.Element,f=u.navigator||{};se.supportsTouch="ontouchstart"in u||b.func(u.DocumentTouch)&&X.document instanceof u.DocumentTouch,se.supportsPointerEvent=f.pointerEnabled!==!1&&!!X.PointerEvent,se.isIOS=/iP(hone|od|ad)/.test(f.platform),se.isIOS7=/iP(hone|od|ad)/.test(f.platform)&&/OS 7[^\d]/.test(f.appVersion),se.isIe9=/MSIE 9/.test(f.userAgent),se.isOperaMobile=f.appName==="Opera"&&se.supportsTouch&&/Presto/.test(f.userAgent),se.prefixedMatchesSelector="matches"in h.prototype?"matches":"webkitMatchesSelector"in h.prototype?"webkitMatchesSelector":"mozMatchesSelector"in h.prototype?"mozMatchesSelector":"oMatchesSelector"in h.prototype?"oMatchesSelector":"msMatchesSelector",se.pEventTypes=se.supportsPointerEvent?X.PointerEvent===u.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,se.wheelEvent=X.document&&"onmousewheel"in X.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},M=se;function L(u,h){if(u.contains)return u.contains(h);for(;h;){if(h===u)return!0;h=h.parentNode}return!1}function k(u,h){for(;b.element(u);){if(U(u,h))return u;u=z(u)}return null}function z(u){var h=u.parentNode;if(b.docFrag(h)){for(;(h=h.host)&&b.docFrag(h););return h}return h}function U(u,h){return E!==T&&(h=h.replace(/\/deep\//g," ")),u[M.prefixedMatchesSelector](h)}var j=function(u){return u.parentNode||u.host};function K(u,h){for(var f,v=[],_=u;(f=j(_))&&_!==h&&f!==_.ownerDocument;)v.unshift(_),_=f;return v}function Y(u,h,f){for(;b.element(u);){if(U(u,h))return!0;if((u=z(u))===f)return U(u,h)}return!1}function te(u){return u.correspondingUseElement||u}function ae(u){var h=u instanceof X.SVGElement?u.getBoundingClientRect():u.getClientRects()[0];return h&&{left:h.left,right:h.right,top:h.top,bottom:h.bottom,width:h.width||h.right-h.left,height:h.height||h.bottom-h.top}}function pe(u){var h,f=ae(u);if(!M.isIOS7&&f){var v={x:(h=(h=I(u))||E).scrollX||h.document.documentElement.scrollLeft,y:h.scrollY||h.document.documentElement.scrollTop};f.left+=v.x,f.right+=v.x,f.top+=v.y,f.bottom+=v.y}return f}function be(u){for(var h=[];u;)h.push(u),u=z(u);return h}function Ae(u){return!!b.string(u)&&(X.document.querySelector(u),!0)}function ee(u,h){for(var f in h)u[f]=h[f];return u}function le(u,h,f){return u==="parent"?z(f):u==="self"?h.getRect(f):k(f,u)}function we(u,h,f,v){var _=u;return b.string(_)?_=le(_,h,f):b.func(_)&&(_=_.apply(void 0,v)),b.element(_)&&(_=pe(_)),_}function Pe(u){return u&&{x:"x"in u?u.x:u.left,y:"y"in u?u.y:u.top}}function Ne(u){return!u||"x"in u&&"y"in u||((u=ee({},u)).x=u.left||0,u.y=u.top||0,u.width=u.width||(u.right||0)-u.x,u.height=u.height||(u.bottom||0)-u.y),u}function We(u,h,f){u.left&&(h.left+=f.x),u.right&&(h.right+=f.x),u.top&&(h.top+=f.y),u.bottom&&(h.bottom+=f.y),h.width=h.right-h.left,h.height=h.bottom-h.top}function Ee(u,h,f){var v=f&&u.options[f];return Pe(we(v&&v.origin||u.options.origin,u,h,[u&&h]))||{x:0,y:0}}function Te(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(D){return!0},v=arguments.length>3?arguments[3]:void 0;if(v=v||{},b.string(u)&&u.search(" ")!==-1&&(u=pt(u)),b.array(u))return u.forEach(function(D){return Te(D,h,f,v)}),v;if(b.object(u)&&(h=u,u=""),b.func(h)&&f(u))v[u]=v[u]||[],v[u].push(h);else if(b.array(h))for(var _=0,S=h;_<S.length;_++){var C=S[_];Te(u,C,f,v)}else if(b.object(h))for(var R in h)Te(pt(R).map(function(D){return"".concat(u).concat(D)}),h[R],f,v);return v}function pt(u){return u.trim().split(/ +/)}var ct=function(u,h){return Math.sqrt(u*u+h*h)},Ei=["webkit","moz"];function Yt(u,h){u.__set||(u.__set={});var f=function(_){if(Ei.some(function(S){return _.indexOf(S)===0}))return 1;typeof u[_]!="function"&&_!=="__set"&&Object.defineProperty(u,_,{get:function(){return _ in u.__set?u.__set[_]:u.__set[_]=h[_]},set:function(S){u.__set[_]=S},configurable:!0})};for(var v in h)f(v);return u}function Ot(u,h){u.page=u.page||{},u.page.x=h.page.x,u.page.y=h.page.y,u.client=u.client||{},u.client.x=h.client.x,u.client.y=h.client.y,u.timeStamp=h.timeStamp}function oi(u){u.page.x=0,u.page.y=0,u.client.x=0,u.client.y=0}function ai(u){return u instanceof X.Event||u instanceof X.Touch}function pr(u,h,f){return u=u||"page",(f=f||{}).x=h[u+"X"],f.y=h[u+"Y"],f}function Eo(u,h){return h=h||{x:0,y:0},M.isOperaMobile&&ai(u)?(pr("screen",u,h),h.x+=window.scrollX,h.y+=window.scrollY):pr("page",u,h),h}function tn(u){return b.number(u.pointerId)?u.pointerId:u.identifier}function Ao(u,h,f){var v=h.length>1?Ai(h):h[0];Eo(v,u.page),function(_,S){S=S||{},M.isOperaMobile&&ai(_)?pr("screen",_,S):pr("client",_,S)}(v,u.client),u.timeStamp=f}function xs(u){var h=[];return b.array(u)?(h[0]=u[0],h[1]=u[1]):u.type==="touchend"?u.touches.length===1?(h[0]=u.touches[0],h[1]=u.changedTouches[0]):u.touches.length===0&&(h[0]=u.changedTouches[0],h[1]=u.changedTouches[1]):(h[0]=u.touches[0],h[1]=u.touches[1]),h}function Ai(u){for(var h={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},f=0;f<u.length;f++){var v=u[f];for(var _ in h)h[_]+=v[_]}for(var S in h)h[S]/=u.length;return h}function rn(u){if(!u.length)return null;var h=xs(u),f=Math.min(h[0].pageX,h[1].pageX),v=Math.min(h[0].pageY,h[1].pageY),_=Math.max(h[0].pageX,h[1].pageX),S=Math.max(h[0].pageY,h[1].pageY);return{x:f,y:v,left:f,top:v,right:_,bottom:S,width:_-f,height:S-v}}function Ln(u,h){var f=h+"X",v=h+"Y",_=xs(u),S=_[0][f]-_[1][f],C=_[0][v]-_[1][v];return ct(S,C)}function ws(u,h){var f=h+"X",v=h+"Y",_=xs(u),S=_[1][f]-_[0][f],C=_[1][v]-_[0][v];return 180*Math.atan2(C,S)/Math.PI}function Co(u){return b.string(u.pointerType)?u.pointerType:b.number(u.pointerType)?[void 0,void 0,"touch","pen","mouse"][u.pointerType]:/touch/.test(u.type||"")||u instanceof X.Touch?"touch":"mouse"}function Bn(u){var h=b.func(u.composedPath)?u.composedPath():u.path;return[te(h?h[0]:u.target),te(u.currentTarget)]}var li=function(){function u(h){s(this,u),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=h}return a(u,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),u}();Object.defineProperty(li.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var q=function(u,h){for(var f=0;f<h.length;f++){var v=h[f];u.push(v)}return u},J=function(u){return q([],u)},Ye=function(u,h){for(var f=0;f<u.length;f++)if(h(u[f],f,u))return f;return-1},et=function(u,h){return u[Ye(u,h)]},tt=function(u){c(f,u);var h=g(f);function f(v,_,S){var C;s(this,f),(C=h.call(this,_._interaction)).dropzone=void 0,C.dragEvent=void 0,C.relatedTarget=void 0,C.draggable=void 0,C.propagationStopped=!1,C.immediatePropagationStopped=!1;var R=S==="dragleave"?v.prev:v.cur,D=R.element,$=R.dropzone;return C.type=S,C.target=D,C.currentTarget=D,C.dropzone=$,C.dragEvent=_,C.relatedTarget=_.target,C.draggable=_.interactable,C.timeStamp=_.timeStamp,C}return a(f,[{key:"reject",value:function(){var v=this,_=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&_.cur.dropzone===this.dropzone&&_.cur.element===this.target)if(_.prev.dropzone=this.dropzone,_.prev.element=this.target,_.rejected=!0,_.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var S=_.activeDrops,C=Ye(S,function(D){var $=D.dropzone,O=D.element;return $===v.dropzone&&O===v.target});_.activeDrops.splice(C,1);var R=new f(_,this.dragEvent,"dropdeactivate");R.dropzone=this.dropzone,R.target=this.target,this.dropzone.fire(R)}else this.dropzone.fire(new f(_,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),f}(li);function je(u,h){for(var f=0,v=u.slice();f<v.length;f++){var _=v[f],S=_.dropzone,C=_.element;h.dropzone=S,h.target=C,S.fire(h),h.propagationStopped=h.immediatePropagationStopped=!1}}function ir(u,h){for(var f=function(S,C){for(var R=[],D=0,$=S.interactables.list;D<$.length;D++){var O=$[D];if(O.options.drop.enabled){var V=O.options.drop.accept;if(!(b.element(V)&&V!==C||b.string(V)&&!U(C,V)||b.func(V)&&!V({dropzone:O,draggableElement:C})))for(var Z=0,ne=O.getAllElements();Z<ne.length;Z++){var re=ne[Z];re!==C&&R.push({dropzone:O,element:re,rect:O.getRect(re)})}}}return R}(u,h),v=0;v<f.length;v++){var _=f[v];_.rect=_.dropzone.getRect(_.element)}return f}function Lr(u,h,f){for(var v=u.dropState,_=u.interactable,S=u.element,C=[],R=0,D=v.activeDrops;R<D.length;R++){var $=D[R],O=$.dropzone,V=$.element,Z=$.rect,ne=O.dropCheck(h,f,_,S,V,Z);C.push(ne?V:null)}var re=function(ce){for(var xe,ge,De,He=[],Ke=0;Ke<ce.length;Ke++){var $e=ce[Ke],Xe=ce[xe];if($e&&Ke!==xe)if(Xe){var Nt=j($e),ft=j(Xe);if(Nt!==$e.ownerDocument)if(ft!==$e.ownerDocument)if(Nt!==ft){He=He.length?He:K(Xe);var Jt=void 0;if(Xe instanceof X.HTMLElement&&$e instanceof X.SVGElement&&!($e instanceof X.SVGSVGElement)){if($e===ft)continue;Jt=$e.ownerSVGElement}else Jt=$e;for(var gr=K(Jt,Xe.ownerDocument),hi=0;gr[hi]&&gr[hi]===He[hi];)hi++;var Go=[gr[hi-1],gr[hi],He[hi]];if(Go[0])for(var Is=Go[0].lastChild;Is;){if(Is===Go[1]){xe=Ke,He=gr;break}if(Is===Go[2])break;Is=Is.previousSibling}}else De=Xe,(parseInt(I(ge=$e).getComputedStyle(ge).zIndex,10)||0)>=(parseInt(I(De).getComputedStyle(De).zIndex,10)||0)&&(xe=Ke);else xe=Ke}else xe=Ke}return xe}(C);return v.activeDrops[re]||null}function Rt(u,h,f){var v=u.dropState,_={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return f.type==="dragstart"&&(_.activate=new tt(v,f,"dropactivate"),_.activate.target=null,_.activate.dropzone=null),f.type==="dragend"&&(_.deactivate=new tt(v,f,"dropdeactivate"),_.deactivate.target=null,_.deactivate.dropzone=null),v.rejected||(v.cur.element!==v.prev.element&&(v.prev.dropzone&&(_.leave=new tt(v,f,"dragleave"),f.dragLeave=_.leave.target=v.prev.element,f.prevDropzone=_.leave.dropzone=v.prev.dropzone),v.cur.dropzone&&(_.enter=new tt(v,f,"dragenter"),f.dragEnter=v.cur.element,f.dropzone=v.cur.dropzone)),f.type==="dragend"&&v.cur.dropzone&&(_.drop=new tt(v,f,"drop"),f.dropzone=v.cur.dropzone,f.relatedTarget=v.cur.element),f.type==="dragmove"&&v.cur.dropzone&&(_.move=new tt(v,f,"dropmove"),f.dropzone=v.cur.dropzone)),_}function nr(u,h){var f=u.dropState,v=f.activeDrops,_=f.cur,S=f.prev;h.leave&&S.dropzone.fire(h.leave),h.enter&&_.dropzone.fire(h.enter),h.move&&_.dropzone.fire(h.move),h.drop&&_.dropzone.fire(h.drop),h.deactivate&&je(v,h.deactivate),f.prev.dropzone=_.dropzone,f.prev.element=_.element}function Fn(u,h){var f=u.interaction,v=u.iEvent,_=u.event;if(v.type==="dragmove"||v.type==="dragend"){var S=f.dropState;h.dynamicDrop&&(S.activeDrops=ir(h,f.element));var C=v,R=Lr(f,C,_);S.rejected=S.rejected&&!!R&&R.dropzone===S.cur.dropzone&&R.element===S.cur.element,S.cur.dropzone=R&&R.dropzone,S.cur.element=R&&R.element,S.events=Rt(f,0,C)}}var ci={id:"actions/drop",install:function(u){var h=u.actions,f=u.interactStatic,v=u.Interactable,_=u.defaults;u.usePlugin(Q),v.prototype.dropzone=function(S){return function(C,R){if(b.object(R)){if(C.options.drop.enabled=R.enabled!==!1,R.listeners){var D=Te(R.listeners),$=Object.keys(D).reduce(function(V,Z){return V[/^(enter|leave)/.test(Z)?"drag".concat(Z):/^(activate|deactivate|move)/.test(Z)?"drop".concat(Z):Z]=D[Z],V},{}),O=C.options.drop.listeners;O&&C.off(O),C.on($),C.options.drop.listeners=$}return b.func(R.ondrop)&&C.on("drop",R.ondrop),b.func(R.ondropactivate)&&C.on("dropactivate",R.ondropactivate),b.func(R.ondropdeactivate)&&C.on("dropdeactivate",R.ondropdeactivate),b.func(R.ondragenter)&&C.on("dragenter",R.ondragenter),b.func(R.ondragleave)&&C.on("dragleave",R.ondragleave),b.func(R.ondropmove)&&C.on("dropmove",R.ondropmove),/^(pointer|center)$/.test(R.overlap)?C.options.drop.overlap=R.overlap:b.number(R.overlap)&&(C.options.drop.overlap=Math.max(Math.min(1,R.overlap),0)),"accept"in R&&(C.options.drop.accept=R.accept),"checker"in R&&(C.options.drop.checker=R.checker),C}return b.bool(R)?(C.options.drop.enabled=R,C):C.options.drop}(this,S)},v.prototype.dropCheck=function(S,C,R,D,$,O){return function(V,Z,ne,re,ce,xe,ge){var De=!1;if(!(ge=ge||V.getRect(xe)))return!!V.options.drop.checker&&V.options.drop.checker(Z,ne,De,V,xe,re,ce);var He=V.options.drop.overlap;if(He==="pointer"){var Ke=Ee(re,ce,"drag"),$e=Eo(Z);$e.x+=Ke.x,$e.y+=Ke.y;var Xe=$e.x>ge.left&&$e.x<ge.right,Nt=$e.y>ge.top&&$e.y<ge.bottom;De=Xe&&Nt}var ft=re.getRect(ce);if(ft&&He==="center"){var Jt=ft.left+ft.width/2,gr=ft.top+ft.height/2;De=Jt>=ge.left&&Jt<=ge.right&&gr>=ge.top&&gr<=ge.bottom}return ft&&b.number(He)&&(De=Math.max(0,Math.min(ge.right,ft.right)-Math.max(ge.left,ft.left))*Math.max(0,Math.min(ge.bottom,ft.bottom)-Math.max(ge.top,ft.top))/(ft.width*ft.height)>=He),V.options.drop.checker&&(De=V.options.drop.checker(Z,ne,De,V,xe,re,ce)),De}(this,S,C,R,D,$,O)},f.dynamicDrop=function(S){return b.bool(S)?(u.dynamicDrop=S,f):u.dynamicDrop},ee(h.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),h.methodDict.drop="dropzone",u.dynamicDrop=!1,_.actions.drop=ci.defaults},listeners:{"interactions:before-action-start":function(u){var h=u.interaction;h.prepared.name==="drag"&&(h.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(u,h){var f=u.interaction,v=(u.event,u.iEvent);if(f.prepared.name==="drag"){var _=f.dropState;_.activeDrops=[],_.events={},_.activeDrops=ir(h,f.element),_.events=Rt(f,0,v),_.events.activate&&(je(_.activeDrops,_.events.activate),h.fire("actions/drop:start",{interaction:f,dragEvent:v}))}},"interactions:action-move":Fn,"interactions:after-action-move":function(u,h){var f=u.interaction,v=u.iEvent;if(f.prepared.name==="drag"){var _=f.dropState;nr(f,_.events),h.fire("actions/drop:move",{interaction:f,dragEvent:v}),_.events={}}},"interactions:action-end":function(u,h){if(u.interaction.prepared.name==="drag"){var f=u.interaction,v=u.iEvent;Fn(u,h),nr(f,f.dropState.events),h.fire("actions/drop:end",{interaction:f,dragEvent:v})}},"interactions:stop":function(u){var h=u.interaction;if(h.prepared.name==="drag"){var f=h.dropState;f&&(f.activeDrops=null,f.events=null,f.cur.dropzone=null,f.cur.element=null,f.prev.dropzone=null,f.prev.element=null,f.rejected=!1)}}},getActiveDrops:ir,getDrop:Lr,getDropEvents:Rt,fireDropEvents:nr,filterEventType:function(u){return u.search("drag")===0||u.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},qt=ci;function Nn(u){var h=u.interaction,f=u.iEvent,v=u.phase;if(h.prepared.name==="gesture"){var _=h.pointers.map(function($){return $.pointer}),S=v==="start",C=v==="end",R=h.interactable.options.deltaSource;if(f.touches=[_[0],_[1]],S)f.distance=Ln(_,R),f.box=rn(_),f.scale=1,f.ds=0,f.angle=ws(_,R),f.da=0,h.gesture.startDistance=f.distance,h.gesture.startAngle=f.angle;else if(C||h.pointers.length<2){var D=h.prevEvent;f.distance=D.distance,f.box=D.box,f.scale=D.scale,f.ds=0,f.angle=D.angle,f.da=0}else f.distance=Ln(_,R),f.box=rn(_),f.scale=f.distance/h.gesture.startDistance,f.angle=ws(_,R),f.ds=f.scale-h.gesture.scale,f.da=f.angle-h.gesture.angle;h.gesture.distance=f.distance,h.gesture.angle=f.angle,b.number(f.scale)&&f.scale!==1/0&&!isNaN(f.scale)&&(h.gesture.scale=f.scale)}}var $n={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(u){var h=u.actions,f=u.Interactable,v=u.defaults;f.prototype.gesturable=function(_){return b.object(_)?(this.options.gesture.enabled=_.enabled!==!1,this.setPerAction("gesture",_),this.setOnEvents("gesture",_),this):b.bool(_)?(this.options.gesture.enabled=_,this):this.options.gesture},h.map.gesture=$n,h.methodDict.gesture="gesturable",v.actions.gesture=$n.defaults},listeners:{"interactions:action-start":Nn,"interactions:action-move":Nn,"interactions:action-end":Nn,"interactions:new":function(u){u.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(u){if(!(u.interaction.pointers.length<2)){var h=u.interactable.options.gesture;if(h&&h.enabled)return u.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(u){return u.search("gesture")===0}},Po=$n;function nn(u,h,f,v,_,S,C){if(!h)return!1;if(h===!0){var R=b.number(S.width)?S.width:S.right-S.left,D=b.number(S.height)?S.height:S.bottom-S.top;if(C=Math.min(C,Math.abs((u==="left"||u==="right"?R:D)/2)),R<0&&(u==="left"?u="right":u==="right"&&(u="left")),D<0&&(u==="top"?u="bottom":u==="bottom"&&(u="top")),u==="left"){var $=R>=0?S.left:S.right;return f.x<$+C}if(u==="top"){var O=D>=0?S.top:S.bottom;return f.y<O+C}if(u==="right")return f.x>(R>=0?S.right:S.left)-C;if(u==="bottom")return f.y>(D>=0?S.bottom:S.top)-C}return!!b.element(v)&&(b.element(h)?h===v:Y(v,h,_))}function Un(u){var h=u.iEvent,f=u.interaction;if(f.prepared.name==="resize"&&f.resizeAxes){var v=h;f.interactable.options.resize.square?(f.resizeAxes==="y"?v.delta.x=v.delta.y:v.delta.y=v.delta.x,v.axes="xy"):(v.axes=f.resizeAxes,f.resizeAxes==="x"?v.delta.y=0:f.resizeAxes==="y"&&(v.delta.x=0))}}var Ht,fr,Kt={id:"actions/resize",before:["actions/drag"],install:function(u){var h=u.actions,f=u.browser,v=u.Interactable,_=u.defaults;Kt.cursors=function(S){return S.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(f),Kt.defaultMargin=f.supportsTouch||f.supportsPointerEvent?20:10,v.prototype.resizable=function(S){return function(C,R,D){return b.object(R)?(C.options.resize.enabled=R.enabled!==!1,C.setPerAction("resize",R),C.setOnEvents("resize",R),b.string(R.axis)&&/^x$|^y$|^xy$/.test(R.axis)?C.options.resize.axis=R.axis:R.axis===null&&(C.options.resize.axis=D.defaults.actions.resize.axis),b.bool(R.preserveAspectRatio)?C.options.resize.preserveAspectRatio=R.preserveAspectRatio:b.bool(R.square)&&(C.options.resize.square=R.square),C):b.bool(R)?(C.options.resize.enabled=R,C):C.options.resize}(this,S,u)},h.map.resize=Kt,h.methodDict.resize="resizable",_.actions.resize=Kt.defaults},listeners:{"interactions:new":function(u){u.interaction.resizeAxes="xy"},"interactions:action-start":function(u){(function(h){var f=h.iEvent,v=h.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var _=f,S=v.rect;v._rects={start:ee({},S),corrected:ee({},S),previous:ee({},S),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},_.edges=v.prepared.edges,_.rect=v._rects.corrected,_.deltaRect=v._rects.delta}})(u),Un(u)},"interactions:action-move":function(u){(function(h){var f=h.iEvent,v=h.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var _=f,S=v.interactable.options.resize.invert,C=S==="reposition"||S==="negate",R=v.rect,D=v._rects,$=D.start,O=D.corrected,V=D.delta,Z=D.previous;if(ee(Z,O),C){if(ee(O,R),S==="reposition"){if(O.top>O.bottom){var ne=O.top;O.top=O.bottom,O.bottom=ne}if(O.left>O.right){var re=O.left;O.left=O.right,O.right=re}}}else O.top=Math.min(R.top,$.bottom),O.bottom=Math.max(R.bottom,$.top),O.left=Math.min(R.left,$.right),O.right=Math.max(R.right,$.left);for(var ce in O.width=O.right-O.left,O.height=O.bottom-O.top,O)V[ce]=O[ce]-Z[ce];_.edges=v.prepared.edges,_.rect=O,_.deltaRect=V}})(u),Un(u)},"interactions:action-end":function(u){var h=u.iEvent,f=u.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var v=h;v.edges=f.prepared.edges,v.rect=f._rects.corrected,v.deltaRect=f._rects.delta}},"auto-start:check":function(u){var h=u.interaction,f=u.interactable,v=u.element,_=u.rect,S=u.buttons;if(_){var C=ee({},h.coords.cur.page),R=f.options.resize;if(R&&R.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||(S&R.mouseButtons)!=0)){if(b.object(R.edges)){var D={left:!1,right:!1,top:!1,bottom:!1};for(var $ in D)D[$]=nn($,R.edges[$],C,h._latestPointer.eventTarget,v,_,R.margin||Kt.defaultMargin);D.left=D.left&&!D.right,D.top=D.top&&!D.bottom,(D.left||D.right||D.top||D.bottom)&&(u.action={name:"resize",edges:D})}else{var O=R.axis!=="y"&&C.x>_.right-Kt.defaultMargin,V=R.axis!=="x"&&C.y>_.bottom-Kt.defaultMargin;(O||V)&&(u.action={name:"resize",axes:(O?"x":"")+(V?"y":"")})}return!u.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(u){var h=u.edges,f=u.axis,v=u.name,_=Kt.cursors,S=null;if(f)S=_[v+f];else if(h){for(var C="",R=0,D=["top","bottom","left","right"];R<D.length;R++){var $=D[R];h[$]&&(C+=$)}S=_[C]}return S},filterEventType:function(u){return u.search("resize")===0},defaultMargin:null},Ro=Kt,Io={id:"actions",install:function(u){u.usePlugin(Po),u.usePlugin(Ro),u.usePlugin(Q),u.usePlugin(qt)}},Gn=0,mr={request:function(u){return Ht(u)},cancel:function(u){return fr(u)},init:function(u){if(Ht=u.requestAnimationFrame,fr=u.cancelAnimationFrame,!Ht)for(var h=["ms","moz","webkit","o"],f=0;f<h.length;f++){var v=h[f];Ht=u["".concat(v,"RequestAnimationFrame")],fr=u["".concat(v,"CancelAnimationFrame")]||u["".concat(v,"CancelRequestAnimationFrame")]}Ht=Ht&&Ht.bind(u),fr=fr&&fr.bind(u),Ht||(Ht=function(_){var S=Date.now(),C=Math.max(0,16-(S-Gn)),R=u.setTimeout(function(){_(S+C)},C);return Gn=S+C,R},fr=function(_){return clearTimeout(_)})}},Le={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(u){Le.isScrolling=!0,mr.cancel(Le.i),u.autoScroll=Le,Le.interaction=u,Le.prevTime=Le.now(),Le.i=mr.request(Le.scroll)},stop:function(){Le.isScrolling=!1,Le.interaction&&(Le.interaction.autoScroll=null),mr.cancel(Le.i)},scroll:function(){var u=Le.interaction,h=u.interactable,f=u.element,v=u.prepared.name,_=h.options[v].autoScroll,S=Ts(_.container,h,f),C=Le.now(),R=(C-Le.prevTime)/1e3,D=_.speed*R;if(D>=1){var $={x:Le.x*D,y:Le.y*D};if($.x||$.y){var O=ko(S);b.window(S)?S.scrollBy($.x,$.y):S&&(S.scrollLeft+=$.x,S.scrollTop+=$.y);var V=ko(S),Z={x:V.x-O.x,y:V.y-O.y};(Z.x||Z.y)&&h.fire({type:"autoscroll",target:f,interactable:h,delta:Z,interaction:u,container:S})}Le.prevTime=C}Le.isScrolling&&(mr.cancel(Le.i),Le.i=mr.request(Le.scroll))},check:function(u,h){var f;return(f=u.options[h].autoScroll)==null?void 0:f.enabled},onInteractionMove:function(u){var h=u.interaction,f=u.pointer;if(h.interacting()&&Le.check(h.interactable,h.prepared.name))if(h.simulation)Le.x=Le.y=0;else{var v,_,S,C,R=h.interactable,D=h.element,$=h.prepared.name,O=R.options[$].autoScroll,V=Ts(O.container,R,D);if(b.window(V))C=f.clientX<Le.margin,v=f.clientY<Le.margin,_=f.clientX>V.innerWidth-Le.margin,S=f.clientY>V.innerHeight-Le.margin;else{var Z=ae(V);C=f.clientX<Z.left+Le.margin,v=f.clientY<Z.top+Le.margin,_=f.clientX>Z.right-Le.margin,S=f.clientY>Z.bottom-Le.margin}Le.x=_?1:C?-1:0,Le.y=S?1:v?-1:0,Le.isScrolling||(Le.margin=O.margin,Le.speed=O.speed,Le.start(h))}}};function Ts(u,h,f){return(b.string(u)?le(u,h,f):u)||I(f)}function ko(u){return b.window(u)&&(u=window.document.body),{x:u.scrollLeft,y:u.scrollTop}}var Ss={id:"auto-scroll",install:function(u){var h=u.defaults,f=u.actions;u.autoScroll=Le,Le.now=function(){return u.now()},f.phaselessTypes.autoscroll=!0,h.perAction.autoScroll=Le.defaults},listeners:{"interactions:new":function(u){u.interaction.autoScroll=null},"interactions:destroy":function(u){u.interaction.autoScroll=null,Le.stop(),Le.interaction&&(Le.interaction=null)},"interactions:stop":Le.stop,"interactions:action-move":function(u){return Le.onInteractionMove(u)}}},Ci=Ss;function Br(u,h){var f=!1;return function(){return f||(E.console.warn(h),f=!0),u.apply(this,arguments)}}function Es(u,h){return u.name=h.name,u.axis=h.axis,u.edges=h.edges,u}function Mo(u){return b.bool(u)?(this.options.styleCursor=u,this):u===null?(delete this.options.styleCursor,this):this.options.styleCursor}function $0(u){return b.func(u)?(this.options.actionChecker=u,this):u===null?(delete this.options.actionChecker,this):this.options.actionChecker}var U0={id:"auto-start/interactableMethods",install:function(u){var h=u.Interactable;h.prototype.getAction=function(f,v,_,S){var C=function(R,D,$,O,V){var Z=R.getRect(O),ne=D.buttons||{0:1,1:4,3:8,4:16}[D.button],re={action:null,interactable:R,interaction:$,element:O,rect:Z,buttons:ne};return V.fire("auto-start:check",re),re.action}(this,v,_,S,u);return this.options.actionChecker?this.options.actionChecker(f,v,C,this,S,_):C},h.prototype.ignoreFrom=Br(function(f){return this._backCompatOption("ignoreFrom",f)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),h.prototype.allowFrom=Br(function(f){return this._backCompatOption("allowFrom",f)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),h.prototype.actionChecker=$0,h.prototype.styleCursor=Mo}};function Ld(u,h,f,v,_){return h.testIgnoreAllow(h.options[u.name],f,v)&&h.options[u.name].enabled&&Do(h,f,u,_)?u:null}function G0(u,h,f,v,_,S,C){for(var R=0,D=v.length;R<D;R++){var $=v[R],O=_[R],V=$.getAction(h,f,u,O);if(V){var Z=Ld(V,$,O,S,C);if(Z)return{action:Z,interactable:$,element:O}}}return{action:null,interactable:null,element:null}}function Bd(u,h,f,v,_){var S=[],C=[],R=v;function D(O){S.push(O),C.push(R)}for(;b.element(R);){S=[],C=[],_.interactables.forEachMatch(R,D);var $=G0(u,h,f,S,C,v,_);if($.action&&!$.interactable.options[$.action.name].manualStart)return $;R=z(R)}return{action:null,interactable:null,element:null}}function Fd(u,h,f){var v=h.action,_=h.interactable,S=h.element;v=v||{name:null},u.interactable=_,u.element=S,Es(u.prepared,v),u.rect=_&&v.name?_.getRect(S):null,$d(u,f),f.fire("autoStart:prepared",{interaction:u})}function Do(u,h,f,v){var _=u.options,S=_[f.name].max,C=_[f.name].maxPerElement,R=v.autoStart.maxInteractions,D=0,$=0,O=0;if(!(S&&C&&R))return!1;for(var V=0,Z=v.interactions.list;V<Z.length;V++){var ne=Z[V],re=ne.prepared.name;if(ne.interacting()&&(++D>=R||ne.interactable===u&&(($+=re===f.name?1:0)>=S||ne.element===h&&(O++,re===f.name&&O>=C))))return!1}return R>0}function Nd(u,h){return b.number(u)?(h.autoStart.maxInteractions=u,this):h.autoStart.maxInteractions}function Nl(u,h,f){var v=f.autoStart.cursorElement;v&&v!==u&&(v.style.cursor=""),u.ownerDocument.documentElement.style.cursor=h,u.style.cursor=h,f.autoStart.cursorElement=h?u:null}function $d(u,h){var f=u.interactable,v=u.element,_=u.prepared;if(u.pointerType==="mouse"&&f&&f.options.styleCursor){var S="";if(_.name){var C=f.options[_.name].cursorChecker;S=b.func(C)?C(_,f,v,u._interacting):h.actions.map[_.name].getCursor(_)}Nl(u.element,S||"",h)}else h.autoStart.cursorElement&&Nl(h.autoStart.cursorElement,"",h)}var j0={id:"auto-start/base",before:["actions"],install:function(u){var h=u.interactStatic,f=u.defaults;u.usePlugin(U0),f.base.actionChecker=null,f.base.styleCursor=!0,ee(f.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),h.maxInteractions=function(v){return Nd(v,u)},u.autoStart={maxInteractions:1/0,withinInteractionLimit:Do,cursorElement:null}},listeners:{"interactions:down":function(u,h){var f=u.interaction,v=u.pointer,_=u.event,S=u.eventTarget;f.interacting()||Fd(f,Bd(f,v,_,S,h),h)},"interactions:move":function(u,h){(function(f,v){var _=f.interaction,S=f.pointer,C=f.event,R=f.eventTarget;_.pointerType!=="mouse"||_.pointerIsDown||_.interacting()||Fd(_,Bd(_,S,C,R,v),v)})(u,h),function(f,v){var _=f.interaction;if(_.pointerIsDown&&!_.interacting()&&_.pointerWasMoved&&_.prepared.name){v.fire("autoStart:before-start",f);var S=_.interactable,C=_.prepared.name;C&&S&&(S.options[C].manualStart||!Do(S,_.element,_.prepared,v)?_.stop():(_.start(_.prepared,S,_.element),$d(_,v)))}}(u,h)},"interactions:stop":function(u,h){var f=u.interaction,v=f.interactable;v&&v.options.styleCursor&&Nl(f.element,"",h)}},maxInteractions:Nd,withinInteractionLimit:Do,validateAction:Ld},$l=j0,H0={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(u,h){var f=u.interaction,v=u.eventTarget,_=u.dx,S=u.dy;if(f.prepared.name==="drag"){var C=Math.abs(_),R=Math.abs(S),D=f.interactable.options.drag,$=D.startAxis,O=C>R?"x":C<R?"y":"xy";if(f.prepared.axis=D.lockAxis==="start"?O[0]:D.lockAxis,O!=="xy"&&$!=="xy"&&$!==O){f.prepared.name=null;for(var V=v,Z=function(re){if(re!==f.interactable){var ce=f.interactable.options.drag;if(!ce.manualStart&&re.testIgnoreAllow(ce,V,v)){var xe=re.getAction(f.downPointer,f.downEvent,f,V);if(xe&&xe.name==="drag"&&function(ge,De){if(!De)return!1;var He=De.options.drag.startAxis;return ge==="xy"||He==="xy"||He===ge}(O,re)&&$l.validateAction(xe,re,V,v,h))return re}}};b.element(V);){var ne=h.interactables.forEachMatch(V,Z);if(ne){f.prepared.name="drag",f.interactable=ne,f.element=V;break}V=z(V)}}}}}};function Ul(u){var h=u.prepared&&u.prepared.name;if(!h)return null;var f=u.interactable.options;return f[h].hold||f[h].delay}var z0={id:"auto-start/hold",install:function(u){var h=u.defaults;u.usePlugin($l),h.perAction.hold=0,h.perAction.delay=0},listeners:{"interactions:new":function(u){u.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(u){var h=u.interaction,f=Ul(h);f>0&&(h.autoStartHoldTimer=setTimeout(function(){h.start(h.prepared,h.interactable,h.element)},f))},"interactions:move":function(u){var h=u.interaction,f=u.duplicate;h.autoStartHoldTimer&&h.pointerWasMoved&&!f&&(clearTimeout(h.autoStartHoldTimer),h.autoStartHoldTimer=null)},"autoStart:before-start":function(u){var h=u.interaction;Ul(h)>0&&(h.prepared.name=null)}},getHoldDuration:Ul},V0=z0,W0={id:"auto-start",install:function(u){u.usePlugin($l),u.usePlugin(V0),u.usePlugin(H0)}},X0=function(u){return/^(always|never|auto)$/.test(u)?(this.options.preventDefault=u,this):b.bool(u)?(this.options.preventDefault=u?"always":"never",this):this.options.preventDefault};function Y0(u){var h=u.interaction,f=u.event;h.interactable&&h.interactable.checkAndPreventDefault(f)}var Ud={id:"core/interactablePreventDefault",install:function(u){var h=u.Interactable;h.prototype.preventDefault=X0,h.prototype.checkAndPreventDefault=function(f){return function(v,_,S){var C=v.options.preventDefault;if(C!=="never")if(C!=="always"){if(_.events.supportsPassive&&/^touch(start|move)$/.test(S.type)){var R=I(S.target).document,D=_.getDocOptions(R);if(!D||!D.events||D.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(S.type)||b.element(S.target)&&U(S.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||S.preventDefault()}else S.preventDefault()}(this,u,f)},u.interactions.docEvents.push({type:"dragstart",listener:function(f){for(var v=0,_=u.interactions.list;v<_.length;v++){var S=_[v];if(S.element&&(S.element===f.target||L(S.element,f.target)))return void S.interactable.checkAndPreventDefault(f)}}})},listeners:["down","move","up","cancel"].reduce(function(u,h){return u["interactions:".concat(h)]=Y0,u},{})};function Oo(u,h){if(h.phaselessTypes[u])return!0;for(var f in h.map)if(u.indexOf(f)===0&&u.substr(f.length)in h.phases)return!0;return!1}function jn(u){var h={};for(var f in u){var v=u[f];b.plainObject(v)?h[f]=jn(v):b.array(v)?h[f]=J(v):h[f]=v}return h}var Gl=function(){function u(h){s(this,u),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=h,this.result=Lo(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(u,[{key:"start",value:function(h,f){var v,_,S=h.phase,C=this.interaction,R=function($){var O=$.interactable.options[$.prepared.name],V=O.modifiers;return V&&V.length?V:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Z){var ne=O[Z];return ne&&ne.enabled&&{options:ne,methods:ne._methods}}).filter(function(Z){return!!Z})}(C);this.prepareStates(R),this.startEdges=ee({},C.edges),this.edges=ee({},this.startEdges),this.startOffset=(v=C.rect,_=f,v?{left:_.x-v.left,top:_.y-v.top,right:v.right-_.x,bottom:v.bottom-_.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var D=this.fillArg({phase:S,pageCoords:f,preEnd:!1});return this.result=Lo(),this.startAll(D),this.result=this.setAll(D)}},{key:"fillArg",value:function(h){var f=this.interaction;return h.interaction=f,h.interactable=f.interactable,h.element=f.element,h.rect||(h.rect=f.rect),h.edges||(h.edges=this.startEdges),h.startOffset=this.startOffset,h}},{key:"startAll",value:function(h){for(var f=0,v=this.states;f<v.length;f++){var _=v[f];_.methods.start&&(h.state=_,_.methods.start(h))}}},{key:"setAll",value:function(h){var f=h.phase,v=h.preEnd,_=h.skipModifiers,S=h.rect,C=h.edges;h.coords=ee({},h.pageCoords),h.rect=ee({},S),h.edges=ee({},C);for(var R=_?this.states.slice(_):this.states,D=Lo(h.coords,h.rect),$=0;$<R.length;$++){var O,V=R[$],Z=V.options,ne=ee({},h.coords),re=null;(O=V.methods)!=null&&O.set&&this.shouldDo(Z,v,f)&&(h.state=V,re=V.methods.set(h),We(h.edges,h.rect,{x:h.coords.x-ne.x,y:h.coords.y-ne.y})),D.eventProps.push(re)}ee(this.edges,h.edges),D.delta.x=h.coords.x-h.pageCoords.x,D.delta.y=h.coords.y-h.pageCoords.y,D.rectDelta.left=h.rect.left-S.left,D.rectDelta.right=h.rect.right-S.right,D.rectDelta.top=h.rect.top-S.top,D.rectDelta.bottom=h.rect.bottom-S.bottom;var ce=this.result.coords,xe=this.result.rect;if(ce&&xe){var ge=D.rect.left!==xe.left||D.rect.right!==xe.right||D.rect.top!==xe.top||D.rect.bottom!==xe.bottom;D.changed=ge||ce.x!==D.coords.x||ce.y!==D.coords.y}return D}},{key:"applyToInteraction",value:function(h){var f=this.interaction,v=h.phase,_=f.coords.cur,S=f.coords.start,C=this.result,R=this.startDelta,D=C.delta;v==="start"&&ee(this.startDelta,C.delta);for(var $=0,O=[[S,R],[_,D]];$<O.length;$++){var V=O[$],Z=V[0],ne=V[1];Z.page.x+=ne.x,Z.page.y+=ne.y,Z.client.x+=ne.x,Z.client.y+=ne.y}var re=this.result.rectDelta,ce=h.rect||f.rect;ce.left+=re.left,ce.right+=re.right,ce.top+=re.top,ce.bottom+=re.bottom,ce.width=ce.right-ce.left,ce.height=ce.bottom-ce.top}},{key:"setAndApply",value:function(h){var f=this.interaction,v=h.phase,_=h.preEnd,S=h.skipModifiers,C=this.setAll(this.fillArg({preEnd:_,phase:v,pageCoords:h.modifiedCoords||f.coords.cur.page}));if(this.result=C,!C.changed&&(!S||S<this.states.length)&&f.interacting())return!1;if(h.modifiedCoords){var R=f.coords.cur.page,D={x:h.modifiedCoords.x-R.x,y:h.modifiedCoords.y-R.y};C.coords.x+=D.x,C.coords.y+=D.y,C.delta.x+=D.x,C.delta.y+=D.y}this.applyToInteraction(h)}},{key:"beforeEnd",value:function(h){var f=h.interaction,v=h.event,_=this.states;if(_&&_.length){for(var S=!1,C=0;C<_.length;C++){var R=_[C];h.state=R;var D=R.options,$=R.methods,O=$.beforeEnd&&$.beforeEnd(h);if(O)return this.endResult=O,!1;S=S||!S&&this.shouldDo(D,!0,h.phase,!0)}S&&f.move({event:v,preEnd:!0})}}},{key:"stop",value:function(h){var f=h.interaction;if(this.states&&this.states.length){var v=ee({states:this.states,interactable:f.interactable,element:f.element,rect:null},h);this.fillArg(v);for(var _=0,S=this.states;_<S.length;_++){var C=S[_];v.state=C,C.methods.stop&&C.methods.stop(v)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(h){this.states=[];for(var f=0;f<h.length;f++){var v=h[f],_=v.options,S=v.methods,C=v.name;this.states.push({options:_,methods:S,index:f,name:C})}return this.states}},{key:"restoreInteractionCoords",value:function(h){var f=h.interaction,v=f.coords,_=f.rect,S=f.modification;if(S.result){for(var C=S.startDelta,R=S.result,D=R.delta,$=R.rectDelta,O=0,V=[[v.start,C],[v.cur,D]];O<V.length;O++){var Z=V[O],ne=Z[0],re=Z[1];ne.page.x-=re.x,ne.page.y-=re.y,ne.client.x-=re.x,ne.client.y-=re.y}_.left-=$.left,_.right-=$.right,_.top-=$.top,_.bottom-=$.bottom}}},{key:"shouldDo",value:function(h,f,v,_){return!(!h||h.enabled===!1||_&&!h.endOnly||h.endOnly&&!f||v==="start"&&!h.setStart)}},{key:"copyFrom",value:function(h){this.startOffset=h.startOffset,this.startDelta=h.startDelta,this.startEdges=h.startEdges,this.edges=h.edges,this.states=h.states.map(function(f){return jn(f)}),this.result=Lo(ee({},h.result.coords),ee({},h.result.rect))}},{key:"destroy",value:function(){for(var h in this)this[h]=null}}]),u}();function Lo(u,h){return{rect:h,coords:u,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Pi(u,h){var f=u.defaults,v={start:u.start,set:u.set,beforeEnd:u.beforeEnd,stop:u.stop},_=function(S){var C=S||{};for(var R in C.enabled=C.enabled!==!1,f)R in C||(C[R]=f[R]);var D={options:C,methods:v,name:h,enable:function(){return C.enabled=!0,D},disable:function(){return C.enabled=!1,D}};return D};return h&&typeof h=="string"&&(_._defaults=f,_._methods=v),_}function As(u){var h=u.iEvent,f=u.interaction.modification.result;f&&(h.modifiers=f.eventProps)}var q0={id:"modifiers/base",before:["actions"],install:function(u){u.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(u){var h=u.interaction;h.modification=new Gl(h)},"interactions:before-action-start":function(u){var h=u.interaction,f=u.interaction.modification;f.start(u,h.coords.start.page),h.edges=f.edges,f.applyToInteraction(u)},"interactions:before-action-move":function(u){var h=u.interaction,f=h.modification,v=f.setAndApply(u);return h.edges=f.edges,v},"interactions:before-action-end":function(u){var h=u.interaction,f=h.modification,v=f.beforeEnd(u);return h.edges=f.startEdges,v},"interactions:action-start":As,"interactions:action-move":As,"interactions:action-end":As,"interactions:after-action-start":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-move":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:stop":function(u){return u.interaction.modification.stop(u)}}},Gd=q0,jd={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},jl=function(u){c(f,u);var h=g(f);function f(v,_,S,C,R,D,$){var O;s(this,f),(O=h.call(this,v)).relatedTarget=null,O.screenX=void 0,O.screenY=void 0,O.button=void 0,O.buttons=void 0,O.ctrlKey=void 0,O.shiftKey=void 0,O.altKey=void 0,O.metaKey=void 0,O.page=void 0,O.client=void 0,O.delta=void 0,O.rect=void 0,O.x0=void 0,O.y0=void 0,O.t0=void 0,O.dt=void 0,O.duration=void 0,O.clientX0=void 0,O.clientY0=void 0,O.velocity=void 0,O.speed=void 0,O.swipe=void 0,O.axes=void 0,O.preEnd=void 0,R=R||v.element;var V=v.interactable,Z=(V&&V.options||jd).deltaSource,ne=Ee(V,R,S),re=C==="start",ce=C==="end",xe=re?m(O):v.prevEvent,ge=re?v.coords.start:ce?{page:xe.page,client:xe.client,timeStamp:v.coords.cur.timeStamp}:v.coords.cur;return O.page=ee({},ge.page),O.client=ee({},ge.client),O.rect=ee({},v.rect),O.timeStamp=ge.timeStamp,ce||(O.page.x-=ne.x,O.page.y-=ne.y,O.client.x-=ne.x,O.client.y-=ne.y),O.ctrlKey=_.ctrlKey,O.altKey=_.altKey,O.shiftKey=_.shiftKey,O.metaKey=_.metaKey,O.button=_.button,O.buttons=_.buttons,O.target=R,O.currentTarget=R,O.preEnd=D,O.type=$||S+(C||""),O.interactable=V,O.t0=re?v.pointers[v.pointers.length-1].downTime:xe.t0,O.x0=v.coords.start.page.x-ne.x,O.y0=v.coords.start.page.y-ne.y,O.clientX0=v.coords.start.client.x-ne.x,O.clientY0=v.coords.start.client.y-ne.y,O.delta=re||ce?{x:0,y:0}:{x:O[Z].x-xe[Z].x,y:O[Z].y-xe[Z].y},O.dt=v.coords.delta.timeStamp,O.duration=O.timeStamp-O.t0,O.velocity=ee({},v.coords.velocity[Z]),O.speed=ct(O.velocity.x,O.velocity.y),O.swipe=ce||C==="inertiastart"?O.getSwipe():null,O}return a(f,[{key:"getSwipe",value:function(){var v=this._interaction;if(v.prevEvent.speed<600||this.timeStamp-v.prevEvent.timeStamp>150)return null;var _=180*Math.atan2(v.prevEvent.velocityY,v.prevEvent.velocityX)/Math.PI;_<0&&(_+=360);var S=112.5<=_&&_<247.5,C=202.5<=_&&_<337.5;return{up:C,down:!C&&22.5<=_&&_<157.5,left:S,right:!S&&(292.5<=_||_<67.5),angle:_,speed:v.prevEvent.speed,velocity:{x:v.prevEvent.velocityX,y:v.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),f}(li);Object.defineProperties(jl.prototype,{pageX:{get:function(){return this.page.x},set:function(u){this.page.x=u}},pageY:{get:function(){return this.page.y},set:function(u){this.page.y=u}},clientX:{get:function(){return this.client.x},set:function(u){this.client.x=u}},clientY:{get:function(){return this.client.y},set:function(u){this.client.y=u}},dx:{get:function(){return this.delta.x},set:function(u){this.delta.x=u}},dy:{get:function(){return this.delta.y},set:function(u){this.delta.y=u}},velocityX:{get:function(){return this.velocity.x},set:function(u){this.velocity.x=u}},velocityY:{get:function(){return this.velocity.y},set:function(u){this.velocity.y=u}}});var K0=a(function u(h,f,v,_,S){s(this,u),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=h,this.pointer=f,this.event=v,this.downTime=_,this.downTarget=S}),J0=function(u){return u.interactable="",u.element="",u.prepared="",u.pointerIsDown="",u.pointerWasMoved="",u._proxy="",u}({}),Hd=function(u){return u.start="",u.move="",u.end="",u.stop="",u.interacting="",u}({}),Q0=0,Z0=function(){function u(h){var f=this,v=h.pointerType,_=h.scopeFire;s(this,u),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Br(function(O){this.move(O)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Q0++,this._scopeFire=_,this.pointerType=v;var S=this;this._proxy={};var C=function(O){Object.defineProperty(f._proxy,O,{get:function(){return S[O]}})};for(var R in J0)C(R);var D=function(O){Object.defineProperty(f._proxy,O,{value:function(){return S[O].apply(S,arguments)}})};for(var $ in Hd)D($);this._scopeFire("interactions:new",{interaction:this})}return a(u,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(h,f,v){var _=this.updatePointer(h,f,v,!0),S=this.pointers[_];this._scopeFire("interactions:down",{pointer:h,event:f,eventTarget:v,pointerIndex:_,pointerInfo:S,type:"down",interaction:this})}},{key:"start",value:function(h,f,v){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(h.name==="gesture"?2:1)||!f.options[h.name].enabled)&&(Es(this.prepared,h),this.interactable=f,this.element=v,this.rect=f.getRect(v),this.edges=this.prepared.edges?ee({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(h,f,v){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(h,f,v,!1);var _,S,C=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(_=this.coords.cur.client.x-this.coords.start.client.x,S=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ct(_,S)>this.pointerMoveTolerance);var R,D,$,O=this.getPointerIndex(h),V={pointer:h,pointerIndex:O,pointerInfo:this.pointers[O],event:f,type:"move",eventTarget:v,dx:_,dy:S,duplicate:C,interaction:this};C||(R=this.coords.velocity,D=this.coords.delta,$=Math.max(D.timeStamp/1e3,.001),R.page.x=D.page.x/$,R.page.y=D.page.y/$,R.client.x=D.client.x/$,R.client.y=D.client.y/$,R.timeStamp=$),this._scopeFire("interactions:move",V),C||this.simulation||(this.interacting()&&(V.type=null,this.move(V)),this.pointerWasMoved&&Ot(this.coords.prev,this.coords.cur))}},{key:"move",value:function(h){h&&h.event||oi(this.coords.delta),(h=ee({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},h||{})).phase="move",this._doPhase(h)}},{key:"pointerUp",value:function(h,f,v,_){var S=this.getPointerIndex(h);S===-1&&(S=this.updatePointer(h,f,v,!1));var C=/cancel$/i.test(f.type)?"cancel":"up";this._scopeFire("interactions:".concat(C),{pointer:h,pointerIndex:S,pointerInfo:this.pointers[S],event:f,eventTarget:v,type:C,curEventTarget:_,interaction:this}),this.simulation||this.end(f),this.removePointer(h,f)}},{key:"documentBlur",value:function(h){this.end(h),this._scopeFire("interactions:blur",{event:h,type:"blur",interaction:this})}},{key:"end",value:function(h){var f;this._ending=!0,h=h||this._latestPointer.event,this.interacting()&&(f=this._doPhase({event:h,interaction:this,phase:"end"})),this._ending=!1,f===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(h){var f=tn(h);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ye(this.pointers,function(v){return v.id===f})}},{key:"getPointerInfo",value:function(h){return this.pointers[this.getPointerIndex(h)]}},{key:"updatePointer",value:function(h,f,v,_){var S,C,R,D=tn(h),$=this.getPointerIndex(h),O=this.pointers[$];return _=_!==!1&&(_||/(down|start)$/i.test(f.type)),O?O.pointer=h:(O=new K0(D,h,f,null,null),$=this.pointers.length,this.pointers.push(O)),Ao(this.coords.cur,this.pointers.map(function(V){return V.pointer}),this._now()),S=this.coords.delta,C=this.coords.prev,R=this.coords.cur,S.page.x=R.page.x-C.page.x,S.page.y=R.page.y-C.page.y,S.client.x=R.client.x-C.client.x,S.client.y=R.client.y-C.client.y,S.timeStamp=R.timeStamp-C.timeStamp,_&&(this.pointerIsDown=!0,O.downTime=this.coords.cur.timeStamp,O.downTarget=v,Yt(this.downPointer,h),this.interacting()||(Ot(this.coords.start,this.coords.cur),Ot(this.coords.prev,this.coords.cur),this.downEvent=f,this.pointerWasMoved=!1)),this._updateLatestPointer(h,f,v),this._scopeFire("interactions:update-pointer",{pointer:h,event:f,eventTarget:v,down:_,pointerInfo:O,pointerIndex:$,interaction:this}),$}},{key:"removePointer",value:function(h,f){var v=this.getPointerIndex(h);if(v!==-1){var _=this.pointers[v];this._scopeFire("interactions:remove-pointer",{pointer:h,event:f,eventTarget:null,pointerIndex:v,pointerInfo:_,interaction:this}),this.pointers.splice(v,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(h,f,v){this._latestPointer.pointer=h,this._latestPointer.event=f,this._latestPointer.eventTarget=v}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(h,f,v,_){return new jl(this,h,this.prepared.name,f,this.element,v,_)}},{key:"_fireEvent",value:function(h){var f;(f=this.interactable)==null||f.fire(h),(!this.prevEvent||h.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=h)}},{key:"_doPhase",value:function(h){var f=h.event,v=h.phase,_=h.preEnd,S=h.type,C=this.rect;if(C&&v==="move"&&(We(this.edges,C,this.coords.delta[this.interactable.options.deltaSource]),C.width=C.right-C.left,C.height=C.bottom-C.top),this._scopeFire("interactions:before-action-".concat(v),h)===!1)return!1;var R=h.iEvent=this._createPreparedEvent(f,v,_,S);return this._scopeFire("interactions:action-".concat(v),h),v==="start"&&(this.prevEvent=R),this._fireEvent(R),this._scopeFire("interactions:after-action-".concat(v),h),!0}},{key:"_now",value:function(){return Date.now()}}]),u}();function zd(u){Vd(u.interaction)}function Vd(u){if(!function(f){return!(!f.offset.pending.x&&!f.offset.pending.y)}(u))return!1;var h=u.offset.pending;return Hl(u.coords.cur,h),Hl(u.coords.delta,h),We(u.edges,u.rect,h),h.x=0,h.y=0,!0}function eb(u){var h=u.x,f=u.y;this.offset.pending.x+=h,this.offset.pending.y+=f,this.offset.total.x+=h,this.offset.total.y+=f}function Hl(u,h){var f=u.page,v=u.client,_=h.x,S=h.y;f.x+=_,f.y+=S,v.x+=_,v.y+=S}Hd.offsetBy="";var tb={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(u){u.Interaction.prototype.offsetBy=eb},listeners:{"interactions:new":function(u){u.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(u){return function(h){h.pointerIsDown&&(Hl(h.coords.cur,h.offset.total),h.offset.pending.x=0,h.offset.pending.y=0)}(u.interaction)},"interactions:before-action-start":zd,"interactions:before-action-move":zd,"interactions:before-action-end":function(u){var h=u.interaction;if(Vd(h))return h.move({offset:!0}),h.end(),!1},"interactions:stop":function(u){var h=u.interaction;h.offset.total.x=0,h.offset.total.y=0,h.offset.pending.x=0,h.offset.pending.y=0}}},Wd=tb,rb=function(){function u(h){s(this,u),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=h}return a(u,[{key:"start",value:function(h){var f=this.interaction,v=Bo(f);if(!v||!v.enabled)return!1;var _=f.coords.velocity.client,S=ct(_.x,_.y),C=this.modification||(this.modification=new Gl(f));if(C.copyFrom(f.modification),this.t0=f._now(),this.allowResume=v.allowResume,this.v0=S,this.currentOffset={x:0,y:0},this.startCoords=f.coords.cur.page,this.modifierArg=C.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-f.coords.cur.timeStamp<50&&S>v.minSpeed&&S>v.endSpeed)this.startInertia();else{if(C.result=C.setAll(this.modifierArg),!C.result.changed)return!1;this.startSmoothEnd()}return f.modification.result.rect=null,f.offsetBy(this.targetOffset),f._doPhase({interaction:f,event:h,phase:"inertiastart"}),f.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),f.modification.result.rect=null,this.active=!0,f.simulation=this,!0}},{key:"startInertia",value:function(){var h=this,f=this.interaction.coords.velocity.client,v=Bo(this.interaction),_=v.resistance,S=-Math.log(v.endSpeed/this.v0)/_;this.targetOffset={x:(f.x-S)/_,y:(f.y-S)/_},this.te=S,this.lambda_v0=_/this.v0,this.one_ve_v0=1-v.endSpeed/this.v0;var C=this.modification,R=this.modifierArg;R.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},C.result=C.setAll(R),C.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+C.result.delta.x,y:this.targetOffset.y+C.result.delta.y}),this.onNextFrame(function(){return h.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var h=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return h.smoothEndTick()})}},{key:"onNextFrame",value:function(h){var f=this;this.timeout=mr.request(function(){f.active&&h()})}},{key:"inertiaTick",value:function(){var h,f,v,_,S,C,R,D=this,$=this.interaction,O=Bo($).resistance,V=($._now()-this.t0)/1e3;if(V<this.te){var Z,ne=1-(Math.exp(-O*V)-this.lambda_v0)/this.one_ve_v0;this.isModified?(h=0,f=0,v=this.targetOffset.x,_=this.targetOffset.y,S=this.modifiedOffset.x,C=this.modifiedOffset.y,Z={x:Xd(R=ne,h,v,S),y:Xd(R,f,_,C)}):Z={x:this.targetOffset.x*ne,y:this.targetOffset.y*ne};var re={x:Z.x-this.currentOffset.x,y:Z.y-this.currentOffset.y};this.currentOffset.x+=re.x,this.currentOffset.y+=re.y,$.offsetBy(re),$.move(),this.onNextFrame(function(){return D.inertiaTick()})}else $.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var h=this,f=this.interaction,v=f._now()-this.t0,_=Bo(f).smoothEndDuration;if(v<_){var S={x:Yd(v,0,this.targetOffset.x,_),y:Yd(v,0,this.targetOffset.y,_)},C={x:S.x-this.currentOffset.x,y:S.y-this.currentOffset.y};this.currentOffset.x+=C.x,this.currentOffset.y+=C.y,f.offsetBy(C),f.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return h.smoothEndTick()})}else f.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(h){var f=h.pointer,v=h.event,_=h.eventTarget,S=this.interaction;S.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),S.updatePointer(f,v,_,!0),S._doPhase({interaction:S,event:v,phase:"resume"}),Ot(S.coords.prev,S.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,mr.cancel(this.timeout)}}]),u}();function Bo(u){var h=u.interactable,f=u.prepared;return h&&h.options&&f.name&&h.options[f.name].inertia}var ib={id:"inertia",before:["modifiers","actions"],install:function(u){var h=u.defaults;u.usePlugin(Wd),u.usePlugin(Gd),u.actions.phases.inertiastart=!0,u.actions.phases.resume=!0,h.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(u){var h=u.interaction;h.inertia=new rb(h)},"interactions:before-action-end":function(u){var h=u.interaction,f=u.event;return(!h._interacting||h.simulation||!h.inertia.start(f))&&null},"interactions:down":function(u){var h=u.interaction,f=u.eventTarget,v=h.inertia;if(v.active)for(var _=f;b.element(_);){if(_===h.element){v.resume(u);break}_=z(_)}},"interactions:stop":function(u){var h=u.interaction.inertia;h.active&&h.stop()},"interactions:before-action-resume":function(u){var h=u.interaction.modification;h.stop(u),h.start(u,u.interaction.coords.cur.page),h.applyToInteraction(u)},"interactions:before-action-inertiastart":function(u){return u.interaction.modification.setAndApply(u)},"interactions:action-resume":As,"interactions:action-inertiastart":As,"interactions:after-action-inertiastart":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-resume":function(u){return u.interaction.modification.restoreInteractionCoords(u)}}};function Xd(u,h,f,v){var _=1-u;return _*_*h+2*_*u*f+u*u*v}function Yd(u,h,f,v){return-f*(u/=v)*(u-2)+h}var nb=ib;function qd(u,h){for(var f=0;f<h.length;f++){var v=h[f];if(u.immediatePropagationStopped)break;v(u)}}var Kd=function(){function u(h){s(this,u),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=ee({},h||{})}return a(u,[{key:"fire",value:function(h){var f,v=this.global;(f=this.types[h.type])&&qd(h,f),!h.propagationStopped&&v&&(f=v[h.type])&&qd(h,f)}},{key:"on",value:function(h,f){var v=Te(h,f);for(h in v)this.types[h]=q(this.types[h]||[],v[h])}},{key:"off",value:function(h,f){var v=Te(h,f);for(h in v){var _=this.types[h];if(_&&_.length)for(var S=0,C=v[h];S<C.length;S++){var R=C[S],D=_.indexOf(R);D!==-1&&_.splice(D,1)}}}},{key:"getRect",value:function(h){return null}}]),u}(),sb=function(){function u(h){s(this,u),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=h,Yt(this,h)}return a(u,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),u}();function Cs(u){return b.object(u)?{capture:!!u.capture,passive:!!u.passive}:{capture:!!u,passive:!1}}function Fo(u,h){return u===h||(typeof u=="boolean"?!!h.capture===u&&!h.passive:!!u.capture==!!h.capture&&!!u.passive==!!h.passive)}var ob={id:"events",install:function(u){var h,f=[],v={},_=[],S={add:C,remove:R,addDelegate:function(O,V,Z,ne,re){var ce=Cs(re);if(!v[Z]){v[Z]=[];for(var xe=0;xe<_.length;xe++){var ge=_[xe];C(ge,Z,D),C(ge,Z,$,!0)}}var De=v[Z],He=et(De,function(Ke){return Ke.selector===O&&Ke.context===V});He||(He={selector:O,context:V,listeners:[]},De.push(He)),He.listeners.push({func:ne,options:ce})},removeDelegate:function(O,V,Z,ne,re){var ce,xe=Cs(re),ge=v[Z],De=!1;if(ge)for(ce=ge.length-1;ce>=0;ce--){var He=ge[ce];if(He.selector===O&&He.context===V){for(var Ke=He.listeners,$e=Ke.length-1;$e>=0;$e--){var Xe=Ke[$e];if(Xe.func===ne&&Fo(Xe.options,xe)){Ke.splice($e,1),Ke.length||(ge.splice(ce,1),R(V,Z,D),R(V,Z,$,!0)),De=!0;break}}if(De)break}}},delegateListener:D,delegateUseCapture:$,delegatedEvents:v,documents:_,targets:f,supportsOptions:!1,supportsPassive:!1};function C(O,V,Z,ne){if(O.addEventListener){var re=Cs(ne),ce=et(f,function(xe){return xe.eventTarget===O});ce||(ce={eventTarget:O,events:{}},f.push(ce)),ce.events[V]||(ce.events[V]=[]),et(ce.events[V],function(xe){return xe.func===Z&&Fo(xe.options,re)})||(O.addEventListener(V,Z,S.supportsOptions?re:re.capture),ce.events[V].push({func:Z,options:re}))}}function R(O,V,Z,ne){if(O.addEventListener&&O.removeEventListener){var re=Ye(f,function(Nt){return Nt.eventTarget===O}),ce=f[re];if(ce&&ce.events)if(V!=="all"){var xe=!1,ge=ce.events[V];if(ge){if(Z==="all"){for(var De=ge.length-1;De>=0;De--){var He=ge[De];R(O,V,He.func,He.options)}return}for(var Ke=Cs(ne),$e=0;$e<ge.length;$e++){var Xe=ge[$e];if(Xe.func===Z&&Fo(Xe.options,Ke)){O.removeEventListener(V,Z,S.supportsOptions?Ke:Ke.capture),ge.splice($e,1),ge.length===0&&(delete ce.events[V],xe=!0);break}}}xe&&!Object.keys(ce.events).length&&f.splice(re,1)}else for(V in ce.events)ce.events.hasOwnProperty(V)&&R(O,V,"all")}}function D(O,V){for(var Z=Cs(V),ne=new sb(O),re=v[O.type],ce=Bn(O)[0],xe=ce;b.element(xe);){for(var ge=0;ge<re.length;ge++){var De=re[ge],He=De.selector,Ke=De.context;if(U(xe,He)&&L(Ke,ce)&&L(Ke,xe)){var $e=De.listeners;ne.currentTarget=xe;for(var Xe=0;Xe<$e.length;Xe++){var Nt=$e[Xe];Fo(Nt.options,Z)&&Nt.func(ne)}}}xe=z(xe)}}function $(O){return D(O,!0)}return(h=u.document)==null||h.createElement("div").addEventListener("test",null,{get capture(){return S.supportsOptions=!0},get passive(){return S.supportsPassive=!0}}),u.events=S,S}},zl={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(u){for(var h=0,f=zl.methodOrder;h<f.length;h++){var v=f[h],_=zl[v](u);if(_)return _}return null},simulationResume:function(u){var h=u.pointerType,f=u.eventType,v=u.eventTarget,_=u.scope;if(!/down|start/i.test(f))return null;for(var S=0,C=_.interactions.list;S<C.length;S++){var R=C[S],D=v;if(R.simulation&&R.simulation.allowResume&&R.pointerType===h)for(;D;){if(D===R.element)return R;D=z(D)}}return null},mouseOrPen:function(u){var h,f=u.pointerId,v=u.pointerType,_=u.eventType,S=u.scope;if(v!=="mouse"&&v!=="pen")return null;for(var C=0,R=S.interactions.list;C<R.length;C++){var D=R[C];if(D.pointerType===v){if(D.simulation&&!Jd(D,f))continue;if(D.interacting())return D;h||(h=D)}}if(h)return h;for(var $=0,O=S.interactions.list;$<O.length;$++){var V=O[$];if(!(V.pointerType!==v||/down/i.test(_)&&V.simulation))return V}return null},hasPointer:function(u){for(var h=u.pointerId,f=0,v=u.scope.interactions.list;f<v.length;f++){var _=v[f];if(Jd(_,h))return _}return null},idle:function(u){for(var h=u.pointerType,f=0,v=u.scope.interactions.list;f<v.length;f++){var _=v[f];if(_.pointers.length===1){var S=_.interactable;if(S&&(!S.options.gesture||!S.options.gesture.enabled))continue}else if(_.pointers.length>=2)continue;if(!_.interacting()&&h===_.pointerType)return _}return null}};function Jd(u,h){return u.pointers.some(function(f){return f.id===h})}var ab=zl,Vl=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Qd(u,h){return function(f){var v=h.interactions.list,_=Co(f),S=Bn(f),C=S[0],R=S[1],D=[];if(/^touch/.test(f.type)){h.prevTouchTime=h.now();for(var $=0,O=f.changedTouches;$<O.length;$++){var V=O[$],Z={pointer:V,pointerId:tn(V),pointerType:_,eventType:f.type,eventTarget:C,curEventTarget:R,scope:h},ne=Zd(Z);D.push([Z.pointer,Z.eventTarget,Z.curEventTarget,ne])}}else{var re=!1;if(!M.supportsPointerEvent&&/mouse/.test(f.type)){for(var ce=0;ce<v.length&&!re;ce++)re=v[ce].pointerType!=="mouse"&&v[ce].pointerIsDown;re=re||h.now()-h.prevTouchTime<500||f.timeStamp===0}if(!re){var xe={pointer:f,pointerId:tn(f),pointerType:_,eventType:f.type,curEventTarget:R,eventTarget:C,scope:h},ge=Zd(xe);D.push([xe.pointer,xe.eventTarget,xe.curEventTarget,ge])}}for(var De=0;De<D.length;De++){var He=D[De],Ke=He[0],$e=He[1],Xe=He[2];He[3][u](Ke,f,$e,Xe)}}}function Zd(u){var h=u.pointerType,f=u.scope,v={interaction:ab.search(u),searchDetails:u};return f.fire("interactions:find",v),v.interaction||f.interactions.new({pointerType:h})}function Wl(u,h){var f=u.doc,v=u.scope,_=u.options,S=v.interactions.docEvents,C=v.events,R=C[h];for(var D in v.browser.isIOS&&!_.events&&(_.events={passive:!1}),C.delegatedEvents)R(f,D,C.delegateListener),R(f,D,C.delegateUseCapture,!0);for(var $=_&&_.events,O=0;O<S.length;O++){var V=S[O];R(f,V.type,V.listener,$)}}var lb={id:"core/interactions",install:function(u){for(var h={},f=0;f<Vl.length;f++){var v=Vl[f];h[v]=Qd(v,u)}var _,S=M.pEventTypes;function C(){for(var R=0,D=u.interactions.list;R<D.length;R++){var $=D[R];if($.pointerIsDown&&$.pointerType==="touch"&&!$._interacting)for(var O=function(){var ne=Z[V];u.documents.some(function(re){return L(re.doc,ne.downTarget)})||$.removePointer(ne.pointer,ne.event)},V=0,Z=$.pointers;V<Z.length;V++)O()}}(_=X.PointerEvent?[{type:S.down,listener:C},{type:S.down,listener:h.pointerDown},{type:S.move,listener:h.pointerMove},{type:S.up,listener:h.pointerUp},{type:S.cancel,listener:h.pointerUp}]:[{type:"mousedown",listener:h.pointerDown},{type:"mousemove",listener:h.pointerMove},{type:"mouseup",listener:h.pointerUp},{type:"touchstart",listener:C},{type:"touchstart",listener:h.pointerDown},{type:"touchmove",listener:h.pointerMove},{type:"touchend",listener:h.pointerUp},{type:"touchcancel",listener:h.pointerUp}]).push({type:"blur",listener:function(R){for(var D=0,$=u.interactions.list;D<$.length;D++)$[D].documentBlur(R)}}),u.prevTouchTime=0,u.Interaction=function(R){c($,R);var D=g($);function $(){return s(this,$),D.apply(this,arguments)}return a($,[{key:"pointerMoveTolerance",get:function(){return u.interactions.pointerMoveTolerance},set:function(O){u.interactions.pointerMoveTolerance=O}},{key:"_now",value:function(){return u.now()}}]),$}(Z0),u.interactions={list:[],new:function(R){R.scopeFire=function($,O){return u.fire($,O)};var D=new u.Interaction(R);return u.interactions.list.push(D),D},listeners:h,docEvents:_,pointerMoveTolerance:1},u.usePlugin(Ud)},listeners:{"scope:add-document":function(u){return Wl(u,"add")},"scope:remove-document":function(u){return Wl(u,"remove")},"interactable:unset":function(u,h){for(var f=u.interactable,v=h.interactions.list.length-1;v>=0;v--){var _=h.interactions.list[v];_.interactable===f&&(_.stop(),h.fire("interactions:destroy",{interaction:_}),_.destroy(),h.interactions.list.length>2&&h.interactions.list.splice(v,1))}}},onDocSignal:Wl,doOnInteractions:Qd,methodNames:Vl},cb=lb,Ri=function(u){return u[u.On=0]="On",u[u.Off=1]="Off",u}(Ri||{}),hb=function(){function u(h,f,v,_){s(this,u),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Kd,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=f.actions,this.target=h,this._context=f.context||v,this._win=I(Ae(h)?this._context:h),this._doc=this._win.document,this._scopeEvents=_,this.set(f)}return a(u,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(h,f){return b.func(f.onstart)&&this.on("".concat(h,"start"),f.onstart),b.func(f.onmove)&&this.on("".concat(h,"move"),f.onmove),b.func(f.onend)&&this.on("".concat(h,"end"),f.onend),b.func(f.oninertiastart)&&this.on("".concat(h,"inertiastart"),f.oninertiastart),this}},{key:"updatePerActionListeners",value:function(h,f,v){var _,S=this,C=(_=this._actions.map[h])==null?void 0:_.filterEventType,R=function(D){return(C==null||C(D))&&Oo(D,S._actions)};(b.array(f)||b.object(f))&&this._onOff(Ri.Off,h,f,void 0,R),(b.array(v)||b.object(v))&&this._onOff(Ri.On,h,v,void 0,R)}},{key:"setPerAction",value:function(h,f){var v=this._defaults;for(var _ in f){var S=_,C=this.options[h],R=f[S];S==="listeners"&&this.updatePerActionListeners(h,C.listeners,R),b.array(R)?C[S]=J(R):b.plainObject(R)?(C[S]=ee(C[S]||{},jn(R)),b.object(v.perAction[S])&&"enabled"in v.perAction[S]&&(C[S].enabled=R.enabled!==!1)):b.bool(R)&&b.object(v.perAction[S])?C[S].enabled=R:C[S]=R}}},{key:"getRect",value:function(h){return h=h||(b.element(this.target)?this.target:null),b.string(this.target)&&(h=h||this._context.querySelector(this.target)),pe(h)}},{key:"rectChecker",value:function(h){var f=this;return b.func(h)?(this.getRect=function(v){var _=ee({},h.apply(f,v));return"width"in _||(_.width=_.right-_.left,_.height=_.bottom-_.top),_},this):h===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(h,f){if(Ae(f)||b.object(f)){for(var v in this.options[h]=f,this._actions.map)this.options[v][h]=f;return this}return this.options[h]}},{key:"origin",value:function(h){return this._backCompatOption("origin",h)}},{key:"deltaSource",value:function(h){return h==="page"||h==="client"?(this.options.deltaSource=h,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var h=this.target;return b.string(h)?Array.from(this._context.querySelectorAll(h)):b.func(h)&&h.getAllElements?h.getAllElements():b.element(h)?[h]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(h){return this._context===h.ownerDocument||L(this._context,h)}},{key:"testIgnoreAllow",value:function(h,f,v){return!this.testIgnore(h.ignoreFrom,f,v)&&this.testAllow(h.allowFrom,f,v)}},{key:"testAllow",value:function(h,f,v){return!h||!!b.element(v)&&(b.string(h)?Y(v,h,f):!!b.element(h)&&L(h,v))}},{key:"testIgnore",value:function(h,f,v){return!(!h||!b.element(v))&&(b.string(h)?Y(v,h,f):!!b.element(h)&&L(h,v))}},{key:"fire",value:function(h){return this.events.fire(h),this}},{key:"_onOff",value:function(h,f,v,_,S){b.object(f)&&!b.array(f)&&(_=v,v=null);var C=Te(f,v,S);for(var R in C){R==="wheel"&&(R=M.wheelEvent);for(var D=0,$=C[R];D<$.length;D++){var O=$[D];Oo(R,this._actions)?this.events[h===Ri.On?"on":"off"](R,O):b.string(this.target)?this._scopeEvents[h===Ri.On?"addDelegate":"removeDelegate"](this.target,this._context,R,O,_):this._scopeEvents[h===Ri.On?"add":"remove"](this.target,R,O,_)}}return this}},{key:"on",value:function(h,f,v){return this._onOff(Ri.On,h,f,v)}},{key:"off",value:function(h,f,v){return this._onOff(Ri.Off,h,f,v)}},{key:"set",value:function(h){var f=this._defaults;for(var v in b.object(h)||(h={}),this.options=jn(f.base),this._actions.methodDict){var _=v,S=this._actions.methodDict[_];this.options[_]={},this.setPerAction(_,ee(ee({},f.perAction),f.actions[_])),this[S](h[_])}for(var C in h)C!=="getRect"?b.func(this[C])&&this[C](h[C]):this.rectChecker(h.getRect);return this}},{key:"unset",value:function(){if(b.string(this.target))for(var h in this._scopeEvents.delegatedEvents)for(var f=this._scopeEvents.delegatedEvents[h],v=f.length-1;v>=0;v--){var _=f[v],S=_.selector,C=_.context,R=_.listeners;S===this.target&&C===this._context&&f.splice(v,1);for(var D=R.length-1;D>=0;D--)this._scopeEvents.removeDelegate(this.target,this._context,h,R[D][0],R[D][1])}else this._scopeEvents.remove(this.target,"all")}}]),u}(),ub=function(){function u(h){var f=this;s(this,u),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=h,h.addListeners({"interactable:unset":function(v){var _=v.interactable,S=_.target,C=b.string(S)?f.selectorMap[S]:S[f.scope.id],R=Ye(C,function(D){return D===_});C.splice(R,1)}})}return a(u,[{key:"new",value:function(h,f){f=ee(f||{},{actions:this.scope.actions});var v=new this.scope.Interactable(h,f,this.scope.document,this.scope.events);return this.scope.addDocument(v._doc),this.list.push(v),b.string(h)?(this.selectorMap[h]||(this.selectorMap[h]=[]),this.selectorMap[h].push(v)):(v.target[this.scope.id]||Object.defineProperty(h,this.scope.id,{value:[],configurable:!0}),h[this.scope.id].push(v)),this.scope.fire("interactable:new",{target:h,options:f,interactable:v,win:this.scope._win}),v}},{key:"getExisting",value:function(h,f){var v=f&&f.context||this.scope.document,_=b.string(h),S=_?this.selectorMap[h]:h[this.scope.id];if(S)return et(S,function(C){return C._context===v&&(_||C.inContext(h))})}},{key:"forEachMatch",value:function(h,f){for(var v=0,_=this.list;v<_.length;v++){var S=_[v],C=void 0;if((b.string(S.target)?b.element(h)&&U(h,S.target):h===S.target)&&S.inContext(h)&&(C=f(S)),C!==void 0)return C}}}]),u}(),db=function(){function u(){var h=this;s(this,u),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=M,this.defaults=jn(jd),this.Eventable=Kd,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(v){var _=function S(C,R){var D=v.interactables.getExisting(C,R);return D||((D=v.interactables.new(C,R)).events.global=S.globalEvents),D};return _.getPointerAverage=Ai,_.getTouchBBox=rn,_.getTouchDistance=Ln,_.getTouchAngle=ws,_.getElementRect=pe,_.getElementClientRect=ae,_.matchesSelector=U,_.closest=k,_.globalEvents={},_.version="1.10.27",_.scope=v,_.use=function(S,C){return this.scope.usePlugin(S,C),this},_.isSet=function(S,C){return!!this.scope.interactables.get(S,C&&C.context)},_.on=Br(function(S,C,R){if(b.string(S)&&S.search(" ")!==-1&&(S=S.trim().split(/ +/)),b.array(S)){for(var D=0,$=S;D<$.length;D++){var O=$[D];this.on(O,C,R)}return this}if(b.object(S)){for(var V in S)this.on(V,S[V],C);return this}return Oo(S,this.scope.actions)?this.globalEvents[S]?this.globalEvents[S].push(C):this.globalEvents[S]=[C]:this.scope.events.add(this.scope.document,S,C,{options:R}),this},"The interact.on() method is being deprecated"),_.off=Br(function(S,C,R){if(b.string(S)&&S.search(" ")!==-1&&(S=S.trim().split(/ +/)),b.array(S)){for(var D=0,$=S;D<$.length;D++){var O=$[D];this.off(O,C,R)}return this}if(b.object(S)){for(var V in S)this.off(V,S[V],C);return this}var Z;return Oo(S,this.scope.actions)?S in this.globalEvents&&(Z=this.globalEvents[S].indexOf(C))!==-1&&this.globalEvents[S].splice(Z,1):this.scope.events.remove(this.scope.document,S,C,R),this},"The interact.off() method is being deprecated"),_.debug=function(){return this.scope},_.supportsTouch=function(){return M.supportsTouch},_.supportsPointerEvent=function(){return M.supportsPointerEvent},_.stop=function(){for(var S=0,C=this.scope.interactions.list;S<C.length;S++)C[S].stop();return this},_.pointerMoveTolerance=function(S){return b.number(S)?(this.scope.interactions.pointerMoveTolerance=S,this):this.scope.interactions.pointerMoveTolerance},_.addDocument=function(S,C){this.scope.addDocument(S,C)},_.removeDocument=function(S){this.scope.removeDocument(S)},_}(this),this.InteractEvent=jl,this.Interactable=void 0,this.interactables=new ub(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(v){return h.removeDocument(v.target)};var f=this;this.Interactable=function(v){c(S,v);var _=g(S);function S(){return s(this,S),_.apply(this,arguments)}return a(S,[{key:"_defaults",get:function(){return f.defaults}},{key:"set",value:function(C){return y(d(S.prototype),"set",this).call(this,C),f.fire("interactable:set",{options:C,interactable:this}),this}},{key:"unset",value:function(){y(d(S.prototype),"unset",this).call(this);var C=f.interactables.list.indexOf(this);C<0||(f.interactables.list.splice(C,1),f.fire("interactable:unset",{interactable:this}))}}]),S}(hb)}return a(u,[{key:"addListeners",value:function(h,f){this.listenerMaps.push({id:f,map:h})}},{key:"fire",value:function(h,f){for(var v=0,_=this.listenerMaps;v<_.length;v++){var S=_[v].map[h];if(S&&S(f,this,h)===!1)return!1}}},{key:"init",value:function(h){return this.isInitialized?this:function(f,v){return f.isInitialized=!0,b.window(v)&&P(v),X.init(v),M.init(v),mr.init(v),f.window=v,f.document=v.document,f.usePlugin(cb),f.usePlugin(ob),f}(this,h)}},{key:"pluginIsInstalled",value:function(h){var f=h.id;return f?!!this._plugins.map[f]:this._plugins.list.indexOf(h)!==-1}},{key:"usePlugin",value:function(h,f){if(!this.isInitialized)return this;if(this.pluginIsInstalled(h))return this;if(h.id&&(this._plugins.map[h.id]=h),this._plugins.list.push(h),h.install&&h.install(this,f),h.listeners&&h.before){for(var v=0,_=this.listenerMaps.length,S=h.before.reduce(function(R,D){return R[D]=!0,R[ep(D)]=!0,R},{});v<_;v++){var C=this.listenerMaps[v].id;if(C&&(S[C]||S[ep(C)]))break}this.listenerMaps.splice(v,0,{id:h.id,map:h.listeners})}else h.listeners&&this.listenerMaps.push({id:h.id,map:h.listeners});return this}},{key:"addDocument",value:function(h,f){if(this.getDocIndex(h)!==-1)return!1;var v=I(h);f=f?ee({},f):{},this.documents.push({doc:h,options:f}),this.events.documents.push(h),h!==this.document&&this.events.add(v,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:h,window:v,scope:this,options:f})}},{key:"removeDocument",value:function(h){var f=this.getDocIndex(h),v=I(h),_=this.documents[f].options;this.events.remove(v,"unload",this.onWindowUnload),this.documents.splice(f,1),this.events.documents.splice(f,1),this.fire("scope:remove-document",{doc:h,window:v,scope:this,options:_})}},{key:"getDocIndex",value:function(h){for(var f=0;f<this.documents.length;f++)if(this.documents[f].doc===h)return f;return-1}},{key:"getDocOptions",value:function(h){var f=this.getDocIndex(h);return f===-1?null:this.documents[f].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),u}();function ep(u){return u&&u.replace(/\/.*$/,"")}var tp=new db,Ft=tp.interactStatic,pb=typeof globalThis<"u"?globalThis:window;tp.init(pb);var fb=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(u){var h=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(v){var _=v[0],S=v[1];return _ in u||S in u}),f=function(v,_){for(var S=u.range,C=u.limits,R=C===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:C,D=u.offset,$=D===void 0?{x:0,y:0}:D,O={range:S,grid:u,x:null,y:null},V=0;V<h.length;V++){var Z=h[V],ne=Z[0],re=Z[1],ce=Math.round((v-$.x)/u[ne]),xe=Math.round((_-$.y)/u[re]);O[ne]=Math.max(R.left,Math.min(R.right,ce*u[ne]+$.x)),O[re]=Math.max(R.top,Math.min(R.bottom,xe*u[re]+$.y))}return O};return f.grid=u,f.coordFields=h,f}}),mb={id:"snappers",install:function(u){var h=u.interactStatic;h.snappers=ee(h.snappers||{},fb),h.createSnapGrid=h.snappers.grid}},gb=mb,vb={start:function(u){var h=u.state,f=u.rect,v=u.edges,_=u.pageCoords,S=h.options,C=S.ratio,R=S.enabled,D=h.options,$=D.equalDelta,O=D.modifiers;C==="preserve"&&(C=f.width/f.height),h.startCoords=ee({},_),h.startRect=ee({},f),h.ratio=C,h.equalDelta=$;var V=h.linkedEdges={top:v.top||v.left&&!v.bottom,left:v.left||v.top&&!v.right,bottom:v.bottom||v.right&&!v.top,right:v.right||v.bottom&&!v.left};if(h.xIsPrimaryAxis=!(!v.left&&!v.right),h.equalDelta){var Z=(V.left?1:-1)*(V.top?1:-1);h.edgeSign={x:Z,y:Z}}else h.edgeSign={x:V.left?-1:1,y:V.top?-1:1};if(R!==!1&&ee(v,V),O!=null&&O.length){var ne=new Gl(u.interaction);ne.copyFrom(u.interaction.modification),ne.prepareStates(O),h.subModification=ne,ne.startAll(i({},u))}},set:function(u){var h=u.state,f=u.rect,v=u.coords,_=h.linkedEdges,S=ee({},v),C=h.equalDelta?yb:_b;if(ee(u.edges,_),C(h,h.xIsPrimaryAxis,v,f),!h.subModification)return null;var R=ee({},f);We(_,R,{x:v.x-S.x,y:v.y-S.y});var D=h.subModification.setAll(i(i({},u),{},{rect:R,edges:_,pageCoords:v,prevCoords:v,prevRect:R})),$=D.delta;return D.changed&&(C(h,Math.abs($.x)>Math.abs($.y),D.coords,D.rect),ee(v,D.coords)),D.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function yb(u,h,f){var v=u.startCoords,_=u.edgeSign;h?f.y=v.y+(f.x-v.x)*_.y:f.x=v.x+(f.y-v.y)*_.x}function _b(u,h,f,v){var _=u.startRect,S=u.startCoords,C=u.ratio,R=u.edgeSign;if(h){var D=v.width/C;f.y=S.y+(D-_.height)*R.y}else{var $=v.height*C;f.x=S.x+($-_.width)*R.x}}var bb=Pi(vb,"aspectRatio"),rp=function(){};rp._defaults={};var No=rp;function sn(u,h,f){return b.func(u)?we(u,h.interactable,h.element,[f.x,f.y,h]):we(u,h.interactable,h.element)}var $o={start:function(u){var h=u.rect,f=u.startOffset,v=u.state,_=u.interaction,S=u.pageCoords,C=v.options,R=C.elementRect,D=ee({left:0,top:0,right:0,bottom:0},C.offset||{});if(h&&R){var $=sn(C.restriction,_,S);if($){var O=$.right-$.left-h.width,V=$.bottom-$.top-h.height;O<0&&(D.left+=O,D.right+=O),V<0&&(D.top+=V,D.bottom+=V)}D.left+=f.left-h.width*R.left,D.top+=f.top-h.height*R.top,D.right+=f.right-h.width*(1-R.right),D.bottom+=f.bottom-h.height*(1-R.bottom)}v.offset=D},set:function(u){var h=u.coords,f=u.interaction,v=u.state,_=v.options,S=v.offset,C=sn(_.restriction,f,h);if(C){var R=function(D){return!D||"left"in D&&"top"in D||((D=ee({},D)).left=D.x||0,D.top=D.y||0,D.right=D.right||D.left+D.width,D.bottom=D.bottom||D.top+D.height),D}(C);h.x=Math.max(Math.min(R.right-S.right,h.x),R.left+S.left),h.y=Math.max(Math.min(R.bottom-S.bottom,h.y),R.top+S.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},xb=Pi($o,"restrict"),ip={top:1/0,left:1/0,bottom:-1/0,right:-1/0},np={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function sp(u,h){for(var f=0,v=["top","left","bottom","right"];f<v.length;f++){var _=v[f];_ in u||(u[_]=h[_])}return u}var Ps={noInner:ip,noOuter:np,start:function(u){var h,f=u.interaction,v=u.startOffset,_=u.state,S=_.options;S&&(h=Pe(sn(S.offset,f,f.coords.start.page))),h=h||{x:0,y:0},_.offset={top:h.y+v.top,left:h.x+v.left,bottom:h.y-v.bottom,right:h.x-v.right}},set:function(u){var h=u.coords,f=u.edges,v=u.interaction,_=u.state,S=_.offset,C=_.options;if(f){var R=ee({},h),D=sn(C.inner,v,R)||{},$=sn(C.outer,v,R)||{};sp(D,ip),sp($,np),f.top?h.y=Math.min(Math.max($.top+S.top,R.y),D.top+S.top):f.bottom&&(h.y=Math.max(Math.min($.bottom+S.bottom,R.y),D.bottom+S.bottom)),f.left?h.x=Math.min(Math.max($.left+S.left,R.x),D.left+S.left):f.right&&(h.x=Math.max(Math.min($.right+S.right,R.x),D.right+S.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},wb=Pi(Ps,"restrictEdges"),Tb=ee({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(u){}},$o.defaults),Sb=Pi({start:$o.start,set:$o.set,defaults:Tb},"restrictRect"),Eb={width:-1/0,height:-1/0},Ab={width:1/0,height:1/0},Cb=Pi({start:function(u){return Ps.start(u)},set:function(u){var h=u.interaction,f=u.state,v=u.rect,_=u.edges,S=f.options;if(_){var C=Ne(sn(S.min,h,u.coords))||Eb,R=Ne(sn(S.max,h,u.coords))||Ab;f.options={endOnly:S.endOnly,inner:ee({},Ps.noInner),outer:ee({},Ps.noOuter)},_.top?(f.options.inner.top=v.bottom-C.height,f.options.outer.top=v.bottom-R.height):_.bottom&&(f.options.inner.bottom=v.top+C.height,f.options.outer.bottom=v.top+R.height),_.left?(f.options.inner.left=v.right-C.width,f.options.outer.left=v.right-R.width):_.right&&(f.options.inner.right=v.left+C.width,f.options.outer.right=v.left+R.width),Ps.set(u),f.options=S}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Xl={start:function(u){var h,f=u.interaction,v=u.interactable,_=u.element,S=u.rect,C=u.state,R=u.startOffset,D=C.options,$=D.offsetWithOrigin?function(Z){var ne=Z.interaction.element,re=Pe(we(Z.state.options.origin,null,null,[ne])),ce=re||Ee(Z.interactable,ne,Z.interaction.prepared.name);return ce}(u):{x:0,y:0};if(D.offset==="startCoords")h={x:f.coords.start.page.x,y:f.coords.start.page.y};else{var O=we(D.offset,v,_,[f]);(h=Pe(O)||{x:0,y:0}).x+=$.x,h.y+=$.y}var V=D.relativePoints;C.offsets=S&&V&&V.length?V.map(function(Z,ne){return{index:ne,relativePoint:Z,x:R.left-S.width*Z.x+h.x,y:R.top-S.height*Z.y+h.y}}):[{index:0,relativePoint:null,x:h.x,y:h.y}]},set:function(u){var h=u.interaction,f=u.coords,v=u.state,_=v.options,S=v.offsets,C=Ee(h.interactable,h.element,h.prepared.name),R=ee({},f),D=[];_.offsetWithOrigin||(R.x-=C.x,R.y-=C.y);for(var $=0,O=S;$<O.length;$++)for(var V=O[$],Z=R.x-V.x,ne=R.y-V.y,re=0,ce=_.targets.length;re<ce;re++){var xe=_.targets[re],ge=void 0;(ge=b.func(xe)?xe(Z,ne,h._proxy,V,re):xe)&&D.push({x:(b.number(ge.x)?ge.x:Z)+V.x,y:(b.number(ge.y)?ge.y:ne)+V.y,range:b.number(ge.range)?ge.range:_.range,source:xe,index:re,offset:V})}for(var De={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},He=0;He<D.length;He++){var Ke=D[He],$e=Ke.range,Xe=Ke.x-R.x,Nt=Ke.y-R.y,ft=ct(Xe,Nt),Jt=ft<=$e;$e===1/0&&De.inRange&&De.range!==1/0&&(Jt=!1),De.target&&!(Jt?De.inRange&&$e!==1/0?ft/$e<De.distance/De.range:$e===1/0&&De.range!==1/0||ft<De.distance:!De.inRange&&ft<De.distance)||(De.target=Ke,De.distance=ft,De.range=$e,De.inRange=Jt,De.delta.x=Xe,De.delta.y=Nt)}return De.inRange&&(f.x=De.target.x,f.y=De.target.y),v.closest=De,De},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Pb=Pi(Xl,"snap"),Uo={start:function(u){var h=u.state,f=u.edges,v=h.options;if(!f)return null;u.state={options:{targets:null,relativePoints:[{x:f.left?0:1,y:f.top?0:1}],offset:v.offset||"self",origin:{x:0,y:0},range:v.range}},h.targetFields=h.targetFields||[["width","height"],["x","y"]],Xl.start(u),h.offsets=u.state.offsets,u.state=h},set:function(u){var h=u.interaction,f=u.state,v=u.coords,_=f.options,S=f.offsets,C={x:v.x-S[0].x,y:v.y-S[0].y};f.options=ee({},_),f.options.targets=[];for(var R=0,D=_.targets||[];R<D.length;R++){var $=D[R],O=void 0;if(O=b.func($)?$(C.x,C.y,h):$){for(var V=0,Z=f.targetFields;V<Z.length;V++){var ne=Z[V],re=ne[0],ce=ne[1];if(re in O||ce in O){O.x=O[re],O.y=O[ce];break}}f.options.targets.push(O)}}var xe=Xl.set(u);return f.options=_,xe},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Rb=Pi(Uo,"snapSize"),Yl={aspectRatio:bb,restrictEdges:wb,restrict:xb,restrictRect:Sb,restrictSize:Cb,snapEdges:Pi({start:function(u){var h=u.edges;return h?(u.state.targetFields=u.state.targetFields||[[h.left?"left":"right",h.top?"top":"bottom"]],Uo.start(u)):null},set:Uo.set,defaults:ee(jn(Uo.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Pb,snapSize:Rb,spring:No,avoid:No,transform:No,rubberband:No},Ib={id:"modifiers",install:function(u){var h=u.interactStatic;for(var f in u.usePlugin(Gd),u.usePlugin(gb),h.modifiers=Yl,Yl){var v=Yl[f],_=v._defaults,S=v._methods;_._methods=S,u.defaults.perAction[f]=_}}},kb=Ib,op=function(u){c(f,u);var h=g(f);function f(v,_,S,C,R,D){var $;if(s(this,f),Yt(m($=h.call(this,R)),S),S!==_&&Yt(m($),_),$.timeStamp=D,$.originalEvent=S,$.type=v,$.pointerId=tn(_),$.pointerType=Co(_),$.target=C,$.currentTarget=null,v==="tap"){var O=R.getPointerIndex(_);$.dt=$.timeStamp-R.pointers[O].downTime;var V=$.timeStamp-R.tapTime;$.double=!!R.prevTap&&R.prevTap.type!=="doubletap"&&R.prevTap.target===$.target&&V<500}else v==="doubletap"&&($.dt=_.timeStamp-R.tapTime,$.double=!0);return $}return a(f,[{key:"_subtractOrigin",value:function(v){var _=v.x,S=v.y;return this.pageX-=_,this.pageY-=S,this.clientX-=_,this.clientY-=S,this}},{key:"_addOrigin",value:function(v){var _=v.x,S=v.y;return this.pageX+=_,this.pageY+=S,this.clientX+=_,this.clientY+=S,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),f}(li),Rs={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(u){u.pointerEvents=Rs,u.defaults.actions.pointerEvents=Rs.defaults,ee(u.actions.phaselessTypes,Rs.types)},listeners:{"interactions:new":function(u){var h=u.interaction;h.prevTap=null,h.tapTime=0},"interactions:update-pointer":function(u){var h=u.down,f=u.pointerInfo;!h&&f.hold||(f.hold={duration:1/0,timeout:null})},"interactions:move":function(u,h){var f=u.interaction,v=u.pointer,_=u.event,S=u.eventTarget;u.duplicate||f.pointerIsDown&&!f.pointerWasMoved||(f.pointerIsDown&&ql(u),Ii({interaction:f,pointer:v,event:_,eventTarget:S,type:"move"},h))},"interactions:down":function(u,h){(function(f,v){for(var _=f.interaction,S=f.pointer,C=f.event,R=f.eventTarget,D=f.pointerIndex,$=_.pointers[D].hold,O=be(R),V={interaction:_,pointer:S,event:C,eventTarget:R,type:"hold",targets:[],path:O,node:null},Z=0;Z<O.length;Z++){var ne=O[Z];V.node=ne,v.fire("pointerEvents:collect-targets",V)}if(V.targets.length){for(var re=1/0,ce=0,xe=V.targets;ce<xe.length;ce++){var ge=xe[ce].eventable.options.holdDuration;ge<re&&(re=ge)}$.duration=re,$.timeout=setTimeout(function(){Ii({interaction:_,eventTarget:R,pointer:S,event:C,type:"hold"},v)},re)}})(u,h),Ii(u,h)},"interactions:up":function(u,h){ql(u),Ii(u,h),function(f,v){var _=f.interaction,S=f.pointer,C=f.event,R=f.eventTarget;_.pointerWasMoved||Ii({interaction:_,eventTarget:R,pointer:S,event:C,type:"tap"},v)}(u,h)},"interactions:cancel":function(u,h){ql(u),Ii(u,h)}},PointerEvent:op,fire:Ii,collectEventTargets:ap,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ii(u,h){var f=u.interaction,v=u.pointer,_=u.event,S=u.eventTarget,C=u.type,R=u.targets,D=R===void 0?ap(u,h):R,$=new op(C,v,_,S,f,h.now());h.fire("pointerEvents:new",{pointerEvent:$});for(var O={interaction:f,pointer:v,event:_,eventTarget:S,targets:D,type:C,pointerEvent:$},V=0;V<D.length;V++){var Z=D[V];for(var ne in Z.props||{})$[ne]=Z.props[ne];var re=Ee(Z.eventable,Z.node);if($._subtractOrigin(re),$.eventable=Z.eventable,$.currentTarget=Z.node,Z.eventable.fire($),$._addOrigin(re),$.immediatePropagationStopped||$.propagationStopped&&V+1<D.length&&D[V+1].node!==$.currentTarget)break}if(h.fire("pointerEvents:fired",O),C==="tap"){var ce=$.double?Ii({interaction:f,pointer:v,event:_,eventTarget:S,type:"doubletap"},h):$;f.prevTap=ce,f.tapTime=ce.timeStamp}return $}function ap(u,h){var f=u.interaction,v=u.pointer,_=u.event,S=u.eventTarget,C=u.type,R=f.getPointerIndex(v),D=f.pointers[R];if(C==="tap"&&(f.pointerWasMoved||!D||D.downTarget!==S))return[];for(var $=be(S),O={interaction:f,pointer:v,event:_,eventTarget:S,type:C,path:$,targets:[],node:null},V=0;V<$.length;V++){var Z=$[V];O.node=Z,h.fire("pointerEvents:collect-targets",O)}return C==="hold"&&(O.targets=O.targets.filter(function(ne){var re,ce;return ne.eventable.options.holdDuration===((re=f.pointers[R])==null||(ce=re.hold)==null?void 0:ce.duration)})),O.targets}function ql(u){var h=u.interaction,f=u.pointerIndex,v=h.pointers[f].hold;v&&v.timeout&&(clearTimeout(v.timeout),v.timeout=null)}var Mb=Object.freeze({__proto__:null,default:Rs});function Db(u){var h=u.interaction;h.holdIntervalHandle&&(clearInterval(h.holdIntervalHandle),h.holdIntervalHandle=null)}var Ob={id:"pointer-events/holdRepeat",install:function(u){u.usePlugin(Rs);var h=u.pointerEvents;h.defaults.holdRepeatInterval=0,h.types.holdrepeat=u.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(u,h){return u["pointerEvents:".concat(h)]=Db,u},{"pointerEvents:new":function(u){var h=u.pointerEvent;h.type==="hold"&&(h.count=(h.count||0)+1)},"pointerEvents:fired":function(u,h){var f=u.interaction,v=u.pointerEvent,_=u.eventTarget,S=u.targets;if(v.type==="hold"&&S.length){var C=S[0].eventable.options.holdRepeatInterval;C<=0||(f.holdIntervalHandle=setTimeout(function(){h.pointerEvents.fire({interaction:f,eventTarget:_,type:"hold",pointer:v,event:v},h)},C))}}})},Lb=Ob,Bb={id:"pointer-events/interactableTargets",install:function(u){var h=u.Interactable;h.prototype.pointerEvents=function(v){return ee(this.events.options,v),this};var f=h.prototype._backCompatOption;h.prototype._backCompatOption=function(v,_){var S=f.call(this,v,_);return S===this&&(this.events.options[v]=_),S}},listeners:{"pointerEvents:collect-targets":function(u,h){var f=u.targets,v=u.node,_=u.type,S=u.eventTarget;h.interactables.forEachMatch(v,function(C){var R=C.events,D=R.options;R.types[_]&&R.types[_].length&&C.testIgnoreAllow(D,v,S)&&f.push({node:v,eventable:R,props:{interactable:C}})})},"interactable:new":function(u){var h=u.interactable;h.events.getRect=function(f){return h.getRect(f)}},"interactable:set":function(u,h){var f=u.interactable,v=u.options;ee(f.events.options,h.pointerEvents.defaults),ee(f.events.options,v.pointerEvents||{})}}},Fb=Bb,Nb={id:"pointer-events",install:function(u){u.usePlugin(Mb),u.usePlugin(Lb),u.usePlugin(Fb)}},$b=Nb,Ub={id:"reflow",install:function(u){var h=u.Interactable;u.actions.phases.reflow=!0,h.prototype.reflow=function(f){return function(v,_,S){for(var C=v.getAllElements(),R=S.window.Promise,D=R?[]:null,$=function(){var V=C[O],Z=v.getRect(V);if(!Z)return 1;var ne,re=et(S.interactions.list,function(ge){return ge.interacting()&&ge.interactable===v&&ge.element===V&&ge.prepared.name===_.name});if(re)re.move(),D&&(ne=re._reflowPromise||new R(function(ge){re._reflowResolve=ge}));else{var ce=Ne(Z),xe=function(ge){return{coords:ge,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:ce.x,y:ce.y},client:{x:ce.x,y:ce.y},timeStamp:S.now()});ne=function(ge,De,He,Ke,$e){var Xe=ge.interactions.new({pointerType:"reflow"}),Nt={interaction:Xe,event:$e,pointer:$e,eventTarget:He,phase:"reflow"};Xe.interactable=De,Xe.element=He,Xe.prevEvent=$e,Xe.updatePointer($e,$e,He,!0),oi(Xe.coords.delta),Es(Xe.prepared,Ke),Xe._doPhase(Nt);var ft=ge.window,Jt=ft.Promise,gr=Jt?new Jt(function(hi){Xe._reflowResolve=hi}):void 0;return Xe._reflowPromise=gr,Xe.start(Ke,De,He),Xe._interacting?(Xe.move(Nt),Xe.end($e)):(Xe.stop(),Xe._reflowResolve()),Xe.removePointer($e,$e),gr}(S,v,V,_,xe)}D&&D.push(ne)},O=0;O<C.length&&!$();O++);return D&&R.all(D).then(function(){return v})}(this,f,u)}},listeners:{"interactions:stop":function(u,h){var f=u.interaction;f.pointerType==="reflow"&&(f._reflowResolve&&f._reflowResolve(),function(v,_){v.splice(v.indexOf(_),1)}(h.interactions.list,f))}}},Gb=Ub;if(Ft.use(Ud),Ft.use(Wd),Ft.use($b),Ft.use(nb),Ft.use(kb),Ft.use(W0),Ft.use(Io),Ft.use(Ci),Ft.use(Gb),Ft.default=Ft,n(r)==="object"&&r)try{r.exports=Ft}catch{}return Ft.default=Ft,Ft})}(Xs,Xs.exports)),Xs.exports}var xk=bk();const wk=hl(xk),Tk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABmCAMAAABBXBeAAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvdQTFRFAAAAAAAAAgICAwMDDQsLDg0NCgkJAwICAAAACAcHBwYGFRISQyMecTYtAQAADAsLEQ8PNzU1WVVUaGhob29vdHR0bWpqVVBPJSQkERAQBgUFGBYWEBAQDQsLSkpKkZGRzMzM5OPk9PPz/////fv76enpzs7OpaWlZWVlMjAwExISDg0NAwEBHh4eBQUFBAQESEVEqKio9vb2//7+2dnZYGBgBAQEAgICDgoKKigoh4eH1tXV4ODgAQEBBgICGxkaOTk57e3t+Pj4/v39tLS0xsbGQD4+FBMTCAgIGxISGxgYq6ur/Pr63NzcoaGhmZmZAAAAEg8Pv7+/0tLSlJSUjY2NFRQUFBQUAwAADQwMLx8fISAg8fHxubm5iYmJSC8uBQUFDgwM6+vrenp6g4KCBAEBr6+vFhUVwbKy5+fnnZ2dHRwcybu65tjY6t3c8eno+PT0XFxct6mp5NbV4dPR4dHQ6NnZ9vDwYmJiQkJCGhgXsKWk5tbW4M/P6t/e+vb2DAsLAgEB18PD49TT38zL49PS387N3MjK+/j4zMrKFxYW4cXRZGRk+PHzFxUV0L282tra7uTjFxUVGhkZeXBvFxcXICAgTkBB6Nvb7+Dg9e7skYiHAAAA1L2/2tTU7OLhraGgMCsq08jHFhQUl42LCwoKw7W1BQQE8OflKyIhDgsLpJuagnp48uvpopeWdGtpt6KhqpOSwKWkt5iXrZCOBwcHjGJhgFJQfD87ejcwbTErXCgjYysmdjYujU1KpoJ/YFlYi4B/zra0nmZmfTgxVScig0A6jUE3XiwncjQtfzsyajg1mE5IoFFJpk9BikI2r1RFslZGaTIplUc6ok0/ikdAal5eGwkJgz0zfDsxqlJDkUQ5k0Q5gjsyMxYUiEA1mUg8KBEOhT00ai8pZi4oAwICdDUtBgECQx0bTiIeq1JDnUk9gElGo3Nxi1ZVxampn4B8q42JjnZz2MrJl3x59evqknp3KioqqYmFnJKQDAwMERERhYWFx3P0eAAAAP10Uk5TABA6b6nR6/v//9W8sm8W5vv7//////////9ioe3/////////////////3nkmuPn/////////V0il/////yEzh//////////nQpX///////8cjv//////dQaAif////+hLsn///8L/8P////////////////////////M///////xTf//////////mf///67////Tqv/bUv//////Hv///////7b/a//v///f//////////////X//////////////////////////////////////////////////////////////4X//////////////////////4T//5Ut/xDIcLIAAAotSURBVHic7Zh7VBNnFsDvNxNIJoHMJDRIWCwvNeHhAj7AR5Fqz/qoumK1bba4LdZiT5+7x3ZtD92j7dlt6+LWdte6e1Zqq60Ubeu2i325LRa1SqUVEAIEEBJQwCCQZHgkATKzE94hMyk5/rv3j0zm5s4v93vcxzcIhASNCfeNxbhrr6Cl25hfLe+XiJwAkhGO+8MKoBiQtfuFwdSoC1Tjzkx4ZoQYVMvOFJOIUIOG+3+FzUNNcUPTs2JN2UwwKBVVoBSE7DYvUwzYsPo+Fl9w4ecwK9CtZo3CGNM63SwSWqIQGIEb1vkM9LVPTOLss2jVlUWozsuKCtdjUTKkd3+fVQ6/9BrYJCYTNTVEz2uzeHsMEBeIKlEyKh+5iVYWbTopgNGhC13RTLjXaEaF7L+zOY6AUQwkX7Te9yEvJpxq3tJHC0AAljoll+J65lwElGTuAFC7Kh485o3JRuUNoYGMEAQgA7UYI2NqzUDOll/i7tXdRk8Oh8np+hLLMnQIQ7i1ttxXTKbUmYFdWU67FQrNKY9xoZzrkSejltywm3xhVn8XayCvzzXD0q8fOLO6ysxCkvqIckpooLSrKQsRYrm9fs1utVKU1cqDYTJLaLJ1nhnurF6udyVd5/ZmWJP1Pln+BCa9O0qLBgMRYnAH8VNLpCBmacR5M2QULdcnKZrda8Ho3txVpJ+YG7kD3+UAIOxSLgIL+CNPvbiEziC7L8LqU0v10RWbzrmVkVV9L6K94xhYcVn5G+5COFl5/7d8voxisA0chqHv0t9z3jW2qMNmDXVuHANpV1fdKQMKOQN6TvNPcfycEprJvFEO6rq79Nqmlf8d0y/71hJyb/4YBh78T0qSTInQQIV3OHli4hs1eu38kxjkHI42cT/sPGp85DA7vovz9qQkzXbIzRUmYYx68b9FoNA1nxFt/r4DItd/OWKrUJ7f9TY9htGl5lIvAGO6xD818ExLCR0/p1kPya3qGpE8rBa2Kb8Z9Xz1F515f6THYkq3/A/RT7UWC1BGMIp05xnAyWE6oSPrIGyUO0OHRrbNUtU/30ATEU4egzfzMB+YsNSmGth5s8GQ0MFaYKMWOboj8kb2x5JT4ol8I3/9uV+X4T4wya3DNCRF9hdzGNa61YXFNFK3EDq984AtY9Nk2kq7uqPypg8MToYaYNkd1cY1P7KkaUNYF7f1CQcVuseC/+2xScyKMmpxrQBGkV5Cu1Qc5h5Z16U1P2adNj0bZBDbgTJ/bNMML8ufkkSxwJScVwUxDQaXKqUYtPNaribGfS+2Ps0YwQ7z0ePiXe548PAm75hJGLPT8pMREmL1zSnfPdAA91sGrKz2ech/aiT/TMVsUYgEgkGR3l+8E//aCGvEX7iG+9aVxmnm3Yo6VMG+mzVqMInJLty63vnnyUcp61RMtRHHIoyQGHPBIl9YbnvSrMm1wWTFmsQkvrT7fkVA/iQGYBxE9dwz93CY4d5LsCam9hwTLjG9Wpb2CORJHwMvjPydhz9oVL89+miUO3tRbo7bKcqi1Jaq65ObISymrYVTbVR9bICQ9snkNKVqikTHLyvMn0+fl5HBRZmADJl9bgwN6xn2iEfJm4Ip2EE+TcOS3Z7TMgVGUaZRzgZVfJbuvak/T8GssGpDxVLxLS9/JlmjCf+FTkz+fGyNAAZkrkK9VSoOPsifkMdlazBYig26o0KYV17DdsyyYuQdBoHtMyIbVOBg3z3wkMd/efQ3Mpf2V3KrkrUuOi6QTSFuy012wH7ctk58QhCTuHVfYSnJAE1aFvOD8gysjYGUnBc+0XvoPbutVGd94XcSFygR44iVlym+aYk0AaU2sO4Vsm1Iv9XDoB7QPst6TrBX75fQBOR+e1OgGHOAGLMTRPRIQ8tccFLW+EYpSHoALflTff4XJ3xiIDx/y6rNrRE1cqScg4812MMIY0Sot1LE9gAsDF8LOE6DbwysKMXhX1Gfb0T9QU5JfxDXoVsDYZBCQ4Fdg1cG+tc8adGEkyemP+XdF+uq9z4M0e9bMAqhLq7H5tphhhX1Bdt6WTby5SLIK7js9Qxvly4PsjIVnCMOIKxyJxDGUAwIC1dVUTybfXp9Ps8j/GeG7MK6XpdTaUe4jOljqU4QQUCARRyiGXqUDyKESa2q73W5FM6BQDlCJnVXr9YJTWRowJyVX/HaC2DaYiuGiF6liMWHB264wpFE6kTgCHJp1n3qDwYr2G5ExrCbMsoxIDVpbcGWAXZWQMcsYrt3n+8Dw9W++mtBEmCdv3B29CdXMTKYO3SdMG9KjvJaa1+Y1KpiFbL3u2Jq2SAV2wzRVOeAaigIle/jOb4IY9pia11d/ayGhiGpogOXOZ2sPQIkvZmkX5i0z6JbMDOB9btcJM3iWEdcLcy308plbfz2gt4Yq1OugyVYSdq6aGkgO9y3oD2ciTyS5Rdme2Gx9JYWoL2XUHfbtC5ph8ocJAouDvpprx8Y3VfOMgZnhyFQ1BqK1A67g0DdEcTfpXszSqcHty9MEbPqLcocchMnUOtsOy4KqoHFuQ0toKyenrB8DirN3lAsCXHQoVJUTrkAD5ehfZ9wembxZxI+dwQwUJB3ojWuDte2QbhBW7vofevxUf3yj3hnWQiT+NKjp9JQZTB0L0J7E/dP6F1mnYgnyIUw2eWNHegCpLPwHka0HZ/QZ5QG6HmOgUKYFZdDa85zlWsBVniNsqZVXbGPnZCU1d7HZx/eFCobSzjK27/fgzFA0LERZU6S+N5usvV5nZ59YDIffLT7rGzBod8doBmqE8XXphClCfvi7Sa610LMHKMzVRauEuc9d8DGck0JLgmZFQBc+SMW3ijwBwOvvP7mQ1fb9Q53xaewnrniSq4UxtaQRQYlz1scQYwcDZ644mDG+gYKY6w42MnBgDdO/eW8HxguyKXbZvWM31GY++UFO/+js3wz7AOTLj1ny52mk1Sc3f8Mn7EwBl451XBmwctTbRO/LNp/kTcZ+8BAmsEZ/VS4Y+NbIxtPGfcEPTehkN/UFwbe2XtHPSj2FVw9+cChH+C9AXESz+z+PIaLiccPVh3JdhuVF8ZdvNamF7D7GYzbIv+YZdH7f82Vbkv/7YvF/IVhBpgx+SAnctjW9wjjTyvAI+kvflin6Obdwv5gYFC+sTyms3aL3wvuKUPBoQFRrp4FR28Pg+Tb5h5M+ZwOvD0M5O2Jo1d3f5o986aNV/CANfqoVDHvmvuBSWjaUAF3H1/J1yn5gdn81eoaGKZ2+1OnvEWXmvtwMSSasnbfFibnqGgrd/R9lzfh+IHJ3EFgt49ZW/JEETfPLV18DdfMMdtP3NXMnbJb1/K1xjPGpFYFkdzl7gLe4JwxJreykWsBsN5Qii8DzhSztr3d7Yy8LuaGP23SdElo6tNwl6HO2wvNQblU4X55qbq9RFGwQ7Xu2+XdZzfzV5iZYnKwYyjtBxCodjNfqcwfkfLxf/B2s/5gQNdmaeVtrf3D+JT/Y4Tlf5EfDd6dTIMdAAAAAElFTkSuQmCC",Sk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAMeBAMAAABSNW+wAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFQTFRFAAAABgECvkk+AAAABAEBAAAABQUFAgIClTgwAgICBgIC3qD5uQAAAAt0Uk5TAP///wseLjr/SDP8D1UBAAABOElEQVR4nO3QsQnCABRFUQMOYGdhpRu4ihO4jbULuoHBDZLaCCeNCML95ePAhztsFjfsptdy+jDHcd2cH+vm9PzOr3809bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj83P+mwvh/39dn0fZ/YJP3nrYpeJAAAAAElFTkSuQmCC",Ek=["src"],Ak=["src"],Ck=Ve({__name:"SakuraScrollToTop",props:{height:{default:600},position:{default:.9},mass:{default:2},gravity:{},friction:{},floatAmplitude:{default:1.3},floatSpeed:{default:.03}},setup(r){const e=r,{y:t}=Dv(),{width:i}=$1(),{toTop:n}=c0();let s,o;const a=[],l=[];let c=null,d=!1;const p=ve(),m=ve(),g=ve(),y=ve(!1);class x{constructor(b,B,H=!1,W=1,Q=15,N=.9){this.x=b,this.y=B,this.oldX=b,this.oldY=B,this.fixed=H,this.mass=W,this.gravity=Q,this.friction=N,this.el=H?m.value:p.value,wk(this.el).draggable({}).on("dragstart",()=>{c=this,d=!0}).on("dragmove",G=>{d&&(s=G.clientX,o=G.clientY)}).on("dragend",()=>{c&&y.value&&n(),c=null,d=!1})}update(){if(!this.fixed){const b=this.x,B=this.y;this.x+=(this.x-this.oldX)*this.friction,this.y+=(this.y-this.oldY)*this.friction+this.gravity,this.oldX=b,this.oldY=B}this.updateElement()}updateElement(){this.el.style.left=`${this.x}px`,this.el.style.top=`${this.y-20}px`}reset(){this.x=0,this.y=0}}class w{constructor(b,B){this.n1=b,this.n2=B;const H=b.x-B.x,W=b.y-B.y;this.dist=Math.sqrt(H*H+W*W),this.el=g.value}solve(){let b=this.n1.x-this.n2.x,B=this.n1.y-this.n2.y;const W=.5*(Math.sqrt(b*b+B*B)-this.dist)/this.dist;b*=W,B*=W;const Q=this.n1.mass+this.n2.mass,N=this.n1.mass/Q,G=this.n2.mass/Q;this.n1.fixed||(this.n1.x-=b*G,this.n1.y-=B*G),this.n2.fixed||(this.n2.x+=b*N,this.n2.y+=B*N),this.updateElement()}updateElement(){const b=this.n1.x,B=this.n1.y,H=this.n2.x,W=this.n2.y,Q=Math.sqrt((H-b)**2+(W-B)**2),N=Math.atan2(-(H-b),W-B)*180/Math.PI;this.el.style.height=`${Q}px`,this.el.style.left=`${b}px`,this.el.style.top=`${B}px`,this.el.style.transform=`rotate(${N}deg)`}}function T(){const{height:F,position:b,mass:B,gravity:H,friction:W}=e,Q=new x(i.value*b,-100,!0),N=new x(i.value*b+F,-100,!1,B,H,W),G=new w(Q,N);a.push(Q),a.push(N),l.push(G),requestAnimationFrame(P)}let E=0;function P(){for(const F of a)F.update();c&&(c.x+=(s-c.x)*.6,c.y+=(o-c.y)*.6);for(const F of l)F.solve(),F.updateElement();d||(E+=e.floatSpeed,a[1].y+=Math.sin(E)*e.floatAmplitude),requestAnimationFrame(P)}function I(){for(const F of l)F.updateElement()}dt([t,i],([F,b])=>{var B;if(F>200)if(b<=v1.lg)y.value=!1;else{if(y.value===!0)return;(B=a[1])==null||B.reset(),y.value=!0}else y.value=!1},{immediate:!0});let A;return dt(i,F=>{clearTimeout(A),A=setTimeout(()=>{var b;a[0].x=F*e.position,(b=a[1])==null||b.reset(),I()},200)}),rr(()=>setTimeout(()=>T(),0)),(F,b)=>io((ie(),me("div",null,[Ie("div",{ref_key:"nodeRef",ref:m},null,512),Ie("img",{ref_key:"imgRef",ref:p,class:"sakura-to-top-node",src:oe(Tk)},null,8,Ek),Ie("img",{ref_key:"constraintRef",ref:g,class:"sakura-to-top-line",src:oe(Sk)},null,8,Ak)],512)),[[Da,y.value]])}}),Pk=Et(Ck,[["__scopeId","data-v-7dc9e514"]]),Rk="/assets/iloli.D82BDgdX.gif",Ik={class:"mashiro-search-container"},kk={class:"flex-center relative my-4",flex:"~",rounded:""},Mk=["placeholder"],Dk=Ve({__name:"SakuraSearch",props:{open:{type:Boolean}},setup(r){const e=r,t=tk(),i=nk(),n=cl(),{t:s}=ni(),o=ve(),a=ve(),l=ve();dt(()=>e.open,async()=>{e.open&&setTimeout(()=>{var d;(d=l.value)==null||d.focus()},0)});function c(){n.push({path:"/search",query:{q:o.value}}),i.close()}return(d,p)=>(ie(),at(Ng,{name:"fade",onEnter:p[1]||(p[1]=m=>t.value=!0),onAfterLeave:p[2]||(p[2]=m=>t.value=!1)},{default:ot(()=>[d.open?(ie(),me("div",{key:0,ref_key:"searchContainer",ref:a,class:"mashiro-search",style:Vr({"--sakura-search-bg-img":`url('${oe(Rk)}')`})},[Ie("div",Ik,[p[4]||(p[4]=Ie("p",null," 想要找点什么呢？",-1)),Ie("div",kk,[p[3]||(p[3]=Ie("div",{class:"i-fa-search absolute left-0 pl-12"},null,-1)),io(Ie("input",{ref_key:"searchInputRef",ref:l,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m),class:"mashiro-search-input",placeholder:oe(s)("search.placeholder"),onKeyup:Fg(c,["enter"])},null,40,Mk),[[Jb,o.value]])])])],4)):Ge("v-if",!0)]),_:1}))}}),u0=Et(Dk,[["__scopeId","data-v-967bb2b2"]]),Ok=Object.freeze(Object.defineProperty({__proto__:null,default:u0},Symbol.toStringTag,{value:"Module"})),Lk=["title"],Bk={key:0,"i-mdi-search":""},Fk={key:1,text:"!2xl","i-mdi-close":""},Nk=Ve({__name:"SakuraSearchBtn",props:{open:{type:Boolean,default:!1}},emits:["close","open"],setup(r,{emit:e}){const t=r,i=e,{t:n}=ni();function s(){t.open?i("close"):i("open")}return(o,a)=>(ie(),me("button",{class:"sakura-icon-btn sakura-search-btn",title:oe(n)("menu.search"),onClick:s},[o.open?(ie(),me("div",Fk)):(ie(),me("div",Bk))],8,Lk))}}),$k={flex:"center"},Uk=Ve({__name:"SakuraSearchTrigger",setup(r){const e=_s(),t=dr(),i=ue(()=>t.value.search.type==="algolia"),n=ue(()=>t.value.search.type==="fuse"),s=i.value&&Qb({loader:()=>St(()=>import("./SakuraAlgoliaSearch.CKnXYfx6.js"),__vite__mapDeps([46,2,3,4,5,6,7,47])),errorComponent:St(()=>Promise.resolve().then(()=>Ok),void 0)});return(o,a)=>{const l=Nk,c=u0;return ie(),me("div",$k,[st(l,{open:oe(e).search.isOpen&&!i.value,onOpen:oe(e).search.open,onClose:oe(e).search.close},null,8,["open","onOpen","onClose"]),i.value?(ie(),at(oe(s),{key:0,open:oe(e).search.isOpen,onClose:oe(e).search.close},null,8,["open","onClose"])):n.value?(ie(),at(c,{key:1,open:oe(e).search.isOpen,onClose:oe(e).search.close},null,8,["open","onClose"])):Ge("v-if",!0)])}}}),Gk=["title"],jk=Ve({__name:"SakuraToggleLocale",props:{toggleLocaleIcon:{}},setup(r){const e=r,{t,locale:i}=ni(),{toggleLocales:n}=LT(),s=Xt(),o=ue(()=>{var a;return e.toggleLocaleIcon||((a=s.value.ui.toggleLocaleButton)==null?void 0:a.icon)});return(a,l)=>(ie(),me("button",{class:"sakura-icon-btn sakura-toggle-locale",title:oe(t)("button.toggle_langs"),onClick:l[0]||(l[0]=(...c)=>oe(n)&&oe(n)(...c))},[Ie("div",{class:vt(["transform transition",[o.value,oe(i)==="en"?"rotate-y-180":""]])},null,2)],8,Gk))}}),Hk=Ve({__name:"SakuraToggleDark",props:{darkIcon:{},lightIcon:{}},setup(r){const e=r,t=Xt(),i=vv(),n=ue(()=>{var o;return e.darkIcon||((o=t.value.ui.toggleDarkButton)==null?void 0:o.darkIcon)}),s=ue(()=>{var o;return e.lightIcon||((o=t.value.ui.toggleDarkButton)==null?void 0:o.lightIcon)});return(o,a)=>(ie(),me("button",{class:"sakura-icon-btn sakura-toggle-dark select-none",type:"button","aria-label":"Toggle Color Scheme",onClick:a[0]||(a[0]=(...l)=>oe(i).toggleDarkWithTransition&&oe(i).toggleDarkWithTransition(...l))},[Ie("div",{class:vt(oe(i).isDark?n.value:s.value)},null,2)]))}}),zk=["aria-haspopup","aria-expanded"],Vk={key:0,class:"sakura-dropdown-menu"},Wk=Ve({__name:"SakuraDropdown",props:{isShow:{type:Boolean,default:!0}},setup(r){const e=ve(!1);return(t,i)=>(ie(),me("div",{class:"sakura-dropdown","aria-haspopup":!!t.$slots.menu,"aria-expanded":e.value,onMouseover:i[0]||(i[0]=n=>e.value=!0),onMouseleave:i[1]||(i[1]=n=>e.value=!1)},[Ze(t.$slots,"button",{},void 0,!0),t.isShow&&t.$slots.menu?(ie(),me("div",Vk,[Ze(t.$slots,"menu",{},void 0,!0)])):Ge("v-if",!0)],40,zk))}}),Xk=Et(Wk,[["__scopeId","data-v-faec8b02"]]),Yk=["href"],qk={key:0,class:"icon-link inline-block","i-ri-arrow-right-up-line":""},Id=Ve({__name:"AppLink",props:{showExternalIcon:{type:Boolean},to:{},href:{}},setup(r){const e=r,t=ue(()=>e.href||e.to||"#"),i=ue(()=>typeof t.value=="string"&&t.value.startsWith("http"));return(n,s)=>{const o=ur("RouterLink");return i.value?(ie(),me("a",_i({key:0},n.$attrs,{href:t.value,target:"_blank"}),[Ze(n.$slots,"default"),n.showExternalIcon?(ie(),me("div",qk)):Ge("v-if",!0)],16,Yk)):(ie(),at(o,_i({key:1},n.$attrs,{to:t.value}),{default:ot(()=>[Ze(n.$slots,"default")]),_:3},16,["to"]))}}}),Kk=Ve({__name:"SakuraNavLink",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const e=r,{t}=ni(),i=ue(()=>e.locale?`${e.text??""} ${t(e.locale)}`:e.text);return(n,s)=>{const o=Id;return ie(),at(o,{class:vt(["sakura-nav-link",n.animated]),title:i.value,to:n.link,target:n.target,rel:"noopener"},{default:ot(()=>[n.icon?(ie(),me("span",{key:0,class:vt([[n.icon],"hvr-icon sakura-icon sakura-nav-link-icon mr-0.5"]),"inline-flex":""},null,2)):Ge("v-if",!0),i.value?(ie(),me("span",{key:1,truncate:"",class:vt(["sakura-nav-link-text",[{"<lg:hidden":n.icon}]])},it(i.value),3)):Ge("v-if",!0),Ze(n.$slots,"default",{},void 0,!0)]),_:3},8,["title","to","target","class"])}}}),d0=Et(Kk,[["__scopeId","data-v-087985fe"]]),Jk={class:"sakura-dropdown-list",flex:"~ col center"},Qk=50,Zk=Ve({__name:"SakuraNavbarLinkItem",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const e=r,t=ve(!1),i=ve(null);function n(){t.value=!0,a()}function s(){t.value=!1}function o(){i.value=setTimeout(()=>{s()},Qk)}function a(){i.value!==null&&(clearTimeout(i.value),i.value=null)}return(l,c)=>{var m;const d=d0,p=Xk;return ie(),at(p,{"is-show":!!((m=l.items)!=null&&m.length),class:"sakura-navbar-link-item",onMouseenter:n,onMouseleave:o},{button:ot(()=>[st(d,Xu($g(e)),null,16)]),menu:ot(()=>[Ie("div",Jk,[(ie(!0),me(jt,null,go(l.items,g=>(ie(),at(d,_i({key:g.text,ref_for:!0},g),null,16))),128))])]),_:1},8,["is-show"])}}}),e2=Et(Zk,[["__scopeId","data-v-3d5f9d35"]]),t2=Ve({__name:"SakuraNavbarLink",props:{navbar:{},showMarker:{type:Boolean,default:!1}},setup(r){const e=r,t=Pn(),{locale:i}=ni(),n=ve(),s=ve(!0),o=ve();function a(){if(!e.showMarker)return;const l=document.querySelector(".sakura-navbar-link .router-link-active"),c=l,d=o.value;if(!l){console.error("Not found: .sakura-navbar-link .router-link-active");return}const p=c.getBoundingClientRect(),m=d.getBoundingClientRect(),g=p.left-m.left;n.value.style.left=`${g}px`,n.value.style.width=`${(l==null?void 0:l.offsetWidth)||0}px`}return dt(()=>t.path,()=>Zr(a)),dt(()=>i.value,()=>setTimeout(()=>a(),0)),rr(()=>{setTimeout(()=>{s.value=!1},500),Zr(()=>{a()})}),(l,c)=>{const d=e2;return ie(),me("nav",{ref_key:"navLink",ref:o,class:vt(["sakura-navbar-link",s.value&&"sakura-preload"])},[(ie(!0),me(jt,null,go(l.navbar,(p,m)=>(ie(),at(d,_i({key:m,ref_for:!0},p),null,16))),128)),l.showMarker?(ie(),me("div",{key:0,ref_key:"marker",ref:n,class:"marker"},null,512)):Ge("v-if",!0)],2)}}}),r2=Et(t2,[["__scopeId","data-v-9b19ff3a"]]),i2={class:"sakura-navbar-brand"},n2=["src"],s2={key:1,class:"navbar-title relative"},o2={key:0},a2={mr1:""},l2={mr1:"",class:"sakura-hvr-rotate"},c2={key:0,class:"navbar-subtitle"},h2=Ve({__name:"SakuraNavbarBrand",props:{favicon:{type:Boolean},title:{},hamburger:{type:Boolean},subTitle:{}},setup(r){const e=dr();return(t,i)=>{const n=ur("RouterLink");return ie(),me("div",i2,[t.favicon?(ie(),me("img",{key:0,class:"h-40px w-40px",alt:"logo",src:oe(e).favicon},null,8,n2)):Ge("v-if",!0),t.title?(ie(),me("ruby",s2,[st(n,{class:"logo-link",to:"/","aria-label":oe(e).title},{default:ot(()=>[typeof t.title=="string"?(ie(),me("span",o2,it(t.title),1)):(ie(),me(jt,{key:1},[Ie("span",a2,it(t.title[0]),1),Ie("span",l2,it(t.title[1]),1),Ie("span",null,it(t.title[2]),1)],64))]),_:1},8,["aria-label"]),t.subTitle?(ie(),me("rt",c2,it(t.subTitle),1)):Ge("v-if",!0)])):Ge("v-if",!0)])}}}),u2=Et(h2,[["__scopeId","data-v-c82ead8b"]]),d2=["aria-expanded"],p2=Ve({__name:"SakuraHamburgerUneven",props:{active:{type:Boolean}},setup(r){return(e,t)=>(ie(),me("button",{class:vt(["mobile-btn",e.active?"mobile-btn-open":""]),"aria-label":"mobile navigation","aria-expanded":e.active},[Ge(" TODO: Add more color configurations? "),Ie("span",{class:vt(e.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),Ie("span",{class:vt(e.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),Ie("span",{class:vt(e.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2)],10,d2))}}),f2=Et(p2,[["__scopeId","data-v-f5ae7267"]]),m2=Ve({__name:"SakuraHamburgerOld",props:{active:{type:Boolean}},setup(r){return(e,t)=>(ie(),me("button",{class:vt(["mashiro-burger-menu",e.active&&"mashiro-menu-on"])},t[0]||(t[0]=[Ie("div",{class:"mashiro-burger"},null,-1)]),2))}}),g2=Et(m2,[["__scopeId","data-v-08fa67be"]]),v2={flex:"~ items-center"},y2={"h-full":"","print:op0":"",flex:"~ center",class:"sakura-navbar-tools"},_2=Ve({__name:"SakuraNavbar",props:{navbar:{},options:{}},setup(r){const e=r,t=_s(),i=Xt(),{isIncludes:n}=OI(),{y:s}=Dv(),o=ve(!0),a=ve(!1),l=ue(()=>e.navbar||i.value.navbar),c=ue(()=>e.options||i.value.navbarOptions),{autoHide:d,favicon:p,animIn:m,animOut:g,showMarker:y,title:x,subTitle:w,enableHover:T,offset:E}=c.value,P=ue(()=>s.value>E),I=ue(()=>{if(!n(c.value.autoHide))return!0;const F=n(c.value.invert);return T&&a.value||(F?P.value:!P.value)});return(A,F)=>{const b=g2,B=f2,H=u2,W=r2,Q=Hk,N=jk,G=Uk;return ie(),me(jt,null,[Ge(" NOTE: Dynamic :class switching affects triggering the component loader for some reason, not sure why. "),Ie("header",{flex:"~",w:"full",fixed:"","top-0":"","z-100":"",class:"sakura-navbar",onMouseover:F[1]||(F[1]=X=>a.value=!0),onMouseleave:F[2]||(F[2]=X=>a.value=!1)},[Ie("div",{class:vt(["navbar-content sakura-safe-padding",{"active-header":I.value,"has-scrolled":P.value,"no-animation":o.value}]),flex:"~ items-center justify-between",w:"full"},[Ze(A.$slots,"brand",{},()=>{var X;return[Ie("div",v2,[((X=oe(i).sidebarOptions)==null?void 0:X.position)==="left"?(ie(),me("div",{key:0,class:vt(["flex-center",!oe(i).sidebarOptions.enableOnDesktop&&"md:hidden"])},[oe(i).navbarOptions.hamburgerStyle==="old"?(ie(),at(b,{key:0,class:"mr-4",active:oe(t).sidebar.isOpen,onClick:oe(t).sidebar.toggle},null,8,["active","onClick"])):Ge("v-if",!0),oe(i).navbarOptions.hamburgerStyle==="uneven"?(ie(),at(B,{key:1,class:"mr-4",active:oe(t).sidebar.isOpen,onClick:oe(t).sidebar.toggle},null,8,["active","onClick"])):Ge("v-if",!0)],2)):Ge("v-if",!0),st(H,{favicon:oe(p),title:oe(x),"sub-title":oe(w)},null,8,["favicon","title","sub-title"])])]}),Ze(A.$slots,"link",{},()=>[st(W,{class:vt(oe(d)&&(I.value?oe(m):oe(g))),navbar:l.value,"show-marker":oe(y)},null,8,["class","navbar","show-marker"])]),Ze(A.$slots,"tool",{},()=>{var X;return[Ie("div",y2,[c.value.tools.includes("toggleDark")?(ie(),at(Q,{key:0})):Ge("v-if",!0),c.value.tools.includes("toggleLocale")?(ie(),at(N,{key:1})):Ge("v-if",!0),c.value.tools.includes("search")?(ie(),at(G,{key:2})):Ge("v-if",!0),((X=oe(i).sidebarOptions)==null?void 0:X.position)==="right"?(ie(),me("div",{key:3,"i-ri-menu-4-fill":"",onClick:F[0]||(F[0]=(...se)=>oe(t).sidebar.toggle&&oe(t).sidebar.toggle(...se))})):Ge("v-if",!0),Ze(A.$slots,"tool-ext")])]})],2)],32)],2112)}}}),b2=Ve({__name:"SakuraScrollIndicator",setup(r){const e=c0();return(t,i)=>(ie(),me("div",{class:"sakura-scroll-indicator",style:Vr({width:`${oe(e).percentage.value*100}%`})},null,4))}}),x2=Et(b2,[["__scopeId","data-v-59103d6d"]]),w2={class:"sakura-sidebar-offset sakura-main"},T2=Ve({__name:"layout",setup(r){const e=_s(),t=Xt(),i=Sv();return(n,s)=>{var p;const o=x2,a=_2,l=ur("RouterView"),c=Pk,d=yk;return ie(),me(jt,null,[Ge(" NOTE: Avoid placing sakura-sidebar-offset at the top; it affects absolute positioning "),Ie("div",{class:vt(["app-container custom-background antialiased",`has-${oe(i)}-layout`]),style:Vr(oe(e).sidebar.isOpen?((p=oe(t).sidebarOptions)==null?void 0:p.position)==="left"?"--sakura-private-sidebar-offset: var(--sakura-sidebar-offset)":"--sakura-private-sidebar-offset: calc(var(--sakura-sidebar-offset) * -1)":"")},[Ze(n.$slots,"scroll-indicator",{},()=>[oe(t).scrollIndicator?(ie(),at(o,{key:0})):Ge("v-if",!0)],!0),Ze(n.$slots,"navbar",{},()=>[st(a,{class:"sakura-sidebar-offset"})],!0),Ie("main",w2,[Ze(n.$slots,"default",{},()=>[st(l,null,{default:ot(({Component:m})=>[(ie(),at(Bg(m),null,{"main-header":ot(()=>[Ze(n.$slots,"main-header",{},void 0,!0)]),"main-header-after":ot(()=>[Ze(n.$slots,"main-header-after",{},void 0,!0)]),main:ot(()=>[Ze(n.$slots,"main",{},void 0,!0)]),"main-content":ot(()=>[Ze(n.$slots,"main-content",{},void 0,!0)]),"main-content-after":ot(()=>[Ze(n.$slots,"main-content-after",{},void 0,!0)]),"main-nav-before":ot(()=>[Ze(n.$slots,"main-nav-before",{},void 0,!0)]),"main-nav-after":ot(()=>[Ze(n.$slots,"main-nav-after",{},void 0,!0)]),"aside-custom":ot(()=>[Ze(n.$slots,"aside-custom",{},void 0,!0)]),footer:ot(()=>[Ze(n.$slots,"footer",{},void 0,!0)]),_:2},1024))]),_:3})],!0)]),Ze(n.$slots,"to-top",{},()=>[oe(t).scrollToTop&&(oe(t).scrollToTop==="cord"||oe(t).scrollToTop===!0)?(ie(),at(c,{key:0})):Ge("v-if",!0)],!0),Ze(n.$slots,"footer",{},()=>[st(d,{class:"sakura-sidebar-offset"})],!0),Ge(" <SakuraChangSkin /> ")],6)],2112)}}}),S2=Et(T2,[["__scopeId","data-v-6fbf6d03"]]),E2={key:0,class:"sakura-count"},A2={key:1,class:"sakura-count"},C2={key:2,class:"sakura-count"},P2=Ve({__name:"SakuraSidebarCount",props:{locale:{}},setup(r){const e=ld(),t=rT(),i=NT(),n=Xt();return(s,o)=>oe(n).sidebarOptions.showCounts?(ie(),me(jt,{key:0},[s.locale==="menu.archives"?(ie(),me("sup",E2,it(oe(e).postList.length),1)):s.locale==="menu.categories"?(ie(),me("sup",A2,it(Array.from(oe(t).children).length),1)):s.locale==="menu.tags"?(ie(),me("sup",C2,it(Array.from(oe(i)).length),1)):Ge("v-if",!0)],64)):Ge("v-if",!0)}}),R2=Et(P2,[["__scopeId","data-v-9c070cf9"]]),I2={key:1,class:"sakura-sidebar-link-items"},k2=Ve({__name:"SakuraSidebarLinkItem",props:{items:{},item:{}},setup(r){return(e,t)=>{var o;const i=R2,n=d0,s=ur("SakuraSidebarLinkItem",!0);return e.item?(ie(),at(n,Xu(_i({key:0},e.item)),{default:ot(()=>[st(i,{locale:e.item.locale},null,8,["locale"])]),_:1},16)):(o=e.items)!=null&&o.length?(ie(),me("ul",I2,[(ie(!0),me(jt,null,go(e.items,(a,l)=>(ie(),me("li",{key:l},[st(s,{item:a,class:"sakura-sidebar-link-item"},null,8,["item"]),a.items?(ie(),at(s,{key:0,items:a.items,class:"sakura-sidebar-link-sub-items"},null,8,["items"])):Ge("v-if",!0)]))),128))])):Ge("v-if",!0)}}}),M2=Et(k2,[["__scopeId","data-v-a62103b1"]]),D2={class:"sakura-sidebar-link"},O2=Ve({__name:"SakuraSidebarLink",props:{sidebar:{}},setup(r){const e=r,t=Xt(),i=Pn(),n=ve(),s=ue(()=>e.sidebar||(Array.isArray(t.value.sidebar)&&t.value.sidebar.length>0?t.value.sidebar:t.value.navbar));dt(()=>i.path,()=>Zr(()=>o()));function o(){const a=document.querySelector(".sakura-sidebar-link .router-link-active");n.value.style.top=`${(a==null?void 0:a.offsetTop)||0}px`,n.value.style.height=`${(a==null?void 0:a.offsetHeight)||0}px`}return rr(()=>{Zr(()=>o()),n.value=document.querySelector(".sakura-sidebar #marker")}),(a,l)=>{const c=M2;return ie(),me("nav",D2,[st(c,{items:s.value,class:"mx-auto"},null,8,["items"]),l[0]||(l[0]=Ie("div",{id:"marker"},null,-1))])}}}),L2=Et(O2,[["__scopeId","data-v-40ec6cb5"]]),B2={class:"links-of-author"},F2=["href","title"],N2=Ve({__name:"SakuraSocialLinks",setup(r){const e=dr();return(t,i)=>(ie(),me("div",B2,[(ie(!0),me(jt,null,go(oe(e).social,(n,s)=>(ie(),me("a",{key:s,class:"sakura-icon-btn links-of-author-item",rel:"noopener",href:n.link,title:n.name,target:"_blank",style:Vr(`color:${n.color}`)},[Ie("div",{class:vt(["icon",n.icon])},null,2)],12,F2))),128))]))}}),$2=Et(N2,[["__scopeId","data-v-ee1990cd"]]),U2=["src","alt"],G2={key:2,class:"absolute top-0 h-full w-full"},j2=Ve({__name:"SakuraImageCard",props:{src:{},to:{},alt:{},errorImg:{},scale:{default:1.2},rotate:{default:0},skewX:{default:0},skewY:{default:0},opacity:{default:1},translateX:{default:0},translateY:{default:0},transitionDuration:{default:"var(--va-transition-duration)"},transitionTimingFunction:{default:"ease"},overlay:{type:Boolean,default:!1},overlayColor:{default:"rgba(0, 0, 0, 0.5)"},overlayOpacity:{default:.5},overlayOpacityInitial:{default:0}},setup(r){const e=r,t=Xt(),i=ve(!1),n=ve(!1),s=ue(()=>{var d;return e.errorImg?ng(e.errorImg):(d=t.value)==null?void 0:d.notFoundImage}),o=ue(()=>i.value?{transform:`scale(${e.scale}) rotate(${e.rotate}deg) skew(${e.skewX}deg, ${e.skewY}deg) translate(${e.translateX}px, ${e.translateY}px)`,opacity:e.opacity,transition:`transform ${e.transitionDuration} ${e.transitionTimingFunction}, opacity ${e.transitionDuration} ${e.transitionTimingFunction}`}:{transition:`transform ${e.transitionDuration} ${e.transitionTimingFunction}, opacity ${e.transitionDuration} ${e.transitionTimingFunction}`}),a=ue(()=>({opacity:i.value?e.overlayOpacity:e.overlayOpacityInitial,backgroundColor:e.overlayColor}));function l(d){const p=d.target;if(p.setAttribute("data-src",p.src),!s.value){n.value=!0;return}n.value=!1,p.src=s.value}const c=ue(()=>{const d=e.src?ng(e.src):"";return d&&d.includes("?random")?d.replace("?random",`?random=${Math.random()}`):d});return(d,p)=>{const m=Id;return ie(),me("div",{class:"sakura-image-card relative overflow-hidden",onMouseover:p[0]||(p[0]=g=>i.value=!0),onMouseleave:p[1]||(p[1]=g=>i.value=!1)},[st(m,{w:"full",h:"full",to:e.to||"","aria-label":"Go to Post",class:vt({"cursor-default":!e.to})},{default:ot(()=>[c.value?io((ie(),me("img",{key:0,class:"h-full w-full object-cover",loading:"lazy",src:c.value,alt:e.alt||"cover",style:Vr(o.value),onError:l},null,44,U2)),[[Da,!n.value]]):Ge("v-if",!0),io(Ie("div",{class:"h-full w-full bg-$sakura-color-background opacity-70",style:Vr(o.value),flex:"~ center"},p[2]||(p[2]=[Ie("div",{"i-fa6-solid-image":"",w:"30%",h:"30%"},null,-1)]),4),[[Da,n.value||!c.value]]),d.overlay?(ie(),me("div",{key:1,class:"sakura-image-card-overlay",style:Vr(a.value)},null,4)):Ge("v-if",!0),d.$slots.default?(ie(),me("div",G2,[Ze(d.$slots,"default",{},void 0,!0)])):Ge("v-if",!0)]),_:3},8,["to","class"])],32)}}}),H2=Et(j2,[["__scopeId","data-v-7f082d85"]]),z2={class:"site-info flex flex-col items-center"},V2=["title"],W2={class:"site-author-name leading-6",m:"t-0 b-4"},X2={key:1,class:"site-name"},Y2={key:2,class:"site-subtitle block",text:"xs"},q2={key:3,class:"site-description my-1"},K2=Ve({__name:"SakuraSiteInfo",setup(r){const e=dr(),t=cl();return(i,n)=>{const s=H2,o=ur("RouterLink");return ie(),me("div",z2,[st(o,{class:"site-author-avatar",to:"/about"},{default:ot(()=>[st(s,{class:"rounded-full",src:oe(e).author.avatar,alt:"avatar"},null,8,["src"]),Ie("span",{class:"site-author-status",title:oe(e).author.status.message},it(oe(e).author.status.emoji),9,V2)]),_:1}),Ie("div",W2,[st(o,{to:"/about"},{default:ot(()=>[Vi(it(oe(e).author.name),1)]),_:1})]),oe(t).hasRoute("/about/site")?(ie(),at(o,{key:0,to:"/about/site",class:"site-name"},{default:ot(()=>[Vi(it(oe(e).title),1)]),_:1})):(ie(),me("span",X2,it(oe(e).title),1)),oe(e).subtitle?(ie(),me("h4",Y2,it(oe(e).subtitle),1)):Ge("v-if",!0),oe(e).description?(ie(),me("div",q2,it(oe(e).description),1)):Ge("v-if",!0)])}}}),J2={key:0,class:"va-overlay"},Q2=Ve({__name:"ValaxyOverlay",props:{show:{type:Boolean,default:!1}},setup(r){return(e,t)=>(ie(),at(Ng,{name:"fade"},{default:ot(()=>[e.show?(ie(),me("div",J2)):Ge("v-if",!0)]),_:1}))}}),Z2=Ve({__name:"SakuraSidebar",props:{position:{}},setup(r){const e=r,t=_s(),i=Xt(),n=ve(e.position??i.value.sidebarOptions.position);return(s,o)=>{const a=Q2,l=K2,c=$2,d=L2,p=h0;return ie(),me("div",null,[st(a,{class:"bg-$sakura-color-overlay-background md:hidden",show:oe(t).sidebar.isOpen,onClick:oe(t).sidebar.close},null,8,["show","onClick"]),Ie("aside",{class:vt(["sakura-sidebar inset-y-0 overflow-y-auto transition",[oe(t).sidebar.isOpen&&"open",n.value]]),text:"center",bg:"contain no-repeat"},[Ze(s.$slots,"default",{},()=>[st(l),st(c),st(d,{class:"mt-4"})],!0),Ze(s.$slots,"copyright",{},()=>[st(p)],!0)],2)])}}}),eM=Et(Z2,[["__scopeId","data-v-3658c967"]]),tM=Ve({__name:"ValaxyThemeApp",setup(r){const e=vv();return yo({meta:[{name:"theme-color",content:e.themeColor},{name:"msapplication-TileColor",content:e.themeColor}]}),(t,i)=>{const n=eM,s=ur("RouterView"),o=S2;return ie(),me(jt,null,[st(n,{class:"sakura-app-sidebar"}),st(o,null,{default:ot(()=>[st(s)]),_:1})],64)}}}),rM=Ve({render:()=>null}),iM=Ve({__name:"ValaxyApp",setup(r){const e=Sv();return e.value!=="empty"&&Qw(),(t,i)=>{const n=tM,s=CR;return oe(e)!=="empty"?(ie(),me(jt,{key:0},[st(n),st(s),st(oe(rM))],64)):Ge("v-if",!0)}}}),nM=Ve({__name:"App",setup(r){return(e,t)=>{const i=iM;return ie(),at(i)}}});function sM(r){return{page:ue(()=>r.currentRoute.value.data),frontmatter:ue(()=>r.currentRoute.value.meta.frontmatter)}}function oM(){const r=_l();return ue(()=>{const e=r.value.addons["valaxy-addon-bangumi"].options;return e?{...e,bilibiliEnabled:e.bilibiliEnabled??!0,bgmEnabled:e.bgmEnabled??!0,pageSize:e.pageSize??15,customEnabled:e.customEnabled??!1,customLabel:e.customLabel??"自定义"}:(console.warn("`valaxy-addon-bangumi` options not found"),{api:""})})}const aM=Object.freeze(Object.defineProperty({__proto__:null,useAddonBangumi:oM},Symbol.toStringTag,{value:"Module"})),lM=`bilibili-bangumi {
  --bbc-primary-color: var(--sakura-color-primary);
  --bbc-label-color: var(--sakura-color-primary);
  --bbc-text-base-color: var(--sakura-color-text);
}

.bbc-header-platform .bbc-tabs {
  /** 0 elements **/
  &:not(:has(*)) {
    display: none;
  }

  /** 1 elements **/
  &:has(> :last-child:nth-child(1)) {
    display: none;
  }

  /** >= 2 elements **/
  &:has(> :last-child:nth-child(2)) {
    display: flex;
  }
}
`;function cM(r,e){if(r.querySelector("style[data-bangumi]"))return;const t=document.createElement("style");t.setAttribute("data-bangumi","true"),t.textContent=e,r.appendChild(t)}function hM(){customElements.whenDefined("bilibili-bangumi").then(()=>{const r=document.querySelector("bilibili-bangumi"),e=r==null?void 0:r.shadowRoot;if(!e){console.warn("bilibili-bangumi element or shadowRoot not found.");return}cM(e,lM)})}function uM(r){const e=_s(),{isMd:t}=DT();r.scrollDamping&&!t&&ek();const i=r.sidebarOptions;i.persistence==="permanent"?e.sidebar.isOpen=$I(tl.IS_SIDEBAR_OPEN)||i.initialState:i.persistence==="session"?e.sidebar.isOpen=GI(tl.IS_SIDEBAR_OPEN)||i.initialState:e.sidebar.isOpen=i.initialState,Gg(aM)||hM()}const dM=async r=>{const{router:e,isClient:t,app:i}=r,{toScrollPosition:n}=await St(async()=>{const{toScrollPosition:o}=await import("./rolling.rnHUUvU3.js");return{toScrollPosition:o}},__vite__mapDeps([48,2,3,4,49,5,7,6]));if(!t)return;const s=i.runWithContext(()=>Xt().value);e.isReady().then(()=>uM(s)),n(e)},Qt={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},hg={silent:{level:-1},fatal:{level:Qt.fatal},error:{level:Qt.error},warn:{level:Qt.warn},log:{level:Qt.log},info:{level:Qt.info},success:{level:Qt.success},fail:{level:Qt.fail},ready:{level:Qt.info},start:{level:Qt.info},box:{level:Qt.info},debug:{level:Qt.debug},trace:{level:Qt.trace},verbose:{level:Qt.verbose}};function Sh(r){if(r===null||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Mu(r,e,t=".",i){if(!Sh(e))return Mu(r,{},t);const n=Object.assign({},e);for(const s in r){if(s==="__proto__"||s==="constructor")continue;const o=r[s];o!=null&&(Array.isArray(o)&&Array.isArray(n[s])?n[s]=[...o,...n[s]]:Sh(o)&&Sh(n[s])?n[s]=Mu(o,n[s],(t?`${t}.`:"")+s.toString()):n[s]=o)}return n}function pM(r){return(...e)=>e.reduce((t,i)=>Mu(t,i,""),{})}const fM=pM();function mM(r){return Object.prototype.toString.call(r)==="[object Object]"}function gM(r){return!(!mM(r)||!r.message&&!r.args||r.stack)}let Eh=!1;const ug=[];class Dt{constructor(e={}){fe(this,"options");fe(this,"_lastLog");fe(this,"_mockFn");const t=e.types||hg;this.options=fM({...e,defaults:{...e.defaults},level:Ah(e.level,t),reporters:[...e.reporters||[]]},{types:hg,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const i in t){const n={type:i,...this.options.defaults,...t[i]};this[i]=this._wrapLogFn(n),this[i].raw=this._wrapLogFn(n,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=Ah(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new Dt({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(t!==-1)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=i=>{this[t].raw(String(i).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){Eh=!0}resumeLogs(){Eh=!1;const e=ug.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,typeof t=="function")for(const i in this.options.types)this[i]=t(i,this.options.types[i])||this[i],this[i].raw=this[i]}_wrapLogFn(e,t){return(...i)=>{if(Eh){ug.push([this,e,i,t]);return}return this._logFn(e,i,t)}}_logFn(e,t,i){if((e.level||0)>this.level)return!1;const n={date:new Date,args:[],...e,level:Ah(e.level,this.options.types)};!i&&t.length===1&&gM(t[0])?Object.assign(n,t[0]):n.args=[...t],n.message&&(n.args.unshift(n.message),delete n.message),n.additional&&(Array.isArray(n.additional)||(n.additional=n.additional.split(`
`)),n.args.push(`
`+n.additional.join(`
`)),delete n.additional),n.type=typeof n.type=="string"?n.type.toLowerCase():"log",n.tag=typeof n.tag=="string"?n.tag:"";const s=(a=!1)=>{const l=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&l>0){const c=[...this._lastLog.object.args];l>1&&c.push(`(repeated ${l} times)`),this._log({...this._lastLog.object,args:c}),this._lastLog.count=1}a&&(this._lastLog.object=n,this._log(n))};clearTimeout(this._lastLog.timeout);const o=this._lastLog.time&&n.date?n.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=n.date,o<this.options.throttle)try{const a=JSON.stringify([n.type,n.tag,n.args]),l=this._lastLog.serialized===a;if(this._lastLog.serialized=a,l&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(s,this.options.throttle);return}}catch{}s(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function Ah(r,e={},t=3){return r===void 0?t:typeof r=="number"?r:e[r]&&e[r].level!==void 0?e[r].level:t}Dt.prototype.add=Dt.prototype.addReporter;Dt.prototype.remove=Dt.prototype.removeReporter;Dt.prototype.clear=Dt.prototype.removeReporter;Dt.prototype.withScope=Dt.prototype.withTag;Dt.prototype.mock=Dt.prototype.mockTypes;Dt.prototype.pause=Dt.prototype.pauseLogs;Dt.prototype.resume=Dt.prototype.resumeLogs;function vM(r={}){return new Dt(r)}class yM{constructor(e){fe(this,"options");fe(this,"defaultColor");fe(this,"levelColorMap");fe(this,"typeColorMap");this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:e===1?console.__warn||console.warn:console.__log||console.log}log(e){const t=this._getLogFn(e.level),i=e.type==="log"?"":e.type,n=e.tag||"",o=`
      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[n,i].filter(Boolean).join(":")}`;typeof e.args[0]=="string"?t(`${a}%c ${e.args[0]}`,o,"",...e.args.slice(1)):t(a,o,...e.args)}}function _M(r={}){return vM({reporters:r.reporters||[new yM({})],prompt(t,i={}){return i.type==="confirm"?Promise.resolve(confirm(t)):Promise.resolve(prompt(t))},...r})}_M();const bM=["top","right","bottom","left"],dg=["start","end"],pg=bM.reduce((r,e)=>r.concat(e,e+"-"+dg[0],e+"-"+dg[1]),[]),ho=Math.min,vn=Math.max,xM={left:"right",right:"left",bottom:"top",top:"bottom"},wM={start:"end",end:"start"};function Du(r,e,t){return vn(r,ho(e,t))}function On(r,e){return typeof r=="function"?r(e):r}function ii(r){return r.split("-")[0]}function Rr(r){return r.split("-")[1]}function p0(r){return r==="x"?"y":"x"}function kd(r){return r==="y"?"height":"width"}function Cn(r){return["top","bottom"].includes(ii(r))?"y":"x"}function Md(r){return p0(Cn(r))}function f0(r,e,t){t===void 0&&(t=!1);const i=Rr(r),n=Md(r),s=kd(n);let o=n==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=il(o)),[o,il(o)]}function TM(r){const e=il(r);return[rl(r),e,rl(e)]}function rl(r){return r.replace(/start|end/g,e=>wM[e])}function SM(r,e,t){const i=["left","right"],n=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?n:i:e?i:n;case"left":case"right":return e?s:o;default:return[]}}function EM(r,e,t,i){const n=Rr(r);let s=SM(ii(r),t==="start",i);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(rl)))),s}function il(r){return r.replace(/left|right|bottom|top/g,e=>xM[e])}function AM(r){return{top:0,right:0,bottom:0,left:0,...r}}function m0(r){return typeof r!="number"?AM(r):{top:r,right:r,bottom:r,left:r}}function Js(r){const{x:e,y:t,width:i,height:n}=r;return{width:i,height:n,top:t,left:e,right:e+i,bottom:t+n,x:e,y:t}}function fg(r,e,t){let{reference:i,floating:n}=r;const s=Cn(e),o=Md(e),a=kd(o),l=ii(e),c=s==="y",d=i.x+i.width/2-n.width/2,p=i.y+i.height/2-n.height/2,m=i[a]/2-n[a]/2;let g;switch(l){case"top":g={x:d,y:i.y-n.height};break;case"bottom":g={x:d,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:p};break;case"left":g={x:i.x-n.width,y:p};break;default:g={x:i.x,y:i.y}}switch(Rr(e)){case"start":g[o]-=m*(t&&c?-1:1);break;case"end":g[o]+=m*(t&&c?-1:1);break}return g}const CM=async(r,e,t)=>{const{placement:i="bottom",strategy:n="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:n}),{x:d,y:p}=fg(c,i,l),m=i,g={},y=0;for(let x=0;x<a.length;x++){const{name:w,fn:T}=a[x],{x:E,y:P,data:I,reset:A}=await T({x:d,y:p,initialPlacement:i,placement:m,strategy:n,middlewareData:g,rects:c,platform:o,elements:{reference:r,floating:e}});d=E??d,p=P??p,g={...g,[w]:{...g[w],...I}},A&&y<=50&&(y++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:n}):A.rects),{x:d,y:p}=fg(c,m,l)),x=-1)}return{x:d,y:p,placement:m,strategy:n,middlewareData:g}};async function Dl(r,e){var t;e===void 0&&(e={});const{x:i,y:n,platform:s,rects:o,elements:a,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=On(e,r),y=m0(g),w=a[m?p==="floating"?"reference":"floating":p],T=Js(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),E=p==="floating"?{x:i,y:n,width:o.floating.width,height:o.floating.height}:o.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),I=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},A=Js(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:P,strategy:l}):E);return{top:(T.top-A.top+y.top)/I.y,bottom:(A.bottom-T.bottom+y.bottom)/I.y,left:(T.left-A.left+y.left)/I.x,right:(A.right-T.right+y.right)/I.x}}const PM=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:i,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=On(r,e)||{};if(c==null)return{};const p=m0(d),m={x:t,y:i},g=Md(n),y=kd(g),x=await o.getDimensions(c),w=g==="y",T=w?"top":"left",E=w?"bottom":"right",P=w?"clientHeight":"clientWidth",I=s.reference[y]+s.reference[g]-m[g]-s.floating[y],A=m[g]-s.reference[g],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let b=F?F[P]:0;(!b||!await(o.isElement==null?void 0:o.isElement(F)))&&(b=a.floating[P]||s.floating[y]);const B=I/2-A/2,H=b/2-x[y]/2-1,W=ho(p[T],H),Q=ho(p[E],H),N=W,G=b-x[y]-Q,X=b/2-x[y]/2+B,se=Du(N,X,G),M=!l.arrow&&Rr(n)!=null&&X!==se&&s.reference[y]/2-(X<N?W:Q)-x[y]/2<0,L=M?X<N?X-N:X-G:0;return{[g]:m[g]+L,data:{[g]:se,centerOffset:X-se-L,...M&&{alignmentOffset:L}},reset:M}}});function RM(r,e,t){return(r?[...t.filter(n=>Rr(n)===r),...t.filter(n=>Rr(n)!==r)]:t.filter(n=>ii(n)===n)).filter(n=>r?Rr(n)===r||(e?rl(n)!==n:!1):!0)}const IM=function(r){return r===void 0&&(r={}),{name:"autoPlacement",options:r,async fn(e){var t,i,n;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:p,allowedPlacements:m=pg,autoAlignment:g=!0,...y}=On(r,e),x=p!==void 0||m===pg?RM(p||null,g,m):m,w=await Dl(e,y),T=((t=o.autoPlacement)==null?void 0:t.index)||0,E=x[T];if(E==null)return{};const P=f0(E,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==E)return{reset:{placement:x[0]}};const I=[w[ii(E)],w[P[0]],w[P[1]]],A=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:E,overflows:I}],F=x[T+1];if(F)return{data:{index:T+1,overflows:A},reset:{placement:F}};const b=A.map(W=>{const Q=Rr(W.placement);return[W.placement,Q&&d?W.overflows.slice(0,2).reduce((N,G)=>N+G,0):W.overflows[0],W.overflows]}).sort((W,Q)=>W[1]-Q[1]),H=((n=b.filter(W=>W[2].slice(0,Rr(W[0])?2:3).every(Q=>Q<=0))[0])==null?void 0:n[0])||b[0][0];return H!==a?{data:{index:T+1,overflows:A},reset:{placement:H}}:{}}}},kM=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,i;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...w}=On(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const T=ii(n),E=Cn(a),P=ii(a)===a,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=m||(P||!x?[il(a)]:TM(a)),F=y!=="none";!m&&F&&A.push(...EM(a,x,y,I));const b=[a,...A],B=await Dl(e,w),H=[];let W=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&H.push(B[T]),p){const X=f0(n,o,I);H.push(B[X[0]],B[X[1]])}if(W=[...W,{placement:n,overflows:H}],!H.every(X=>X<=0)){var Q,N;const X=(((Q=s.flip)==null?void 0:Q.index)||0)+1,se=b[X];if(se)return{data:{index:X,overflows:W},reset:{placement:se}};let M=(N=W.filter(L=>L.overflows[0]<=0).sort((L,k)=>L.overflows[1]-k.overflows[1])[0])==null?void 0:N.placement;if(!M)switch(g){case"bestFit":{var G;const L=(G=W.filter(k=>{if(F){const z=Cn(k.placement);return z===E||z==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(z=>z>0).reduce((z,U)=>z+U,0)]).sort((k,z)=>k[1]-z[1])[0])==null?void 0:G[0];L&&(M=L);break}case"initialPlacement":M=a;break}if(n!==M)return{reset:{placement:M}}}return{}}}};async function MM(r,e){const{placement:t,platform:i,elements:n}=r,s=await(i.isRTL==null?void 0:i.isRTL(n.floating)),o=ii(t),a=Rr(t),l=Cn(t)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,p=On(e,r);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const DM=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,i;const{x:n,y:s,placement:o,middlewareData:a}=e,l=await MM(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},OM=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:i,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:T,y:E}=w;return{x:T,y:E}}},...l}=On(r,e),c={x:t,y:i},d=await Dl(e,l),p=Cn(ii(n)),m=p0(p);let g=c[m],y=c[p];if(s){const w=m==="y"?"top":"left",T=m==="y"?"bottom":"right",E=g+d[w],P=g-d[T];g=Du(E,g,P)}if(o){const w=p==="y"?"top":"left",T=p==="y"?"bottom":"right",E=y+d[w],P=y-d[T];y=Du(E,y,P)}const x=a.fn({...e,[m]:g,[p]:y});return{...x,data:{x:x.x-t,y:x.y-i,enabled:{[m]:s,[p]:o}}}}}},LM=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,i;const{placement:n,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=On(r,e),d=await Dl(e,c),p=ii(n),m=Rr(n),g=Cn(n)==="y",{width:y,height:x}=s.floating;let w,T;p==="top"||p==="bottom"?(w=p,T=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(T=p,w=m==="end"?"top":"bottom");const E=x-d.top-d.bottom,P=y-d.left-d.right,I=ho(x-d[w],E),A=ho(y-d[T],P),F=!e.middlewareData.shift;let b=I,B=A;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=P),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(b=E),F&&!m){const W=vn(d.left,0),Q=vn(d.right,0),N=vn(d.top,0),G=vn(d.bottom,0);g?B=y-2*(W!==0||Q!==0?W+Q:vn(d.left,d.right)):b=x-2*(N!==0||G!==0?N+G:vn(d.top,d.bottom))}await l({...e,availableWidth:B,availableHeight:b});const H=await o.getDimensions(a.floating);return y!==H.width||x!==H.height?{reset:{rects:!0}}:{}}}};function cr(r){var e;return((e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(r){return cr(r).getComputedStyle(r)}const mg=Math.min,Qs=Math.max,nl=Math.round;function g0(r){const e=Jr(r);let t=parseFloat(e.width),i=parseFloat(e.height);const n=r.offsetWidth,s=r.offsetHeight,o=nl(t)!==n||nl(i)!==s;return o&&(t=n,i=s),{width:t,height:i,fallback:o}}function Qi(r){return y0(r)?(r.nodeName||"").toLowerCase():""}let pa;function v0(){if(pa)return pa;const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?(pa=r.brands.map(e=>e.brand+"/"+e.version).join(" "),pa):navigator.userAgent}function Qr(r){return r instanceof cr(r).HTMLElement}function Xi(r){return r instanceof cr(r).Element}function y0(r){return r instanceof cr(r).Node}function gg(r){return typeof ShadowRoot>"u"?!1:r instanceof cr(r).ShadowRoot||r instanceof ShadowRoot}function Ol(r){const{overflow:e,overflowX:t,overflowY:i,display:n}=Jr(r);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(n)}function BM(r){return["table","td","th"].includes(Qi(r))}function Ou(r){const e=/firefox/i.test(v0()),t=Jr(r),i=t.backdropFilter||t.WebkitBackdropFilter;return t.transform!=="none"||t.perspective!=="none"||!!i&&i!=="none"||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"||["transform","perspective"].some(n=>t.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const s=t.contain;return s!=null&&s.includes(n)})}function _0(){return!/^((?!chrome|android).)*safari/i.test(v0())}function Dd(r){return["html","body","#document"].includes(Qi(r))}function b0(r){return Xi(r)?r:r.contextElement}const x0={x:1,y:1};function cs(r){const e=b0(r);if(!Qr(e))return x0;const t=e.getBoundingClientRect(),{width:i,height:n,fallback:s}=g0(e);let o=(s?nl(t.width):t.width)/i,a=(s?nl(t.height):t.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function uo(r,e,t,i){var n,s;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=r.getBoundingClientRect(),a=b0(r);let l=x0;e&&(i?Xi(i)&&(l=cs(i)):l=cs(r));const c=a?cr(a):window,d=!_0()&&t;let p=(o.left+(d&&((n=c.visualViewport)==null?void 0:n.offsetLeft)||0))/l.x,m=(o.top+(d&&((s=c.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,g=o.width/l.x,y=o.height/l.y;if(a){const x=cr(a),w=i&&Xi(i)?cr(i):i;let T=x.frameElement;for(;T&&i&&w!==x;){const E=cs(T),P=T.getBoundingClientRect(),I=getComputedStyle(T);P.x+=(T.clientLeft+parseFloat(I.paddingLeft))*E.x,P.y+=(T.clientTop+parseFloat(I.paddingTop))*E.y,p*=E.x,m*=E.y,g*=E.x,y*=E.y,p+=P.x,m+=P.y,T=cr(T).frameElement}}return{width:g,height:y,top:m,right:p+g,bottom:m+y,left:p,x:p,y:m}}function Yi(r){return((y0(r)?r.ownerDocument:r.document)||window.document).documentElement}function Ll(r){return Xi(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function w0(r){return uo(Yi(r)).left+Ll(r).scrollLeft}function po(r){if(Qi(r)==="html")return r;const e=r.assignedSlot||r.parentNode||gg(r)&&r.host||Yi(r);return gg(e)?e.host:e}function T0(r){const e=po(r);return Dd(e)?e.ownerDocument.body:Qr(e)&&Ol(e)?e:T0(e)}function sl(r,e){var t;e===void 0&&(e=[]);const i=T0(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=cr(i);return n?e.concat(s,s.visualViewport||[],Ol(i)?i:[]):e.concat(i,sl(i))}function vg(r,e,t){return e==="viewport"?Js(function(i,n){const s=cr(i),o=Yi(i),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,d=0,p=0;if(a){l=a.width,c=a.height;const m=_0();(m||!m&&n==="fixed")&&(d=a.offsetLeft,p=a.offsetTop)}return{width:l,height:c,x:d,y:p}}(r,t)):Xi(e)?Js(function(i,n){const s=uo(i,!0,n==="fixed"),o=s.top+i.clientTop,a=s.left+i.clientLeft,l=Qr(i)?cs(i):{x:1,y:1};return{width:i.clientWidth*l.x,height:i.clientHeight*l.y,x:a*l.x,y:o*l.y}}(e,t)):Js(function(i){const n=Yi(i),s=Ll(i),o=i.ownerDocument.body,a=Qs(n.scrollWidth,n.clientWidth,o.scrollWidth,o.clientWidth),l=Qs(n.scrollHeight,n.clientHeight,o.scrollHeight,o.clientHeight);let c=-s.scrollLeft+w0(i);const d=-s.scrollTop;return Jr(o).direction==="rtl"&&(c+=Qs(n.clientWidth,o.clientWidth)-a),{width:a,height:l,x:c,y:d}}(Yi(r)))}function yg(r){return Qr(r)&&Jr(r).position!=="fixed"?r.offsetParent:null}function _g(r){const e=cr(r);let t=yg(r);for(;t&&BM(t)&&Jr(t).position==="static";)t=yg(t);return t&&(Qi(t)==="html"||Qi(t)==="body"&&Jr(t).position==="static"&&!Ou(t))?e:t||function(i){let n=po(i);for(;Qr(n)&&!Dd(n);){if(Ou(n))return n;n=po(n)}return null}(r)||e}function FM(r,e,t){const i=Qr(e),n=Yi(e),s=uo(r,!0,t==="fixed",e);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&t!=="fixed")if((Qi(e)!=="body"||Ol(n))&&(o=Ll(e)),Qr(e)){const l=uo(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else n&&(a.x=w0(n));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}const NM={getClippingRect:function(r){let{element:e,boundary:t,rootBoundary:i,strategy:n}=r;const s=t==="clippingAncestors"?function(c,d){const p=d.get(c);if(p)return p;let m=sl(c).filter(w=>Xi(w)&&Qi(w)!=="body"),g=null;const y=Jr(c).position==="fixed";let x=y?po(c):c;for(;Xi(x)&&!Dd(x);){const w=Jr(x),T=Ou(x);(y?T||g:T||w.position!=="static"||!g||!["absolute","fixed"].includes(g.position))?g=w:m=m.filter(E=>E!==x),x=po(x)}return d.set(c,m),m}(e,this._c):[].concat(t),o=[...s,i],a=o[0],l=o.reduce((c,d)=>{const p=vg(e,d,n);return c.top=Qs(p.top,c.top),c.right=mg(p.right,c.right),c.bottom=mg(p.bottom,c.bottom),c.left=Qs(p.left,c.left),c},vg(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(r){let{rect:e,offsetParent:t,strategy:i}=r;const n=Qr(t),s=Yi(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((n||!n&&i!=="fixed")&&((Qi(t)!=="body"||Ol(s))&&(o=Ll(t)),Qr(t))){const c=uo(t);a=cs(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},isElement:Xi,getDimensions:function(r){return Qr(r)?g0(r):r.getBoundingClientRect()},getOffsetParent:_g,getDocumentElement:Yi,getScale:cs,async getElementRects(r){let{reference:e,floating:t,strategy:i}=r;const n=this.getOffsetParent||_g,s=this.getDimensions;return{reference:FM(e,await n(t),i),floating:{x:0,y:0,...await s(t)}}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>Jr(r).direction==="rtl"},$M=(r,e,t)=>{const i=new Map,n={platform:NM,...t},s={...n.platform,_c:i};return CM(r,e,{...n,platform:s})};function S0(r,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(typeof e[t]=="object"&&r[t]?S0(r[t],e[t]):r[t]=e[t])}const Ir={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:r=>[...r,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function fo(r,e){let t=Ir.themes[r]||{},i;do i=t[e],typeof i>"u"?t.$extend?t=Ir.themes[t.$extend]||{}:(t=null,i=Ir[e]):t=null;while(t);return i}function UM(r){const e=[r];let t=Ir.themes[r]||{};do t.$extend&&!t.$resetCss?(e.push(t.$extend),t=Ir.themes[t.$extend]||{}):t=null;while(t);return e.map(i=>`v-popper--theme-${i}`)}function bg(r){const e=[r];let t=Ir.themes[r]||{};do t.$extend?(e.push(t.$extend),t=Ir.themes[t.$extend]||{}):t=null;while(t);return e}let ds=!1;if(typeof window<"u"){ds=!1;try{const r=Object.defineProperty({},"passive",{get(){ds=!0}});window.addEventListener("test",null,r)}catch{}}let E0=!1;typeof window<"u"&&typeof navigator<"u"&&(E0=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const A0=["auto","top","bottom","left","right"].reduce((r,e)=>r.concat([e,`${e}-start`,`${e}-end`]),[]),xg={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},wg={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function Tg(r,e){const t=r.indexOf(e);t!==-1&&r.splice(t,1)}function Ch(){return new Promise(r=>requestAnimationFrame(()=>{requestAnimationFrame(r)}))}const Tr=[];let hn=null;const Sg={};function Eg(r){let e=Sg[r];return e||(e=Sg[r]=[]),e}let Lu=function(){};typeof window<"u"&&(Lu=window.Element);function Je(r){return function(e){return fo(e.theme,r)}}const Ph="__floating-vue__popper",C0=()=>Ve({name:"VPopper",provide(){return{[Ph]:{parentPopper:this}}},inject:{[Ph]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:Je("disabled")},positioningDisabled:{type:Boolean,default:Je("positioningDisabled")},placement:{type:String,default:Je("placement"),validator:r=>A0.includes(r)},delay:{type:[String,Number,Object],default:Je("delay")},distance:{type:[Number,String],default:Je("distance")},skidding:{type:[Number,String],default:Je("skidding")},triggers:{type:Array,default:Je("triggers")},showTriggers:{type:[Array,Function],default:Je("showTriggers")},hideTriggers:{type:[Array,Function],default:Je("hideTriggers")},popperTriggers:{type:Array,default:Je("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:Je("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:Je("popperHideTriggers")},container:{type:[String,Object,Lu,Boolean],default:Je("container")},boundary:{type:[String,Lu],default:Je("boundary")},strategy:{type:String,validator:r=>["absolute","fixed"].includes(r),default:Je("strategy")},autoHide:{type:[Boolean,Function],default:Je("autoHide")},handleResize:{type:Boolean,default:Je("handleResize")},instantMove:{type:Boolean,default:Je("instantMove")},eagerMount:{type:Boolean,default:Je("eagerMount")},popperClass:{type:[String,Array,Object],default:Je("popperClass")},computeTransformOrigin:{type:Boolean,default:Je("computeTransformOrigin")},autoMinSize:{type:Boolean,default:Je("autoMinSize")},autoSize:{type:[Boolean,String],default:Je("autoSize")},autoMaxSize:{type:Boolean,default:Je("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:Je("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:Je("preventOverflow")},overflowPadding:{type:[Number,String],default:Je("overflowPadding")},arrowPadding:{type:[Number,String],default:Je("arrowPadding")},arrowOverflow:{type:Boolean,default:Je("arrowOverflow")},flip:{type:Boolean,default:Je("flip")},shift:{type:Boolean,default:Je("shift")},shiftCrossAxis:{type:Boolean,default:Je("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:Je("noAutoFocus")},disposeTimeout:{type:Number,default:Je("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(r=>r.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var r;return(r=this[Ph])==null?void 0:r.parentPopper},hasPopperShowTriggerHover(){var r,e;return((r=this.popperTriggers)==null?void 0:r.includes("hover"))||((e=this.popperShowTriggers)==null?void 0:e.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(r){r?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((r,e)=>(r[e]="$_computePosition",r),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:r=null,skipDelay:e=!1,force:t=!1}={}){var i,n;(i=this.parentPopper)!=null&&i.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(t||!this.disabled)&&(((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(r,e),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:r=null,skipDelay:e=!1}={}){var t;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:e}),this.parentPopper.lockedChild=null)},1e3));return}((t=this.parentPopper)==null?void 0:t.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(r,e),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var r;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((r=this.referenceNode)==null?void 0:r.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(e=>e.nodeType===e.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const r={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&r.middleware.push(DM({mainAxis:this.distance,crossAxis:this.skidding}));const e=this.placement.startsWith("auto");if(e?r.middleware.push(IM({alignment:this.placement.split("-")[1]??""})):r.placement=this.placement,this.preventOverflow&&(this.shift&&r.middleware.push(OM({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!e&&this.flip&&r.middleware.push(kM({padding:this.overflowPadding,boundary:this.boundary}))),r.middleware.push(PM({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&r.middleware.push({name:"arrowOverflow",fn:({placement:i,rects:n,middlewareData:s})=>{let o;const{centerOffset:a}=s.arrow;return i.startsWith("top")||i.startsWith("bottom")?o=Math.abs(a)>n.reference.width/2:o=Math.abs(a)>n.reference.height/2,{data:{overflow:o}}}}),this.autoMinSize||this.autoSize){const i=this.autoSize?this.autoSize:this.autoMinSize?"min":null;r.middleware.push({name:"autoSize",fn:({rects:n,placement:s,middlewareData:o})=>{var a;if((a=o.autoSize)!=null&&a.skip)return{};let l,c;return s.startsWith("top")||s.startsWith("bottom")?l=n.reference.width:c=n.reference.height,this.$_innerNode.style[i==="min"?"minWidth":i==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[i==="min"?"minHeight":i==="max"?"maxHeight":"height"]=c!=null?`${c}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,r.middleware.push(LM({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:i,availableHeight:n})=>{this.$_innerNode.style.maxWidth=i!=null?`${i}px`:null,this.$_innerNode.style.maxHeight=n!=null?`${n}px`:null}})));const t=await $M(this.$_referenceNode,this.$_popperNode,r);Object.assign(this.result,{x:t.x,y:t.y,placement:t.placement,strategy:t.strategy,arrow:{...t.middlewareData.arrow,...t.middlewareData.arrowOverflow}})},$_scheduleShow(r,e=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),hn&&this.instantMove&&hn.instantMove&&hn!==this.parentPopper){hn.$_applyHide(!0),this.$_applyShow(!0);return}e?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(r,e=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(hn=this),e?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(r){const e=this.delay;return parseInt(e&&e[r]||e||0)},async $_applyShow(r=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=r,!this.isShown&&(this.$_ensureTeleport(),await Ch(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...sl(this.$_referenceNode),...sl(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const e=this.$_referenceNode.getBoundingClientRect(),t=this.$_popperNode.querySelector(".v-popper__wrapper"),i=t.parentNode.getBoundingClientRect(),n=e.x+e.width/2-(i.left+t.offsetLeft),s=e.y+e.height/2-(i.top+t.offsetTop);this.result.transformOrigin=`${n}px ${s}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const r=this.showGroup;if(r){let e;for(let t=0;t<Tr.length;t++)e=Tr[t],e.showGroup!==r&&(e.hide(),e.$emit("close-group"))}Tr.push(this),document.body.classList.add("v-popper--some-open");for(const e of bg(this.theme))Eg(e).push(this),document.body.classList.add(`v-popper--some-open--${e}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await Ch(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(r=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=r,Tg(Tr,this),Tr.length===0&&document.body.classList.remove("v-popper--some-open");for(const t of bg(this.theme)){const i=Eg(t);Tg(i,this),i.length===0&&document.body.classList.remove(`v-popper--some-open--${t}`)}hn===this&&(hn=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const e=this.disposeTimeout;e!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},e)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await Ch(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let r=this.container;if(typeof r=="string"?r=window.document.querySelector(r):r===!1&&(r=this.$_targetNodes[0].parentNode),!r)throw new Error("No container for popover: "+this.container);r.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const r=t=>{this.isShown&&!this.$_hideInProgress||(t.usedByTooltip=!0,!this.$_preventShow&&this.show({event:t}))};this.$_registerTriggerListeners(this.$_targetNodes,xg,this.triggers,this.showTriggers,r),this.$_registerTriggerListeners([this.$_popperNode],xg,this.popperTriggers,this.popperShowTriggers,r);const e=t=>{t.usedByTooltip||this.hide({event:t})};this.$_registerTriggerListeners(this.$_targetNodes,wg,this.triggers,this.hideTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],wg,this.popperTriggers,this.popperHideTriggers,e)},$_registerEventListeners(r,e,t){this.$_events.push({targetNodes:r,eventType:e,handler:t}),r.forEach(i=>i.addEventListener(e,t,ds?{passive:!0}:void 0))},$_registerTriggerListeners(r,e,t,i,n){let s=t;i!=null&&(s=typeof i=="function"?i(s):i),s.forEach(o=>{const a=e[o];a&&this.$_registerEventListeners(r,a,n)})},$_removeEventListeners(r){const e=[];this.$_events.forEach(t=>{const{targetNodes:i,eventType:n,handler:s}=t;!r||r===n?i.forEach(o=>o.removeEventListener(n,s)):e.push(t)}),this.$_events=e},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(r,e=!1){this.$_showFrameLocked||(this.hide({event:r}),r.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),e&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(r,e){for(const t of this.$_targetNodes){const i=t.getAttribute(r);i&&(t.removeAttribute(r),t.setAttribute(e,i))}},$_applyAttrsToTarget(r){for(const e of this.$_targetNodes)for(const t in r){const i=r[t];i==null?e.removeAttribute(t):e.setAttribute(t,i)}},$_updateParentShownChildren(r){let e=this.parentPopper;for(;e;)r?e.shownChildren.add(this.randomId):(e.shownChildren.delete(this.randomId),e.pendingHide&&e.hide()),e=e.parentPopper},$_isAimingPopper(){const r=this.$_referenceNode.getBoundingClientRect();if(Zs>=r.left&&Zs<=r.right&&eo>=r.top&&eo<=r.bottom){const e=this.$_popperNode.getBoundingClientRect(),t=Zs-Bi,i=eo-Fi,n=e.left+e.width/2-Bi+(e.top+e.height/2)-Fi+e.width+e.height,s=Bi+t*n,o=Fi+i*n;return fa(Bi,Fi,s,o,e.left,e.top,e.left,e.bottom)||fa(Bi,Fi,s,o,e.left,e.top,e.right,e.top)||fa(Bi,Fi,s,o,e.right,e.top,e.right,e.bottom)||fa(Bi,Fi,s,o,e.left,e.bottom,e.right,e.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(E0){const r=ds?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",e=>Ag(e,!0),r),document.addEventListener("touchend",e=>Cg(e,!0),r)}else window.addEventListener("mousedown",r=>Ag(r,!1),!0),window.addEventListener("click",r=>Cg(r,!1),!0);window.addEventListener("resize",jM)}function Ag(r,e){if(Ir.autoHideOnMousedown)P0(r,e);else for(let t=0;t<Tr.length;t++){const i=Tr[t];try{i.mouseDownContains=i.popperNode().contains(r.target)}catch{}}}function Cg(r,e){Ir.autoHideOnMousedown||P0(r,e)}function P0(r,e){const t={};for(let i=Tr.length-1;i>=0;i--){const n=Tr[i];try{const s=n.containsGlobalTarget=n.mouseDownContains||n.popperNode().contains(r.target);n.pendingHide=!1,requestAnimationFrame(()=>{if(n.pendingHide=!1,!t[n.randomId]&&Pg(n,s,r)){if(n.$_handleGlobalClose(r,e),!r.closeAllPopover&&r.closePopover&&s){let a=n.parentPopper;for(;a;)t[a.randomId]=!0,a=a.parentPopper;return}let o=n.parentPopper;for(;o&&Pg(o,o.containsGlobalTarget,r);)o.$_handleGlobalClose(r,e),o=o.parentPopper}})}catch{}}}function Pg(r,e,t){return t.closeAllPopover||t.closePopover&&e||GM(r,t)&&!e}function GM(r,e){if(typeof r.autoHide=="function"){const t=r.autoHide(e);return r.lastAutoHide=t,t}return r.autoHide}function jM(){for(let r=0;r<Tr.length;r++)Tr[r].$_computePosition()}let Bi=0,Fi=0,Zs=0,eo=0;typeof window<"u"&&window.addEventListener("mousemove",r=>{Bi=Zs,Fi=eo,Zs=r.clientX,eo=r.clientY},ds?{passive:!0}:void 0);function fa(r,e,t,i,n,s,o,a){const l=((o-n)*(e-s)-(a-s)*(r-n))/((a-s)*(t-r)-(o-n)*(i-e)),c=((t-r)*(e-s)-(i-e)*(r-n))/((a-s)*(t-r)-(o-n)*(i-e));return l>=0&&l<=1&&c>=0&&c<=1}const HM={extends:C0()},Bl=(r,e)=>{const t=r.__vccOpts||r;for(const[i,n]of e)t[i]=n;return t};function zM(r,e,t,i,n,s){return ie(),me("div",{ref:"reference",class:vt(["v-popper",{"v-popper--shown":r.slotData.isShown}])},[Ze(r.$slots,"default",Xu($g(r.slotData)))],2)}const VM=Bl(HM,[["render",zM]]);function WM(){var r=window.navigator.userAgent,e=r.indexOf("MSIE ");if(e>0)return parseInt(r.substring(e+5,r.indexOf(".",e)),10);var t=r.indexOf("Trident/");if(t>0){var i=r.indexOf("rv:");return parseInt(r.substring(i+3,r.indexOf(".",i)),10)}var n=r.indexOf("Edge/");return n>0?parseInt(r.substring(n+5,r.indexOf(".",n)),10):-1}let Ma;function Bu(){Bu.init||(Bu.init=!0,Ma=WM()!==-1)}var Fl={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Bu(),Zr(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const r=document.createElement("object");this._resizeObject=r,r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex",-1),r.onload=this.addResizeHandlers,r.type="text/html",Ma&&this.$el.appendChild(r),r.data="about:blank",Ma||this.$el.appendChild(r)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Ma&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const XM=tx();Zb("data-v-b329ee4c");const YM={class:"resize-observer",tabindex:"-1"};ex();const qM=XM((r,e,t,i,n,s)=>(ie(),at("div",YM)));Fl.render=qM;Fl.__scopeId="data-v-b329ee4c";Fl.__file="src/components/ResizeObserver.vue";const R0=(r="theme")=>({computed:{themeClass(){return UM(this[r])}}}),KM=Ve({name:"VPopperContent",components:{ResizeObserver:Fl},mixins:[R0()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(r){return r!=null&&!isNaN(r)?`${r}px`:null}}}),JM=["id","aria-hidden","tabindex","data-popper-placement"],QM={ref:"inner",class:"v-popper__inner"},ZM=Ie("div",{class:"v-popper__arrow-outer"},null,-1),eD=Ie("div",{class:"v-popper__arrow-inner"},null,-1),tD=[ZM,eD];function rD(r,e,t,i,n,s){const o=ur("ResizeObserver");return ie(),me("div",{id:r.popperId,ref:"popover",class:vt(["v-popper__popper",[r.themeClass,r.classes.popperClass,{"v-popper__popper--shown":r.shown,"v-popper__popper--hidden":!r.shown,"v-popper__popper--show-from":r.classes.showFrom,"v-popper__popper--show-to":r.classes.showTo,"v-popper__popper--hide-from":r.classes.hideFrom,"v-popper__popper--hide-to":r.classes.hideTo,"v-popper__popper--skip-transition":r.skipTransition,"v-popper__popper--arrow-overflow":r.result&&r.result.arrow.overflow,"v-popper__popper--no-positioning":!r.result}]]),style:Vr(r.result?{position:r.result.strategy,transform:`translate3d(${Math.round(r.result.x)}px,${Math.round(r.result.y)}px,0)`}:void 0),"aria-hidden":r.shown?"false":"true",tabindex:r.autoHide?0:void 0,"data-popper-placement":r.result?r.result.placement:void 0,onKeyup:e[2]||(e[2]=Fg(a=>r.autoHide&&r.$emit("hide"),["esc"]))},[Ie("div",{class:"v-popper__backdrop",onClick:e[0]||(e[0]=a=>r.autoHide&&r.$emit("hide"))}),Ie("div",{class:"v-popper__wrapper",style:Vr(r.result?{transformOrigin:r.result.transformOrigin}:void 0)},[Ie("div",QM,[r.mounted?(ie(),me(jt,{key:0},[Ie("div",null,[Ze(r.$slots,"default")]),r.handleResize?(ie(),at(o,{key:0,onNotify:e[1]||(e[1]=a=>r.$emit("resize",a))})):Ge("",!0)],64)):Ge("",!0)],512),Ie("div",{ref:"arrow",class:"v-popper__arrow-container",style:Vr(r.result?{left:r.toPx(r.result.arrow.x),top:r.toPx(r.result.arrow.y)}:void 0)},tD,4)],4)],46,JM)}const I0=Bl(KM,[["render",rD]]),k0={methods:{show(...r){return this.$refs.popper.show(...r)},hide(...r){return this.$refs.popper.hide(...r)},dispose(...r){return this.$refs.popper.dispose(...r)},onResize(...r){return this.$refs.popper.onResize(...r)}}};let Fu=function(){};typeof window<"u"&&(Fu=window.Element);const iD=Ve({name:"VPopperWrapper",components:{Popper:VM,PopperContent:I0},mixins:[k0,R0("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Fu,Boolean],default:void 0},boundary:{type:[String,Fu],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(r=>r!==this.$refs.popperContent.$el)}}});function nD(r,e,t,i,n,s){const o=ur("PopperContent"),a=ur("Popper");return ie(),at(a,_i({ref:"popper"},r.$props,{theme:r.finalTheme,"target-nodes":r.getTargetNodes,"popper-node":()=>r.$refs.popperContent.$el,class:[r.themeClass],onShow:e[0]||(e[0]=()=>r.$emit("show")),onHide:e[1]||(e[1]=()=>r.$emit("hide")),"onUpdate:shown":e[2]||(e[2]=l=>r.$emit("update:shown",l)),onApplyShow:e[3]||(e[3]=()=>r.$emit("apply-show")),onApplyHide:e[4]||(e[4]=()=>r.$emit("apply-hide")),onCloseGroup:e[5]||(e[5]=()=>r.$emit("close-group")),onCloseDirective:e[6]||(e[6]=()=>r.$emit("close-directive")),onAutoHide:e[7]||(e[7]=()=>r.$emit("auto-hide")),onResize:e[8]||(e[8]=()=>r.$emit("resize"))}),{default:ot(({popperId:l,isShown:c,shouldMountContent:d,skipTransition:p,autoHide:m,show:g,hide:y,handleResize:x,onResize:w,classes:T,result:E})=>[Ze(r.$slots,"default",{shown:c,show:g,hide:y}),st(o,{ref:"popperContent","popper-id":l,theme:r.finalTheme,shown:c,mounted:d,"skip-transition":p,"auto-hide":m,"handle-resize":x,classes:T,result:E,onHide:y,onResize:w},{default:ot(()=>[Ze(r.$slots,"popper",{shown:c,hide:y})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Od=Bl(iD,[["render",nD]]),sD={...Od,name:"VDropdown",vPopperTheme:"dropdown"},oD={...Od,name:"VMenu",vPopperTheme:"menu"},aD={...Od,name:"VTooltip",vPopperTheme:"tooltip"},lD=Ve({name:"VTooltipDirective",components:{Popper:C0(),PopperContent:I0},mixins:[k0],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:r=>fo(r.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:r=>fo(r.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(r){if(typeof this.content=="function"&&this.$_isShown&&(r||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const e=++this.$_fetchId,t=this.content(this);t.then?t.then(i=>this.onResult(e,i)):this.onResult(e,t)}},onResult(r,e){r===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=e)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),cD=["innerHTML"],hD=["textContent"];function uD(r,e,t,i,n,s){const o=ur("PopperContent"),a=ur("Popper");return ie(),at(a,_i({ref:"popper"},r.$attrs,{theme:r.theme,"target-nodes":r.targetNodes,"popper-node":()=>r.$refs.popperContent.$el,onApplyShow:r.onShow,onApplyHide:r.onHide}),{default:ot(({popperId:l,isShown:c,shouldMountContent:d,skipTransition:p,autoHide:m,hide:g,handleResize:y,onResize:x,classes:w,result:T})=>[st(o,{ref:"popperContent",class:vt({"v-popper--tooltip-loading":r.loading}),"popper-id":l,theme:r.theme,shown:c,mounted:d,"skip-transition":p,"auto-hide":m,"handle-resize":y,classes:w,result:T,onHide:g,onResize:x},{default:ot(()=>[r.html?(ie(),me("div",{key:0,innerHTML:r.finalContent},null,8,cD)):(ie(),me("div",{key:1,textContent:it(r.finalContent)},null,8,hD))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const dD=Bl(lD,[["render",uD]]),M0="v-popper--has-tooltip";function pD(r,e){let t=r.placement;if(!t&&e)for(const i of A0)e[i]&&(t=i);return t||(t=fo(r.theme||"tooltip","placement")),t}function D0(r,e,t){let i;const n=typeof e;return n==="string"?i={content:e}:e&&n==="object"?i=e:i={content:!1},i.placement=pD(i,t),i.targetNodes=()=>[r],i.referenceNode=()=>r,i}let Rh,mo,fD=0;function mD(){if(Rh)return;mo=ve([]),Rh=Lg({name:"VTooltipDirectiveApp",setup(){return{directives:mo}},render(){return this.directives.map(e=>rx(dD,{...e.options,shown:e.shown||e.options.shown,key:e.id}))},devtools:{hide:!0}});const r=document.createElement("div");document.body.appendChild(r),Rh.mount(r)}function gD(r,e,t){mD();const i=ve(D0(r,e,t)),n=ve(!1),s={id:fD++,options:i,shown:n};return mo.value.push(s),r.classList&&r.classList.add(M0),r.$_popper={options:i,item:s,show(){n.value=!0},hide(){n.value=!1}}}function O0(r){if(r.$_popper){const e=mo.value.indexOf(r.$_popper.item);e!==-1&&mo.value.splice(e,1),delete r.$_popper,delete r.$_popperOldShown,delete r.$_popperMountTarget}r.classList&&r.classList.remove(M0)}function Rg(r,{value:e,modifiers:t}){const i=D0(r,e,t);if(!i.content||fo(i.theme||"tooltip","disabled"))O0(r);else{let n;r.$_popper?(n=r.$_popper,n.options.value=i):n=gD(r,e,t),typeof e.shown<"u"&&e.shown!==r.$_popperOldShown&&(r.$_popperOldShown=e.shown,e.shown?n.show():n.hide())}}const vD={beforeMount:Rg,updated:Rg,beforeUnmount(r){O0(r)}};function Ig(r){r.addEventListener("mousedown",ol),r.addEventListener("click",ol),r.addEventListener("touchstart",L0,ds?{passive:!0}:!1)}function kg(r){r.removeEventListener("mousedown",ol),r.removeEventListener("click",ol),r.removeEventListener("touchstart",L0),r.removeEventListener("touchend",B0),r.removeEventListener("touchcancel",F0)}function ol(r){const e=r.currentTarget;r.closePopover=!e.$_vclosepopover_touch,r.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}function L0(r){if(r.changedTouches.length===1){const e=r.currentTarget;e.$_vclosepopover_touch=!0;const t=r.changedTouches[0];e.$_vclosepopover_touchPoint=t,e.addEventListener("touchend",B0),e.addEventListener("touchcancel",F0)}}function B0(r){const e=r.currentTarget;if(e.$_vclosepopover_touch=!1,r.changedTouches.length===1){const t=r.changedTouches[0],i=e.$_vclosepopover_touchPoint;r.closePopover=Math.abs(t.screenY-i.screenY)<20&&Math.abs(t.screenX-i.screenX)<20,r.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}}function F0(r){const e=r.currentTarget;e.$_vclosepopover_touch=!1}const yD={beforeMount(r,{value:e,modifiers:t}){r.$_closePopoverModifiers=t,(typeof e>"u"||e)&&Ig(r)},updated(r,{value:e,oldValue:t,modifiers:i}){r.$_closePopoverModifiers=i,e!==t&&(typeof e>"u"||e?Ig(r):kg(r))},beforeUnmount(r){kg(r)}};function _D(r,e={}){r.$_vTooltipInstalled||(r.$_vTooltipInstalled=!0,S0(Ir,e),r.directive("tooltip",vD),r.directive("close-popper",yD),r.component("VTooltip",aD),r.component("VDropdown",sD),r.component("VMenu",oD))}const bD={version:"5.2.2",install:_D,options:Ir};async function xD({app:r},e){const t={};r.use(bD,Object.assign(t,e.value.siteConfig.floatingVue||{}))}const wD=async({head:r,isClient:e})=>{e||r==null||r.use(Lx())},TD={"search-box":{search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}},placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Please enter the search content"}}},site:{pv:{t:0,b:{t:2,i:[{t:3}],s:"Total pageviews"}},uv:{t:0,b:{t:2,i:[{t:3}],s:"Total visitors"}},"live-time":{t:0,b:{t:2,i:[{t:3}],s:"Station already running"}}}},SD={"search-box":{search:{t:0,b:{t:2,i:[{t:3}],s:"搜索"}},placeholder:{t:0,b:{t:2,i:[{t:3}],s:"请输入搜索内容"}}},site:{pv:{t:0,b:{t:2,i:[{t:3}],s:"本站总浏览量"}},uv:{t:0,b:{t:2,i:[{t:3}],s:"本站总访客数"}},"live-time":{t:0,b:{t:2,i:[{t:3}],s:"本站已运行"}}}},ED={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Theme Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"Page views"}}}},AD={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy 主题 Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"浏览量"}}}},CD={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}},go:{t:0,b:{t:2,i:[{t:3}],s:"GO"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"Switch to light mode"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"Switch to dark mode"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"Change languages"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"Appearance"}}},intro:{desc:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Theme Yun"},{t:2,i:[{t:3}],s:"Valaxy"}]}},hi:{t:0,b:{t:2,i:[{t:3,v:"Hi, "},{t:4,k:"name"},{t:3,v:"!"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"Oops! Space collapsed!"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"Archive"}},category:{t:0,b:{t:2,i:[{t:3}],s:"Category"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"Tag"}},album:{t:0,b:{t:2,i:[{t:3}],s:"Album"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"Gallery"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"Menu"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"Archives"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"Categories"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"Tags"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"Overview"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"Table of Contents"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"Return to top"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"DECRYPT"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"Posted on "}},edited:{t:0,b:{t:2,i:[{t:3}],s:"Edited on "}},created:{t:0,b:{t:2,i:[{t:3}],s:"Created"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"Modified"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit this post"}},more:{t:0,b:{t:2,i:[{t:3}],s:"more"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"Untitled"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"This post does not have a Table of Contents"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"Views"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"Related posts"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"View link"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"READ MORE"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"Cover"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"This article was last updated "},{t:4,k:"ago"},{t:3,v:". The information described in this article may have changed."}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"Post author"}},link:{t:0,b:{t:2,i:[{t:3}],s:"Post link"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"Copyright Notice"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"All articles in this blog are licensed under "},{t:5,i:0},{t:3,v:" unless otherwise stated."}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"Powered by "},{t:5,i:0}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"Theme"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"Total Views"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"Total Visitors"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No posts"},{t:2,i:[{t:3}],s:"1 post"},{t:2,i:[{t:4,k:"count"},{t:3,v:" posts"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No categories"},{t:2,i:[{t:3}],s:"1 category"},{t:2,i:[{t:4,k:"count"},{t:3,v:" categories"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No tags"},{t:2,i:[{t:3}],s:"1 tag"},{t:2,i:[{t:4,k:"count"},{t:3,v:" tags"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No album"},{t:2,i:[{t:3}],s:"1 album"},{t:2,i:[{t:4,k:"count"},{t:3,v:" albums"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No photo"},{t:2,i:[{t:3}],s:"1 photo"},{t:2,i:[{t:4,k:"count"},{t:3,v:" photos"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"Uncategorized"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Searching..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"We could not find any results for the search: "},{t:4,k:"query"},{t:3,v:"."}]}},hits_time:{t:0,b:{t:2,i:[{t:4,k:"hits"},{t:3,v:" results found in "},{t:4,k:"time"},{t:3,v:" ms"}]}},hits:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" results found"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:", "}},period:{t:0,b:{t:2,i:[{t:3}],s:". "}},colon:{t:0,b:{t:2,i:[{t:3}],s:": "}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"Donate"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"Word count in article"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"Total words"}},time:{t:0,b:{t:2,i:[{t:3}],s:"Reading time"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"Total reading time"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Day"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Days"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Hour"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Hours"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Minute"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Minutes"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Second"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Seconds"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"Last updated"}}}},PD={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}},go:{t:0,b:{t:2,i:[{t:3}],s:"确定"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"切换亮色模式"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"切换深色模式"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"切换语言"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"外观"}}},intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"主题 Yun"}},hi:{t:0,b:{t:2,i:[{t:3,v:"你好，"},{t:4,k:"name"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"未找到页面"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},category:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},album:{t:0,b:{t:2,i:[{t:3}],s:"相册"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"图片库"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"菜单"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜索"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"站点概览"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"文章目录"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"返回顶部"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"解密"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"发表于"}},edited:{t:0,b:{t:2,i:[{t:3}],s:"更新于"}},created:{t:0,b:{t:2,i:[{t:3}],s:"创建时间"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"修改时间"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"编辑"}},more:{t:0,b:{t:2,i:[{t:3}],s:"更多"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"未命名"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"此文章未包含目录"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"阅读次数"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"评论数"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"相关文章"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"查看链接"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"阅读更多"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"封面"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"本文最后更新于 "},{t:4,k:"ago"},{t:3,v:"，文中所描述的信息可能已发生改变。"}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"本文作者"}},link:{t:0,b:{t:2,i:[{t:3}],s:"本文链接"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"版权声明"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"本博客所有文章除特别声明外，均默认采用 "},{t:5,i:0},{t:3,v:" 许可协议。"}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"由 "},{t:5,i:0},{t:3,v:" 驱动"}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"主题"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"总访问量"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"总访客量"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无文章"},{t:2,i:[{t:3}],s:"共计 1 篇文章"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 篇文章"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无分类"},{t:2,i:[{t:3}],s:"共计 1 个分类"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个分类"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无标签"},{t:2,i:[{t:3}],s:"共计 1 个标签"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个标签"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无相册"},{t:2,i:[{t:3}],s:"共计 1 个相册"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个相册"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无照片"},{t:2,i:[{t:3}],s:"共计 1 张照片"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 张照片"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"未分类"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"找不到您查询的内容: "},{t:4,k:"query"}]}},hits_time:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"hits"},{t:3,v:" 条结果（用时 "},{t:4,k:"time"},{t:3,v:" 毫秒）"}]}},hits:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"count"},{t:3,v:" 条结果"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:"，"}},period:{t:0,b:{t:2,i:[{t:3}],s:"。"}},colon:{t:0,b:{t:2,i:[{t:3}],s:"："}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"打赏"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"本文字数"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总字数"}},time:{t:0,b:{t:2,i:[{t:3}],s:"阅读时长"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总阅读时长"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 天"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 天"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 小时"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 小时"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 分"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 分"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 秒"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 秒"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"最后更新于"}}}},tr={"zh-CN":{},en:{}},bs=Ku((r,e,t)=>{if(e&&r[e]&&Array.isArray(r[e])&&Array.isArray(t))return r[e]=t,!0});tr["zh-CN"]=bs(PD,tr["zh-CN"]);tr.en=bs(CD,tr.en);tr["zh-CN"]=bs(AD,tr["zh-CN"]);tr.en=bs(ED,tr.en);tr["zh-CN"]=bs(SD,tr["zh-CN"]);tr.en=bs(TD,tr.en);const Mg=px({locale:"",messages:tr});async function RD({app:r,router:e},t){const i=hd("valaxy-locale",(t==null?void 0:t.value.siteConfig.lang)||"en");Mg.global.locale.value=i.value,r.use(Mg),e.isReady().then(()=>{})}function ID(r,e){const t=r;RD(r,e),wD(r),dx(r),ox(r),xD(r,e),dM(t)}const Nu=qw();function kD(r){r.app.component("AppLink",Id)}const{redirectRoutes:MD,useVueRouter:DD}=Nu.value.runtimeConfig.redirects;DD&&Yu.push(...MD);Yu.forEach(r=>{var e;(e=r==null?void 0:r.children)==null||e.forEach(t=>{t.path=encodeURI(t.path)})});function N0(r){return r.filter(e=>{var t,i;return e.children&&(e.children=N0(e.children)),!((i=(t=e.meta)==null?void 0:t.frontmatter)!=null&&i.draft)})}const OD=HT(N0(Yu));KT(nM,{routes:OD,base:"/",scrollBehavior(r,e){if(r.path!==e.path)return{top:0}}},r=>{const{app:e,router:t}=r,i=sM(t);e.provide(Xw,i),e.use(sx,{router:t}),e.provide(mv,Nu),kD(r),ID(r,Nu)});export{Xr as $,qe as A,Re as B,Mr as C,er as D,wo as E,lC as F,Jy as G,ke as H,Iy as I,CP as J,mn as K,_e as L,ut as M,FT as N,vi as O,Qe as P,ng as Q,eO as R,v1 as S,vd as T,Jw as U,Sv as V,Wn as W,mI as X,KD as Y,zD as Z,Id as _,oM as a,yo as a0,qD as a1,c0 as a2,ZD as a3,k1 as a4,nO as a5,tO as a6,hr as a7,QD as a8,dr as b,wl as c,Gg as d,jD as e,VD as f,vv as g,ld as h,Zi as i,Vw as j,Hw as k,_l as l,Xt as m,H2 as n,JD as o,bo as p,XD as q,lS as r,yp as s,YD as t,_s as u,WD as v,rT as w,ag as x,NT as y,rO as z};
