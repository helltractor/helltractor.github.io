import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CmWMQfP7.js";import"./chunks/@vueuse/motion.BsBBmBGk.js";import{d as h,a as b,u as g}from"./chunks/vue-router.CTK7L64s.js";import{X as $,b_ as e,be as n,_ as a,a5 as l,bB as v,b3 as y,b5 as B}from"./framework.BXq2oTmp.js";import"./app.C0sh_VBo.js";import"./chunks/dayjs.C6BNYsUE.js";import"./chunks/vue-i18n.lfRrKsMF.js";import"./chunks/pinia.C_YCGfgp.js";import"./chunks/nprogress.DdFZ7jLs.js";import"./YunComment.vue_vue_type_style_index_0_lang.Cd8-cGEE.js";import"./index.dXt3ZyM3.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DDanGzXB.js";import"./post.bpTe-d7H.js";const S=h("/posts/database/sql-statement-execution-process",async r=>JSON.parse('{"title":"一条SQL语句的执行过程","description":"","frontmatter":{"title":"一条SQL语句的执行过程","date":"2024-06-21","categories":"Database","tags":["MySQL"]},"headers":[],"relativePath":"pages/posts/database/sql-statement-execution-process.md","lastUpdated":null}'),{lazy:(r,o)=>r.name===o.name}),x={__name:"sql-statement-execution-process",setup(r,{expose:o}){var m;const{data:i}=S(),d=g(),f=b(),s=Object.assign(f.meta.frontmatter||{},((m=i.value)==null?void 0:m.frontmatter)||{});return d.currentRoute.value.data=i.value,B("valaxy:frontmatter",s),globalThis.$frontmatter=s,o({frontmatter:{title:"一条SQL语句的执行过程",date:"2024-06-21",categories:"Database",tags:["MySQL"]}}),(t,u)=>{const c=p;return y(),$(c,{frontmatter:v(s)},{"main-content-md":e(()=>u[0]||(u[0]=[a("h2",{id:"日志",tabindex:"-1"},[l("日志 "),a("a",{class:"header-anchor",href:"#日志","aria-label":'Permalink to "日志"'},"​")],-1),a("ul",null,[a("li",null,"undo log: 逻辑日志（相当于堕胎，撤回了没完全撤回）。用于事务的回滚，保证事务的 ACID 特性；MVCC（多版本并发控制）实现非锁定读。"),a("li",null,"redo log: 物理日志。"),a("li",null,"binlog: 二进制日志。")],-1),a("h2",{id:"两阶段提交",tabindex:"-1"},[l("两阶段提交 "),a("a",{class:"header-anchor",href:"#两阶段提交","aria-label":'Permalink to "两阶段提交"'},"​")],-1),a("p",null,"两阶段提交是指在分布式事务中，为了保证所有节点的数据一致性，引入的一种协议。两阶段提交的过程分为两个阶段：",-1),a("ul",null,[a("li",null,"第一阶段：准备阶段，协调者询问所有参与者是否可以提交事务，如果所有参与者都可以提交事务，则进入第二阶段，否则回滚事务。"),a("li",null,"第二阶段：提交阶段，协调者通知所有参与者提交事务。")],-1),a("p",null,"两阶段提交的缺点：阻塞时间长，单点问题。",-1),a("h3",{id:"三阶段提交",tabindex:"-1"},[l("三阶段提交 "),a("a",{class:"header-anchor",href:"#三阶段提交","aria-label":'Permalink to "三阶段提交"'},"​")],-1),a("p",null,"引入超时机制，解决了阻塞时间长的问题。三阶段提交的过程分为三个阶段：",-1),a("ul",null,[a("li",null,"第一阶段：准备阶段，协调者询问所有参与者是否可以提交事务，如果所有参与者都可以提交事务，则进入第二阶段，否则回滚事务。"),a("li",null,"第二阶段：提交阶段，协调者通知所有参与者提交事务。"),a("li",null,"第三阶段：完成阶段，协调者通知所有参与者提交事务。")],-1),a("h2",{id:"逻辑日志和物理日志",tabindex:"-1"},[l("逻辑日志和物理日志 "),a("a",{class:"header-anchor",href:"#逻辑日志和物理日志","aria-label":'Permalink to "逻辑日志和物理日志"'},"​")],-1),a("ul",null,[a("li",null,"逻辑日志：可以简单理解为记录的就是 sql 语句。"),a("li",null,"物理日志：因为 MySQL 数据最终是保存在数据页中的，物理日志记录的就是数据页变更。")],-1),a("h2",{id:"参考",tabindex:"-1"},[l("参考 "),a("a",{class:"header-anchor",href:"#参考","aria-label":'Permalink to "参考"'},"​")],-1),a("ul",null,[a("li",null,[a("a",{href:"https://boilingfrog.github.io/2023/02/01/mysql%E4%B8%AD%E4%B8%80%E6%9D%A1sql%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/",target:"_blank",rel:"noreferrer"},"MySQL 中一条 sql 的执行过程")])],-1)])),"main-header":e(()=>[n(t.$slots,"main-header")]),"main-header-after":e(()=>[n(t.$slots,"main-header-after")]),"main-nav":e(()=>[n(t.$slots,"main-nav")]),"main-content-before":e(()=>[n(t.$slots,"main-content-before")]),"main-content":e(()=>[n(t.$slots,"main-content")]),"main-content-after":e(()=>[n(t.$slots,"main-content-after")]),"main-nav-before":e(()=>[n(t.$slots,"main-nav-before")]),"main-nav-after":e(()=>[n(t.$slots,"main-nav-after")]),comment:e(()=>[n(t.$slots,"comment")]),footer:e(()=>[n(t.$slots,"footer")]),aside:e(()=>[n(t.$slots,"aside")]),"aside-custom":e(()=>[n(t.$slots,"aside-custom")]),default:e(()=>[n(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{x as default,S as usePageData};
